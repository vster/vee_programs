(saveFormat "7.0")
(date "Wed 03/Mar/2004 10:53:10 ")
(veerev "7.0.6227.0")
(platform "PC")
(execMode v6)
(prefExecMode v9)
(filterNAN 0)
(workspaceStackingOrder F89.8 F88 F87)
(SaveCF no)
(device 0 ROOTCONTEXT
(properties
(trigMode deg)
(nextID 2)
(popupTitleText "Untitled")
(popupMoveable 1)
(deleteGlobals 0))
(deviceList
(UserFunctions
(nextID 168)
(context 143
(properties
(name "AddProtectorPiece")
(trigMode deg)
(nextID 10)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "# protectors")
(expr 1 "totSize(BombProtectorPieces)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 IFTHENELSE
(properties
(name "already in list?")
(cases 1 "BombProtectorPieces[i]==piece"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 EXITCONTEXT)
(device 7 VECTORCONCATENATOR
(interface
(input 1
(name "A"))
(input 2
(name "B")
(optional yes))
(output 1
(name "Array")
(tag "Array"))))
(device 8 FORMULA
(properties
(name "BombProtectorPieces")
(expr 1 "BombProtectorPieces"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "set \'BombProtectorPieces\'")
(expr 1 "BombProtectorPieces = newList"))
(interface
(input 1
(name "newList")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))))
(configuration
(connect D1:1 D0:1)
(connect D0:1 D2:1)
(connect I1:1 D2:2)
(connect D2:1 D3:0)
(connect D5:1 D4:1)
(connect I1:1 D4:2)
(connect D0:0 D5:0)
(connect D4:1 D6:1)))
(contextCarrier
(active detail)
(detail
(extent 935 358)
(anchorPt 0 -25)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 210 130))
(devCarrierFor 4
(active icon)
(icon
(extent 83 16))
(open
(extent 222 32))
(terminals on)
(pinCenter 110 130))
(devCarrierFor 5
(active icon)
(icon
(extent 100 25))
(open
(extent 226 54))
(terminals on)
(pinCenter 340 140))
(devCarrierFor 6
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 480 160))
(devCarrierFor 7
(active icon)
(icon
(extent 94 25))
(open
(extent 60 50))
(terminals on)
(pinCenter 400 230))
(devCarrierFor 8
(active icon)
(icon
(extent 149 16))
(open
(extent 170 32))
(terminals on)
(pinCenter 210 220))
(devCarrierFor 9
(active icon)
(icon
(extent 181 16))
(open
(extent 239 37))
(terminals on)
(pinCenter 570 230))
(connect D1:1 D0:1
(points 2 154 130 172 130))
(connect D0:1 D2:1
(points 2 247 130 287 130))
(connect I1:1 D2:2
(points 4 0 203 270 203 270 150 287 150))
(connect D2:1 D3:0
(points 3 392 130 480 130 480 149))
(connect D5:1 D4:1
(points 2 287 220 350 220))
(connect I1:1 D4:2
(points 6 0 203 270 203 270 250 310 250 310 240 350 240))
(connect D0:0 D5:0
(points 2 210 158 210 209))
(connect D4:1 D6:1
(points 2 449 230 477 230)))
(stackingOrder 0 3 2 5 4 6 1))))
(context 65
(properties
(name "AnyElements")
(trigMode deg)
(nextID 2)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "Array")
(optional yes))
(output 1
(type data)
(name "Bool")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(configuration
(connect I1:1 D0:1)
(connect D0:5 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 264 509)
(anchorPt 2 2)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 142 56)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 120 220))
(connect I1:1 D0:1
(points 4 -2 252 10 252 10 220 46 220))
(connect D0:5 O1:1
(points 4 193 240 210 240 210 252 261 252))))))
(context 158
(properties
(name "AnyHighRankingPiecesInOppZone")
(trigMode deg)
(nextID 21)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORRANGE
(properties
(name "For (99-60)")
(from 99)
(thru 60)
(step -1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "piece @ loc")
(expr 1 "KnownBoard[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "our high piece?")
(cases 1 "piece>=1003 AND piece<=1009"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 17 EXITCONTEXT)
(device 18 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 19 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 20 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect D0:1 D1:1)
(connect D1:1 D2:1)
(connect D5:0 D3:0)
(connect D2:1 D4:1)
(connect D6:1 D4:2)
(connect D4:1 D5:1)
(connect D0:0 D6:0)
(connect D5:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 826 255)
(anchorPt 19 16)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 80 52)
(iconImage "loop.icn"))
(open
(extent 116 82))
(pinCenter 60 40))
(devCarrierFor 1
(active icon)
(icon
(extent 81 16))
(open
(extent 125 32))
(terminals on)
(pinCenter 180 40))
(devCarrierFor 2
(active icon)
(icon
(extent 107 25))
(open
(extent 232 53))
(terminals on)
(pinCenter 310 40))
(devCarrierFor 17
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 530 100))
(devCarrierFor 18
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 430 30))
(devCarrierFor 19
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 530 50))
(devCarrierFor 20
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 60 140))
(connect D0:1 D1:1
(points 2 102 40 137 40))
(connect D1:1 D2:1
(points 2 223 40 254 40))
(connect D5:0 D3:0
(points 2 530 60 530 89))
(connect D2:1 D4:1
(points 4 366 30 390 30 390 20 413 20))
(connect D6:1 D4:2
(points 4 74 140 390 140 390 40 413 40))
(connect D4:1 D5:1
(points 4 447 30 470 30 470 50 510 50))
(connect D0:0 D6:0
(points 2 60 68 60 129))
(connect D5:1 O1:1
(points 4 550 50 610 50 610 111 806 111)))
(stackingOrder 0 1 2 4 5 3 6))))
(context 70
(properties
(name "AppendToOurMoves")
(trigMode deg)
(nextID 4)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "OurMoves")
(expr 1 "OurMoves"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 VECTORCONCATENATOR
(interface
(input 1
(name "A"))
(input 2
(name "B")
(optional yes))
(output 1
(name "Array")
(tag "Array"))))
(device 2 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 3 FORMULA
(properties
(name "set \'OurMoves\'")
(expr 1 "OurMoves = newOurMoves"))
(interface
(input 1
(name "newOurMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D0:1 D1:1)
(connect D2:1 D1:2)
(connect I1:1 D2:1)
(connect I2:1 D2:2)
(connect I3:1 D2:3)
(connect D1:1 D3:1)))
(contextCarrier
(active detail)
(detail
(extent 601 226)
(anchorPt 4 -161)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 71 16))
(open
(extent 99 32))
(terminals on)
(pinCenter 190 220))
(devCarrierFor 1
(active icon)
(icon
(extent 94 25))
(open)
(terminals on)
(pinCenter 340 270))
(devCarrierFor 2
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 93 62))
(terminals on)
(pinCenter 180 280))
(devCarrierFor 3
(active icon)
(icon
(extent 103 16))
(open
(extent 205 46))
(terminals on)
(pinCenter 480 270))
(connect D0:1 D1:1
(points 4 228 220 250 220 250 260 290 260))
(connect D2:1 D1:2
(points 2 227 280 290 280))
(connect I1:1 D2:1
(points 4 -4 203 20 203 20 270 133 270))
(connect I2:1 D2:2
(points 4 -4 273 10 273 10 280 133 280))
(connect I3:1 D2:3
(points 4 -4 343 10 343 10 290 133 290))
(connect D1:1 D3:1
(points 2 389 270 426 270)))
(stackingOrder 1 0 3 2))))
(context 87
(properties
(name "AttackBeginGame")
(trigMode deg)
(nextID 42)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "X")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "X")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "Int32")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORMULA
(properties
(name "# other moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 3 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 6 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "# WinLose moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 NOTE
(properties
(name "Comment")
(text2 1
"{\\rtf1\\ansi\\ansicpg1252\\deff0\\deflang1033{\\fonttbl{\\f0\\fnil\\fcharset0 Courier New;}}\r\n\\viewkind4\\uc1\\pard\\f0\\fs18 1) WinTie or WinFully: do it\\par\r\n2) others: risk 6,7,9 to determine\\par\r\n unknown\\par\r\n3) winLose: kill bomb\\par\r\nelse skip to defensive moves\\par\r\n}\r\n"
)))
(device 9 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 CALL
(properties
(name "Call SimpleAttackConsequences")
(callFunc "SimpleAttackConsequences")
(parmMode rev30))
(interface
(input 1
(name "attackMove")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "WinFully")
(lock name constraints)
(optional yes))
(output 2
(name "WinLose")
(lock name constraints)
(optional yes))
(output 3
(name "WinTie")
(lock name constraints)
(optional yes))
(output 4
(name "Tie")
(lock name constraints)
(optional yes))
(output 5
(name "Lose")
(lock name constraints)
(optional yes))
(output 6
(name "Other")
(lock name constraints)
(optional yes))))
(device 11 JUNCTION
(properties
(name "JCT: Do It"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 12 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 IFTHENELSE
(properties
(name "risk a 9, 7, 6, or 5?")
(cases 1
"(OpponentsKnownBoard[move.from]!=-1) AND ((p==9 AND (OpponentsKnownBoard[move.from]==-2 OR (random(0, 1)<0.1))) OR p==7 OR p==6 OR (p==5 AND ((random(0, 1)<0.7) OR known)))"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(input 2
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "known")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 14 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 16 COLLECTOR
(properties
(name "Collect Others"))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 17 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 18 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 20 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 21 FORMULA
(properties
(name "weight defender")
(expr 1 "p = KnownBoard[move.to], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 CALL
(properties
(name "Call SpecialAttackMove")
(callFunc "SpecialAttackMove")
(parmMode rev30))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "nada")
(lock name constraints)
(optional yes))))
(device 23 CALL
(properties
(name "Call CanStrikePotentialFlag")
(callFunc "CanStrikePotentialFlag")
(parmMode rev30))
(interface
(input 1
(name "attackerWeight")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))))
(device 24 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 25 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 26 EXITCONTEXT)
(device 27 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 28 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 29 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(input 6
(name "F")
(optional yes))
(output 1
(name "Data"))))
(device 30 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(input 6
(name "F")
(optional yes))
(output 1
(name "Data"))))
(device 31 COLLECTOR
(properties
(name "Collect WinLoses"))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 32 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 33 IFTHENELSE
(properties
(name "miner->bomb")
(cases 1 "a==8 AND d==-2"))
(interface
(input 1
(name "a")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 34 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 35 CALL
(properties
(name "Call ShouldWeKamikaze")
(callFunc "ShouldWeKamikaze")
(parmMode rev30))
(interface
(input 1
(name "attackMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))))
(device 36 FORMULA
(properties
(name "Known to opponent bool")
(expr 1 "OpponentsKnownBoard[move.from]>0"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 37 CALL
(properties
(name "Call ShouldWeStrafe")
(callFunc "ShouldWeStrafe")
(parmMode rev30)))
(device 38 CALL
(properties
(name "Call DoTheStrafe")
(callFunc "DoTheStrafe")
(parmMode rev30))
(interface
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))))
(device 39 IFTHENELSE
(properties
(name "2nd row?")
(cases 1 "move.to>=70 AND move.to<=79"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 40 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 41 IFTHENELSE
(properties
(name "Is my piece an unknown eight & opp piece nine?")
(cases 1
"WeightOfPiece[KnownBoard[move.from]-1000]==8 AND (KnownBoard[move.to]>0 ? WeightOfPiece[KnownBoard[move.to]]==9 : 0) AND OpponentsKnownBoard[move.from]<0"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I1:1 D0:1)
(connect D16:1 D1:1)
(connect D3:0 D2:0)
(connect D0:1 D2:1)
(connect D35:0 D3:0)
(connect D0:1 D3:1)
(connect D2:1 D4:1)
(connect I1:1 D4:2)
(connect D7:0 D5:0)
(connect D1:1 D6:1)
(connect D6:0 D7:0)
(connect D31:1 D7:1)
(connect D3:1 D9:1)
(connect I1:1 D9:2)
(connect D41:2 D10:0)
(connect D4:1 D10:1)
(connect D10:1 D11:1)
(connect D10:3 D11:2)
(connect D6:1 D12:1)
(connect D16:1 D12:2)
(connect D12:1 D13:1)
(connect D14:2 D13:2)
(connect D36:1 D13:3)
(connect D12:1 D14:1)
(connect D10:6 D15:0)
(connect D4:1 D15:1)
(connect D15:1 D16:1)
(connect D2:0 D16:2)
(connect D10:2 D17:0)
(connect D4:1 D17:1)
(connect D19:1 D18:1)
(connect D20:1 D19:1)
(connect D31:1 D19:2)
(connect D7:1 D20:1)
(connect D19:1 D21:1)
(connect D9:1 D22:1)
(connect D39:2 D23:0)
(connect D14:2 D23:1)
(connect D12:1 D23:2)
(connect D25:0 D24:0)
(connect D30:1 D24:1)
(connect D29:1 D25:1)
(connect D24:0 D26:0)
(connect D11:1 D27:0)
(connect D4:1 D27:1)
(connect D40:1 D28:0)
(connect D12:1 D28:1)
(connect D27:1 D29:1)
(connect D28:1 D29:2)
(connect D32:1 D29:3)
(connect D22:1 D29:4)
(connect D34:1 D29:5)
(connect D38:1 D29:6)
(connect D27:2 D30:1)
(connect D28:2 D30:2)
(connect D32:2 D30:3)
(connect D22:2 D30:4)
(connect D34:2 D30:5)
(connect D38:2 D30:6)
(connect D17:1 D31:1)
(connect D2:0 D31:2)
(connect D33:1 D32:0)
(connect D19:1 D32:1)
(connect D18:2 D33:1)
(connect D21:2 D33:2)
(connect D23:1 D34:0)
(connect D12:1 D34:1)
(connect D38:0 D35:0)
(connect I1:1 D35:1)
(connect D12:1 D36:1)
(connect D37:0 D38:0)
(connect D13:2 D39:0)
(connect D4:1 D39:1)
(connect D13:1 D40:1)
(connect D39:1 D40:2)
(connect D4:1 D41:1)
(connect D25:1 O1:1)
(connect D24:1 O2:1)
(connect D5:1 O3:1)))
(contextCarrier
(wndOrigin 2 630)
(wndRestoredOrigin 2 2)
(wndRestoredExtent 1178 876)
(wndState min)
(active detail)
(detail
(extent 1178 876)
(anchorPt -7 81)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 120 220))
(devCarrierFor 1
(active icon)
(icon
(extent 110 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 200 370))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 220))
(devCarrierFor 3
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 90))
(devCarrierFor 4
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 320 230))
(devCarrierFor 5
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 310 620))
(devCarrierFor 6
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 300 370))
(devCarrierFor 7
(active icon)
(icon
(extent 129 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 310 590))
(devCarrierFor 8
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 377 104)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 250 760))
(devCarrierFor 9
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 320 100))
(devCarrierFor 10
(active icon)
(icon
(extent 224 65))
(open
(extent 196 122))
(terminals on)
(pinCenter 510 210))
(devCarrierFor 11
(active icon)
(icon
(extent 73 25))
(open
(extent 39 50))
(terminals on)
(pinCenter 690 190))
(devCarrierFor 12
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 430 370))
(devCarrierFor 13
(active icon)
(icon
(extent 130 34))
(open
(extent 1256 62))
(terminals on)
(pinCenter 720 400))
(devCarrierFor 14
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 540 380))
(devCarrierFor 15
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 580 310))
(devCarrierFor 16
(active icon)
(icon
(extent 113 25))
(open
(extent 123 54))
(terminals on)
(pinCenter 710 320))
(devCarrierFor 17
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 670 240))
(devCarrierFor 18
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 670 590))
(devCarrierFor 19
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 550 600))
(devCarrierFor 20
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 450 590))
(devCarrierFor 21
(active icon)
(icon
(extent 123 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 670 640))
(devCarrierFor 22
(active icon)
(icon
(extent 161 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 460 100))
(devCarrierFor 23
(active icon)
(icon
(extent 190 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 630 530))
(devCarrierFor 24
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 950 400))
(devCarrierFor 25
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 940 290))
(devCarrierFor 26
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 970 460))
(devCarrierFor 27
(active icon)
(icon
(extent 74 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 830 190))
(devCarrierFor 28
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 820 460))
(devCarrierFor 29
(active icon)
(icon
(extent 29 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 880 330))
(devCarrierFor 30
(active icon)
(icon
(extent 29 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 890 450))
(devCarrierFor 31
(active icon)
(icon
(extent 130 25))
(open
(extent 123 54))
(terminals on)
(pinCenter 780 250))
(devCarrierFor 32
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 910 680))
(devCarrierFor 33
(active icon)
(icon
(extent 106 25))
(open
(extent 195 53))
(terminals on)
(pinCenter 820 630))
(devCarrierFor 34
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 830 540))
(devCarrierFor 35
(active icon)
(icon
(extent 168 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 220 30))
(devCarrierFor 36
(active icon)
(icon
(extent 168 16))
(open
(extent 274 32))
(terminals on)
(pinCenter 420 430))
(devCarrierFor 37
(active icon)
(icon
(extent 144 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 220 -50))
(devCarrierFor 38
(active icon)
(icon
(extent 119 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 220 -10))
(devCarrierFor 39
(active icon)
(icon
(extent 63 25))
(open
(extent 229 53))
(terminals on)
(pinCenter 630 480))
(devCarrierFor 40
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 740 490))
(devCarrierFor 41
(active icon)
(icon
(extent 290 25))
(open
(extent 976 53))
(terminals on)
(pinCenter 530 150))
(connect I1:1 D0:1
(points 4 7 356 20 356 20 220 88 220))
(connect D16:1 D1:1
(points 10 769 320 790 320 790 360 650 360 650 340 390 340 390 320 120 320 120
370 142 370))
(connect D3:0 D2:0
(points 2 220 118 220 191))
(connect D0:1 D2:1
(points 2 151 220 182 220))
(connect D35:0 D3:0
(points 2 220 40 220 61))
(connect D0:1 D3:1
(points 4 151 220 160 220 160 90 182 90))
(connect D2:1 D4:1
(points 2 257 220 298 220))
(connect I1:1 D4:2
(points 6 7 356 20 356 20 280 280 280 280 240 298 240))
(connect D7:0 D5:0
(points 2 310 600 310 609))
(connect D1:1 D6:1
(points 2 257 370 262 370))
(connect D6:0 D7:0
(points 4 300 398 300 420 310 420 310 579))
(connect D31:1 D7:1
(points 10 847 250 870 250 870 290 630 290 630 420 580 420 580 460 220 460 220
590 243 590))
(connect D3:1 D9:1
(points 2 257 90 298 90))
(connect I1:1 D9:2
(points 6 7 356 20 356 20 280 280 280 280 110 298 110))
(connect D41:2 D10:0
(points 7 677 160 700 160 700 120 560 120 560 130 510 130 510 175))
(connect D4:1 D10:1
(points 4 341 230 360 230 360 210 395 210))
(connect D10:1 D11:1
(points 2 624 180 651 180))
(connect D10:3 D11:2
(points 2 624 200 651 200))
(connect D6:1 D12:1
(points 4 337 370 360 370 360 360 408 360))
(connect D16:1 D12:2
(points 8 769 320 790 320 790 360 650 360 650 340 390 340 390 380 408 380))
(connect D12:1 D13:1
(points 6 451 370 460 370 460 350 640 350 640 390 652 390))
(connect D14:2 D13:2
(points 4 605 390 620 390 620 400 652 400))
(connect D36:1 D13:3
(points 4 506 430 570 430 570 410 652 410))
(connect D12:1 D14:1
(points 4 451 370 460 370 460 380 474 380))
(connect D10:6 D15:0
(points 7 624 230 640 230 640 300 610 300 610 290 580 290 580 300))
(connect D4:1 D15:1
(points 4 341 230 370 230 370 310 558 310))
(connect D15:1 D16:1
(points 2 601 310 651 310))
(connect D2:0 D16:2
(points 5 220 248 220 270 620 270 620 330 651 330))
(connect D10:2 D17:0
(points 5 624 190 630 190 630 220 670 220 670 230))
(connect D4:1 D17:1
(points 8 341 230 370 230 370 280 610 280 610 260 630 260 630 240 648 240))
(connect D19:1 D18:1
(points 4 571 600 580 600 580 590 604 590))
(connect D20:1 D19:1
(points 2 487 590 528 590))
(connect D31:1 D19:2
(points 10 847 250 870 250 870 290 630 290 630 420 580 420 580 460 510 460 510
610 528 610))
(connect D7:1 D20:1
(points 2 377 590 412 590))
(connect D19:1 D21:1
(points 4 571 600 580 600 580 640 606 640))
(connect D9:1 D22:1
(points 2 341 100 377 100))
(connect D39:2 D23:0
(points 5 664 490 670 490 670 500 630 500 630 510))
(connect D14:2 D23:1
(points 10 605 390 620 390 620 400 640 400 640 430 590 430 590 470 500 470 500
520 532 520))
(connect D12:1 D23:2
(points 6 451 370 460 370 460 410 520 410 520 540 532 540))
(connect D25:0 D24:0
(points 4 940 300 940 320 950 320 950 389))
(connect D30:1 D24:1
(points 4 907 450 920 450 920 400 930 400))
(connect D29:1 D25:1
(points 6 897 330 910 330 910 320 900 320 900 290 920 290))
(connect D24:0 D26:0
(points 4 950 410 950 430 970 430 970 449))
(connect D11:1 D27:0
(points 7 729 190 740 190 740 180 750 180 750 160 830 160 830 175))
(connect D4:1 D27:1
(points 8 341 230 370 230 370 280 700 280 700 230 750 230 750 190 790 190))
(connect D40:1 D28:0
(points 5 757 490 770 490 770 440 820 440 820 445))
(connect D12:1 D28:1
(points 8 451 370 460 370 460 410 520 410 520 450 680 450 680 460 791 460))
(connect D27:1 D29:1
(points 5 869 180 880 180 880 190 863 190 863 300))
(connect D28:1 D29:2
(points 6 848 450 860 450 860 430 840 430 840 310 863 310))
(connect D32:1 D29:3
(points 12 938 670 950 670 950 610 870 610 870 600 770 600 770 500 780 500 780
430 810 430 810 320 863 320))
(connect D22:1 D29:4
(points 6 543 90 890 90 890 280 850 280 850 330 863 330))
(connect D34:1 D29:5
(points 10 858 530 890 530 890 520 850 520 850 500 830 500 830 430 820 430 820
340 863 340))
(connect D38:1 D29:6
(points 10 282 -20 900 -20 900 280 910 280 910 310 920 310 920 390 850 390 850
350 863 350))
(connect D27:2 D30:1
(points 8 869 200 880 200 880 270 840 270 840 300 830 300 830 420 873 420))
(connect D28:2 D30:2
(points 10 848 470 860 470 860 460 840 460 840 440 850 440 850 410 860 410 860
430 873 430))
(connect D32:2 D30:3
(points 6 938 690 960 690 960 600 880 600 880 440 873 440))
(connect D22:2 D30:4
(points 8 543 100 990 100 990 430 980 430 980 440 900 440 900 450 873 450))
(connect D34:2 D30:5
(points 6 858 550 870 550 870 510 860 510 860 460 873 460))
(connect D38:2 D30:6
(points 8 282 0 1050 0 1050 500 870 500 870 480 860 480 860 470 873 470))
(connect D17:1 D31:1
(points 2 691 240 712 240))
(connect D2:0 D31:2
(points 5 220 248 220 270 690 270 690 260 712 260))
(connect D33:1 D32:0
(points 3 875 620 910 620 910 665))
(connect D19:1 D32:1
(points 4 571 600 580 600 580 680 881 680))
(connect D18:2 D33:1
(points 4 735 600 750 600 750 620 764 620))
(connect D21:2 D33:2
(points 4 734 650 740 650 740 640 764 640))
(connect D23:1 D34:0
(points 5 727 530 780 530 780 510 830 510 830 525))
(connect D12:1 D34:1
(points 8 451 370 460 370 460 410 520 410 520 570 750 570 750 540 801 540))
(connect D38:0 D35:0
(points 2 220 5 220 19))
(connect I1:1 D35:1
(points 6 7 356 20 356 20 220 70 220 70 30 133 30))
(connect D12:1 D36:1
(points 8 451 370 460 370 460 400 360 400 360 410 320 410 320 430 333 430))
(connect D37:0 D38:0
(points 2 220 -40 220 -25))
(connect D13:2 D39:0
(points 9 787 410 800 410 800 420 770 420 770 430 760 430 760 440 630 440 630
465))
(connect D4:1 D39:1
(points 6 341 230 370 230 370 310 530 310 530 480 596 480))
(connect D13:1 D40:1
(points 8 787 390 800 390 800 370 750 370 750 450 710 450 710 480 723 480))
(connect D39:1 D40:2
(points 4 664 470 700 470 700 500 723 500))
(connect D4:1 D41:1
(points 4 341 230 360 230 360 150 382 150))
(connect D25:1 O1:1
(points 4 960 290 980 290 980 66 1184 66))
(connect D24:1 O2:1
(points 4 970 400 1000 400 1000 356 1184 356))
(connect D5:1 O3:1
(points 8 333 620 350 620 350 640 460 640 460 720 970 720 970 646 1184 646)))
(stackingOrder 1 2 3 4 5 6 7 9 11 12 14 15 16 17 18 19 20 21 24 25 27 28 31 32
33 34 0 8 35 22 29 30 26 38 37 13 23 40 39 36 10 41))))
(context 108
(properties
(name "AttackEndGame")
(trigMode deg)
(nextID 40)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "nada")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORMULA
(properties
(name "# other moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 3 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 6 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "# WinLose moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 NOTE
(properties
(name "Comment")
(text2 5 "1) WinTie or WinFully: do it" "2) others: risk 6,7,9 to determine"
" unknown" "3) winLose: kill bomb" "else skip to defensive moves")))
(device 9 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 CALL
(properties
(name "Call SimpleAttackConsequences")
(callFunc "SimpleAttackConsequences")
(parmMode rev30))
(interface
(input 1
(name "attackMove")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "WinFully")
(lock name constraints)
(optional yes))
(output 2
(name "WinLose")
(lock name constraints)
(optional yes))
(output 3
(name "WinTie")
(lock name constraints)
(optional yes))
(output 4
(name "Tie")
(lock name constraints)
(optional yes))
(output 5
(name "Lose")
(lock name constraints)
(optional yes))
(output 6
(name "Other")
(lock name constraints)
(optional yes))))
(device 11 JUNCTION
(properties
(name "JCT: Do It"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 12 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 IFTHENELSE
(properties
(name "risk a 9, 7, 6, 5, & maybe 4?")
(cases 1
"(p==9 AND OpponentsKnownBoard[move.from]==-2) OR p==7 OR p==6 OR p==5 OR ((p==4) AND (random(0, 1)<0.8))"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(input 2
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 14 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 16 COLLECTOR
(properties
(name "Collect Others"))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 17 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 18 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 20 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 21 FORMULA
(properties
(name "weight defender")
(expr 1 "p = KnownBoard[move.to], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 CALL
(properties
(name "Call SpecialAttackMove")
(callFunc "SpecialAttackMove")
(parmMode rev30))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "nada")
(lock name constraints)
(optional yes))))
(device 23 CALL
(properties
(name "Call CanStrikePotentialFlag")
(callFunc "CanStrikePotentialFlag")
(parmMode rev30))
(interface
(input 1
(name "attackerWeight")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))))
(device 24 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 25 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 26 EXITCONTEXT)
(device 27 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 28 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 29 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "F")
(optional yes))
(input 3
(name "B")
(optional yes))
(input 4
(name "C")
(optional yes))
(input 5
(name "D")
(optional yes))
(input 6
(name "E")
(optional yes))
(output 1
(name "Data"))))
(device 30 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "F")
(optional yes))
(input 3
(name "B")
(optional yes))
(input 4
(name "C")
(optional yes))
(input 5
(name "D")
(optional yes))
(input 6
(name "E")
(optional yes))
(output 1
(name "Data"))))
(device 31 COLLECTOR
(properties
(name "Collect WinLoses"))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 32 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 33 IFTHENELSE
(properties
(name "miner->bomb")
(cases 1 "a==8 AND d==-2"))
(interface
(input 1
(name "a")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 34 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 36 CALL
(properties
(name "Call ShouldWeKamikaze")
(callFunc "ShouldWeKamikaze")
(parmMode rev30))
(interface
(input 1
(name "attackMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))))
(device 38 CALL
(properties
(name "Call DoTheStrafe")
(callFunc "DoTheStrafe")
(parmMode rev30))
(interface
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))))
(device 39 CALL
(properties
(name "Call ShouldWeStrafe")
(callFunc "ShouldWeStrafe")
(parmMode rev30)))
(configuration
(connect I1:1 D0:1)
(connect D16:1 D1:1)
(connect D3:0 D2:0)
(connect D0:1 D2:1)
(connect D35:0 D3:0)
(connect D0:1 D3:1)
(connect D2:1 D4:1)
(connect I1:1 D4:2)
(connect D7:0 D5:0)
(connect D1:1 D6:1)
(connect D6:0 D7:0)
(connect D31:1 D7:1)
(connect D3:1 D9:1)
(connect I1:1 D9:2)
(connect D4:1 D10:1)
(connect D10:1 D11:1)
(connect D10:3 D11:2)
(connect D6:1 D12:1)
(connect D16:1 D12:2)
(connect D12:1 D13:1)
(connect D14:2 D13:2)
(connect D12:1 D14:1)
(connect D10:6 D15:0)
(connect D4:1 D15:1)
(connect D15:1 D16:1)
(connect D2:0 D16:2)
(connect D10:2 D17:0)
(connect D4:1 D17:1)
(connect D19:1 D18:1)
(connect D20:1 D19:1)
(connect D31:1 D19:2)
(connect D7:1 D20:1)
(connect D19:1 D21:1)
(connect D9:1 D22:1)
(connect D13:2 D23:0)
(connect D14:2 D23:1)
(connect D12:1 D23:2)
(connect D25:0 D24:0)
(connect D30:1 D24:1)
(connect D29:1 D25:1)
(connect D24:0 D26:0)
(connect D11:1 D27:0)
(connect D4:1 D27:1)
(connect D13:1 D28:0)
(connect D12:1 D28:1)
(connect D27:1 D29:1)
(connect D36:1 D29:2)
(connect D28:1 D29:3)
(connect D32:1 D29:4)
(connect D22:1 D29:5)
(connect D34:1 D29:6)
(connect D27:2 D30:1)
(connect D36:2 D30:2)
(connect D28:2 D30:3)
(connect D32:2 D30:4)
(connect D22:2 D30:5)
(connect D34:2 D30:6)
(connect D17:1 D31:1)
(connect D2:0 D31:2)
(connect D33:1 D32:0)
(connect D19:1 D32:1)
(connect D18:2 D33:1)
(connect D21:2 D33:2)
(connect D23:1 D34:0)
(connect D12:1 D34:1)
(connect D36:0 D35:0)
(connect I1:1 D35:1)
(connect D37:0 D36:0)
(connect D25:1 O1:1)
(connect D24:1 O2:1)
(connect D5:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 1068 876)
(anchorPt -49 117)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 120 220))
(devCarrierFor 1
(active icon)
(icon
(extent 110 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 200 370))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 220))
(devCarrierFor 3
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 90))
(devCarrierFor 4
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 320 230))
(devCarrierFor 5
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 310 620))
(devCarrierFor 6
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 300 370))
(devCarrierFor 7
(active icon)
(icon
(extent 129 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 310 590))
(devCarrierFor 8
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 377 104)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 250 760))
(devCarrierFor 9
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 320 100))
(devCarrierFor 10
(active icon)
(icon
(extent 224 65))
(open
(extent 196 122))
(terminals on)
(pinCenter 490 210))
(devCarrierFor 11
(active icon)
(icon
(extent 73 25))
(open
(extent 39 50))
(terminals on)
(pinCenter 690 190))
(devCarrierFor 12
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 390 370))
(devCarrierFor 13
(active icon)
(icon
(extent 194 25))
(open
(extent 790 60))
(terminals on)
(pinCenter 690 390))
(devCarrierFor 14
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 500 370))
(devCarrierFor 15
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 580 310))
(devCarrierFor 16
(active icon)
(icon
(extent 113 25))
(open
(extent 123 54))
(terminals on)
(pinCenter 710 320))
(devCarrierFor 17
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 670 240))
(devCarrierFor 18
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 670 590))
(devCarrierFor 19
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 550 600))
(devCarrierFor 20
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 450 590))
(devCarrierFor 21
(active icon)
(icon
(extent 123 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 670 640))
(devCarrierFor 22
(active icon)
(icon
(extent 161 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 460 100))
(devCarrierFor 23
(active icon)
(icon
(extent 190 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 640 460))
(devCarrierFor 24
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 940 350))
(devCarrierFor 25
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 940 290))
(devCarrierFor 26
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 940 430))
(devCarrierFor 27
(active icon)
(icon
(extent 74 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 830 190))
(devCarrierFor 28
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 820 460))
(devCarrierFor 29
(active icon)
(icon
(extent 29 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 880 330))
(devCarrierFor 30
(active icon)
(icon
(extent 29 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 880 400))
(devCarrierFor 31
(active icon)
(icon
(extent 130 25))
(open
(extent 123 54))
(terminals on)
(pinCenter 780 250))
(devCarrierFor 32
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 910 680))
(devCarrierFor 33
(active icon)
(icon
(extent 106 25))
(open
(extent 195 53))
(terminals on)
(pinCenter 820 630))
(devCarrierFor 34
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 830 540))
(devCarrierFor 36
(active icon)
(icon
(extent 168 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 220 20))
(devCarrierFor 38
(active icon)
(icon
(extent 119 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 220 -30))
(devCarrierFor 39
(active icon)
(icon
(extent 144 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 220 -70))
(connect I1:1 D0:1
(points 4 49 320 60 320 60 220 88 220))
(connect D16:1 D1:1
(points 8 769 320 790 320 790 290 690 290 690 280 120 280 120 370 142 370))
(connect D3:0 D2:0
(points 2 220 118 220 191))
(connect D0:1 D2:1
(points 2 151 220 182 220))
(connect D35:0 D3:0
(points 2 220 30 220 61))
(connect D0:1 D3:1
(points 4 151 220 160 220 160 90 182 90))
(connect D2:1 D4:1
(points 2 257 220 298 220))
(connect I1:1 D4:2
(points 6 49 320 60 320 60 270 280 270 280 240 298 240))
(connect D7:0 D5:0
(points 2 310 600 310 609))
(connect D1:1 D6:1
(points 2 257 370 262 370))
(connect D6:0 D7:0
(points 4 300 398 300 420 310 420 310 579))
(connect D31:1 D7:1
(points 10 847 250 870 250 870 280 840 280 840 430 770 430 770 500 220 500 220
590 243 590))
(connect D3:1 D9:1
(points 2 257 90 298 90))
(connect I1:1 D9:2
(points 6 49 320 60 320 60 270 280 270 280 110 298 110))
(connect D4:1 D10:1
(points 4 341 230 360 230 360 210 375 210))
(connect D10:1 D11:1
(points 2 604 180 651 180))
(connect D10:3 D11:2
(points 2 604 200 651 200))
(connect D6:1 D12:1
(points 4 337 370 350 370 350 360 368 360))
(connect D16:1 D12:2
(points 10 769 320 790 320 790 290 690 290 690 280 350 280 350 340 360 340 360
380 368 380))
(connect D12:1 D13:1
(points 6 411 370 420 370 420 340 580 340 580 380 590 380))
(connect D14:2 D13:2
(points 4 565 380 580 380 580 400 590 400))
(connect D12:1 D14:1
(points 2 411 370 434 370))
(connect D10:6 D15:0
(points 5 604 230 610 230 610 260 580 260 580 300))
(connect D4:1 D15:1
(points 4 341 230 360 230 360 310 558 310))
(connect D15:1 D16:1
(points 2 601 310 651 310))
(connect D2:0 D16:2
(points 5 220 248 220 320 360 320 360 330 651 330))
(connect D10:2 D17:0
(points 5 604 190 630 190 630 220 670 220 670 230))
(connect D4:1 D17:1
(points 6 341 230 360 230 360 270 630 270 630 240 648 240))
(connect D19:1 D18:1
(points 4 571 600 580 600 580 590 604 590))
(connect D20:1 D19:1
(points 2 487 590 528 590))
(connect D31:1 D19:2
(points 10 847 250 870 250 870 280 840 280 840 430 770 430 770 500 510 500 510
610 528 610))
(connect D7:1 D20:1
(points 2 377 590 412 590))
(connect D19:1 D21:1
(points 4 571 600 580 600 580 640 606 640))
(connect D9:1 D22:1
(points 2 341 100 377 100))
(connect D13:2 D23:0
(points 7 789 400 800 400 800 410 750 410 750 420 640 420 640 440))
(connect D14:2 D23:1
(points 6 565 380 580 380 580 410 520 410 520 450 542 450))
(connect D12:1 D23:2
(points 4 411 370 420 370 420 470 542 470))
(connect D25:0 D24:0
(points 2 940 300 940 339))
(connect D30:1 D24:1
(points 4 897 400 910 400 910 350 920 350))
(connect D29:1 D25:1
(points 4 897 330 910 330 910 290 920 290))
(connect D24:0 D26:0
(points 2 940 360 940 419))
(connect D11:1 D27:0
(points 5 729 190 750 190 750 160 830 160 830 175))
(connect D4:1 D27:1
(points 6 341 230 360 230 360 150 760 150 760 190 790 190))
(connect D13:1 D28:0
(points 3 789 380 820 380 820 445))
(connect D12:1 D28:1
(points 8 411 370 420 370 420 470 520 470 520 510 780 510 780 460 791 460))
(connect D27:1 D29:1
(points 8 869 180 890 180 890 230 880 230 880 290 850 290 850 300 863 300))
(connect D36:1 D29:2
(points 6 282 -40 770 -40 770 220 800 220 800 310 863 310))
(connect D28:1 D29:3
(points 6 848 450 860 450 860 440 850 440 850 320 863 320))
(connect D32:1 D29:4
(points 8 938 670 950 670 950 460 840 460 840 440 830 440 830 330 863 330))
(connect D22:1 D29:5
(points 6 543 90 620 90 620 360 790 360 790 340 863 340))
(connect D34:1 D29:6
(points 6 858 530 870 530 870 510 810 510 810 350 863 350))
(connect D27:2 D30:1
(points 10 869 200 880 200 880 220 870 220 870 230 830 230 830 290 820 290 820
370 863 370))
(connect D36:2 D30:2
(points 8 282 -20 900 -20 900 240 890 240 890 310 870 310 870 380 863 380))
(connect D28:2 D30:3
(points 10 848 470 870 470 870 500 790 500 790 490 760 490 760 420 800 420 800
390 863 390))
(connect D32:2 D30:4
(points 6 938 690 960 690 960 450 870 450 870 400 863 400))
(connect D22:2 D30:5
(points 6 543 100 980 100 980 380 920 380 920 410 863 410))
(connect D34:2 D30:6
(points 6 858 550 890 550 890 430 850 430 850 420 863 420))
(connect D17:1 D31:1
(points 2 691 240 712 240))
(connect D2:0 D31:2
(points 11 220 248 220 320 360 320 360 330 630 330 630 290 640 290 640 270 690
270 690 260 712 260))
(connect D33:1 D32:0
(points 3 875 620 910 620 910 665))
(connect D19:1 D32:1
(points 4 571 600 580 600 580 680 881 680))
(connect D18:2 D33:1
(points 4 735 600 750 600 750 620 764 620))
(connect D21:2 D33:2
(points 4 734 650 740 650 740 640 764 640))
(connect D23:1 D34:0
(points 5 737 460 750 460 750 520 830 520 830 525))
(connect D12:1 D34:1
(points 8 411 370 420 370 420 470 520 470 520 510 740 510 740 540 801 540))
(connect D36:0 D35:0
(points 2 220 -15 220 9))
(connect I1:1 D35:1
(points 4 49 320 60 320 60 20 133 20))
(connect D37:0 D36:0
(points 2 220 -60 220 -45))
(connect D25:1 O1:1
(points 4 960 290 990 290 990 30 1116 30))
(connect D24:1 O2:1
(points 4 960 350 990 350 990 320 1116 320))
(connect D5:1 O3:1
(points 8 333 620 350 620 350 640 460 640 460 720 970 720 970 610 1116 610)))
(stackingOrder 0 1 2 3 4 5 6 7 9 11 15 16 17 19 20 21 24 25 26 27 28 31 32 33 34
12 8 23 22 10 14 13 35 36 37 29 30 18))))
(context 88
(properties
(name "AttackMiddleGame")
(trigMode deg)
(nextID 46)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "nada")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORMULA
(properties
(name "# other moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 3 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 6 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "# WinLose moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 NOTE
(properties
(name "Comment")
(text2 5 "1) WinTie or WinFully: do it" "2) others: risk 6,7,9 to determine"
" unknown" "3) winLose: kill bomb" "else skip to defensive moves")))
(device 9 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 CALL
(properties
(name "Call SimpleAttackConsequences")
(callFunc "SimpleAttackConsequences")
(parmMode rev30))
(interface
(input 1
(name "attackMove")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "WinFully")
(lock name constraints)
(optional yes))
(output 2
(name "WinLose")
(lock name constraints)
(optional yes))
(output 3
(name "WinTie")
(lock name constraints)
(optional yes))
(output 4
(name "Tie")
(lock name constraints)
(optional yes))
(output 5
(name "Lose")
(lock name constraints)
(optional yes))
(output 6
(name "Other")
(lock name constraints)
(optional yes))))
(device 11 JUNCTION
(properties
(name "JCT: Do It"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 12 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 IFTHENELSE
(properties
(name "risk a 9, 7, 6, 5, & maybe 4?")
(cases 1
"(p==9 AND OpponentsKnownBoard[move.from]==-2) OR p==7 OR p==6 OR p==5 OR ((p==4) AND (random(0, 1)<0.3))"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(input 2
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 14 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 16 COLLECTOR
(properties
(name "Collect Others"))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 17 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 18 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 20 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 21 FORMULA
(properties
(name "weight defender")
(expr 1 "p = KnownBoard[move.to], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 CALL
(properties
(name "Call SpecialAttackMove")
(callFunc "SpecialAttackMove")
(parmMode rev30))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "nada")
(lock name constraints)
(optional yes))))
(device 23 CALL
(properties
(name "Call CanStrikePotentialFlag")
(callFunc "CanStrikePotentialFlag")
(parmMode rev30))
(interface
(input 1
(name "attackerWeight")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))))
(device 24 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 25 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 26 EXITCONTEXT)
(device 27 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 28 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 29 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(input 6
(name "F")
(optional yes))
(output 1
(name "Data"))))
(device 30 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(input 6
(name "F")
(optional yes))
(output 1
(name "Data"))))
(device 31 COLLECTOR
(properties
(name "Collect WinLoses"))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 32 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 33 IFTHENELSE
(properties
(name "miner->bomb")
(cases 1 "a==8 AND d==-2"))
(interface
(input 1
(name "a")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 34 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 38 CALL
(properties
(name "Call ShouldWeKamikaze")
(callFunc "ShouldWeKamikaze")
(parmMode rev30))
(interface
(input 1
(name "attackMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))))
(device 39 CALL
(properties
(name "Call DoTheStrafe")
(callFunc "DoTheStrafe")
(parmMode rev30))
(interface
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))))
(device 40 CALL
(properties
(name "Call ShouldWeStrafe")
(callFunc "ShouldWeStrafe")
(parmMode rev30)))
(device 41 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 42 IFTHENELSE
(properties
(name "2nd row?")
(cases 1 "move.to>=70 AND move.to<=79"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 45 IFTHENELSE
(properties
(name "Is my piece an unknown eight & opp piece nine?")
(cases 1
"WeightOfPiece[KnownBoard[move.from]-1000]==8 AND (KnownBoard[move.to]>0 ? WeightOfPiece[KnownBoard[move.to]]==9 : 0) AND OpponentsKnownBoard[move.from]<0"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I1:1 D0:1)
(connect D16:1 D1:1)
(connect D3:0 D2:0)
(connect D0:1 D2:1)
(connect D35:0 D3:0)
(connect D0:1 D3:1)
(connect D2:1 D4:1)
(connect I1:1 D4:2)
(connect D7:0 D5:0)
(connect D1:1 D6:1)
(connect D6:0 D7:0)
(connect D31:1 D7:1)
(connect D3:1 D9:1)
(connect I1:1 D9:2)
(connect D40:2 D10:0)
(connect D4:1 D10:1)
(connect D10:1 D11:1)
(connect D10:3 D11:2)
(connect D6:1 D12:1)
(connect D16:1 D12:2)
(connect D12:1 D13:1)
(connect D14:2 D13:2)
(connect D12:1 D14:1)
(connect D10:6 D15:0)
(connect D4:1 D15:1)
(connect D15:1 D16:1)
(connect D2:0 D16:2)
(connect D10:2 D17:0)
(connect D4:1 D17:1)
(connect D19:1 D18:1)
(connect D20:1 D19:1)
(connect D31:1 D19:2)
(connect D7:1 D20:1)
(connect D19:1 D21:1)
(connect D9:1 D22:1)
(connect D39:2 D23:0)
(connect D14:2 D23:1)
(connect D12:1 D23:2)
(connect D25:0 D24:0)
(connect D30:1 D24:1)
(connect D29:1 D25:1)
(connect D24:0 D26:0)
(connect D11:1 D27:0)
(connect D4:1 D27:1)
(connect D38:1 D28:0)
(connect D12:1 D28:1)
(connect D27:1 D29:1)
(connect D28:1 D29:2)
(connect D32:1 D29:3)
(connect D22:1 D29:4)
(connect D34:1 D29:5)
(connect D36:1 D29:6)
(connect D27:2 D30:1)
(connect D28:2 D30:2)
(connect D32:2 D30:3)
(connect D22:2 D30:4)
(connect D34:2 D30:5)
(connect D36:2 D30:6)
(connect D17:1 D31:1)
(connect D2:0 D31:2)
(connect D33:1 D32:0)
(connect D19:1 D32:1)
(connect D18:2 D33:1)
(connect D21:2 D33:2)
(connect D23:1 D34:0)
(connect D12:1 D34:1)
(connect D36:0 D35:0)
(connect I1:1 D35:1)
(connect D37:0 D36:0)
(connect D13:1 D38:1)
(connect D39:1 D38:2)
(connect D13:2 D39:0)
(connect D4:1 D39:1)
(connect D4:1 D40:1)
(connect D25:1 O1:1)
(connect D24:1 O2:1)
(connect D5:1 O3:1)))
(contextCarrier
(wndOrigin 162 630)
(wndRestoredOrigin 1 283)
(wndRestoredExtent 1068 876)
(wndState min)
(active detail)
(detail
(extent 1068 876)
(anchorPt -47 92)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 120 220))
(devCarrierFor 1
(active icon)
(icon
(extent 110 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 200 370))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 220))
(devCarrierFor 3
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 90))
(devCarrierFor 4
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 320 230))
(devCarrierFor 5
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 310 620))
(devCarrierFor 6
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 300 370))
(devCarrierFor 7
(active icon)
(icon
(extent 129 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 310 590))
(devCarrierFor 8
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 377 104)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 250 760))
(devCarrierFor 9
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 320 100))
(devCarrierFor 10
(active icon)
(icon
(extent 224 65))
(open
(extent 196 122))
(terminals on)
(pinCenter 510 210))
(devCarrierFor 11
(active icon)
(icon
(extent 73 25))
(open
(extent 39 50))
(terminals on)
(pinCenter 690 190))
(devCarrierFor 12
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 390 370))
(devCarrierFor 13
(active icon)
(icon
(extent 194 25))
(open
(extent 783 60))
(terminals on)
(pinCenter 700 380))
(devCarrierFor 14
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 500 370))
(devCarrierFor 15
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 580 310))
(devCarrierFor 16
(active icon)
(icon
(extent 113 25))
(open
(extent 123 54))
(terminals on)
(pinCenter 710 320))
(devCarrierFor 17
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 670 240))
(devCarrierFor 18
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 670 590))
(devCarrierFor 19
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 550 600))
(devCarrierFor 20
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 450 590))
(devCarrierFor 21
(active icon)
(icon
(extent 123 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 670 640))
(devCarrierFor 22
(active icon)
(icon
(extent 161 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 460 100))
(devCarrierFor 23
(active icon)
(icon
(extent 190 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 630 490))
(devCarrierFor 24
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 940 350))
(devCarrierFor 25
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 940 290))
(devCarrierFor 26
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 940 430))
(devCarrierFor 27
(active icon)
(icon
(extent 74 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 830 190))
(devCarrierFor 28
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 820 460))
(devCarrierFor 29
(active icon)
(icon
(extent 29 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 880 310))
(devCarrierFor 30
(active icon)
(icon
(extent 29 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 880 400))
(devCarrierFor 31
(active icon)
(icon
(extent 130 25))
(open
(extent 123 54))
(terminals on)
(pinCenter 780 250))
(devCarrierFor 32
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 910 680))
(devCarrierFor 33
(active icon)
(icon
(extent 106 25))
(open
(extent 195 53))
(terminals on)
(pinCenter 820 630))
(devCarrierFor 34
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 830 540))
(devCarrierFor 38
(active icon)
(icon
(extent 168 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 220 20))
(devCarrierFor 39
(active icon)
(icon
(extent 119 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 220 -30))
(devCarrierFor 40
(active icon)
(icon
(extent 144 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 220 -70))
(devCarrierFor 41
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 740 550))
(devCarrierFor 42
(active icon)
(icon
(extent 63 25))
(open
(extent 229 53))
(terminals on)
(pinCenter 650 440))
(devCarrierFor 45
(active icon)
(icon
(extent 290 25))
(open
(extent 976 53))
(terminals on)
(pinCenter 510 140))
(connect I1:1 D0:1
(points 4 47 345 60 345 60 220 88 220))
(connect D16:1 D1:1
(points 10 769 320 790 320 790 290 630 290 630 340 360 340 360 320 120 320 120
370 142 370))
(connect D3:0 D2:0
(points 2 220 118 220 191))
(connect D0:1 D2:1
(points 2 151 220 182 220))
(connect D35:0 D3:0
(points 2 220 30 220 61))
(connect D0:1 D3:1
(points 4 151 220 160 220 160 90 182 90))
(connect D2:1 D4:1
(points 2 257 220 298 220))
(connect I1:1 D4:2
(points 6 47 345 60 345 60 270 280 270 280 240 298 240))
(connect D7:0 D5:0
(points 2 310 600 310 609))
(connect D1:1 D6:1
(points 2 257 370 262 370))
(connect D6:0 D7:0
(points 4 300 398 300 420 310 420 310 579))
(connect D31:1 D7:1
(points 8 847 250 1020 250 1020 720 510 720 510 650 220 650 220 590 243 590))
(connect D3:1 D9:1
(points 2 257 90 298 90))
(connect I1:1 D9:2
(points 6 47 345 60 345 60 270 280 270 280 110 298 110))
(connect D40:2 D10:0
(points 5 657 150 670 150 670 170 510 170 510 175))
(connect D4:1 D10:1
(points 4 341 230 370 230 370 210 395 210))
(connect D10:1 D11:1
(points 2 624 180 651 180))
(connect D10:3 D11:2
(points 2 624 200 651 200))
(connect D6:1 D12:1
(points 4 337 370 350 370 350 360 368 360))
(connect D16:1 D12:2
(points 8 769 320 790 320 790 290 630 290 630 340 360 340 360 380 368 380))
(connect D12:1 D13:1
(points 6 411 370 420 370 420 420 590 420 590 370 600 370))
(connect D14:2 D13:2
(points 4 565 380 580 380 580 390 600 390))
(connect D12:1 D14:1
(points 2 411 370 434 370))
(connect D10:6 D15:0
(points 5 624 230 630 230 630 280 580 280 580 300))
(connect D4:1 D15:1
(points 6 341 230 360 230 360 270 530 270 530 310 558 310))
(connect D15:1 D16:1
(points 2 601 310 651 310))
(connect D2:0 D16:2
(points 5 220 248 220 280 520 280 520 330 651 330))
(connect D10:2 D17:0
(points 5 624 190 630 190 630 220 670 220 670 230))
(connect D4:1 D17:1
(points 6 341 230 360 230 360 270 640 270 640 240 648 240))
(connect D19:1 D18:1
(points 4 571 600 580 600 580 590 604 590))
(connect D20:1 D19:1
(points 2 487 590 528 590))
(connect D31:1 D19:2
(points 6 847 250 1020 250 1020 720 510 720 510 610 528 610))
(connect D7:1 D20:1
(points 2 377 590 412 590))
(connect D19:1 D21:1
(points 4 571 600 580 600 580 640 606 640))
(connect D9:1 D22:1
(points 2 341 100 377 100))
(connect D39:2 D23:0
(points 5 684 450 690 450 690 440 630 440 630 470))
(connect D14:2 D23:1
(points 6 565 380 580 380 580 410 510 410 510 480 532 480))
(connect D12:1 D23:2
(points 6 411 370 420 370 420 420 500 420 500 500 532 500))
(connect D25:0 D24:0
(points 2 940 300 940 339))
(connect D30:1 D24:1
(points 4 897 400 910 400 910 350 920 350))
(connect D29:1 D25:1
(points 4 897 310 910 310 910 290 920 290))
(connect D24:0 D26:0
(points 2 940 360 940 419))
(connect D11:1 D27:0
(points 5 729 190 750 190 750 160 830 160 830 175))
(connect D4:1 D27:1
(points 8 341 230 360 230 360 270 700 270 700 220 760 220 760 190 790 190))
(connect D38:1 D28:0
(points 5 757 550 770 550 770 430 820 430 820 445))
(connect D12:1 D28:1
(points 6 411 370 420 370 420 420 750 420 750 460 791 460))
(connect D27:1 D29:1
(points 8 869 180 890 180 890 230 870 230 870 270 850 270 850 280 863 280))
(connect D28:1 D29:2
(points 6 848 450 860 450 860 440 840 440 840 290 863 290))
(connect D32:1 D29:3
(points 8 938 670 950 670 950 510 760 510 760 420 820 420 820 300 863 300))
(connect D22:1 D29:4
(points 8 543 90 900 90 900 260 840 260 840 280 830 280 830 310 863 310))
(connect D34:1 D29:5
(points 6 858 530 870 530 870 430 850 430 850 320 863 320))
(connect D36:1 D29:6
(points 6 282 -40 770 -40 770 220 800 220 800 330 863 330))
(connect D27:2 D30:1
(points 10 869 200 880 200 880 220 820 220 820 290 810 290 810 320 830 320 830
370 863 370))
(connect D28:2 D30:2
(points 6 848 470 860 470 860 460 830 460 830 380 863 380))
(connect D32:2 D30:3
(points 8 938 690 960 690 960 500 780 500 780 440 810 440 810 390 863 390))
(connect D22:2 D30:4
(points 10 543 100 740 100 740 200 750 200 750 280 780 280 780 330 790 330 790
400 863 400))
(connect D34:2 D30:5
(points 10 858 550 880 550 880 580 780 580 780 520 750 520 750 470 740 470 740
410 863 410))
(connect D36:2 D30:6
(points 8 282 -20 980 -20 980 380 920 380 920 410 910 410 910 420 863 420))
(connect D17:1 D31:1
(points 2 691 240 712 240))
(connect D2:0 D31:2
(points 5 220 248 220 280 570 280 570 260 712 260))
(connect D33:1 D32:0
(points 3 875 620 910 620 910 665))
(connect D19:1 D32:1
(points 6 571 600 580 600 580 640 590 640 590 680 881 680))
(connect D18:2 D33:1
(points 4 735 600 750 600 750 620 764 620))
(connect D21:2 D33:2
(points 4 734 650 740 650 740 640 764 640))
(connect D23:1 D34:0
(points 7 727 490 740 490 740 530 790 530 790 520 830 520 830 525))
(connect D12:1 D34:1
(points 12 411 370 420 370 420 420 500 420 500 500 510 500 510 550 730 550 730
560 790 560 790 540 801 540))
(connect D36:0 D35:0
(points 2 220 -15 220 9))
(connect I1:1 D35:1
(points 4 47 345 60 345 60 20 133 20))
(connect D37:0 D36:0
(points 2 220 -60 220 -45))
(connect D13:1 D38:1
(points 8 799 370 810 370 810 360 730 360 730 430 710 430 710 540 723 540))
(connect D39:1 D38:2
(points 4 684 430 700 430 700 560 723 560))
(connect D13:2 D39:0
(points 7 799 390 810 390 810 380 780 380 780 350 650 350 650 425))
(connect D4:1 D39:1
(points 8 341 230 360 230 360 270 530 270 530 310 540 310 540 440 616 440))
(connect D4:1 D40:1
(points 6 341 230 360 230 360 200 340 200 340 140 362 140))
(connect D25:1 O1:1
(points 4 960 290 990 290 990 55 1114 55))
(connect D24:1 O2:1
(points 4 960 350 1036 350 1036 345 1114 345))
(connect D5:1 O3:1
(points 8 333 620 350 620 350 640 460 640 460 730 1030 730 1030 635 1114 635)))
(stackingOrder 1 2 3 4 5 6 7 9 11 15 16 17 18 19 20 21 24 25 26 27 28 31 32 33
34 12 14 22 35 8 13 36 37 29 30 0 38 23 39 10 40))))
(context 23
(properties
(name "AttackProbabilityOfUnknownFixed")
(trigMode deg)
(nextID 20)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "attackPiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Win")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "Tie")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "Lose")
(lock constraints)
(optional yes))
(output 4
(type data)
(name "Bombed")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORMULA
(properties
(name "attack piece type")
(expr 1 "TypeOfPiece[piece-1001]"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 CONSTANT
(properties
(name "0.0"))
(interface
(output 1
(name "Real")
(lock name constraints)))
(implementation
(value Real
(data  0))
(initValue Real
(data  0))))
(device 4 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 5 FORMULA
(properties
(name "bomb probability")
(expr 1
"asReal64(OpponentPieceTable[11].unknown_alive)/asReal64(NumUnknownFixed)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 DECLVAR
(properties
(name "Declare Local \'NumUnknownPieces\'")
(scope con)
(globalName "NumUnknownPieces"))
(implementation
(value Real
(data  0))))
(device 7 FORMULA
(properties
(name "set # unknown pieces")
(expr 1 "NumUnknownPieces = sum(OpponentPieceTable.unknown_alive)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 FORMULA
(properties
(name "for convenience")
(expr 1 "floor(((1.0-win-tie-bomb)*100)+0.5)/100"))
(interface
(input 1
(name "win")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 2
(name "tie")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 3
(name "bomb")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "tie probability")
(expr 1
"floor((100*OpponentPieceTable[piece].unknown_alive/NumUnknownPieces)+0.5)/100")
)
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORMULA
(properties
(name "winning probability")
(expr 1
"s = sum(OpponentPieceTable[piece+1:piece+numWinners].unknown_alive)+OpponentPieceTable[1].unknown_alive+(piece==8 ? OpponentPieceTable[11].unknown_alive : 0), s/NumUnknownPieces"
))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "numWinners")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "s")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 FORMULA
(properties
(name "# unknown marshals prob")
(expr 1 "OpponentPieceTable[1].unknown_alive/NumUnknownPieces"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 IFTHENELSE
(properties
(name "any winners?")
(cases 1 "numWinners>0"))
(interface
(input 1
(name "numWinners")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 14 FORMULA
(properties
(name "# winners")
(expr 1 "10-p"))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 16 IFTHENELSE
(properties
(name "miner")
(cases 1 "piece==9"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 17 IFTHENELSE
(properties
(name "spy, or other?")
(cases 1 "piece==1"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 18 CONSTANT
(properties
(name "0.0"))
(interface
(output 1
(name "Real")
(lock name constraints)))
(implementation
(value Real
(data  0))
(initValue Real
(data  0))))
(device 19 FORMULA
(properties
(name "round to .xx")
(expr 1 "floor((prob*100)+0.5)/100"))
(interface
(input 1
(name "prob")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D5:0 D0:0)
(connect I1:1 D0:1)
(connect D13:1 D1:0)
(connect D1:1 D2:1)
(connect D3:1 D2:2)
(connect D13:2 D3:0)
(connect D16:1 D6:1)
(connect D7:1 D6:2)
(connect D2:1 D6:3)
(connect D11:0 D7:0)
(connect D0:1 D7:1)
(connect D10:1 D8:0)
(connect D0:1 D8:1)
(connect D11:1 D8:2)
(connect D14:1 D9:0)
(connect D11:1 D10:1)
(connect D14:2 D11:0)
(connect D0:1 D11:1)
(connect D9:1 D12:1)
(connect D8:2 D12:2)
(connect D15:1 D12:3)
(connect D0:1 D13:1)
(connect D0:1 D14:1)
(connect D10:2 D15:0)
(connect D12:1 D16:1)
(connect D16:1 O1:1)
(connect D7:1 O2:1)
(connect D6:1 O3:1)
(connect D2:1 O4:1)))
(contextCarrier
(active detail)
(detail
(extent 988 534)
(anchorPt -4 3)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 117 16))
(open
(extent 279 32))
(terminals on)
(pinCenter 70 220))
(devCarrierFor 3
(active icon)
(icon
(extent 24 16))
(open
(extent 69 30)
(showFormat real))
(pinCenter 280 230))
(devCarrierFor 4
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 740 450))
(devCarrierFor 5
(active icon)
(icon
(extent 114 16))
(open
(extent 520 32))
(terminals on)
(pinCenter 310 280))
(devCarrierFor 6
(active icon)
(icon
(extent 246 16))
(open
(extent 340 114))
(pinCenter 140 60))
(devCarrierFor 7
(active icon)
(icon
(extent 149 16))
(open
(extent 497 32))
(terminals on)
(pinCenter 100 150))
(devCarrierFor 8
(active icon)
(icon
(extent 111 34))
(open
(extent 282 79))
(terminals on)
(pinCenter 790 380))
(devCarrierFor 9
(active icon)
(icon
(extent 92 25))
(open
(extent 571 42))
(terminals on)
(pinCenter 580 300))
(devCarrierFor 10
(active icon)
(icon
(extent 127 25))
(open
(extent 1382 42))
(terminals on)
(pinCenter 780 300))
(devCarrierFor 11
(active icon)
(icon
(extent 178 16))
(open
(extent 465 32))
(terminals on)
(pinCenter 550 190))
(devCarrierFor 13
(active icon)
(icon
(extent 91 25))
(open
(extent 127 53))
(terminals on)
(pinCenter 650 220))
(devCarrierFor 14
(active icon)
(icon
(extent 66 16))
(open
(extent 72 32))
(terminals on)
(pinCenter 540 220))
(devCarrierFor 15
(active icon)
(icon
(extent 29 34))
(open)
(terminals on)
(pinCenter 850 210))
(devCarrierFor 16
(active icon)
(icon
(extent 39 34))
(open
(extent 136 62))
(terminals on)
(pinCenter 180 220))
(devCarrierFor 17
(active icon)
(icon
(extent 96 34))
(open
(extent 136 62))
(terminals on)
(pinCenter 360 210))
(devCarrierFor 18
(active icon)
(icon
(extent 24 16))
(open
(extent 69 30)
(showFormat real))
(pinCenter 730 250))
(devCarrierFor 19
(active icon)
(icon
(extent 80 16))
(open
(extent 196 32))
(terminals on)
(pinCenter 820 100))
(connect D5:0 D0:0
(points 4 100 160 100 180 70 180 70 209))
(connect I1:1 D0:1
(points 6 4 263 10 263 10 250 -10 250 -10 220 9 220))
(connect D13:1 D1:0
(points 5 202 210 220 210 220 200 280 200 280 219))
(connect D1:1 D2:1
(points 6 294 230 300 230 300 250 340 250 340 440 723 440))
(connect D3:1 D2:2
(points 4 369 280 390 280 390 460 723 460))
(connect D13:2 D3:0
(points 5 202 230 250 230 250 260 310 260 310 269))
(connect D16:1 D6:1
(points 6 862 100 900 100 900 330 710 330 710 370 732 370))
(connect D7:1 D6:2
(points 6 628 300 650 300 650 340 700 340 700 380 732 380))
(connect D2:1 D6:3
(points 6 757 450 780 450 780 420 710 420 710 390 732 390))
(connect D11:0 D7:0
(points 4 540 230 540 250 580 250 580 285))
(connect D0:1 D7:1
(points 12 131 220 140 220 140 180 290 180 290 170 440 170 440 220 480 220 480
270 500 270 500 300 531 300))
(connect D10:1 D8:0
(points 3 698 210 780 210 780 285))
(connect D0:1 D8:1
(points 12 131 220 140 220 140 180 290 180 290 170 440 170 440 220 480 220 480
270 650 270 650 290 714 290))
(connect D11:1 D8:2
(points 6 575 220 590 220 590 260 660 260 660 310 714 310))
(connect D14:1 D9:0
(points 5 410 200 420 200 420 150 550 150 550 179))
(connect D11:1 D10:1
(points 2 575 220 602 220))
(connect D14:2 D11:0
(points 5 410 220 430 220 430 160 540 160 540 209))
(connect D0:1 D11:1
(points 8 131 220 140 220 140 180 290 180 290 170 440 170 440 220 504 220))
(connect D9:1 D12:1
(points 4 641 190 720 190 720 200 833 200))
(connect D8:2 D12:2
(points 6 846 310 870 310 870 270 810 270 810 210 833 210))
(connect D15:1 D12:3
(points 4 744 250 760 250 760 220 833 220))
(connect D0:1 D13:1
(points 2 131 220 158 220))
(connect D0:1 D14:1
(points 6 131 220 140 220 140 180 290 180 290 210 309 210))
(connect D10:2 D15:0
(points 3 698 230 730 230 730 239))
(connect D12:1 D16:1
(points 6 867 210 890 210 890 170 760 170 760 100 777 100))
(connect D16:1 O1:1
(points 4 862 100 880 100 880 63 991 63))
(connect D7:1 O2:1
(points 6 628 300 650 300 650 340 910 340 910 193 991 193))
(connect D6:1 O3:1
(points 4 848 380 870 380 870 323 991 323))
(connect D2:1 O4:1
(points 4 757 450 780 450 780 453 991 453)))
(stackingOrder 2 1 15 12 4 11 16 6 3 14 0 13 9 5 10 8 7))))
(context 24
(properties
(name "AttackProbabilityOfUnknownMovable")
(trigMode deg)
(nextID 20)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Win")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "Tie")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "Lose")
(lock constraints)
(optional yes)))
(deviceList
(device 2 IFTHENELSE
(properties
(name "am I a spy?")
(cases 1 "p==1"))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "# unknown marshals prob")
(expr 1 "OpponentPieceTable[1].unknown_alive/NumUnknownMovablePieces"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORMULA
(properties
(name "set # unknown movable pieces")
(expr 1 "NumUnknownMovablePieces = sum(OpponentPieceTable[1:10].unknown_alive)")
)
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 DECLVAR
(properties
(name "Declare Local \'NumUnknownMovablePieces\'")
(scope con)
(globalName "NumUnknownMovablePieces"))
(implementation
(value Real
(data  0))))
(device 6 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 7 FORMULA
(properties
(name "# winners")
(expr 1 "10-p"))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 IFTHENELSE
(properties
(name "any winners?")
(cases 1 "numWinners>0"))
(interface
(input 1
(name "numWinners")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 FORMULA
(properties
(name "winning probability")
(expr 1
"s = sum(OpponentPieceTable[piece+1:piece+numWinners].unknown_alive)+OpponentPieceTable[1].unknown_alive, s/NumUnknownMovablePieces"
))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "numWinners")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "s")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 FORMULA
(properties
(name "tie probability")
(expr 1
"floor((100*OpponentPieceTable[piece].unknown_alive/NumUnknownMovablePieces)+0.5)/100"
))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 FORMULA
(properties
(name "for convenience (and correction)")
(expr 1 "v = floor((1.0-win-tie)*100+0.5)/100, (v<0 ? 0 : v)"))
(interface
(input 1
(name "win")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 2
(name "tie")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "v")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 NOTE
(properties
(name "Comment")
(text2 6 "This function returns the probability of "
"the computer\'sspecified \'piece\' winning,"
"tieing, or losing to an unknown opponent "
"piece that we know has moved.  The sum"
"of these three values (win, tie, and lose)" "is ALWAYS 1.  ")))
(device 17 FORMULA
(properties
(name "attack piece type")
(expr 1 "TypeOfPiece[piece-1001]"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 FORMULA
(properties
(name "prob of spy")
(expr 1 "OpponentPieceTable[0].unknown_alive/NumUnknownMovablePieces"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 FORMULA
(properties
(name "round to .xx")
(expr 1 "floor((prob*100)+0.5)/100"))
(interface
(input 1
(name "prob")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D11:1 D0:1)
(connect D0:1 D1:0)
(connect D1:1 D4:1)
(connect D7:2 D4:2)
(connect D12:1 D4:3)
(connect D0:2 D5:0)
(connect D11:1 D5:1)
(connect D5:1 D6:1)
(connect D6:1 D7:0)
(connect D11:1 D7:1)
(connect D5:1 D7:2)
(connect D5:0 D8:0)
(connect D11:1 D8:1)
(connect D13:1 D9:1)
(connect D8:1 D9:2)
(connect D2:0 D11:0)
(connect I1:1 D11:1)
(connect D6:2 D12:0)
(connect D4:1 D13:1)
(connect D13:1 O1:1)
(connect D8:1 O2:1)
(connect D9:2 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 751 580)
(anchorPt 14 -43)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 79 25))
(open
(extent 64 53))
(terminals on)
(pinCenter 210 180))
(devCarrierFor 3
(active icon)
(icon
(extent 178 16))
(open
(extent 465 32))
(terminals on)
(pinCenter 410 200))
(devCarrierFor 4
(active icon)
(icon
(extent 212 16))
(open
(extent 533 32))
(terminals on)
(pinCenter 130 140))
(devCarrierFor 5
(active icon)
(icon
(extent 304 16))
(open
(extent 340 114))
(pinCenter 160 100))
(devCarrierFor 6
(active icon)
(icon
(extent 29 34))
(open)
(terminals on)
(pinCenter 570 160))
(devCarrierFor 7
(active icon)
(icon
(extent 66 16))
(open
(extent 72 32))
(terminals on)
(pinCenter 190 250))
(devCarrierFor 9
(active icon)
(icon
(extent 91 25))
(open
(extent 127 53))
(terminals on)
(pinCenter 300 250))
(devCarrierFor 11
(active icon)
(icon
(extent 127 25))
(open
(extent 974 42))
(terminals on)
(pinCenter 420 320))
(devCarrierFor 12
(active icon)
(icon
(extent 92 25))
(open
(extent 624 42))
(terminals on)
(pinCenter 400 370))
(devCarrierFor 13
(active icon)
(icon
(extent 226 25))
(open
(extent 339 42))
(terminals on)
(pinCenter 540 440))
(devCarrierFor 14
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 343 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 210 550))
(devCarrierFor 17
(active icon)
(icon
(extent 117 16))
(open
(extent 279 32))
(terminals on)
(pinCenter 80 180))
(devCarrierFor 18
(active icon)
(icon
(extent 78 16))
(open
(extent 465 32))
(terminals on)
(pinCenter 390 280))
(devCarrierFor 19
(active icon)
(icon
(extent 80 16))
(open
(extent 196 32))
(terminals on)
(pinCenter 650 160))
(connect D11:1 D0:1
(points 2 141 180 168 180))
(connect D0:1 D1:0
(points 3 252 170 410 170 410 189))
(connect D1:1 D4:1
(points 4 501 200 520 200 520 150 553 150))
(connect D7:2 D4:2
(points 4 486 330 530 330 530 160 553 160))
(connect D12:1 D4:3
(points 4 431 280 540 280 540 170 553 170))
(connect D0:2 D5:0
(points 5 252 190 270 190 270 220 190 220 190 239))
(connect D11:1 D5:1
(points 6 141 180 150 180 150 210 130 210 130 250 154 250))
(connect D5:1 D6:1
(points 2 225 250 252 250))
(connect D6:1 D7:0
(points 5 348 240 450 240 450 300 420 300 420 305))
(connect D11:1 D7:1
(points 6 141 180 150 180 150 210 130 210 130 310 354 310))
(connect D5:1 D7:2
(points 4 225 250 240 250 240 330 354 330))
(connect D5:0 D8:0
(points 4 190 260 190 350 400 350 400 355))
(connect D11:1 D8:1
(points 8 141 180 150 180 150 210 130 210 130 310 230 310 230 370 351 370))
(connect D13:1 D9:1
(points 10 692 160 710 160 710 190 700 190 700 360 480 360 480 420 410 420 410
430 424 430))
(connect D8:1 D9:2
(points 6 448 370 470 370 470 410 400 410 400 450 424 450))
(connect D2:0 D11:0
(points 4 130 150 130 160 80 160 80 169))
(connect I1:1 D11:1
(points 4 -14 332 0 332 0 180 19 180))
(connect D6:2 D12:0
(points 3 348 260 390 260 390 269))
(connect D4:1 D13:1
(points 2 587 160 607 160))
(connect D13:1 O1:1
(points 4 692 160 710 160 710 142 736 142))
(connect D8:1 O2:1
(points 4 448 370 690 370 690 332 736 332))
(connect D9:2 O3:1
(points 4 655 450 680 450 680 522 736 522)))
(stackingOrder 6 4 3 5 13 2 11 0 1 10 12 7 8 9))))
(context 68
(properties
(name "BasicOtherBeginStrategy")
(trigMode deg)
(nextID 33)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "Nada")
(lock constraints)
(optional yes)))
(deviceList
(device 6 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "I")
(optional yes))
(input 2
(name "H")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "A")
(optional yes))
(input 5
(name "B")
(optional yes))
(input 6
(name "C")
(optional yes))
(input 7
(name "F")
(optional yes))
(input 8
(name "E")
(optional yes))
(input 9
(name "G")
(optional yes))
(input 10
(name "J")
(optional yes))
(output 1
(name "Data"))))
(device 8 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 9 EXITCONTEXT)
(device 10 CALL
(properties
(name "Call NonLifeThreateningMoves")
(callFunc "NonLifeThreateningMoves")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "otherMoves")
(lock name constraints)
(optional yes))))
(device 11 CALL
(properties
(name "Call IsThereANeighborhoodMenace")
(callFunc "IsThereANeighborhoodMenace")
(parmMode rev30))
(interface
(output 1
(name "MenacePiece")
(lock name constraints)
(optional yes))
(output 2
(name "NoMenace")
(lock name constraints)
(optional yes))))
(device 12 IFTHENELSE
(properties
(name "If why bother if it won\'t attack?")
(cases 1 "0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 14 CALL
(properties
(name "Call CanMove8TowardBomb")
(callFunc "CanMove8TowardBomb")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 15 CALL
(properties
(name "Call CanMoveSpyTowardMarshal")
(callFunc "CanMoveSpyTowardMarshal")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 16 CALL
(properties
(name "Call CanMove9765Forward")
(callFunc "CanMove9765Forward")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 17 CALL
(properties
(name "Call CanMoveLowPieceUpToCapture")
(callFunc "CanMoveLowPieceUpToCapture")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 18 CALL
(properties
(name "Call CanMoveBuriedLowPieceToKill")
(callFunc "CanMoveBuriedLowPieceToKill")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 19 CALL
(properties
(name "Call CanMoveLowPieceUpToFindUnknown")
(callFunc "CanMoveLowPieceUpToFindUnknown")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 20 CALL
(properties
(name "Call CanMoveLowPieceDownToWreckHavoc")
(callFunc "CanMoveLowPieceDownToWreckHavoc")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 21 CALL
(properties
(name "Call CanAggressivelyPursuePiece")
(callFunc "CanAggressivelyPursuePiece")
(parmMode rev30))
(interface
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 24 CALL
(properties
(name "Call CanProtectOurDiscoveredBomb")
(callFunc "CanProtectOurDiscoveredBomb")
(parmMode rev30))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 30 CALL
(properties
(name "Call DoTheStrafe")
(callFunc "DoTheStrafe")
(parmMode rev30))
(interface
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))))
(device 31 CALL
(properties
(name "Call ShouldWeStrafe")
(callFunc "ShouldWeStrafe")
(parmMode rev30)))
(device 32 TORECORD
(properties
(name "Build Rec (from, to)")
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(configuration
(connect D1:1 D0:1)
(connect D15:1 D1:1)
(connect D14:1 D1:2)
(connect D7:1 D1:3)
(connect D8:1 D1:4)
(connect D9:1 D1:5)
(connect D10:1 D1:6)
(connect D11:1 D1:7)
(connect D12:1 D1:8)
(connect D13:1 D1:9)
(connect D18:1 D1:10)
(connect D5:0 D2:0)
(connect D0:0 D3:0)
(connect I1:1 D4:1)
(connect D14:0 D5:0)
(connect D10:0 D6:0)
(connect D13:0 D7:0)
(connect D4:1 D7:1)
(connect D7:0 D8:0)
(connect D4:1 D8:1)
(connect D15:0 D9:0)
(connect D4:1 D9:1)
(connect D9:0 D10:0)
(connect D4:1 D10:1)
(connect D5:1 D11:0)
(connect I1:1 D11:1)
(connect D6:1 D12:0)
(connect D4:1 D12:1)
(connect D6:0 D13:0)
(connect D4:1 D13:1)
(connect D8:0 D14:0)
(connect D16:0 D15:0)
(connect I1:1 D15:1)
(connect D17:0 D16:0)
(connect D16:1 D18:1)
(connect D16:2 D18:2)
(connect D0:1 O1:1)
(connect D0:2 O2:1)
(connect D2:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 1003 731)
(anchorPt 33 -93)
(configuration
(devCarrierFor 6
(active icon)
(icon
(extent 74 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 780 330))
(devCarrierFor 7
(active icon)
(icon
(extent 29 105))
(open
(extent 17 202))
(terminals on)
(pinCenter 700 340))
(devCarrierFor 8
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 380 780))
(devCarrierFor 9
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 780 370))
(devCarrierFor 10
(active icon)
(icon
(extent 213 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 110 190))
(devCarrierFor 11
(active icon)
(icon
(extent 246 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 700))
(devCarrierFor 12
(active icon)
(icon
(extent 206 25))
(open
(extent 55 53))
(terminals on)
(pinCenter 380 400))
(devCarrierFor 14
(active icon)
(icon
(extent 196 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 550))
(devCarrierFor 15
(active icon)
(icon
(extent 229 16))
(open
(extent 205 53))
(terminals on)
(pinCenter 380 600))
(devCarrierFor 16
(active icon)
(icon
(extent 189 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 290))
(devCarrierFor 17
(active icon)
(icon
(extent 256 16))
(open
(extent 232 53))
(terminals on)
(pinCenter 380 330))
(devCarrierFor 18
(active icon)
(icon
(extent 246 16))
(open
(extent 222 53))
(terminals on)
(pinCenter 580 740))
(devCarrierFor 19
(active icon)
(icon
(extent 293 16))
(open
(extent 269 53))
(terminals on)
(pinCenter 570 460))
(devCarrierFor 20
(active icon)
(icon
(extent 306 16))
(open
(extent 282 53))
(terminals on)
(pinCenter 380 500))
(devCarrierFor 21
(active icon)
(icon
(extent 235 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 640))
(devCarrierFor 24
(active icon)
(icon
(extent 253 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 240))
(devCarrierFor 30
(active icon)
(icon
(extent 119 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 180))
(devCarrierFor 31
(active icon)
(icon
(extent 144 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 140))
(devCarrierFor 32
(active icon)
(icon
(extent 134 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 540 180))
(connect D1:1 D0:1
(points 4 717 340 730 340 730 330 740 330))
(connect D15:1 D1:1
(points 4 509 240 550 240 550 290 683 290))
(connect D14:1 D1:2
(points 4 500 640 590 640 590 300 683 300))
(connect D7:1 D1:3
(points 4 480 550 560 550 560 310 683 310))
(connect D8:1 D1:4
(points 4 497 600 580 600 580 320 683 320))
(connect D9:1 D1:5
(points 4 477 290 540 290 540 330 683 330))
(connect D10:1 D1:6
(points 4 510 330 530 330 530 340 683 340))
(connect D11:1 D1:7
(points 6 705 740 750 740 750 420 640 420 640 350 683 350))
(connect D12:1 D1:8
(points 6 719 460 730 460 730 440 650 440 650 360 683 360))
(connect D13:1 D1:9
(points 6 535 500 740 500 740 430 660 430 660 370 683 370))
(connect D18:1 D1:10
(points 4 609 180 630 180 630 380 683 380))
(connect D5:0 D2:0
(points 2 380 715 380 769))
(connect D0:0 D3:0
(points 2 780 345 780 359))
(connect I1:1 D4:1
(points 4 -33 458 -30 458 -30 190 1 190))
(connect D14:0 D5:0
(points 2 380 650 380 685))
(connect D10:0 D6:0
(points 2 380 340 380 385))
(connect D13:0 D7:0
(points 2 380 510 380 539))
(connect D4:1 D7:1
(points 6 219 190 240 190 240 220 200 220 200 550 279 550))
(connect D7:0 D8:0
(points 2 380 560 380 589))
(connect D4:1 D8:1
(points 6 219 190 240 190 240 220 200 220 200 600 263 600))
(connect D15:0 D9:0
(points 2 380 250 380 279))
(connect D4:1 D9:1
(points 6 219 190 240 190 240 220 230 220 230 290 283 290))
(connect D9:0 D10:0
(points 2 380 300 380 319))
(connect D4:1 D10:1
(points 6 219 190 240 190 240 220 230 220 230 330 249 330))
(connect D5:1 D11:0
(points 3 505 690 580 690 580 729))
(connect I1:1 D11:1
(points 4 -33 458 -20 458 -20 740 454 740))
(connect D6:1 D12:0
(points 3 485 390 570 390 570 449))
(connect D4:1 D12:1
(points 6 219 190 240 190 240 220 200 220 200 460 421 460))
(connect D6:0 D13:0
(points 2 380 415 380 489))
(connect D4:1 D13:1
(points 6 219 190 240 190 240 220 200 220 200 500 224 500))
(connect D8:0 D14:0
(points 2 380 610 380 629))
(connect D16:0 D15:0
(points 2 380 195 380 229))
(connect I1:1 D15:1
(points 3 -33 458 -33 240 251 240))
(connect D17:0 D16:0
(points 2 380 150 380 165))
(connect D16:1 D18:1
(points 2 442 170 470 170))
(connect D16:2 D18:2
(points 2 442 190 470 190))
(connect D0:1 O1:1
(points 4 819 320 850 320 850 218 969 218))
(connect D0:2 O2:1
(points 4 819 340 840 340 840 458 969 458))
(connect D2:1 O3:1
(points 4 403 780 760 780 760 698 969 698)))
(stackingOrder 6 8 10 12 13 0 3 5 11 7 4 15 2 9 16 18 1 17 14))))
(context 110
(properties
(name "BasicOtherEndStrategy")
(trigMode deg)
(nextID 40)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "Nada")
(lock constraints)
(optional yes)))
(deviceList
(device 6 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "H")
(optional yes))
(input 2
(name "J")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "A")
(optional yes))
(input 5
(name "B")
(optional yes))
(input 6
(name "N")
(optional yes))
(input 7
(name "C")
(optional yes))
(input 8
(name "F")
(optional yes))
(input 9
(name "E")
(optional yes))
(input 10
(name "G")
(optional yes))
(input 11
(name "I")
(optional yes))
(input 12
(name "K")
(optional yes))
(input 13
(name "L")
(optional yes))
(input 14
(name "M")
(optional yes))
(input 15
(name "O")
(optional yes))
(input 16
(name "P")
(optional yes))
(input 17
(name "Q")
(optional yes))
(input 18
(name "R")
(optional yes))
(output 1
(name "Data"))))
(device 8 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 9 EXITCONTEXT)
(device 10 CALL
(properties
(name "Call NonLifeThreateningMoves")
(callFunc "NonLifeThreateningMoves")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "otherMoves")
(lock name constraints)
(optional yes))))
(device 11 CALL
(properties
(name "Call IsThereANeighborhoodMenace")
(callFunc "IsThereANeighborhoodMenace")
(parmMode rev30))
(interface
(output 1
(name "MenacePiece")
(lock name constraints)
(optional yes))
(output 2
(name "NoMenace")
(lock name constraints)
(optional yes))))
(device 14 CALL
(properties
(name "Call CanMove8TowardBomb")
(callFunc "CanMove8TowardBomb")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 15 CALL
(properties
(name "Call CanMoveSpyTowardMarshal")
(callFunc "CanMoveSpyTowardMarshal")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 17 CALL
(properties
(name "Call CanMoveLowPieceUpToCapture")
(callFunc "CanMoveLowPieceUpToCapture")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 18 CALL
(properties
(name "Call CanMoveBuriedLowPieceToKill")
(callFunc "CanMoveBuriedLowPieceToKill")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 20 CALL
(properties
(name "Call CanMoveLowPieceDownToWreckHavoc")
(callFunc "CanMoveLowPieceDownToWreckHavoc")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 21 CALL
(properties
(name "Call CanAggressivelyPursuePiece")
(callFunc "CanAggressivelyPursuePiece")
(parmMode rev30))
(interface
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 23 CALL
(properties
(name "Call CanKillAMovable")
(callFunc "CanKillAMovable")
(parmMode rev30))
(interface
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 24 CALL
(properties
(name "Call CanGet9ToLocQuickly")
(callFunc "CanGet9ToLocQuickly")
(parmMode rev30))
(interface
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 25 CALL
(properties
(name "Call CanMovePieceTowardPotentialFlag")
(callFunc "CanMovePieceTowardPotentialFlag")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 26 CALL
(properties
(name "Call CanProtectOurDiscoveredBomb")
(callFunc "CanProtectOurDiscoveredBomb")
(parmMode rev30))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 27 IFTHENELSE
(properties
(name "fewer than 5 movable pieces?")
(cases 1 "numOppMovablePiecesRemaining<5"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 28 CALL
(properties
(name "Call CanKillAMovable")
(callFunc "CanKillAMovable")
(parmMode rev30))
(interface
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 29 CALL
(properties
(name "Call CanAggressivelyPursuePiece")
(callFunc "CanAggressivelyPursuePiece")
(parmMode rev30))
(interface
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 30 CALL
(properties
(name "Call CanMovePieceTowardPotentialFlag")
(callFunc "CanMovePieceTowardPotentialFlag")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 31 CALL
(properties
(name "Call CanMoveGrungePieceTowardHighPiece")
(callFunc "CanMoveGrungePieceTowardHighPiece")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 33 IFTHENELSE
(properties
(name "Do we have clout in opp region?")
(cases 1 "AnyHighRankingPiecesInOppZone()"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 34 CALL
(properties
(name "Call CanMoveLowPieceDownToWreckHavoc")
(callFunc "CanMoveLowPieceDownToWreckHavoc")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 35 TORECORD
(properties
(name "Build Rec (from, to)")
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 36 CALL
(properties
(name "Call DoTheStrafe")
(callFunc "DoTheStrafe")
(parmMode rev30))
(interface
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))))
(device 37 CALL
(properties
(name "Call ShouldWeStrafe")
(callFunc "ShouldWeStrafe")
(parmMode rev30)))
(device 38 CALL
(properties
(name "Call CanKillAMovable")
(callFunc "CanKillAMovable")
(parmMode rev30))
(interface
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 39 CALL
(properties
(name "Call ShouldInterceptOppAssault")
(callFunc "ShouldInterceptOppAssault")
(parmMode rev30))
(interface
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(configuration
(connect D1:1 D0:1)
(connect D11:1 D1:1)
(connect D15:1 D1:2)
(connect D6:1 D1:3)
(connect D7:1 D1:4)
(connect D10:1 D1:5)
(connect D20:1 D1:6)
(connect D9:1 D1:7)
(connect D8:1 D1:8)
(connect D12:1 D1:9)
(connect D13:1 D1:10)
(connect D14:1 D1:11)
(connect D19:1 D1:12)
(connect D17:1 D1:13)
(connect D18:1 D1:14)
(connect D22:1 D1:15)
(connect D23:1 D1:16)
(connect D26:1 D1:17)
(connect D27:1 D1:18)
(connect D7:0 D2:0)
(connect D0:0 D3:0)
(connect I1:1 D4:1)
(connect D8:0 D5:0)
(connect D16:0 D6:0)
(connect D4:1 D6:1)
(connect D5:0 D7:0)
(connect D4:1 D7:1)
(connect D10:0 D8:0)
(connect D4:1 D8:1)
(connect D5:1 D9:0)
(connect I1:1 D9:1)
(connect D6:0 D10:0)
(connect D4:1 D10:1)
(connect D12:0 D11:0)
(connect D16:1 D12:0)
(connect D15:0 D13:0)
(connect D11:0 D14:0)
(connect D4:1 D14:1)
(connect D27:0 D15:0)
(connect I1:1 D15:1)
(connect D20:0 D16:0)
(connect D19:0 D17:0)
(connect D17:0 D18:0)
(connect D16:2 D19:0)
(connect D4:1 D19:1)
(connect D21:0 D20:0)
(connect I1:1 D20:1)
(connect D13:0 D21:0)
(connect D21:2 D22:0)
(connect D4:1 D22:1)
(connect D24:1 D23:1)
(connect D24:2 D23:2)
(connect D25:0 D24:0)
(connect D21:1 D26:0)
(connect D24:0 D27:0)
(connect D0:1 O1:1)
(connect D0:2 O2:1)
(connect D2:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 959 844)
(anchorPt 133 74)
(configuration
(devCarrierFor 6
(active icon)
(icon
(extent 74 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 770 220))
(devCarrierFor 7
(active icon)
(icon
(extent 29 185))
(open
(extent 17 362))
(terminals on)
(pinCenter 640 310))
(devCarrierFor 8
(active icon)
(icon
(extent 38 14))
(open
(extent 84 30)
(showFormat int))
(pinCenter 210 780))
(devCarrierFor 9
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 770 270))
(devCarrierFor 10
(active icon)
(icon
(extent 213 16))
(open
(extent 196 53))
(terminals on)
(pinCenter -40 110))
(devCarrierFor 11
(active icon)
(icon
(extent 246 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 210 630))
(devCarrierFor 14
(active icon)
(icon
(extent 196 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 210 460))
(devCarrierFor 15
(active icon)
(icon
(extent 229 16))
(open
(extent 205 53))
(terminals on)
(pinCenter 210 740))
(devCarrierFor 17
(active icon)
(icon
(extent 256 16))
(open
(extent 232 53))
(terminals on)
(pinCenter 210 580))
(devCarrierFor 18
(active icon)
(icon
(extent 246 16))
(open
(extent 222 53))
(terminals on)
(pinCenter 370 690))
(devCarrierFor 20
(active icon)
(icon
(extent 306 16))
(open
(extent 282 53))
(terminals on)
(pinCenter 210 520))
(devCarrierFor 21
(active icon)
(icon
(extent 235 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 250))
(devCarrierFor 23
(active icon)
(icon
(extent 147 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 210))
(devCarrierFor 24
(active icon)
(icon
(extent 188 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 200 60))
(devCarrierFor 25
(active icon)
(icon
(extent 278 16))
(open
(extent 204 53))
(terminals on)
(pinCenter 380 300))
(devCarrierFor 26
(active icon)
(icon
(extent 253 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 200 30))
(devCarrierFor 27
(active icon)
(icon
(extent 206 25))
(open
(extent 264 53))
(terminals on)
(pinCenter 200 180))
(devCarrierFor 28
(active icon)
(icon
(extent 147 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 400))
(devCarrierFor 29
(active icon)
(icon
(extent 235 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 440))
(devCarrierFor 30
(active icon)
(icon
(extent 278 16))
(open
(extent 204 53))
(terminals on)
(pinCenter 380 360))
(devCarrierFor 31
(active icon)
(icon
(extent 309 16))
(open
(extent 235 53))
(terminals on)
(pinCenter 200 140))
(devCarrierFor 33
(active icon)
(icon
(extent 223 25))
(open
(extent 258 53))
(terminals on)
(pinCenter 200 90))
(devCarrierFor 34
(active icon)
(icon
(extent 306 16))
(open
(extent 282 53))
(terminals on)
(pinCenter 530 120))
(devCarrierFor 35
(active icon)
(icon
(extent 134 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 380 -40))
(devCarrierFor 36
(active icon)
(icon
(extent 119 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 210 -30))
(devCarrierFor 37
(active icon)
(icon
(extent 144 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 210 -60))
(devCarrierFor 38
(active icon)
(icon
(extent 147 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 460 70))
(devCarrierFor 39
(active icon)
(icon
(extent 220 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 200 0))
(connect D1:1 D0:1
(points 4 657 310 710 310 710 220 730 220))
(connect D11:1 D1:1
(points 4 500 250 510 250 510 220 623 220))
(connect D15:1 D1:2
(points 4 329 30 560 30 560 230 623 230))
(connect D6:1 D1:3
(points 10 310 460 320 460 320 470 510 470 510 420 500 420 500 280 520 280 520
240 623 240))
(connect D7:1 D1:4
(points 8 327 740 520 740 520 410 510 410 510 330 530 330 530 250 623 250))
(connect D10:1 D1:5
(points 6 365 520 680 520 680 200 610 200 610 260 623 260))
(connect D20:1 D1:6
(points 6 357 140 370 140 370 160 590 160 590 270 623 270))
(connect D9:1 D1:7
(points 4 495 690 550 690 550 280 623 280))
(connect D8:1 D1:8
(points 4 340 580 540 580 540 290 623 290))
(connect D12:1 D1:9
(points 4 456 210 580 210 580 300 623 300))
(connect D13:1 D1:10
(points 8 296 60 340 60 340 100 380 100 380 150 570 150 570 310 623 310))
(connect D14:1 D1:11
(points 4 521 300 560 300 560 320 623 320))
(connect D19:1 D1:12
(points 4 521 360 570 360 570 330 623 330))
(connect D17:1 D1:13
(points 4 456 400 530 400 530 340 623 340))
(connect D18:1 D1:14
(points 4 500 440 560 440 560 350 623 350))
(connect D22:1 D1:15
(points 8 685 120 700 120 700 140 690 140 690 440 580 440 580 360 623 360))
(connect D23:1 D1:16
(points 8 449 -40 720 -40 720 160 700 160 700 430 590 430 590 370 623 370))
(connect D26:1 D1:17
(points 6 536 70 710 70 710 150 600 150 600 380 623 380))
(connect D27:1 D1:18
(points 10 312 0 320 0 320 10 730 10 730 170 720 170 720 450 600 450 600 390 623
390))
(connect D7:0 D2:0
(points 2 210 750 210 770))
(connect D0:0 D3:0
(points 2 770 235 770 259))
(connect I1:1 D4:1
(points 4 -133 347 -170 347 -170 110 -149 110))
(connect D8:0 D5:0
(points 2 210 590 210 615))
(connect D16:0 D6:0
(points 4 200 195 200 340 210 340 210 449))
(connect D4:1 D6:1
(points 8 69 110 80 110 80 160 70 160 70 360 80 360 80 460 109 460))
(connect D5:0 D7:0
(points 2 210 645 210 729))
(connect D4:1 D7:1
(points 10 69 110 80 110 80 160 70 160 70 360 30 360 30 580 60 580 60 740 93 740))
(connect D10:0 D8:0
(points 2 210 530 210 569))
(connect D4:1 D8:1
(points 8 69 110 80 110 80 160 70 160 70 360 30 360 30 580 79 580))
(connect D5:1 D9:0
(points 3 335 620 370 620 370 679))
(connect I1:1 D9:1
(points 4 -133 347 -50 347 -50 690 244 690))
(connect D6:0 D10:0
(points 2 210 470 210 509))
(connect D4:1 D10:1
(points 8 69 110 80 110 80 160 70 160 70 360 30 360 30 520 54 520))
(connect D12:0 D11:0
(points 2 380 220 380 239))
(connect D16:1 D12:0
(points 3 305 170 380 170 380 199))
(connect D15:0 D13:0
(points 2 200 40 200 49))
(connect D11:0 D14:0
(points 2 380 260 380 289))
(connect D4:1 D14:1
(points 6 69 110 80 110 80 160 70 160 70 300 238 300))
(connect D27:0 D15:0
(points 2 200 10 200 19))
(connect I1:1 D15:1
(points 4 -133 347 -170 347 -170 30 71 30))
(connect D20:0 D16:0
(points 2 200 150 200 165))
(connect D19:0 D17:0
(points 2 380 370 380 389))
(connect D17:0 D18:0
(points 2 380 410 380 429))
(connect D16:2 D19:0
(points 9 305 190 320 190 320 200 290 200 290 220 210 220 210 330 380 330 380
349))
(connect D4:1 D19:1
(points 6 69 110 80 110 80 160 70 160 70 360 238 360))
(connect D21:0 D20:0
(points 2 200 105 200 129))
(connect I1:1 D20:1
(points 4 -133 347 -60 347 -60 140 43 140))
(connect D13:0 D21:0
(points 2 200 70 200 75))
(connect D21:2 D22:0
(points 5 314 100 330 100 330 90 530 90 530 109))
(connect D4:1 D22:1
(points 4 69 110 80 110 80 120 374 120))
(connect D24:1 D23:1
(points 4 272 -40 290 -40 290 -50 310 -50))
(connect D24:2 D23:2
(points 4 272 -20 290 -20 290 -30 310 -30))
(connect D25:0 D24:0
(points 2 210 -50 210 -45))
(connect D21:1 D26:0
(points 5 314 80 330 80 330 50 460 50 460 59))
(connect D24:0 D27:0
(points 2 210 -15 200 -11))
(connect D0:1 O1:1
(points 4 809 210 830 210 830 67 825 67))
(connect D0:2 O2:1
(points 4 809 230 850 230 850 347 825 347))
(connect D2:1 O3:1
(points 4 231 780 600 780 600 627 825 627)))
(stackingOrder 8 0 3 10 6 5 9 7 11 17 18 19 2 20 16 14 23 24 25 21 22 12 26 4 13
15 27 1))))
(context 86
(properties
(name "BasicOtherMiddleStrategy")
(trigMode deg)
(nextID 32)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "Nada")
(lock constraints)
(optional yes)))
(deviceList
(device 6 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "H")
(optional yes))
(input 2
(name "J")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "A")
(optional yes))
(input 5
(name "L")
(optional yes))
(input 6
(name "B")
(optional yes))
(input 7
(name "C")
(optional yes))
(input 8
(name "F")
(optional yes))
(input 9
(name "E")
(optional yes))
(input 10
(name "G")
(optional yes))
(input 11
(name "I")
(optional yes))
(input 12
(name "K")
(optional yes))
(input 13
(name "M")
(optional yes))
(input 14
(name "N")
(optional yes))
(input 15
(name "O")
(optional yes))
(output 1
(name "Data"))))
(device 8 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 9 EXITCONTEXT)
(device 10 CALL
(properties
(name "Call NonLifeThreateningMoves")
(callFunc "NonLifeThreateningMoves")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "otherMoves")
(lock name constraints)
(optional yes))))
(device 11 CALL
(properties
(name "Call IsThereANeighborhoodMenace")
(callFunc "IsThereANeighborhoodMenace")
(parmMode rev30))
(interface
(output 1
(name "MenacePiece")
(lock name constraints)
(optional yes))
(output 2
(name "NoMenace")
(lock name constraints)
(optional yes))))
(device 12 IFTHENELSE
(properties
(name "If why bother if it won\'t attack?")
(cases 1 "0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 14 CALL
(properties
(name "Call CanMove8TowardBomb")
(callFunc "CanMove8TowardBomb")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 15 CALL
(properties
(name "Call CanMoveSpyTowardMarshal")
(callFunc "CanMoveSpyTowardMarshal")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 16 CALL
(properties
(name "Call CanMove9765Forward")
(callFunc "CanMove9765Forward")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 17 CALL
(properties
(name "Call CanMoveLowPieceUpToCapture")
(callFunc "CanMoveLowPieceUpToCapture")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 18 CALL
(properties
(name "Call CanMoveBuriedLowPieceToKill")
(callFunc "CanMoveBuriedLowPieceToKill")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 19 CALL
(properties
(name "Call CanMoveLowPieceUpToFindUnknown")
(callFunc "CanMoveLowPieceUpToFindUnknown")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 20 CALL
(properties
(name "Call CanMoveLowPieceDownToWreckHavoc")
(callFunc "CanMoveLowPieceDownToWreckHavoc")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 21 CALL
(properties
(name "Call CanAggressivelyPursuePiece")
(callFunc "CanAggressivelyPursuePiece")
(parmMode rev30))
(interface
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 22 CALL
(properties
(name "Call CanGet9ToLocQuickly")
(callFunc "CanGet9ToLocQuickly")
(parmMode rev30))
(interface
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 23 IFTHENELSE
(properties
(name "less than 15% chance?")
(cases 1 "random(0, 1)<0.15"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 24 CALL
(properties
(name "Call CanProtectOurDiscoveredBomb")
(callFunc "CanProtectOurDiscoveredBomb")
(parmMode rev30))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 25 CALL
(properties
(name "Call CanMovePieceTowardPotentialFlag")
(callFunc "CanMovePieceTowardPotentialFlag")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 26 CALL
(properties
(name "Call CanMoveGrungePieceTowardHighPiece")
(callFunc "CanMoveGrungePieceTowardHighPiece")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 27 TORECORD
(properties
(name "Build Rec (from, to)")
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 28 CALL
(properties
(name "Call DoTheStrafe")
(callFunc "DoTheStrafe")
(parmMode rev30))
(interface
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))))
(device 29 CALL
(properties
(name "Call ShouldWeStrafe")
(callFunc "ShouldWeStrafe")
(parmMode rev30)))
(device 30 CALL
(properties
(name "Call CanKillAMovable")
(callFunc "CanKillAMovable")
(parmMode rev30))
(interface
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 31 CALL
(properties
(name "Call ShouldInterceptOppAssault")
(callFunc "ShouldInterceptOppAssault")
(parmMode rev30))
(interface
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(configuration
(connect D1:1 D0:1)
(connect D14:1 D1:1)
(connect D17:1 D1:2)
(connect D7:1 D1:3)
(connect D8:1 D1:4)
(connect D19:1 D1:5)
(connect D9:1 D1:6)
(connect D10:1 D1:7)
(connect D11:1 D1:8)
(connect D12:1 D1:9)
(connect D13:1 D1:10)
(connect D15:1 D1:11)
(connect D18:1 D1:12)
(connect D20:1 D1:13)
(connect D23:1 D1:14)
(connect D24:1 D1:15)
(connect D14:0 D2:0)
(connect D0:0 D3:0)
(connect I1:1 D4:1)
(connect D16:0 D5:0)
(connect D10:0 D6:0)
(connect D6:0 D7:0)
(connect D4:1 D7:1)
(connect D7:0 D8:0)
(connect D4:1 D8:1)
(connect D8:0 D9:0)
(connect D4:1 D9:1)
(connect D18:0 D10:0)
(connect D4:1 D10:1)
(connect D5:1 D11:0)
(connect I1:1 D11:1)
(connect D6:1 D12:0)
(connect D4:1 D12:1)
(connect D19:0 D13:0)
(connect D4:1 D13:1)
(connect D5:0 D14:0)
(connect D16:1 D15:0)
(connect D9:0 D16:0)
(connect D24:0 D17:0)
(connect I1:1 D17:1)
(connect D13:0 D18:0)
(connect D4:1 D18:1)
(connect D23:0 D19:0)
(connect I1:1 D19:1)
(connect D21:1 D20:1)
(connect D21:2 D20:2)
(connect D22:0 D21:0)
(connect D17:0 D23:0)
(connect D21:0 D24:0)
(connect D0:1 O1:1)
(connect D0:2 O2:1)
(connect D2:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 891 794)
(anchorPt 21 16)
(configuration
(devCarrierFor 6
(active icon)
(icon
(extent 74 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 770 230))
(devCarrierFor 7
(active icon)
(icon
(extent 29 154))
(open
(extent 17 302))
(terminals on)
(pinCenter 690 290))
(devCarrierFor 8
(active icon)
(icon
(extent 38 14))
(open
(extent 84 30)
(showFormat int))
(pinCenter 380 740))
(devCarrierFor 9
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 770 280))
(devCarrierFor 10
(active icon)
(icon
(extent 213 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 100 120))
(devCarrierFor 11
(active icon)
(icon
(extent 246 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 630))
(devCarrierFor 12
(active icon)
(icon
(extent 206 25))
(open
(extent 55 53))
(terminals on)
(pinCenter 380 370))
(devCarrierFor 14
(active icon)
(icon
(extent 196 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 410))
(devCarrierFor 15
(active icon)
(icon
(extent 229 16))
(open
(extent 205 53))
(terminals on)
(pinCenter 380 450))
(devCarrierFor 16
(active icon)
(icon
(extent 189 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 510))
(devCarrierFor 17
(active icon)
(icon
(extent 256 16))
(open
(extent 232 53))
(terminals on)
(pinCenter 380 310))
(devCarrierFor 18
(active icon)
(icon
(extent 246 16))
(open
(extent 222 53))
(terminals on)
(pinCenter 550 670))
(devCarrierFor 19
(active icon)
(icon
(extent 293 16))
(open
(extent 269 53))
(terminals on)
(pinCenter 650 400))
(devCarrierFor 20
(active icon)
(icon
(extent 306 16))
(open
(extent 282 53))
(terminals on)
(pinCenter 380 240))
(devCarrierFor 21
(active icon)
(icon
(extent 235 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 700))
(devCarrierFor 22
(active icon)
(icon
(extent 188 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 600 570))
(devCarrierFor 23
(active icon)
(icon
(extent 161 25))
(open
(extent 150 53))
(terminals on)
(pinCenter 380 550))
(devCarrierFor 24
(active icon)
(icon
(extent 253 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 130))
(devCarrierFor 25
(active icon)
(icon
(extent 278 16))
(open
(extent 204 53))
(terminals on)
(pinCenter 380 270))
(devCarrierFor 26
(active icon)
(icon
(extent 309 16))
(open
(extent 235 53))
(terminals on)
(pinCenter 380 210))
(devCarrierFor 27
(active icon)
(icon
(extent 134 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 550 40))
(devCarrierFor 28
(active icon)
(icon
(extent 119 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 390 40))
(devCarrierFor 29
(active icon)
(icon
(extent 144 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 390 0))
(devCarrierFor 30
(active icon)
(icon
(extent 147 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 380 180))
(devCarrierFor 31
(active icon)
(icon
(extent 220 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 390 80))
(connect D1:1 D0:1
(points 4 707 290 720 290 720 230 730 230))
(connect D14:1 D1:1
(points 6 500 700 820 700 820 200 660 200 660 220 673 220))
(connect D17:1 D1:2
(points 4 509 130 590 130 590 230 673 230))
(connect D7:1 D1:3
(points 6 480 410 510 410 510 370 590 370 590 240 673 240))
(connect D8:1 D1:4
(points 6 497 450 530 450 530 260 550 260 550 250 673 250))
(connect D19:1 D1:5
(points 4 537 210 580 210 580 260 673 260))
(connect D9:1 D1:6
(points 4 477 510 580 510 580 270 673 270))
(connect D10:1 D1:7
(points 4 510 310 550 310 550 280 673 280))
(connect D11:1 D1:8
(points 6 675 670 730 670 730 530 630 530 630 290 673 290))
(connect D12:1 D1:9
(points 6 799 400 860 400 860 190 650 190 650 300 673 300))
(connect D13:1 D1:10
(points 4 535 240 570 240 570 310 673 310))
(connect D15:1 D1:11
(points 6 696 570 720 570 720 540 660 540 660 320 673 320))
(connect D18:1 D1:12
(points 4 521 270 540 270 540 330 673 330))
(connect D20:1 D1:13
(points 4 619 40 640 40 640 340 673 340))
(connect D23:1 D1:14
(points 4 456 180 560 180 560 350 673 350))
(connect D24:1 D1:15
(points 12 502 80 510 80 510 90 840 90 840 310 730 310 730 380 670 380 670 370
660 370 660 360 673 360))
(connect D14:0 D2:0
(points 2 380 710 380 730))
(connect D0:0 D3:0
(points 2 770 245 770 269))
(connect I1:1 D4:1
(points 4 -21 380 -30 380 -30 120 -9 120))
(connect D16:0 D5:0
(points 2 380 565 380 615))
(connect D10:0 D6:0
(points 2 380 320 380 355))
(connect D6:0 D7:0
(points 2 380 385 380 399))
(connect D4:1 D7:1
(points 6 209 120 230 120 230 150 200 150 200 410 279 410))
(connect D7:0 D8:0
(points 2 380 420 380 439))
(connect D4:1 D8:1
(points 6 209 120 230 120 230 150 200 150 200 450 263 450))
(connect D8:0 D9:0
(points 2 380 460 380 499))
(connect D4:1 D9:1
(points 8 209 120 230 120 230 150 200 150 200 480 250 480 250 510 283 510))
(connect D18:0 D10:0
(points 2 380 280 380 299))
(connect D4:1 D10:1
(points 8 209 120 230 120 230 150 200 150 200 330 240 330 240 310 249 310))
(connect D5:1 D11:0
(points 3 505 620 550 620 550 659))
(connect I1:1 D11:1
(points 4 -21 380 10 380 10 670 424 670))
(connect D6:1 D12:0
(points 3 485 360 650 360 650 389))
(connect D4:1 D12:1
(points 10 209 120 230 120 230 150 200 150 200 480 520 480 520 430 490 430 490
400 501 400))
(connect D19:0 D13:0
(points 2 380 220 380 229))
(connect D4:1 D13:1
(points 6 209 120 230 120 230 150 200 150 200 240 224 240))
(connect D5:0 D14:0
(points 2 380 645 380 689))
(connect D16:1 D15:0
(points 3 463 540 600 540 600 559))
(connect D9:0 D16:0
(points 2 380 520 380 535))
(connect D24:0 D17:0
(points 4 390 90 390 100 380 100 380 119))
(connect I1:1 D17:1
(points 6 -21 380 -30 380 -30 160 240 160 240 130 251 130))
(connect D13:0 D18:0
(points 2 380 250 380 259))
(connect D4:1 D18:1
(points 6 209 120 230 120 230 150 200 150 200 270 238 270))
(connect D23:0 D19:0
(points 2 380 190 380 199))
(connect I1:1 D19:1
(points 6 -21 380 -30 380 -30 160 210 160 210 210 223 210))
(connect D21:1 D20:1
(points 2 452 30 480 30))
(connect D21:2 D20:2
(points 2 452 50 480 50))
(connect D22:0 D21:0
(points 2 390 10 390 25))
(connect D17:0 D23:0
(points 2 380 140 380 169))
(connect D21:0 D24:0
(points 2 390 55 390 69))
(connect D0:1 O1:1
(points 4 809 220 830 220 830 120 869 120))
(connect D0:2 O2:1
(points 4 809 240 850 240 850 380 869 380))
(connect D2:1 O3:1
(points 4 401 740 830 740 830 640 869 640)))
(stackingOrder 8 15 16 10 11 6 12 5 0 3 4 18 20 21 22 7 23 19 1 24 2 14 17 9 13))))
(context 156
(properties
(name "BasicOtherVeryBeginStrategy")
(trigMode deg)
(nextID 32)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "Nada")
(lock constraints)
(optional yes)))
(deviceList
(device 6 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 9 EXITCONTEXT)
(device 16 CALL
(properties
(name "Call CanMove9765Forward")
(callFunc "CanMove9765Forward")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 20 CALL
(properties
(name "Call CanMoveLowPieceDownToWreckHavoc")
(callFunc "CanMoveLowPieceDownToWreckHavoc")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 29 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 30 IFTHENELSE
(properties
(name "first move?")
(cases 1 "moveNumber==1"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 31 CONTEXT
(properties
(name "Move piece in different zone")
(trigMode deg)
(nextID 24)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "move")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "opponent column")
(expr 1 "LastOpponentMove.to MOD 10"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 IFTHENELSE
(properties
(name "left, middle, or right?")
(cases 2 "c<=1" "c<=5"))
(interface
(input 1
(name "c")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "34, 35, 38, 39")
(expr 1 "[34, 35, 38, 39]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 FORMULA
(properties
(name "30, 31, 38, 39")
(expr 1 "[30, 31, 38, 39]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "30, 31, 34, 35")
(expr 1 "[30, 31, 34, 35]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 11 FORMULA
(properties
(name "preference order")
(expr 1 "[3, 4, 5, 6, 7, 9, 2, 1, 8, 0]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 13 FORMULA
(properties
(name "# pieces")
(expr 1 "totsize(order)"))
(interface
(input 1
(name "order")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORMULA
(properties
(name "piece weight")
(expr 1 "pref[i]"))
(interface
(input 1
(name "pref")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORCOUNT
(properties
(name "For 4")
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 17 IFTHENELSE
(properties
(name "piece @ loc?")
(cases 1 "WeightOfPiece[KnownBoard[loc]-1000]==w"))
(interface
(input 1
(name "w")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 18 FORMULA
(properties
(name "location")
(expr 1 "locs[j]"))
(interface
(input 1
(name "locs")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "j")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 21 EXITCONTEXT)
(device 22 FORMULA
(properties
(name "location + 10")
(expr 1 "loc+10"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 23 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(configuration
(connect D0:1 D1:1)
(connect D1:1 D2:0)
(connect D1:2 D3:0)
(connect D1:3 D4:0)
(connect D2:1 D5:1)
(connect D3:1 D5:2)
(connect D4:1 D5:3)
(connect D8:1 D7:1)
(connect D6:1 D8:1)
(connect D6:1 D9:1)
(connect D7:1 D9:2)
(connect D9:1 D10:0)
(connect D9:1 D11:1)
(connect D12:1 D11:2)
(connect D5:1 D12:1)
(connect D10:1 D12:2)
(connect D11:1 D13:0)
(connect D12:1 D13:1)
(connect D16:0 D14:0)
(connect D13:0 D15:0)
(connect D12:1 D15:1)
(connect D13:1 D16:1)
(connect D15:1 D16:2)
(connect D16:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1162 340)
(anchorPt -21 -5)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 119 16))
(open
(extent 230 32))
(terminals on)
(pinCenter 110 100))
(devCarrierFor 1
(active icon)
(icon
(extent 149 77))
(open
(extent 59 62))
(terminals on)
(pinCenter 270 100))
(devCarrierFor 7
(active icon)
(icon
(extent 96 16))
(open
(extent 130 32))
(terminals on)
(pinCenter 450 70))
(devCarrierFor 8
(active icon)
(icon
(extent 96 16))
(open
(extent 130 32))
(terminals on)
(pinCenter 450 110))
(devCarrierFor 9
(active icon)
(icon
(extent 96 16))
(open
(extent 130 32))
(terminals on)
(pinCenter 450 150))
(devCarrierFor 10
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 550 110))
(devCarrierFor 11
(active icon)
(icon
(extent 117 16))
(open
(extent 194 32))
(terminals on)
(pinCenter 110 230))
(devCarrierFor 12
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 310 230))
(devCarrierFor 13
(active icon)
(icon
(extent 58 16))
(open
(extent 108 32))
(terminals on)
(pinCenter 220 230))
(devCarrierFor 14
(active icon)
(icon
(extent 85 25))
(open
(extent 70 42))
(terminals on)
(pinCenter 430 230))
(devCarrierFor 16
(active icon)
(icon
(extent 68 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 560 230))
(devCarrierFor 17
(active icon)
(icon
(extent 90 25))
(open
(extent 302 53))
(terminals on)
(pinCenter 780 230))
(devCarrierFor 18
(active icon)
(icon
(extent 53 25))
(open
(extent 70 42))
(terminals on)
(pinCenter 670 220))
(devCarrierFor 19
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 910 90))
(devCarrierFor 21
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 1040 200))
(devCarrierFor 22
(active icon)
(icon
(extent 89 16))
(open
(extent 76 32))
(terminals on)
(pinCenter 910 150))
(devCarrierFor 23
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 1040 130))
(connect D0:1 D1:1
(points 2 172 100 193 100))
(connect D1:1 D2:0
(points 5 347 80 370 80 370 40 450 40 450 59))
(connect D1:2 D3:0
(points 5 347 100 370 100 370 90 450 90 450 99))
(connect D1:3 D4:0
(points 5 347 120 370 120 370 130 450 130 450 139))
(connect D2:1 D5:1
(points 4 500 70 520 70 520 100 533 100))
(connect D3:1 D5:2
(points 2 500 110 533 110))
(connect D4:1 D5:3
(points 4 500 150 520 150 520 120 533 120))
(connect D8:1 D7:1
(points 2 251 230 272 230))
(connect D6:1 D8:1
(points 2 171 230 188 230))
(connect D6:1 D9:1
(points 6 171 230 180 230 180 180 370 180 370 220 385 220))
(connect D7:1 D9:2
(points 4 347 230 370 230 370 240 385 240))
(connect D9:1 D10:0
(points 5 475 230 500 230 500 180 560 180 560 201))
(connect D9:1 D11:1
(points 6 475 230 500 230 500 180 720 180 720 220 732 220))
(connect D12:1 D11:2
(points 4 699 220 710 220 710 240 732 240))
(connect D5:1 D12:1
(points 4 567 110 620 110 620 210 641 210))
(connect D10:1 D12:2
(points 2 596 230 641 230))
(connect D11:1 D13:0
(points 5 827 220 840 220 840 60 910 60 910 79))
(connect D12:1 D13:1
(points 4 699 220 710 220 710 90 890 90))
(connect D16:0 D14:0
(points 2 1040 158 1040 189))
(connect D13:0 D15:0
(points 2 910 100 910 139))
(connect D12:1 D15:1
(points 4 699 220 710 220 710 150 863 150))
(connect D13:1 D16:1
(points 4 930 90 950 90 950 120 993 120))
(connect D15:1 D16:2
(points 4 957 150 970 150 970 140 993 140))
(connect D16:1 O1:1
(points 4 1087 130 1110 130 1110 174 1182 174)))
(stackingOrder 2 3 4 5 1 0 7 8 6 9 10 12 13 11 15 14 16))))
(configuration
(connect D5:1 D0:1)
(connect D4:0 D1:0)
(connect D0:0 D2:0)
(connect D6:2 D3:0)
(connect I1:1 D3:1)
(connect D3:0 D4:0)
(connect I1:1 D4:1)
(connect D3:1 D5:1)
(connect D4:1 D5:2)
(connect D7:1 D5:3)
(connect D6:1 D7:0)
(connect D0:1 O1:1)
(connect D0:2 O2:1)
(connect D1:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 695 340)
(anchorPt -154 -168)
(configuration
(devCarrierFor 6
(active icon)
(icon
(extent 74 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 720 330))
(devCarrierFor 8
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 360 430))
(devCarrierFor 9
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 720 370))
(devCarrierFor 16
(active icon)
(icon
(extent 189 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 360 320))
(devCarrierFor 20
(active icon)
(icon
(extent 306 16))
(open
(extent 282 53))
(terminals on)
(pinCenter 360 380))
(devCarrierFor 29
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 610 340))
(devCarrierFor 30
(active icon)
(icon
(extent 75 25))
(open
(extent 139 53))
(terminals on)
(pinCenter 260 240))
(devCarrierFor 31
(active icon)
(icon
(extent 194 25))
(terminals on)
(pinCenter 460 230))
(connect D5:1 D0:1
(points 4 627 340 650 340 650 330 680 330))
(connect D4:0 D1:0
(points 2 360 390 360 419))
(connect D0:0 D2:0
(points 2 720 345 720 359))
(connect D6:2 D3:0
(points 3 300 250 360 250 360 309))
(connect I1:1 D3:1
(points 4 154 337 160 337 160 320 263 320))
(connect D3:0 D4:0
(points 2 360 330 360 369))
(connect I1:1 D4:1
(points 4 154 337 170 337 170 380 204 380))
(connect D3:1 D5:1
(points 4 457 320 480 320 480 330 593 330))
(connect D4:1 D5:2
(points 4 515 380 540 380 540 340 593 340))
(connect D7:1 D5:3
(points 6 559 230 580 230 580 270 570 270 570 350 593 350))
(connect D6:1 D7:0
(points 5 300 230 320 230 320 190 460 190 460 215))
(connect D0:1 O1:1
(points 4 759 320 780 320 780 227 848 227))
(connect D0:2 O2:1
(points 4 759 340 803 340 803 337 848 337))
(connect D1:1 O3:1
(points 4 383 430 400 430 400 447 848 447)))
(stackingOrder 1 0 2 4 6 5 7 3))))
(context 141
(properties
(name "BorderDiagonals")
(trigMode deg)
(nextID 17)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "diags")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "top-left")
(expr 1 "(l MOD 10==0 ? -1 : l-11)"))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORMULA
(properties
(name "top-right")
(expr 1 "(l MOD 10==9 ? -1 : l-9)"))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "bottom-left")
(expr 1 "(l MOD 10==0 OR l>=90 ? -1 : l+9)"))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "bottom-right")
(expr 1 "(l MOD 10==9 OR l>=90 ? -1 : l+11)"))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 IFTHENELSE
(properties
(name "legal?")
(cases 1 "l[i]>-1"))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 13 VECTORCONCATENATOR
(interface
(input 1
(name "A"))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Array")
(tag "Array"))))
(device 14 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 15 FORMULA
(properties
(name "l[i]")
(expr 1 "l[i]"))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(configuration
(connect I1:1 D0:1)
(connect I1:1 D1:1)
(connect I1:1 D2:1)
(connect I1:1 D3:1)
(connect D5:1 D4:1)
(connect D6:1 D4:2)
(connect D0:1 D5:1)
(connect D1:1 D5:2)
(connect D2:1 D5:3)
(connect D3:1 D5:4)
(connect D4:1 D7:0)
(connect D5:1 D7:1)
(connect D6:1 D7:2)
(connect D7:1 D8:1)
(connect D6:0 D8:2)
(connect D8:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 749 423)
(anchorPt 11 3)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 48 16))
(open
(extent 192 32))
(terminals on)
(pinCenter 140 70))
(devCarrierFor 1
(active icon)
(icon
(extent 58 16))
(open
(extent 192 32))
(terminals on)
(pinCenter 140 110))
(devCarrierFor 2
(active icon)
(icon
(extent 73 14))
(open
(extent 251 32))
(terminals on)
(pinCenter 150 153))
(devCarrierFor 3
(active icon)
(icon
(extent 83 16))
(open
(extent 259 32))
(terminals on)
(pinCenter 150 190))
(devCarrierFor 8
(active icon)
(icon
(extent 42 25))
(open
(extent 67 53))
(terminals on)
(pinCenter 350 300))
(devCarrierFor 13
(active icon)
(icon
(extent 94 45))
(open
(extent 60 82))
(terminals on)
(pinCenter 290 120))
(devCarrierFor 14
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 160 310))
(devCarrierFor 15
(active icon)
(icon
(extent 24 25))
(open
(extent 72 42))
(terminals on)
(pinCenter 440 330))
(devCarrierFor 16
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 530 340))
(connect I1:1 D0:1
(points 6 -11 208 10 208 10 260 80 260 80 70 113 70))
(connect I1:1 D1:1
(points 6 -11 208 10 208 10 260 80 260 80 110 108 110))
(connect I1:1 D2:1
(points 6 -11 208 10 208 10 260 80 260 80 153 111 153))
(connect I1:1 D3:1
(points 6 -11 208 10 208 10 260 80 260 80 190 106 190))
(connect D5:1 D4:1
(points 6 339 120 360 120 360 170 320 170 320 290 326 290))
(connect D6:1 D4:2
(points 2 197 310 326 310))
(connect D0:1 D5:1
(points 4 166 70 190 70 190 100 240 100))
(connect D1:1 D5:2
(points 2 171 110 240 110))
(connect D2:1 D5:3
(points 4 189 153 200 153 200 120 240 120))
(connect D3:1 D5:4
(points 4 194 190 210 190 210 130 240 130))
(connect D4:1 D7:0
(points 3 373 290 440 290 440 315))
(connect D5:1 D7:1
(points 6 339 120 360 120 360 170 390 170 390 320 425 320))
(connect D6:1 D7:2
(points 4 197 310 310 310 310 340 425 340))
(connect D7:1 D8:1
(points 2 454 330 497 330))
(connect D6:0 D8:2
(points 5 160 338 160 370 470 370 470 350 497 350))
(connect D8:1 O1:1
(points 4 563 340 580 340 580 208 737 208)))
(stackingOrder 0 3 1 2 5 6 4 7 8))))
(context 115
(properties
(name "Can9GetToLocInTwoMovesColRow")
(trigMode deg)
(nextID 94)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "scoutLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "GoAdjacent")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 0 DECLVAR
(properties
(name "Declare Local \'currentLoc\'")
(scope con)
(globalName "currentLoc"))
(implementation
(value Int32
(data  0))))
(device 1 FORMULA
(properties
(name "set \'currentLoc\'")
(expr 1 "currentLoc = ourPieceLoc"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "destination = -1")
(expr 1 "destination = -1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORCOUNT
(properties
(name "For (18 MAX)")
(count 18))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "delta col, delta row")
(expr 1
"dc = (oppPieceLoc MOD 10)-(currentLoc MOD 10), (oppPieceLoc DIV 10)-(currentLoc DIV 10)"
))
(interface
(input 1
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dc")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 IFTHENELSE
(properties
(name "delta col != 0?")
(cases 1 "dc!=0"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 IFTHENELSE
(properties
(name "delta row != 0 ?")
(cases 1 "dr!=0"))
(interface
(input 1
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 DECLVAR
(properties
(name "Declare Local \'destination\'")
(scope con)
(globalName "destination"))
(implementation
(value Int32
(data  0))))
(device 14 FORMULA
(properties
(name "currentLoc +/- 1")
(expr 1 "currentLoc = currentLoc+(dc>0 ? 1 : -1)"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 FORMULA
(properties
(name "currentLoc +/- 10")
(expr 1 "currentLoc = currentLoc+(dr>0 ? 10 : -10)"))
(interface
(input 1
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 IFTHENELSE
(properties
(name "legal location?")
(cases 1
"(l==oppLoc) OR ( NOT (l==42 OR l==43 OR l==52 OR l==53 OR l==46 OR l==47 OR l==56 OR l==57) AND KnownBoard[l]==0)"
))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 22 BREAK)
(device 23 BREAK)
(device 27 FORMULA
(properties
(name "set destination (if unset)")
(expr 1
"destination = (destination==-1 ? (wasHorizontal AND GoAdjacent ? currentLoc-(Origdc>0 ? 1 : -1) : currentLoc) : destination)"
))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 31 FORMULA
(properties
(name "destination")
(expr 1 "destination"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 32 EXITCONTEXT)
(device 33 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 50 IFTHENELSE
(properties
(name "legal location?")
(cases 1
"(l==oppLoc) OR ( NOT (l==42 OR l==43 OR l==52 OR l==53 OR l==46 OR l==47 OR l==56 OR l==57) AND KnownBoard[l]==0)"
))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 69 FORMULA
(properties
(name "our piece")
(expr 1 "KnownBoard[ourPieceLoc]"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 72 FORMULA
(properties
(name "delta col, delta row")
(expr 1
"dc = (oppPieceLoc MOD 10)-(currentLoc MOD 10), (oppPieceLoc DIV 10)-(currentLoc DIV 10)"
))
(interface
(input 1
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dc")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 73 FORMULA
(properties
(name "set \'wasHorizontal\', \'wasVertical\', \'origDr\', \'origDc\'")
(expr 1
"wasHorizontal = (dr==0), wasVertical = (dc==0), origDr = dr, origDc = dc"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 74 DECLVAR
(properties
(name "Declare Local \'wasHorizontal\'")
(scope con)
(globalName "wasHorizontal"))
(implementation
(value Int32
(data  0))))
(device 75 DECLVAR
(properties
(name "Declare Local \'wasVertical\'")
(scope con)
(globalName "wasVertical"))
(implementation
(value Int32
(data  0))))
(device 76 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 77 IFTHENELSE
(properties
(name "was already vertical?")
(cases 1 "wasVertical"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 80 BREAK)
(device 82 FORMULA
(properties
(name "set destination (in unset)")
(expr 1
"destination = (destination==-1 ? currentLoc-(GoAdjacent ? (OrigDr>0 ? 10 : -10) : 0) : destination)"
))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 83 DECLVAR
(properties
(name "Declare Local \'OrigDr\'")
(scope con)
(globalName "origDr"))
(implementation
(value Int32
(data  0))))
(device 84 DECLVAR
(properties
(name "Declare Local \'OrigDc\'")
(scope con)
(globalName "origDc"))
(implementation
(value Int32
(data  0))))
(device 85 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 86 BREAK)
(device 88 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 89 IFTHENELSE
(properties
(name "was already horizontal?")
(cases 1 "wasHorizontal"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 90 IFTHENELSE
(properties
(name "Should we even be here?")
(cases 1 "(abs(origDr)+abs(origDc))!=1"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 91 EXITCONTEXT)
(device 92 DECLVAR
(properties
(name "Declare Local \'GoAdjacent\'")
(scope con)
(globalName "GoAdjacent"))
(implementation
(value Int32
(data  0))))
(device 93 FORMULA
(properties
(name "set \'GoAdjacent\'")
(expr 1 "GoAdjacent = go"))
(interface
(input 1
(name "Go")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D36:0 D1:0)
(connect I1:1 D1:1)
(connect D1:0 D2:0)
(connect D33:0 D3:0)
(connect D3:1 D4:0)
(connect I2:1 D4:1)
(connect D4:1 D5:1)
(connect D24:0 D6:0)
(connect D4:2 D6:1)
(connect D5:1 D8:0)
(connect D4:1 D8:1)
(connect D6:1 D9:0)
(connect D4:2 D9:1)
(connect D8:1 D10:1)
(connect I2:1 D10:2)
(connect D17:2 D11:0)
(connect D10:2 D12:0)
(connect D24:2 D13:0)
(connect D31:1 D14:0)
(connect D16:0 D15:0)
(connect I1:1 D16:1)
(connect D14:1 D16:2)
(connect D9:1 D17:1)
(connect I2:1 D17:2)
(connect I1:1 D18:1)
(connect D2:0 D19:0)
(connect I2:1 D19:1)
(connect D19:1 D20:1)
(connect D19:2 D20:2)
(connect D18:1 D23:1)
(connect D13:1 D23:2)
(connect D5:2 D24:0)
(connect D23:1 D25:0)
(connect D32:2 D26:0)
(connect D18:1 D29:1)
(connect D26:1 D29:2)
(connect D29:1 D30:0)
(connect D29:2 D31:1)
(connect D29:3 D31:2)
(connect D6:2 D32:0)
(connect D19:0 D33:0)
(connect D33:2 D34:0)
(connect I3:1 D36:1)
(connect D16:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1093 737)
(anchorPt -30 123)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 181 16))
(open
(extent 281 107))
(pinCenter 350 -30))
(devCarrierFor 1
(active icon)
(icon
(extent 106 16))
(open
(extent 251 35))
(terminals on)
(pinCenter 160 20))
(devCarrierFor 2
(active icon)
(icon
(extent 107 16))
(open
(extent 132 32))
(terminals on)
(pinCenter 160 50))
(devCarrierFor 3
(active icon)
(icon
(extent 92 52)
(iconImage "loop.icn"))
(open
(extent 128 32))
(pinCenter 160 250))
(devCarrierFor 4
(active icon)
(icon
(extent 129 25))
(open
(extent 627 40))
(terminals on)
(pinCenter 280 290))
(devCarrierFor 5
(active icon)
(icon
(extent 99 25))
(open
(extent 68 53))
(terminals on)
(pinCenter 440 190))
(devCarrierFor 6
(active icon)
(icon
(extent 107 25))
(open
(extent 73 53))
(terminals on)
(pinCenter 500 390))
(devCarrierFor 12
(active icon)
(icon
(extent 182 16))
(open
(extent 281 107))
(pinCenter 150 -60))
(devCarrierFor 14
(active icon)
(icon
(extent 111 16))
(open
(extent 284 32))
(terminals on)
(pinCenter 600 210))
(devCarrierFor 15
(active icon)
(icon
(extent 119 16))
(open
(extent 300 32))
(terminals on)
(pinCenter 700 410))
(devCarrierFor 19
(active icon)
(icon
(extent 100 25))
(open
(extent 828 53))
(terminals on)
(pinCenter 750 220))
(devCarrierFor 22
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 920 450))
(devCarrierFor 23
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 830 250))
(devCarrierFor 27
(active icon)
(icon
(extent 167 16))
(open
(extent 816 42))
(terminals on)
(pinCenter 560 330))
(devCarrierFor 31
(active icon)
(icon
(extent 75 16))
(open
(extent 103 32))
(terminals on)
(pinCenter 910 540))
(devCarrierFor 32
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 1020 590))
(devCarrierFor 33
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 1020 530))
(devCarrierFor 50
(active icon)
(icon
(extent 100 25))
(open
(extent 828 53))
(terminals on)
(pinCenter 850 420))
(devCarrierFor 69
(active icon)
(icon
(extent 64 16))
(open
(extent 208 39))
(terminals on)
(pinCenter 290 470))
(devCarrierFor 72
(active icon)
(icon
(extent 129 25))
(open
(extent 627 40))
(terminals on)
(pinCenter 160 90))
(devCarrierFor 73
(active icon)
(icon
(extent 338 25))
(open
(extent 483 42))
(terminals on)
(pinCenter 420 90))
(devCarrierFor 74
(active icon)
(icon
(extent 201 16))
(open
(extent 281 107))
(pinCenter 360 -60))
(devCarrierFor 75
(active icon)
(icon
(extent 184 16))
(open
(extent 281 107))
(pinCenter 160 -90))
(devCarrierFor 76
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 760 330))
(devCarrierFor 77
(active icon)
(icon
(extent 145 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 500 290))
(devCarrierFor 80
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 900 350))
(devCarrierFor 82
(active icon)
(icon
(extent 171 16))
(open
(extent 650 32))
(terminals on)
(pinCenter 510 520))
(devCarrierFor 83
(active icon)
(icon
(extent 152 16))
(open
(extent 281 107))
(pinCenter 340 0))
(devCarrierFor 84
(active icon)
(icon
(extent 155 16))
(open
(extent 281 107))
(pinCenter 340 30))
(devCarrierFor 85
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 720 510))
(devCarrierFor 86
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 830 550))
(devCarrierFor 88
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 900 500))
(devCarrierFor 89
(active icon)
(icon
(extent 162 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 500 470))
(devCarrierFor 90
(active icon)
(icon
(extent 177 25))
(open
(extent 220 53))
(terminals on)
(pinCenter 160 150))
(devCarrierFor 91
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 260 190))
(devCarrierFor 92
(active icon)
(icon
(extent 188 16))
(open
(extent 281 107))
(pinCenter 580 -60))
(devCarrierFor 93
(active icon)
(icon
(extent 113 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 160 -20))
(connect D36:0 D1:0
(points 2 160 -10 160 9))
(connect I1:1 D1:1
(points 4 30 5 40 5 40 20 104 20))
(connect D1:0 D2:0
(points 2 160 30 160 39))
(connect D33:0 D3:0
(points 2 160 165 160 221))
(connect D3:1 D4:0
(points 3 208 250 280 250 280 275))
(connect I2:1 D4:1
(points 6 30 245 50 245 50 300 190 300 190 290 213 290))
(connect D4:1 D5:1
(points 4 347 280 360 280 360 190 388 190))
(connect D24:0 D6:0
(points 2 500 305 500 375))
(connect D4:2 D6:1
(points 4 347 300 380 300 380 390 444 390))
(connect D5:1 D8:0
(points 3 492 180 600 180 600 199))
(connect D4:1 D8:1
(points 6 347 280 360 280 360 250 510 250 510 210 542 210))
(connect D6:1 D9:0
(points 5 556 380 570 380 570 370 700 370 700 399))
(connect D4:2 D9:1
(points 8 347 300 380 300 380 390 420 390 420 430 590 430 590 410 638 410))
(connect D8:1 D10:1
(points 2 658 210 697 210))
(connect I2:1 D10:2
(points 8 30 245 50 245 50 330 370 330 370 260 680 260 680 230 697 230))
(connect D17:2 D11:0
(points 3 902 430 920 430 920 439))
(connect D10:2 D12:0
(points 3 802 230 830 230 830 239))
(connect D24:2 D13:0
(points 5 575 300 590 300 590 310 560 310 560 319))
(connect D31:1 D14:0
(points 5 917 500 930 500 930 520 910 520 910 529))
(connect D16:0 D15:0
(points 2 1020 558 1020 579))
(connect I1:1 D16:1
(points 12 30 5 40 5 40 20 20 20 20 470 240 470 240 580 870 580 870 570 960 570
960 520 973 520))
(connect D14:1 D16:2
(points 2 950 540 973 540))
(connect D9:1 D17:1
(points 2 762 410 797 410))
(connect I2:1 D17:2
(points 12 30 245 50 245 50 330 370 330 370 260 680 260 680 280 940 280 940 380
780 380 780 430 797 430))
(connect I1:1 D18:1
(points 6 30 5 40 5 40 20 20 20 20 470 255 470))
(connect D2:0 D19:0
(points 2 160 60 160 75))
(connect I2:1 D19:1
(points 4 30 245 40 245 40 90 93 90))
(connect D19:1 D20:1
(points 2 227 80 248 80))
(connect D19:2 D20:2
(points 2 227 100 248 100))
(connect D18:1 D23:1
(points 8 324 470 340 470 340 440 580 440 580 380 660 380 660 320 667 320))
(connect D13:1 D23:2
(points 4 646 330 660 330 660 340 667 340))
(connect D5:2 D24:0
(points 3 492 200 500 200 500 275))
(connect D23:1 D25:0
(points 3 852 320 900 320 900 339))
(connect D32:2 D26:0
(points 5 583 480 590 480 590 500 510 500 510 509))
(connect D18:1 D29:1
(points 6 324 470 340 470 340 440 600 440 600 500 627 500))
(connect D26:1 D29:2
(points 2 598 520 627 520))
(connect D29:1 D30:0
(points 3 812 500 830 500 830 539))
(connect D29:2 D31:1
(points 4 812 510 840 510 840 490 883 490))
(connect D29:3 D31:2
(points 4 812 520 850 520 850 510 883 510))
(connect D6:2 D32:0
(points 5 556 400 570 400 570 420 500 420 500 455))
(connect D19:0 D33:0
(points 2 160 105 160 135))
(connect D33:2 D34:0
(points 3 251 160 260 160 260 179))
(connect I3:1 D36:1
(points 6 30 485 40 485 40 480 10 480 10 -20 101 -20))
(connect D16:1 O1:1
(points 4 1067 530 1090 530 1090 245 1122 245)))
(stackingOrder 14 15 2 1 0 19 18 21 27 28 20 4 5 8 12 6 9 17 11 25 31 29 30 33
34 24 32 3 35 22 7 36 13 26 16 10 23))))
(context 117
(properties
(name "Can9GetToLocInTwoMovesRowCol")
(trigMode deg)
(nextID 106)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "scoutLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "GoAdjacent")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 0 DECLVAR
(properties
(name "Declare Local \'currentLoc\'")
(scope con)
(globalName "currentLoc"))
(implementation
(value Int32
(data  0))))
(device 1 FORMULA
(properties
(name "set \'currentLoc\'")
(expr 1 "currentLoc = ourPieceLoc"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "destination = -1")
(expr 1 "destination = -1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORCOUNT
(properties
(name "For (18 MAX)")
(count 18))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "delta col, delta row")
(expr 1
"dc = (oppPieceLoc MOD 10)-(currentLoc MOD 10), (oppPieceLoc DIV 10)-(currentLoc DIV 10)"
))
(interface
(input 1
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dc")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 DECLVAR
(properties
(name "Declare Local \'destination\'")
(scope con)
(globalName "destination"))
(implementation
(value Int32
(data  0))))
(device 19 IFTHENELSE
(properties
(name "legal location?")
(cases 1
"(l==oppLoc) OR ( NOT (l==42 OR l==43 OR l==52 OR l==53 OR l==46 OR l==47 OR l==56 OR l==57) AND KnownBoard[l]==0)"
))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 22 BREAK)
(device 23 BREAK)
(device 27 FORMULA
(properties
(name "set destination (if unset)")
(expr 1
"destination = (destination==-1 ? (wasVertical AND GoAdjacent ? currentLoc-(Origdr>0 ? 10 : -10) : currentLoc) : destination)"
))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 31 FORMULA
(properties
(name "destination")
(expr 1 "destination"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 32 EXITCONTEXT)
(device 33 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 50 IFTHENELSE
(properties
(name "legal location?")
(cases 1
"(l==oppLoc) OR ( NOT (l==42 OR l==43 OR l==52 OR l==53 OR l==46 OR l==47 OR l==56 OR l==57) AND KnownBoard[l]==0)"
))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 69 FORMULA
(properties
(name "our piece")
(expr 1 "KnownBoard[ourPieceLoc]"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 72 FORMULA
(properties
(name "delta col, delta row")
(expr 1
"dc = (oppPieceLoc MOD 10)-(currentLoc MOD 10), (oppPieceLoc DIV 10)-(currentLoc DIV 10)"
))
(interface
(input 1
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dc")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 73 FORMULA
(properties
(name "set \'wasHorizontal\', \'wasVertical\', \'origDr\', \'origDc\'")
(expr 1
"wasHorizontal = (dr==0), wasVertical = (dc==0), origDr = dr, origDc = dc"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 74 DECLVAR
(properties
(name "Declare Local \'wasHorizontal\'")
(scope con)
(globalName "wasHorizontal"))
(implementation
(value Int32
(data  0))))
(device 75 DECLVAR
(properties
(name "Declare Local \'wasVertical\'")
(scope con)
(globalName "wasVertical"))
(implementation
(value Int32
(data  0))))
(device 76 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 80 BREAK)
(device 82 FORMULA
(properties
(name "set destination (if unset)")
(expr 1
"destination = (destination==-1 ? currentLoc-(GoAdjacent ? (OrigDc>0 ? 1 : -1) : 0) : destination)"
))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 83 DECLVAR
(properties
(name "Declare Local \'OrigDr\'")
(scope con)
(globalName "origDr"))
(implementation
(value Int32
(data  0))))
(device 84 DECLVAR
(properties
(name "Declare Local \'OrigDc\'")
(scope con)
(globalName "origDc"))
(implementation
(value Int32
(data  0))))
(device 85 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 86 BREAK)
(device 88 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 90 IFTHENELSE
(properties
(name "Should we even be here?")
(cases 1 "(abs(origDr)+abs(origDc))!=1"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 91 EXITCONTEXT)
(device 98 IFTHENELSE
(properties
(name "delta row != 0 ?")
(cases 1 "dr!=0"))
(interface
(input 1
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 99 FORMULA
(properties
(name "currentLoc +/- 10")
(expr 1 "currentLoc = currentLoc+(dr>0 ? 10 : -10)"))
(interface
(input 1
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 100 IFTHENELSE
(properties
(name "was already horizontal?")
(cases 1 "wasHorizontal"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 101 FORMULA
(properties
(name "currentLoc +/- 1")
(expr 1 "currentLoc = currentLoc+(dc>0 ? 1 : -1)"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 102 IFTHENELSE
(properties
(name "delta col != 0?")
(cases 1 "dc!=0"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 103 IFTHENELSE
(properties
(name "was already vertical?")
(cases 1 "wasVertical"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 104 DECLVAR
(properties
(name "Declare Local \'GoAdjacent\'")
(scope con)
(globalName "GoAdjacent"))
(implementation
(value Int32
(data  0))))
(device 105 FORMULA
(properties
(name "set \'GoAdjacent\'")
(expr 1 "GoAdjacent = go"))
(interface
(input 1
(name "Go")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D36:0 D1:0)
(connect I1:1 D1:1)
(connect D1:0 D2:0)
(connect D27:0 D3:0)
(connect D3:1 D4:0)
(connect I2:1 D4:1)
(connect D30:1 D6:1)
(connect I2:1 D6:2)
(connect D13:2 D7:0)
(connect D6:2 D8:0)
(connect D31:2 D9:0)
(connect D26:1 D10:0)
(connect D12:0 D11:0)
(connect I1:1 D12:1)
(connect D10:1 D12:2)
(connect D32:1 D13:1)
(connect I2:1 D13:2)
(connect I1:1 D14:1)
(connect D2:0 D15:0)
(connect I2:1 D15:1)
(connect D15:1 D16:1)
(connect D15:2 D16:2)
(connect D14:1 D19:1)
(connect D9:1 D19:2)
(connect D19:1 D20:0)
(connect D34:2 D21:0)
(connect D14:1 D24:1)
(connect D21:1 D24:2)
(connect D24:1 D25:0)
(connect D24:2 D26:1)
(connect D24:3 D26:2)
(connect D15:0 D27:0)
(connect D27:2 D28:0)
(connect D4:2 D29:1)
(connect D29:1 D30:0)
(connect D4:2 D30:1)
(connect D29:2 D31:0)
(connect D33:1 D32:0)
(connect D4:1 D32:1)
(connect D31:0 D33:0)
(connect D4:1 D33:1)
(connect D33:2 D34:0)
(connect I3:1 D36:1)
(connect D12:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1093 737)
(anchorPt -33 107)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 181 16))
(open
(extent 281 107))
(pinCenter 350 -30))
(devCarrierFor 1
(active icon)
(icon
(extent 106 16))
(open
(extent 251 35))
(terminals on)
(pinCenter 160 20))
(devCarrierFor 2
(active icon)
(icon
(extent 107 16))
(open
(extent 132 32))
(terminals on)
(pinCenter 160 50))
(devCarrierFor 3
(active icon)
(icon
(extent 92 52)
(iconImage "loop.icn"))
(open
(extent 128 32))
(pinCenter 160 240))
(devCarrierFor 4
(active icon)
(icon
(extent 129 25))
(open
(extent 627 40))
(terminals on)
(pinCenter 280 290))
(devCarrierFor 12
(active icon)
(icon
(extent 182 16))
(open
(extent 281 107))
(pinCenter 140 -50))
(devCarrierFor 19
(active icon)
(icon
(extent 100 25))
(open
(extent 828 53))
(terminals on)
(pinCenter 750 220))
(devCarrierFor 22
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 920 450))
(devCarrierFor 23
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 830 250))
(devCarrierFor 27
(active icon)
(icon
(extent 167 16))
(open
(extent 815 42))
(terminals on)
(pinCenter 570 340))
(devCarrierFor 31
(active icon)
(icon
(extent 75 16))
(open
(extent 103 32))
(terminals on)
(pinCenter 910 540))
(devCarrierFor 32
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 1020 590))
(devCarrierFor 33
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 1020 530))
(devCarrierFor 50
(active icon)
(icon
(extent 100 25))
(open
(extent 828 53))
(terminals on)
(pinCenter 850 420))
(devCarrierFor 69
(active icon)
(icon
(extent 64 16))
(open
(extent 208 39))
(terminals on)
(pinCenter 290 470))
(devCarrierFor 72
(active icon)
(icon
(extent 129 25))
(open
(extent 627 40))
(terminals on)
(pinCenter 160 90))
(devCarrierFor 73
(active icon)
(icon
(extent 338 25))
(open
(extent 483 42))
(terminals on)
(pinCenter 420 90))
(devCarrierFor 74
(active icon)
(icon
(extent 201 16))
(open
(extent 281 107))
(pinCenter 360 -60))
(devCarrierFor 75
(active icon)
(icon
(extent 184 16))
(open
(extent 281 107))
(pinCenter 160 -80))
(devCarrierFor 76
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 770 330))
(devCarrierFor 80
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 900 350))
(devCarrierFor 82
(active icon)
(icon
(extent 167 16))
(open
(extent 636 32))
(terminals on)
(pinCenter 540 530))
(devCarrierFor 83
(active icon)
(icon
(extent 152 16))
(open
(extent 281 107))
(pinCenter 340 0))
(devCarrierFor 84
(active icon)
(icon
(extent 155 16))
(open
(extent 281 107))
(pinCenter 340 30))
(devCarrierFor 85
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 720 510))
(devCarrierFor 86
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 830 550))
(devCarrierFor 88
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 900 500))
(devCarrierFor 90
(active icon)
(icon
(extent 177 25))
(open
(extent 220 53))
(terminals on)
(pinCenter 160 150))
(devCarrierFor 91
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 260 190))
(devCarrierFor 98
(active icon)
(icon
(extent 107 25))
(open
(extent 73 53))
(terminals on)
(pinCenter 440 200))
(devCarrierFor 99
(active icon)
(icon
(extent 119 16))
(open
(extent 300 32))
(terminals on)
(pinCenter 600 210))
(devCarrierFor 100
(active icon)
(icon
(extent 162 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 490 300))
(devCarrierFor 101
(active icon)
(icon
(extent 111 16))
(open
(extent 284 32))
(terminals on)
(pinCenter 710 410))
(devCarrierFor 102
(active icon)
(icon
(extent 99 25))
(open
(extent 68 53))
(terminals on)
(pinCenter 500 390))
(devCarrierFor 103
(active icon)
(icon
(extent 145 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 520 470))
(devCarrierFor 104
(active icon)
(icon
(extent 188 16))
(open
(extent 281 107))
(pinCenter 580 -60))
(devCarrierFor 105
(active icon)
(icon
(extent 113 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 160 -10))
(connect D36:0 D1:0
(points 2 160 0 160 9))
(connect I1:1 D1:1
(points 4 33 21 68 21 68 20 104 20))
(connect D1:0 D2:0
(points 2 160 30 160 39))
(connect D27:0 D3:0
(points 2 160 165 160 211))
(connect D3:1 D4:0
(points 3 208 240 280 240 280 275))
(connect I2:1 D4:1
(points 4 33 261 40 261 40 290 213 290))
(connect D30:1 D6:1
(points 2 662 210 697 210))
(connect I2:1 D6:2
(points 8 33 261 40 261 40 330 370 330 370 270 680 270 680 230 697 230))
(connect D13:2 D7:0
(points 3 902 430 920 430 920 439))
(connect D6:2 D8:0
(points 3 802 230 830 230 830 239))
(connect D31:2 D9:0
(points 2 573 310 570 329))
(connect D26:1 D10:0
(points 5 917 500 930 500 930 520 910 520 910 529))
(connect D12:0 D11:0
(points 2 1020 558 1020 579))
(connect I1:1 D12:1
(points 12 33 21 40 21 40 30 30 30 30 470 240 470 240 580 870 580 870 570 960
570 960 520 973 520))
(connect D10:1 D12:2
(points 2 950 540 973 540))
(connect D32:1 D13:1
(points 2 768 410 797 410))
(connect I2:1 D13:2
(points 10 33 261 40 261 40 330 370 330 370 270 650 270 650 370 790 370 790 430
797 430))
(connect I1:1 D14:1
(points 6 33 21 40 21 40 30 30 30 30 470 255 470))
(connect D2:0 D15:0
(points 2 160 60 160 75))
(connect I2:1 D15:1
(points 4 33 261 50 261 50 90 93 90))
(connect D15:1 D16:1
(points 2 227 80 248 80))
(connect D15:2 D16:2
(points 2 227 100 248 100))
(connect D14:1 D19:1
(points 8 324 470 340 470 340 440 620 440 620 380 660 380 660 320 677 320))
(connect D9:1 D19:2
(points 2 656 340 677 340))
(connect D19:1 D20:0
(points 3 862 320 900 320 900 339))
(connect D34:2 D21:0
(points 5 595 480 610 480 610 500 540 500 540 519))
(connect D14:1 D24:1
(points 6 324 470 340 470 340 440 620 440 620 500 627 500))
(connect D21:1 D24:2
(points 2 626 530 627 520))
(connect D24:1 D25:0
(points 3 812 500 830 500 830 539))
(connect D24:2 D26:1
(points 4 812 510 840 510 840 490 883 490))
(connect D24:3 D26:2
(points 4 812 520 850 520 850 510 883 510))
(connect D15:0 D27:0
(points 2 160 105 160 135))
(connect D27:2 D28:0
(points 3 251 160 260 160 260 179))
(connect D4:2 D29:1
(points 4 347 300 360 300 360 200 384 200))
(connect D29:1 D30:0
(points 5 496 190 520 190 520 180 600 180 600 199))
(connect D4:2 D30:1
(points 6 347 300 360 300 360 250 530 250 530 210 538 210))
(connect D29:2 D31:0
(points 5 496 210 520 210 520 240 490 240 490 285))
(connect D33:1 D32:0
(points 7 552 380 570 380 570 390 670 390 670 380 710 380 710 399))
(connect D4:1 D32:1
(points 6 347 280 380 280 380 430 570 430 570 410 652 410))
(connect D31:0 D33:0
(points 4 490 315 490 360 500 360 500 375))
(connect D4:1 D33:1
(points 4 347 280 380 280 380 390 448 390))
(connect D33:2 D34:0
(points 5 552 400 560 400 560 420 520 420 520 455))
(connect I3:1 D36:1
(points 8 33 501 60 501 60 250 40 250 40 80 50 80 50 -10 101 -10))
(connect D12:1 O1:1
(points 4 1067 530 1090 530 1090 261 1125 261)))
(stackingOrder 10 11 12 2 1 0 15 14 17 22 23 16 4 8 13 7 20 26 24 25 27 28 29 30
6 33 32 34 3 35 36 18 5 31 19 21 9))))
(context 98
(properties
(name "CanAggressivelyPursuePiece")
(trigMode deg)
(nextID 23)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CALL
(properties
(name "Call OrphanedOpponentPieces")
(callFunc "OrphanedOpponentPieces")
(parmMode rev30))
(interface
(output 1
(name "orphanedPieceLocations")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "# pieces")
(expr 1 "totSize(pieceLocations)"))
(interface
(input 1
(name "pieceLocations")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 12 FORMULA
(properties
(name "orphan loc")
(expr 1 "orphans[i]"))
(interface
(input 1
(name "orphans")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 20 CALL
(properties
(name "Call ClosestPieceThatBeatsMove")
(callFunc "ClosestPieceThatBeatsMove")
(parmMode rev30))
(interface
(input 1
(name "opponentPieceLocation")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Move")
(lock name constraints)
(optional yes))))
(device 21 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 22 EXITCONTEXT)
(configuration
(connect D0:1 D1:1)
(connect D1:1 D2:1)
(connect D0:1 D3:1)
(connect D2:1 D3:2)
(connect D3:1 D4:1)
(connect D4:1 D5:1)
(connect D5:0 D6:0)
(connect D5:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1001 234)
(anchorPt 17 76)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 216 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 130 50))
(devCarrierFor 2
(active icon)
(icon
(extent 58 16))
(open
(extent 181 34))
(terminals on)
(pinCenter 290 50))
(devCarrierFor 3
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 380 50))
(devCarrierFor 12
(active icon)
(icon
(extent 73 25))
(open
(extent 108 45))
(terminals on)
(pinCenter 500 40))
(devCarrierFor 20
(active icon)
(icon
(extent 229 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 680 40))
(devCarrierFor 21
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 860 40))
(devCarrierFor 22
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 860 90))
(connect D0:1 D1:1
(points 2 240 50 258 50))
(connect D1:1 D2:1
(points 2 321 50 342 50))
(connect D0:1 D3:1
(points 6 240 50 250 50 250 0 440 0 440 30 461 30))
(connect D2:1 D3:2
(points 2 417 50 461 50))
(connect D3:1 D4:1
(points 2 539 40 563 40))
(connect D4:1 D5:1
(points 2 797 40 840 40))
(connect D5:0 D6:0
(points 2 860 50 860 79))
(connect D5:1 O1:1
(points 4 880 40 900 40 900 40 983 40)))
(stackingOrder 1 2 3 5 6 0 4))))
(context 152
(properties
(name "CanFixClog")
(trigMode deg)
(nextID 34)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "move")
(lock constraints)
(optional yes)))
(deviceList
(device 3 IFTHENELSE
(properties
(name "down square open?")
(cases 1 "KnownBoard[loc+10]==0"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 IFTHENELSE
(properties
(name "diag down square open?")
(cases 1 "KnownBoard[loc+11]==0"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "piece, dest")
(expr 1 "p = KnownBoard[loc], loc+10"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 8 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 9 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 10 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 11 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(output 1
(name "Data"))))
(device 12 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 13 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 14 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 15 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "piece, dest")
(expr 1 "p = KnownBoard[loc+1], loc+11"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 FORMULA
(properties
(name "loc+1")
(expr 1 "loc+1"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 IFTHENELSE
(properties
(name "down square unknown?")
(cases 1 "KnownBoard[loc+10]<0"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 20 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 21 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 22 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 23 FORMULA
(properties
(name "loc+10")
(expr 1 "loc+10"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 24 IFTHENELSE
(properties
(name "diag down square unknown?")
(cases 1 "KnownBoard[loc+11]<0"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 25 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 27 FORMULA
(properties
(name "loc+11")
(expr 1 "loc+11"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 29 FORMULA
(properties
(name "loc+1")
(expr 1 "loc+1"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 30 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 31 FORMULA
(properties
(name "loc+10")
(expr 1 "loc+10"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 32 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 33 LITERALCONSTANT
(properties
(name "Text"))
(interface
(output 1
(name "Text")
(lock name constraints)))
(implementation
(value Text
(data  "KAMIKAZE!!!!"))
(initValue Text
(data  ""))))
(configuration
(connect I1:1 D0:1)
(connect D5:1 D1:0)
(connect I1:1 D1:1)
(connect D3:1 D2:1)
(connect D3:2 D2:2)
(connect D0:1 D3:0)
(connect I1:1 D3:1)
(connect D2:2 D4:1)
(connect D2:3 D4:2)
(connect D0:2 D5:1)
(connect D2:1 D5:2)
(connect D4:1 D6:0)
(connect D3:2 D6:1)
(connect I1:1 D7:1)
(connect D6:1 D7:2)
(connect D7:1 D8:1)
(connect D9:1 D8:2)
(connect D17:1 D8:3)
(connect D21:1 D8:4)
(connect D24:1 D8:5)
(connect D14:1 D9:1)
(connect D10:1 D9:2)
(connect D14:0 D10:0)
(connect D13:2 D10:1)
(connect D12:2 D11:1)
(connect D12:3 D11:2)
(connect D13:1 D12:1)
(connect D13:2 D12:2)
(connect D1:1 D13:0)
(connect I1:1 D13:1)
(connect D11:1 D14:0)
(connect I1:1 D14:1)
(connect D16:1 D15:0)
(connect I1:1 D15:1)
(connect D12:1 D16:1)
(connect D1:2 D16:2)
(connect D18:1 D17:1)
(connect D19:1 D17:2)
(connect D15:1 D18:0)
(connect I1:1 D18:1)
(connect D18:0 D19:0)
(connect I1:1 D19:1)
(connect D15:2 D20:0)
(connect I1:1 D20:1)
(connect D23:1 D21:1)
(connect D22:1 D21:2)
(connect D23:0 D22:0)
(connect I1:1 D22:1)
(connect D20:1 D23:0)
(connect I1:1 D23:1)
(connect D26:1 D24:1)
(connect D25:1 D24:2)
(connect D26:0 D25:0)
(connect I1:1 D25:1)
(connect D27:1 D26:0)
(connect I1:1 D26:1)
(connect D20:2 D27:0)
(connect D8:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1048 629)
(anchorPt 13 4)
(configuration
(devCarrierFor 3
(active icon)
(icon
(extent 137 25))
(open
(extent 186 53))
(terminals on)
(pinCenter 100 40))
(devCarrierFor 4
(active icon)
(icon
(extent 171 25))
(open
(extent 186 53))
(terminals on)
(pinCenter 140 180))
(devCarrierFor 5
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 440 50))
(devCarrierFor 6
(active icon)
(icon
(extent 75 25))
(open
(extent 214 42))
(terminals on)
(pinCenter 280 50))
(devCarrierFor 7
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 580 60))
(devCarrierFor 8
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 180 120))
(devCarrierFor 9
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 670 120))
(devCarrierFor 10
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 800 110))
(devCarrierFor 11
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 950 310))
(devCarrierFor 12
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 830 250))
(devCarrierFor 13
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 720 270))
(devCarrierFor 14
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 630 210))
(devCarrierFor 15
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 490 200))
(devCarrierFor 16
(active icon)
(icon
(extent 75 25))
(open
(extent 230 42))
(terminals on)
(pinCenter 340 200))
(devCarrierFor 18
(active icon)
(icon
(extent 38 16))
(open
(extent 72 32))
(terminals on)
(pinCenter 720 230))
(devCarrierFor 19
(active icon)
(icon
(extent 163 25))
(open
(extent 186 53))
(terminals on)
(pinCenter 140 320))
(devCarrierFor 20
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 200 250))
(devCarrierFor 21
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 840 390))
(devCarrierFor 22
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 690 370))
(devCarrierFor 23
(active icon)
(icon
(extent 46 16))
(open
(extent 76 32))
(terminals on)
(pinCenter 690 410))
(devCarrierFor 24
(active icon)
(icon
(extent 198 25))
(open
(extent 186 53))
(terminals on)
(pinCenter 140 400))
(devCarrierFor 25
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 840 480))
(devCarrierFor 27
(active icon)
(icon
(extent 46 16))
(open
(extent 76 32))
(terminals on)
(pinCenter 690 500))
(devCarrierFor 29
(active icon)
(icon
(extent 38 16))
(open
(extent 72 32))
(terminals on)
(pinCenter 690 460))
(devCarrierFor 30
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 830 570))
(devCarrierFor 31
(active icon)
(icon
(extent 46 16))
(open
(extent 76 32))
(terminals on)
(pinCenter 680 590))
(devCarrierFor 32
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 680 550))
(devCarrierFor 33
(active open)
(icon)
(open
(extent 194 30))
(pinCenter 150 540))
(connect I1:1 D0:1
(points 4 -13 310 10 310 10 40 29 40))
(connect D5:1 D1:0
(points 5 197 120 220 120 220 150 140 150 140 165))
(connect I1:1 D1:1
(points 4 -13 310 10 310 10 180 52 180))
(connect D3:1 D2:1
(points 2 320 40 347 40))
(connect D3:2 D2:2
(points 2 320 60 347 60))
(connect D0:1 D3:0
(points 5 171 30 190 30 190 20 280 20 280 35))
(connect I1:1 D3:1
(points 8 -13 310 10 310 10 160 240 160 240 90 220 90 220 50 240 50))
(connect D2:2 D4:1
(points 2 532 50 563 50))
(connect D2:3 D4:2
(points 4 532 60 540 60 540 70 563 70))
(connect D0:2 D5:1
(points 6 171 50 190 50 190 80 150 80 150 110 163 110))
(connect D2:1 D5:2
(points 8 532 40 540 40 540 10 210 10 210 90 140 90 140 130 163 130))
(connect D4:1 D6:0
(points 3 597 60 670 60 670 109))
(connect D3:2 D6:1
(points 4 320 60 340 60 340 120 650 120))
(connect I1:1 D7:1
(points 8 -13 310 10 310 10 160 240 160 240 150 710 150 710 100 753 100))
(connect D6:1 D7:2
(points 2 690 120 753 120))
(connect D7:1 D8:1
(points 4 847 110 910 110 910 290 933 290))
(connect D9:1 D8:2
(points 4 877 250 900 250 900 300 933 300))
(connect D17:1 D8:3
(points 4 887 390 900 390 900 310 933 310))
(connect D21:1 D8:4
(points 4 887 480 910 480 910 320 933 320))
(connect D24:1 D8:5
(points 4 877 570 920 570 920 330 933 330))
(connect D14:1 D9:1
(points 4 741 230 760 230 760 240 783 240))
(connect D10:1 D9:2
(points 4 740 270 760 270 760 260 783 260))
(connect D14:0 D10:0
(points 2 720 240 720 259))
(connect D13:2 D10:1
(points 4 380 210 390 210 390 270 700 270))
(connect D12:2 D11:1
(points 2 582 200 613 200))
(connect D12:3 D11:2
(points 4 582 210 590 210 590 220 613 220))
(connect D13:1 D12:1
(points 2 380 190 397 190))
(connect D13:2 D12:2
(points 2 380 210 397 210))
(connect D1:1 D13:0
(points 3 228 170 340 170 340 185))
(connect I1:1 D13:1
(points 6 -13 310 10 310 10 220 250 220 250 200 300 200))
(connect D11:1 D14:0
(points 5 647 210 680 210 680 200 720 200 720 219))
(connect I1:1 D14:1
(points 8 -13 310 10 310 10 160 240 160 240 150 670 150 670 230 698 230))
(connect D16:1 D15:0
(points 5 217 250 240 250 240 290 140 290 140 305))
(connect I1:1 D15:1
(points 4 -13 310 10 310 10 320 56 320))
(connect D12:1 D16:1
(points 8 582 190 590 190 590 160 280 160 280 210 170 210 170 240 183 240))
(connect D1:2 D16:2
(points 6 228 190 240 190 240 230 160 230 160 260 183 260))
(connect D18:1 D17:1
(points 4 710 370 730 370 730 380 793 380))
(connect D19:1 D17:2
(points 4 715 410 740 410 740 400 793 400))
(connect D15:1 D18:0
(points 3 224 310 690 310 690 359))
(connect I1:1 D18:1
(points 4 -13 310 10 310 10 370 670 370))
(connect D18:0 D19:0
(points 2 690 380 690 399))
(connect I1:1 D19:1
(points 6 -13 310 10 310 10 370 630 370 630 410 664 410))
(connect D15:2 D20:0
(points 5 224 330 240 330 240 360 140 360 140 385))
(connect I1:1 D20:1
(points 4 -13 310 10 310 10 400 38 400))
(connect D23:1 D21:1
(points 4 711 460 730 460 730 470 793 470))
(connect D22:1 D21:2
(points 4 715 500 740 500 740 490 793 490))
(connect D23:0 D22:0
(points 2 690 470 690 489))
(connect I1:1 D22:1
(points 8 -13 310 10 310 10 370 630 370 630 410 640 410 640 500 664 500))
(connect D20:1 D23:0
(points 5 241 390 260 390 260 440 690 440 690 449))
(connect I1:1 D23:1
(points 8 -13 310 10 310 10 370 630 370 630 410 640 410 640 460 668 460))
(connect D26:1 D24:1
(points 4 700 550 720 550 720 560 783 560))
(connect D25:1 D24:2
(points 4 705 590 730 590 730 580 783 580))
(connect D26:0 D25:0
(points 2 680 560 680 579))
(connect I1:1 D25:1
(points 10 -13 310 10 310 10 370 630 370 630 410 640 410 640 550 630 550 630 590
654 590))
(connect D27:1 D26:0
(points 5 249 540 270 540 270 530 680 530 680 539))
(connect I1:1 D26:1
(points 8 -13 310 10 310 10 370 630 370 630 410 640 410 640 550 660 550))
(connect D20:2 D27:0
(points 5 241 410 250 410 250 440 150 440 150 504))
(connect D8:1 O1:1
(points 4 967 310 990 310 990 310 1034 310)))
(stackingOrder 0 3 2 4 5 6 10 11 12 1 13 14 9 16 15 17 18 19 20 21 23 22 8 24 25
26 27 7))))
(context 118
(properties
(name "CanGet9ToLocQuickly")
(trigMode deg)
(nextID 12)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 2 CALL
(properties
(name "Call MyScoutLocations")
(callFunc "MyScoutLocations")
(parmMode rev30))
(interface
(output 1
(name "scouts")
(lock name constraints)
(optional yes))))
(device 3 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "# scouts")
(expr 1 "totsize(scouts)"))
(interface
(input 1
(name "scouts")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "a scout")
(expr 1 "scouts[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "scouts")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 CONTEXT
(properties
(name "CheckPossibilities")
(trigMode deg)
(nextID 22)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "scoutLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "GotOne")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CALL
(properties
(name "Call Can9GetToLocInTwoMovesColRow")
(callFunc "Can9GetToLocInTwoMovesColRow")
(parmMode rev30))
(interface
(input 1
(name "scoutLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "GoAdjacent")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 1 CALL
(properties
(name "Call Can9GetToLocInTwoMovesRowCol")
(callFunc "Can9GetToLocInTwoMovesRowCol")
(parmMode rev30))
(interface
(input 1
(name "scoutLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "GoAdjacent")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "PossibleOppFlagPositions")
(expr 1 "PossibleOppFlagPositions"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "# positions")
(expr 1 "totsize(positions)"))
(interface
(input 1
(name "positions")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 5 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 6 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 7 EXITCONTEXT)
(device 8 NOTE
(properties
(name "Comment")
(text2 7 "This is a VERY EXPENSIVE " "FUNCTION.  It should only"
"be called when the number of" "scouts is low and the number"
"of possible flag positions is" "low (or this is running on" "a Cray).")))
(device 9 FORMULA
(properties
(name "Position")
(expr 1 "positions[i]"))
(interface
(input 1
(name "positions")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 CALL
(properties
(name "Call GoodSteppingStoneLocations")
(callFunc "GoodSteppingStoneLocations")
(parmMode rev30))
(interface
(output 1
(name "GoodLocations")
(lock name constraints)
(optional yes))))
(device 11 CONSTANT
(properties
(name "Go Adjacent"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 15 CALL
(properties
(name "Call Can9GetToLocInTwoMovesRowCol")
(callFunc "Can9GetToLocInTwoMovesRowCol")
(parmMode rev30))
(interface
(input 1
(name "scoutLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "GoAdjacent")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 16 CALL
(properties
(name "Call Can9GetToLocInTwoMovesColRow")
(callFunc "Can9GetToLocInTwoMovesColRow")
(parmMode rev30))
(interface
(input 1
(name "scoutLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "GoAdjacent")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 17 FORMULA
(properties
(name "Position")
(expr 1 "positions[i]"))
(interface
(input 1
(name "positions")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 CONSTANT
(properties
(name "Go To"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 19 FORMULA
(properties
(name "# positions")
(expr 1 "totsize(positions)"))
(interface
(input 1
(name "positions")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 20 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 21 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I1:1 D0:1)
(connect D9:1 D0:2)
(connect D11:1 D0:3)
(connect D0:0 D1:0)
(connect I1:1 D1:1)
(connect D9:1 D1:2)
(connect D11:1 D1:3)
(connect D2:1 D3:1)
(connect D3:1 D4:1)
(connect D18:2 D5:0)
(connect D6:1 D5:1)
(connect D0:1 D6:1)
(connect D1:1 D6:2)
(connect D13:1 D6:3)
(connect D12:1 D6:4)
(connect D5:0 D7:0)
(connect D2:1 D9:1)
(connect D4:1 D9:2)
(connect D4:0 D10:0)
(connect D13:0 D12:0)
(connect I1:1 D12:1)
(connect D14:1 D12:2)
(connect D15:1 D12:3)
(connect I1:1 D13:1)
(connect D14:1 D13:2)
(connect D15:1 D13:3)
(connect D10:1 D14:1)
(connect D17:1 D14:2)
(connect D10:1 D16:1)
(connect D16:1 D17:1)
(connect D6:1 D18:1)
(connect D5:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1138 563)
(anchorPt -22 -26)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 276 34))
(open
(extent 272 63))
(terminals on)
(pinCenter 750 210))
(devCarrierFor 1
(active icon)
(icon
(extent 276 34))
(open
(extent 302 58))
(terminals on)
(pinCenter 750 280))
(devCarrierFor 2
(active icon)
(icon
(extent 181 16))
(open
(extent 199 32))
(terminals on)
(pinCenter 130 200))
(devCarrierFor 3
(active icon)
(icon
(extent 74 16))
(open
(extent 145 38))
(terminals on)
(pinCenter 300 200))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 410 200))
(devCarrierFor 5
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 1050 290))
(devCarrierFor 6
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 970 290))
(devCarrierFor 7
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 1050 350))
(devCarrierFor 8
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 252 114)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 950 110))
(devCarrierFor 9
(active icon)
(icon
(extent 55 25))
(open
(extent 101 53))
(terminals on)
(pinCenter 500 230))
(devCarrierFor 10
(active icon)
(icon
(extent 238 16))
(open
(extent 239 55))
(terminals on)
(pinCenter 160 310))
(devCarrierFor 11
(active icon)
(icon
(extent 85 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 510 190))
(devCarrierFor 15
(active icon)
(icon
(extent 276 34))
(open
(extent 302 58))
(terminals on)
(pinCenter 770 410))
(devCarrierFor 16
(active icon)
(icon
(extent 276 34))
(open
(extent 272 63))
(terminals on)
(pinCenter 790 340))
(devCarrierFor 17
(active icon)
(icon
(extent 55 25))
(open
(extent 101 53))
(terminals on)
(pinCenter 570 360))
(devCarrierFor 18
(active icon)
(icon
(extent 44 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 580 320))
(devCarrierFor 19
(active icon)
(icon
(extent 74 16))
(open
(extent 145 38))
(terminals on)
(pinCenter 350 310))
(devCarrierFor 20
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 450 310))
(devCarrierFor 21
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 1040 230))
(connect I1:1 D0:1
(points 6 22 307 510 307 510 280 590 280 590 200 609 200))
(connect D9:1 D0:2
(points 4 530 230 570 230 570 210 609 210))
(connect D11:1 D0:3
(points 4 555 190 580 190 580 220 609 220))
(connect D0:0 D1:0
(points 2 750 229 750 260))
(connect I1:1 D1:1
(points 6 22 307 510 307 510 280 590 280 590 270 609 270))
(connect D9:1 D1:2
(points 6 530 230 570 230 570 210 600 210 600 280 609 280))
(connect D11:1 D1:3
(points 4 555 190 580 190 580 290 609 290))
(connect D2:1 D3:1
(points 2 223 200 260 200))
(connect D3:1 D4:1
(points 2 339 200 372 200))
(connect D18:2 D5:0
(points 5 1127 240 1150 240 1150 270 1050 270 1050 279))
(connect D6:1 D5:1
(points 2 987 290 1030 290))
(connect D0:1 D6:1
(points 4 890 210 910 210 910 270 953 270))
(connect D1:1 D6:2
(points 2 890 280 953 280))
(connect D13:1 D6:3
(points 6 930 340 950 340 950 330 930 330 930 290 953 290))
(connect D12:1 D6:4
(points 4 910 410 940 410 940 300 953 300))
(connect D5:0 D7:0
(points 2 1050 300 1050 339))
(connect D2:1 D9:1
(points 6 223 200 240 200 240 250 450 250 450 220 470 220))
(connect D4:1 D9:2
(points 4 447 200 460 200 460 240 470 240))
(connect D4:0 D10:0
(points 4 410 228 410 260 160 260 160 299))
(connect D13:0 D12:0
(points 4 790 359 790 370 770 370 770 390))
(connect I1:1 D12:1
(points 4 22 307 10 307 10 400 629 400))
(connect D14:1 D12:2
(points 4 600 360 610 360 610 410 629 410))
(connect D15:1 D12:3
(points 4 604 320 620 320 620 420 629 420))
(connect I1:1 D13:1
(points 10 22 307 510 307 510 280 570 280 570 300 600 300 600 310 630 310 630
330 649 330))
(connect D14:1 D13:2
(points 4 600 360 630 360 630 340 649 340))
(connect D15:1 D13:3
(points 4 604 320 620 320 620 350 649 350))
(connect D10:1 D14:1
(points 6 281 310 300 310 300 360 500 360 500 350 540 350))
(connect D17:1 D14:2
(points 4 487 310 520 310 520 370 540 370))
(connect D10:1 D16:1
(points 2 281 310 310 310))
(connect D16:1 D17:1
(points 2 389 310 412 310))
(connect D6:1 D18:1
(points 6 987 290 1010 290 1010 260 930 260 930 230 953 230))
(connect D5:1 O1:1
(points 4 1070 290 1130 290 1130 307 1159 307)))
(stackingOrder 2 3 4 9 11 14 16 17 15 5 7 1 8 10 13 12 6 18 0))))
(device 10 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 11 EXITCONTEXT)
(configuration
(connect D2:1 D1:1)
(connect D0:1 D2:1)
(connect D1:1 D3:1)
(connect D0:1 D3:2)
(connect D3:1 D4:1)
(connect D4:1 D5:1)
(connect D5:0 D6:0)
(connect D5:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1009 234)
(anchorPt -29 -19)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 157 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 180 100))
(devCarrierFor 3
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 410 100))
(devCarrierFor 4
(active icon)
(icon
(extent 58 16))
(open
(extent 165 38))
(terminals on)
(pinCenter 320 100))
(devCarrierFor 5
(active icon)
(icon
(extent 50 25))
(open
(extent 92 45))
(terminals on)
(pinCenter 520 110))
(devCarrierFor 9
(active icon)
(icon
(extent 124 16))
(terminals on)
(pinCenter 650 110))
(devCarrierFor 10
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 770 110))
(devCarrierFor 11
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 770 170))
(connect D2:1 D1:1
(points 2 351 100 372 100))
(connect D0:1 D2:1
(points 2 261 100 288 100))
(connect D1:1 D3:1
(points 2 447 100 492 100))
(connect D0:1 D3:2
(points 6 261 100 270 100 270 150 470 150 470 120 492 120))
(connect D3:1 D4:1
(points 2 547 110 585 110))
(connect D4:1 D5:1
(points 2 714 110 750 110))
(connect D5:0 D6:0
(points 2 770 120 770 159))
(connect D5:1 O1:1
(points 4 790 110 850 110 850 135 1037 135)))
(stackingOrder 2 1 5 6 3 0 4))))
(context 112
(properties
(name "CanKillAMovable")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CALL
(properties
(name "Call MyGoodPieces")
(callFunc "MyGoodPieces")
(parmMode rev30))
(interface
(output 1
(name "invincible")
(lock name constraints)
(optional yes))
(output 2
(name "strong")
(lock name constraints)
(optional yes))))
(device 1 CALL
(properties
(name "Call ClosestMovableOpponent")
(callFunc "ClosestMovableOpponent")
(parmMode rev30))
(interface
(input 1
(name "ourPieceLocation")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Move")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "# invincible pieces")
(expr 1 "totSize(pieces)"))
(interface
(input 1
(name "pieces")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORMULA
(properties
(name "a piece")
(expr 1 "pieces[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "pieces")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 6 EXITCONTEXT)
(configuration
(connect D4:1 D1:1)
(connect D3:1 D2:1)
(connect D0:1 D3:1)
(connect D2:1 D4:1)
(connect D0:1 D4:2)
(connect D1:1 D5:1)
(connect D5:0 D6:0)
(connect D5:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1033 251)
(anchorPt -1 17)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 135 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 110 80))
(devCarrierFor 1
(active icon)
(icon
(extent 210 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 620 80))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 380 70))
(devCarrierFor 3
(active icon)
(icon
(extent 126 16))
(open
(extent 126 36))
(terminals on)
(pinCenter 260 70))
(devCarrierFor 4
(active icon)
(icon
(extent 50 25))
(open
(extent 87 45))
(terminals on)
(pinCenter 470 80))
(devCarrierFor 5
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 790 80))
(devCarrierFor 6
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 790 130))
(connect D4:1 D1:1
(points 2 497 80 512 80))
(connect D3:1 D2:1
(points 2 325 70 342 70))
(connect D0:1 D3:1
(points 2 180 70 194 70))
(connect D2:1 D4:1
(points 2 417 70 442 70))
(connect D0:1 D4:2
(points 6 180 70 200 70 200 120 430 120 430 90 442 90))
(connect D1:1 D5:1
(points 2 727 80 770 80))
(connect D5:0 D6:0
(points 2 790 90 790 119))
(connect D5:1 O1:1
(points 4 810 80 870 80 870 108 1033 108)))
(stackingOrder 0 3 2 4 1 5 6))))
(context 79
(properties
(name "CanMove8TowardBomb")
(trigMode deg)
(nextID 48)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 18 NOTE
(properties
(name "Comment")
(text2 4 "If there\'s a known bomb," "look thru all the \'other\'"
"moves to see if we can get" "an 8 closer to it.")))
(device 23 NOTE
(properties
(name "if can move closer")
(text2 4 "Move down and vertDist + (below me)"
"Move up and vertDist - (above me)" "Move right and hDist > 0 (right of me)"
"Move left and hDist<0 (left of me)")))
(device 24 NOTE
(properties
(name "Comment")
(text2 4 "Many times there\'s multiple" "8\'s that can move.  If so,"
"pick one that\'s already" "moved.")))
(device 26 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 27 IFTHENELSE
(properties
(name "any moves?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 28 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 29 IFTHENELSE
(properties
(name "already moved?")
(cases 1 "OpponentsKnownBoard[move.from]!=-1"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 30 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "move")
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 31 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 32 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 33 EXITCONTEXT)
(device 34 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 35 FORMULA
(properties
(name "none have moved, pick first (move[0])")
(expr 1 "move[0]"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 42 CONTEXT
(properties
(name "SafeMove")
(trigMode deg)
(nextID 2)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YES")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "piece and move.to")
(expr 1 "piece = KnownBoard[move.from], move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "piece")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D0:2 D1:2)
(connect D1:2 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 581 248)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 127 25))
(open
(extent 276 42))
(terminals on)
(pinCenter 130 80))
(devCarrierFor 1
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 320 80))
(connect I1:1 D0:1
(points 4 0 123 10 123 10 80 64 80))
(connect D0:1 D1:1
(points 2 196 70 227 70))
(connect D0:2 D1:2
(points 2 196 90 227 90))
(connect D1:2 O1:1
(points 4 412 80 430 80 430 123 580 123)))
(stackingOrder 0 1))))
(device 43 CONTEXT
(properties
(name "FindMinerMoves")
(trigMode deg)
(nextID 25)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "MinerMoves")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORRANGE
(properties
(name "For Range 60-99")
(from 60)
(thru 99)
(step 1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "if KnownBoard[i] is bomb")
(cases 1 "knownboard[i]>=35 AND knownBoard[i]<=40"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 IFTHENELSE
(properties
(name "a==8")
(cases 1 "a==8"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "move.from")
(expr 1 "move.from"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 FORMULA
(properties
(name "horiz dist")
(expr 1 "(to MOD 10)-(from MOD 10)"))
(interface
(input 1
(name "from")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "if can move closer")
(cases 4 "to-from==10 AND vdist>0" "from-to==10 AND vdist<0"
"to-from==1 AND hdist>0" "from-to==1 AND hdist<0"))
(interface
(input 1
(name "to")
(optional yes))
(input 2
(name "from")
(optional yes))
(input 3
(name "hdist")
(optional yes))
(input 4
(name "vdist")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 11 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 13 FORMULA
(properties
(name "vert dist ")
(expr 1 "(to DIV 10)-(from DIV 10)"))
(interface
(input 1
(name "from")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 15 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 17 FORCOUNT
(properties
(count 3))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 18 FORMULA
(properties
(name "border loc")
(expr 1 "borderSquares[square, i+1]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 IFTHENELSE
(properties
(name "unmovable piece there?")
(cases 1 "(loc==-1 ? 0 : KnownBoard[loc]==-1)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 20 DECLVAR
(properties
(name "Declare Local \'doit\'")
(scope con)
(globalName "doit"))
(implementation
(value Int32
(data  0))))
(device 21 FORMULA
(properties
(name "doit = FALSE")
(expr 1 "doit = 0")))
(device 22 FORMULA
(properties
(name "doit = TRUE")
(expr 1 "doit = 1")))
(device 23 BREAK)
(device 24 IFTHENELSE
(properties
(name "doit?")
(cases 1 "doit"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I1:1 D1:1)
(connect D23:1 D2:0)
(connect D1:1 D2:1)
(connect D0:1 D3:1)
(connect D5:1 D4:1)
(connect D2:1 D5:1)
(connect I1:1 D5:2)
(connect D9:2 D6:1)
(connect D5:1 D7:1)
(connect D7:1 D8:1)
(connect D0:1 D8:2)
(connect D11:2 D9:0)
(connect D5:1 D9:1)
(connect D6:1 D10:0)
(connect D4:1 D10:1)
(connect D7:1 D10:2)
(connect D8:1 D10:3)
(connect D13:1 D10:4)
(connect D5:1 D11:1)
(connect D10:1 D12:1)
(connect D10:2 D12:2)
(connect D10:3 D12:3)
(connect D10:4 D12:4)
(connect D7:1 D13:1)
(connect D0:1 D13:2)
(connect D12:1 D14:0)
(connect D5:1 D14:1)
(connect D14:1 D15:1)
(connect D0:0 D15:2)
(connect D20:0 D16:0)
(connect D0:1 D17:1)
(connect D16:1 D17:2)
(connect D17:1 D18:1)
(connect D3:1 D20:0)
(connect D18:1 D21:0)
(connect D21:0 D22:0)
(connect D16:0 D23:0)
(connect D15:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 965 680)
(anchorPt 6 67)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 130 51)
(iconImage "loop.icn"))
(open
(extent 166 79))
(pinCenter 110 0))
(devCarrierFor 1
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 180 300))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 260 300))
(devCarrierFor 3
(active icon)
(icon
(extent 177 32))
(open
(extent 373 51))
(terminals on)
(pinCenter 310 -10))
(devCarrierFor 4
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter 260 400))
(devCarrierFor 5
(active icon)
(icon
(extent 38 34))
(open
(extent 79 64))
(terminals on)
(pinCenter 360 300))
(devCarrierFor 6
(active icon)
(icon
(extent 40 25))
(open
(extent 66 51))
(terminals on)
(pinCenter 340 380))
(devCarrierFor 7
(active icon)
(icon
(extent 83 15))
(open
(extent 92 31))
(terminals on)
(pinCenter 270 430))
(devCarrierFor 8
(active icon)
(icon
(extent 73 25))
(open
(extent 229 42))
(terminals on)
(pinCenter 240 490))
(devCarrierFor 9
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 590 320))
(devCarrierFor 10
(active icon)
(icon
(extent 141 54))
(open
(extent 222 102))
(terminals on)
(pinCenter 470 510))
(devCarrierFor 11
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 480 270))
(devCarrierFor 12
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 590 510))
(devCarrierFor 13
(active icon)
(icon
(extent 70 25))
(open
(extent 229 42))
(terminals on)
(pinCenter 240 540))
(devCarrierFor 14
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 660 520))
(devCarrierFor 15
(active icon)
(icon
(extent 74 25))
(open)
(terminals on)
(pinCenter 740 530))
(devCarrierFor 17
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 470 80))
(devCarrierFor 18
(active icon)
(icon
(extent 70 25))
(open
(extent 208 42))
(terminals on)
(pinCenter 600 70))
(devCarrierFor 19
(active icon)
(icon
(extent 167 25))
(open
(extent 260 53))
(terminals on)
(pinCenter 740 70))
(devCarrierFor 20
(active icon)
(icon
(extent 132 16))
(open
(extent 215 107))
(pinCenter 610 -40))
(devCarrierFor 21
(active icon)
(icon
(extent 91 16))
(open
(extent 81 32))
(terminals on)
(pinCenter 470 20))
(devCarrierFor 22
(active icon)
(icon
(extent 83 16))
(open
(extent 81 32))
(terminals on)
(pinCenter 880 120))
(devCarrierFor 23
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 880 160))
(devCarrierFor 24
(active icon)
(icon
(extent 35 25))
(open
(extent 55 53))
(terminals on)
(pinCenter 230 190))
(connect I1:1 D1:1
(points 4 -6 272 0 272 0 300 148 300))
(connect D23:1 D2:0
(points 5 250 180 270 180 270 230 260 230 260 271))
(connect D1:1 D2:1
(points 2 211 300 222 300))
(connect D0:1 D3:1
(points 4 177 0 200 0 200 -10 219 -10))
(connect D5:1 D4:1
(points 8 381 300 400 300 400 340 300 340 300 360 210 360 210 400 226 400))
(connect D2:1 D5:1
(points 4 297 300 320 300 320 290 338 290))
(connect I1:1 D5:2
(points 8 -6 272 0 272 0 300 140 300 140 350 320 350 320 310 338 310))
(connect D9:2 D6:1
(points 8 655 330 680 330 680 370 380 370 380 360 310 360 310 380 317 380))
(connect D5:1 D7:1
(points 8 381 300 400 300 400 340 300 340 300 360 210 360 210 430 226 430))
(connect D7:1 D8:1
(points 6 314 430 330 430 330 460 180 460 180 480 201 480))
(connect D0:1 D8:2
(points 6 177 0 200 0 200 50 130 50 130 500 201 500))
(connect D11:2 D9:0
(points 3 567 280 590 280 590 305))
(connect D5:1 D9:1
(points 4 381 300 400 300 400 320 524 320))
(connect D6:1 D10:0
(points 5 362 370 370 370 370 380 470 380 470 480))
(connect D4:1 D10:1
(points 8 293 400 300 400 300 410 320 410 320 420 340 420 340 490 397 490))
(connect D7:1 D10:2
(points 4 314 430 330 430 330 500 397 500))
(connect D8:1 D10:3
(points 4 279 490 300 490 300 510 397 510))
(connect D13:1 D10:4
(points 4 277 540 300 540 300 520 397 520))
(connect D5:1 D11:1
(points 4 381 300 370 300 370 270 393 270))
(connect D10:1 D12:1
(points 2 543 490 573 490))
(connect D10:2 D12:2
(points 2 543 500 573 500))
(connect D10:3 D12:3
(points 2 543 510 573 510))
(connect D10:4 D12:4
(points 2 543 520 573 520))
(connect D7:1 D13:1
(points 6 314 430 330 430 330 460 180 460 180 530 202 530))
(connect D0:1 D13:2
(points 8 177 0 200 0 200 50 130 50 130 500 170 500 170 550 202 550))
(connect D12:1 D14:0
(points 5 606 510 620 510 620 490 660 490 660 510))
(connect D5:1 D14:1
(points 6 381 300 400 300 400 360 630 360 630 520 638 520))
(connect D14:1 D15:1
(points 2 681 520 700 520))
(connect D0:0 D15:2
(points 5 110 28 110 580 680 580 680 540 700 540))
(connect D20:0 D16:0
(points 2 470 30 470 51))
(connect D0:1 D17:1
(points 8 177 0 200 0 200 -50 480 -50 480 -10 540 -10 540 60 562 60))
(connect D16:1 D17:2
(points 2 507 80 562 80))
(connect D17:1 D18:1
(points 2 637 70 654 70))
(connect D3:1 D20:0
(points 3 401 -20 470 -20 470 9))
(connect D18:1 D21:0
(points 3 826 60 880 60 880 109))
(connect D21:0 D22:0
(points 2 880 130 880 149))
(connect D16:0 D23:0
(points 4 470 108 470 130 230 130 230 175))
(connect D15:1 O1:1
(points 4 779 530 800 530 800 272 958 272)))
(stackingOrder 0 1 4 6 7 8 10 12 13 14 15 3 9 19 16 20 17 18 21 22 23 2 5 11))))
(device 44 FORMULA
(properties
(name "MinerAlreadyMoving = FALSE")
(expr 1 "MinerAlreadyMoving = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 45 FORMULA
(properties
(name "MinerAlreadyMoving = TRUE")
(expr 1 "MinerAlreadyMoving = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 46 DECLVAR
(properties
(name "Declare Local \'MinerAlreadyMoving\'")
(scope con)
(globalName "MinerAlreadyMoving"))
(implementation
(value Int32
(data  0))))
(device 47 IFTHENELSE
(properties
(name "miner already moving?")
(cases 1 "minerAlreadyMoving"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D14:1 D3:1)
(connect D3:5 D4:1)
(connect D4:1 D5:0)
(connect D3:5 D5:1)
(connect D7:1 D6:1)
(connect D14:1 D7:1)
(connect D5:1 D7:2)
(connect D9:1 D8:1)
(connect D11:1 D9:1)
(connect D12:1 D9:2)
(connect D8:0 D10:0)
(connect D13:1 D11:0)
(connect D7:1 D11:1)
(connect D18:2 D12:0)
(connect D14:1 D12:1)
(connect D16:0 D13:0)
(connect D7:1 D13:1)
(connect D15:0 D14:0)
(connect I1:1 D14:1)
(connect D6:1 D16:0)
(connect D5:0 D18:0)
(connect D8:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 922 605)
(anchorPt 0 -115)
(configuration
(devCarrierFor 18
(active open)
(icon
(extent 68 52)
(iconImage "notepad.icn"))
(open
(extent 276 90)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 760 220))
(devCarrierFor 23
(active open)
(icon
(extent 141 0)
(iconImage "notepad.icn"))
(open
(extent 373 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 530 630))
(devCarrierFor 24
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 282 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 180 630))
(devCarrierFor 26
(active icon)
(icon
(extent 180 61)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 370 250))
(devCarrierFor 27
(active icon)
(icon
(extent 83 25))
(open
(extent 55 65))
(terminals on)
(pinCenter 540 270))
(devCarrierFor 28
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 190 350))
(devCarrierFor 29
(active icon)
(icon
(extent 121 25))
(open
(extent 305 52))
(terminals on)
(pinCenter 440 350))
(devCarrierFor 30
(active icon)
(icon
(extent 38 25))
(open
(extent 73 42))
(terminals on)
(pinCenter 310 350))
(devCarrierFor 31
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 820 440))
(devCarrierFor 32
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 740 440))
(devCarrierFor 33
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 820 510))
(devCarrierFor 34
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 670 430))
(devCarrierFor 35
(active icon)
(icon
(extent 290 25))
(open
(extent 226 42))
(terminals on)
(pinCenter 460 510))
(devCarrierFor 42
(active icon)
(icon
(extent 69 16))
(terminals on)
(pinCenter 620 400))
(devCarrierFor 43
(active icon)
(icon
(extent 114 16))
(terminals on)
(pinCenter 180 250))
(devCarrierFor 44
(active icon)
(icon
(extent 206 16))
(open
(extent 186 32))
(terminals on)
(pinCenter 180 190))
(devCarrierFor 45
(active icon)
(icon
(extent 199 16))
(open
(extent 186 32))
(terminals on)
(pinCenter 620 360))
(devCarrierFor 46
(active icon)
(icon
(extent 247 16))
(open
(extent 283 112))
(pinCenter 180 150))
(devCarrierFor 47
(active icon)
(icon
(extent 157 25))
(open
(extent 160 53))
(terminals on)
(pinCenter 190 440))
(connect D14:1 D3:1
(points 2 239 250 277 250))
(connect D3:5 D4:1
(points 2 462 270 496 270))
(connect D4:1 D5:0
(points 5 584 260 600 260 600 310 190 310 190 321))
(connect D3:5 D5:1
(points 6 462 270 480 270 480 300 130 300 130 350 152 350))
(connect D7:1 D6:1
(points 2 331 350 377 350))
(connect D14:1 D7:1
(points 4 239 250 260 250 260 340 288 340))
(connect D5:1 D7:2
(points 4 227 350 250 350 250 360 288 360))
(connect D9:1 D8:1
(points 2 756 440 798 440))
(connect D11:1 D9:1
(points 2 691 430 723 430))
(connect D12:1 D9:2
(points 4 607 510 700 510 700 450 723 450))
(connect D8:0 D10:0
(points 2 820 450 820 500))
(connect D13:1 D11:0
(points 3 657 400 670 400 670 420))
(connect D7:1 D11:1
(points 6 331 350 360 350 360 410 520 410 520 430 648 430))
(connect D18:2 D12:0
(points 3 271 450 460 450 460 495))
(connect D14:1 D12:1
(points 8 239 250 260 250 260 340 270 340 270 390 290 390 290 510 312 510))
(connect D16:0 D13:0
(points 2 620 370 620 389))
(connect D7:1 D13:1
(points 6 331 350 360 350 360 410 520 410 520 400 583 400))
(connect D15:0 D14:0
(points 2 180 200 180 239))
(connect I1:1 D14:1
(points 4 0 417 10 417 10 250 120 250))
(connect D6:1 D16:0
(points 5 503 340 510 340 510 330 620 330 620 349))
(connect D5:0 D18:0
(points 2 190 378 190 425))
(connect D8:1 O1:1
(points 4 841 440 860 440 860 417 921 417)))
(stackingOrder 5 4 7 15 16 11 8 10 9 17 18 12 0 1 2 3 13 14 6))))
(context 81
(properties
(name "CanMove9765Forward")
(trigMode deg)
(nextID 64)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 2 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "a==5,6,7,9")
(cases 1
"((a==5 OR a==6 OR a==7) AND  NOT ourPieceNextToOurKnownBomb(move.from)) OR (a==9 AND moveNumber>10)"
))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORMULA
(properties
(name "move.from")
(expr 1 "move.from"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 12 EXITCONTEXT)
(device 18 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 20 IFTHENELSE
(properties
(name "down, up, right")
(cases 3 "to-from==10" "from-to==10" "to-from==1"))
(interface
(input 1
(name "to")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 47 IFTHENELSE
(properties
(name "? checkUpDown(a,fr,99,10)")
(cases 1 "CheckUpAndDownForUnknownsAndKills(A, from, 99, 10)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 51 IFTHENELSE
(properties
(name "? checkUpDown(a,fr,0,-10)")
(cases 1 "CheckUpAndDownForUnknownsAndKills(A, from, 0, -10)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 53 IFTHENELSE
(properties
(name "? checkLeftRight(a,fr,?,-1)")
(cases 1 "CheckLeftAndRightForUnknownsAndKills(A, from, (from DIV 10)*10, -1)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 54 IFTHENELSE
(properties
(name "? checkLeftRight(a,fr,?,1)")
(cases 1 "CheckLeftAndRightForUnknownsAndKills(A, from, (from DIV 10)*10+9, 1)")
)
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 55 FORMULA
(properties
(name "onlyAlreadyMoved=!a")
(expr 1 "onlyAlreadyMoved =  NOT a"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 56 FORCOUNT
(properties
(count 2))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 57 NOTE
(properties
(name "Comment")
(text2 4 "First see if we can do this" "only with pieces that have"
"already moved." "Then try new ones.")))
(device 58 DECLVAR
(properties
(name "Declare onlyAlreadyMoved")
(scope con)
(globalName "onlyAlreadyMoved"))
(implementation
(value Int32
(data  0))))
(device 60 IFTHENELSE
(properties
(name "already moved?")
(cases 1
"(onlyAlreadyMoved AND OpponentsKnownBoard[move.from]!=-1) OR  NOT onlyAlreadyMoved"
))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 61 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 63 IFTHENELSE
(properties
(name "bomb protector?")
(cases 1 "IsABombProtector(pieceLoc)"))
(interface
(input 1
(name "pieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D20:2 D0:0)
(connect D1:1 D0:1)
(connect D2:1 D1:1)
(connect I1:1 D1:2)
(connect D15:0 D2:0)
(connect D3:1 D2:1)
(connect I1:1 D3:1)
(connect D0:2 D4:1)
(connect D1:1 D4:2)
(connect D1:1 D5:1)
(connect D1:1 D6:1)
(connect D9:1 D7:0)
(connect D1:1 D7:1)
(connect D7:0 D8:0)
(connect D11:1 D9:1)
(connect D12:1 D9:2)
(connect D14:1 D9:3)
(connect D13:1 D9:4)
(connect D21:2 D10:0)
(connect D5:1 D10:1)
(connect D6:1 D10:2)
(connect D10:1 D11:0)
(connect D0:2 D11:1)
(connect D5:1 D11:2)
(connect D10:2 D12:0)
(connect D0:2 D12:1)
(connect D5:1 D12:2)
(connect D10:4 D13:0)
(connect D0:2 D13:1)
(connect D5:1 D13:2)
(connect D10:3 D14:0)
(connect D0:2 D14:1)
(connect D5:1 D14:2)
(connect D16:1 D15:1)
(connect D4:1 D19:0)
(connect D1:1 D19:1)
(connect D1:1 D20:1)
(connect D19:1 D21:0)
(connect D6:1 D21:1)
(connect D7:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 913 669)
(anchorPt -26 -72)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 430 330))
(devCarrierFor 3
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 320 330))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 230 320))
(devCarrierFor 5
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 150 320))
(devCarrierFor 7
(active icon)
(icon
(extent 74 25))
(open
(extent 771 51))
(terminals on)
(pinCenter 610 380))
(devCarrierFor 9
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter 240 490))
(devCarrierFor 10
(active icon)
(icon
(extent 83 15))
(open
(extent 92 31))
(terminals on)
(pinCenter 250 520))
(devCarrierFor 11
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 880 550))
(devCarrierFor 12
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 870 580))
(devCarrierFor 18
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 820 520))
(devCarrierFor 20
(active icon)
(icon
(extent 113 45))
(open
(extent 163 82))
(terminals on)
(pinCenter 420 520))
(devCarrierFor 47
(active icon)
(icon
(extent 205 25))
(open
(extent 422 51))
(terminals on)
(pinCenter 630 440))
(devCarrierFor 51
(active icon)
(icon
(extent 205 25))
(open
(extent 422 51))
(terminals on)
(pinCenter 640 490))
(devCarrierFor 53
(active icon)
(icon
(extent 203 25))
(open
(extent 544 51))
(terminals on)
(pinCenter 630 610))
(devCarrierFor 54
(active icon)
(icon
(extent 193 25))
(open
(extent 553 51))
(terminals on)
(pinCenter 650 540))
(devCarrierFor 55
(active icon)
(icon
(extent 166 15))
(open
(extent 231 31))
(terminals on)
(pinCenter 340 240))
(devCarrierFor 56
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 160 240))
(devCarrierFor 57
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 282 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 720 260))
(devCarrierFor 58
(active icon)
(icon
(extent 209 15))
(open
(extent 245 103))
(pinCenter 270 150))
(devCarrierFor 60
(active icon)
(icon
(extent 121 25))
(open
(extent 686 52))
(terminals on)
(pinCenter 370 420))
(devCarrierFor 61
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 480 280))
(devCarrierFor 63
(active icon)
(icon
(extent 114 25))
(open
(extent 212 57))
(terminals on)
(pinCenter 420 460))
(connect D20:2 D0:0
(points 5 567 290 580 290 580 310 430 310 430 315))
(connect D1:1 D0:1
(points 2 341 330 364 330))
(connect D2:1 D1:1
(points 2 267 320 298 320))
(connect I1:1 D1:2
(points 6 26 406 40 406 40 380 290 380 290 340 298 340))
(connect D15:0 D2:0
(points 4 340 250 340 270 230 270 230 291))
(connect D3:1 D2:1
(points 2 181 320 192 320))
(connect I1:1 D3:1
(points 4 26 406 40 406 40 320 118 320))
(connect D0:2 D4:1
(points 4 495 340 520 340 520 370 570 370))
(connect D1:1 D4:2
(points 6 341 330 350 330 350 370 480 370 480 390 570 390))
(connect D1:1 D5:1
(points 6 341 330 350 330 350 370 190 370 190 490 206 490))
(connect D1:1 D6:1
(points 6 341 330 350 330 350 370 190 370 190 520 206 520))
(connect D9:1 D7:0
(points 3 836 520 880 520 880 540))
(connect D1:1 D7:1
(points 10 341 330 350 330 350 370 480 370 480 390 530 390 530 350 850 350 850
550 858 550))
(connect D7:0 D8:0
(points 2 880 560 870 570))
(connect D11:1 D9:1
(points 4 735 430 770 430 770 500 803 500))
(connect D12:1 D9:2
(points 4 745 480 760 480 760 510 803 510))
(connect D14:1 D9:3
(points 4 749 530 770 530 770 520 803 520))
(connect D13:1 D9:4
(points 4 734 600 780 600 780 530 803 530))
(connect D21:2 D10:0
(points 7 479 470 490 470 490 480 480 480 480 490 420 490 420 495))
(connect D5:1 D10:1
(points 6 273 490 310 490 310 500 320 500 320 510 361 510))
(connect D6:1 D10:2
(points 4 294 520 310 520 310 530 361 530))
(connect D10:1 D11:0
(points 7 479 500 500 500 500 460 510 460 510 420 630 420 630 425))
(connect D0:2 D11:1
(points 4 495 340 520 340 520 430 525 430))
(connect D5:1 D11:2
(points 8 273 490 290 490 290 390 470 390 470 430 500 430 500 450 525 450))
(connect D10:2 D12:0
(points 5 479 510 510 510 510 470 640 470 640 475))
(connect D0:2 D12:1
(points 4 495 340 520 340 520 480 535 480))
(connect D5:1 D12:2
(points 10 273 490 290 490 290 390 470 390 470 450 490 450 490 490 520 490 520
500 535 500))
(connect D10:4 D13:0
(points 5 479 530 500 530 500 580 630 580 630 595))
(connect D0:2 D13:1
(points 8 495 340 520 340 520 480 530 480 530 510 520 510 520 600 526 600))
(connect D5:1 D13:2
(points 6 273 490 310 490 310 500 320 500 320 620 526 620))
(connect D10:3 D14:0
(points 3 479 520 650 520 650 525))
(connect D0:2 D14:1
(points 8 495 340 520 340 520 480 530 480 530 510 520 510 520 530 551 530))
(connect D5:1 D14:2
(points 8 273 490 310 490 310 500 320 500 320 570 510 570 510 550 551 550))
(connect D16:1 D15:1
(points 2 197 240 254 240))
(connect D4:1 D19:0
(points 7 649 370 670 370 670 410 550 410 550 400 370 400 370 405))
(connect D1:1 D19:1
(points 6 341 330 350 330 350 370 300 370 300 420 307 420))
(connect D1:1 D20:1
(points 4 341 330 350 330 350 280 393 280))
(connect D19:1 D21:0
(points 5 433 410 440 410 440 440 420 440 420 445))
(connect D6:1 D21:1
(points 6 294 520 310 520 310 530 330 530 330 460 360 460))
(connect D7:1 O1:1
(points 4 901 550 910 550 910 406 938 406)))
(stackingOrder 3 8 5 6 10 9 7 13 12 14 15 18 2 0 17 16 1 19 20 4 11 21))))
(context 83
(properties
(name "CanMoveBuriedLowPieceToKill")
(trigMode deg)
(nextID 58)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 6 IFTHENELSE
(properties
(name "if kb has known low opponent piece")
(cases 1 "kb>0 AND kb<=34"))
(interface
(input 1
(name "kb")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 20 FORMULA
(properties
(name "kb[i]")
(expr 1 "knownboard[i]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 34 CALL
(properties
(name "Call MyPieceLocationsThatBeatPiece")
(callFunc "MyPieceLocationsThatBeatPiece")
(parmMode rev30))
(interface
(input 1
(name "w")
(optional yes))
(output 1
(name "ary")
(lock name constraints)
(optional yes))))
(device 35 FORMULA
(properties
(name "weight")
(expr 1 "weightOfpiece[a]"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 36 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 37 FORMULA
(properties
(name "totSize(x)")
(expr 1 "totSize(x)"))
(interface
(input 1
(name "x")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 39 IFTHENELSE
(properties
(name "isBuried(loc)")
(cases 1 "isPieceBuried(loc)"))
(interface
(input 1
(name "loc")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 40 NOTE
(properties
(name "Comment")
(text2 5 "If my piece wasn\'t buried," "and \'canMoveLowPieceToCapture\'"
"didn\'t do it then it would have" "died on the way so don\'t "
"consider the piece.")))
(device 41 TOCOORDINATE
(interface
(input 1
(name "X Data")
(tag "X")
(requires
(datatype Real))
(lock constraints))
(input 2
(name "Y Data")
(tag "Y")
(requires
(datatype Real))
(lock constraints))
(output 1
(name "Coord")
(tag "Coord"))))
(device 42 CALL
(properties
(name "Call TravelDistance")
(callFunc "TravelDistance")
(parmMode rev30))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "NumSquares")
(lock name constraints)
(optional yes))))
(device 43 FORMULA
(properties
(name "a[b]")
(expr 1 "a[b]"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 45 FORMULA
(properties
(name "sort(x)")
(expr 1 "sort(x)"))
(interface
(input 1
(name "x")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 46 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 47 FORMULA
(properties
(name "a[0]")
(expr 1 "a[0]"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 48 CALL
(properties
(name "Call CanUnburyPiece")
(callFunc "CanUnburyPiece")
(parmMode rev30))
(interface
(input 1
(name "boardLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Move")
(lock name constraints)
(optional yes))
(output 2
(name "Difficulty")
(lock name constraints)
(optional yes))))
(device 50 IFTHENELSE
(properties
(name "\023totsize >0?")
(cases 1 "totsize(a)>0"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 52 FORCOUNT
(properties
(count 100))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 53 FROMCOORDINATE
(interface
(input 1
(name "Coord Data")
(requires
(datatype Coord))
(lock name constraints))
(output 1
(name "X Data")
(lock name constraints))
(output 2
(name "Y Data")
(lock name constraints)
(optional yes))))
(device 55 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 56 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 57 EXITCONTEXT)
(configuration
(connect D1:1 D0:1)
(connect D16:1 D1:1)
(connect D3:1 D2:1)
(connect D0:1 D3:0)
(connect D1:1 D3:1)
(connect D5:1 D4:1)
(connect D2:1 D5:1)
(connect D10:1 D6:1)
(connect D6:1 D8:0)
(connect D10:1 D8:1)
(connect D9:1 D8:2)
(connect D10:1 D9:1)
(connect D16:1 D9:2)
(connect D2:1 D10:1)
(connect D4:1 D10:2)
(connect D12:1 D11:1)
(connect D8:1 D12:1)
(connect D4:0 D12:2)
(connect D15:1 D13:0)
(connect D11:1 D13:1)
(connect D17:1 D14:1)
(connect D12:1 D15:1)
(connect D13:1 D17:1)
(connect D14:1 D18:1)
(connect D18:2 D19:0)
(connect D14:1 D19:1)
(connect D19:0 D20:0)
(connect D19:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 837 755)
(anchorPt -37 -102)
(configuration
(devCarrierFor 6
(active icon)
(icon
(extent 245 25))
(open
(extent 211 51))
(terminals on)
(pinCenter 340 190))
(devCarrierFor 20
(active icon)
(icon
(extent 36 15))
(open
(extent 137 31))
(terminals on)
(pinCenter 180 190))
(devCarrierFor 34
(active icon)
(icon
(extent 289 15))
(open
(extent 265 51))
(terminals on)
(pinCenter 410 310))
(devCarrierFor 35
(active icon)
(icon
(extent 51 15))
(open
(extent 156 31))
(terminals on)
(pinCenter 220 310))
(devCarrierFor 36
(active icon)
(icon
(extent 77 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 330 420))
(devCarrierFor 37
(active icon)
(icon
(extent 77 15))
(open
(extent 106 31))
(terminals on)
(pinCenter 240 420))
(devCarrierFor 39
(active icon)
(icon
(extent 95 25))
(open
(extent 159 51))
(terminals on)
(pinCenter 550 410))
(devCarrierFor 40
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 322 101)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 660 190))
(devCarrierFor 41
(active icon)
(icon
(extent 89 51)
(iconImage "build.icn"))
(open)
(terminals on)
(pinCenter 570 540))
(devCarrierFor 42
(active icon)
(icon
(extent 155 25))
(open
(extent 216 51))
(terminals on)
(pinCenter 420 550))
(devCarrierFor 43
(active icon)
(icon
(extent 31 25))
(open
(extent 80 42))
(terminals on)
(pinCenter 460 410))
(devCarrierFor 45
(active icon)
(icon
(extent 51 15))
(open
(extent 83 31))
(terminals on)
(pinCenter 180 670))
(devCarrierFor 46
(active icon)
(icon
(extent 74 25))
(open)
(terminals on)
(pinCenter 680 560))
(devCarrierFor 47
(active icon)
(icon
(extent 32 15))
(open
(extent 80 31))
(terminals on)
(pinCenter 260 670))
(devCarrierFor 48
(active icon)
(icon
(extent 160 25))
(open
(extent 216 51))
(terminals on)
(pinCenter 510 670))
(devCarrierFor 50
(active icon)
(icon
(extent 85 25))
(open
(extent 132 68))
(terminals on)
(pinCenter 210 630))
(devCarrierFor 52
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 100 190))
(devCarrierFor 53
(active icon)
(icon
(extent 107 51)
(iconImage "unbuild.icn"))
(open)
(terminals on)
(pinCenter 350 670))
(devCarrierFor 55
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 700 690))
(devCarrierFor 56
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 790 740))
(devCarrierFor 57
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 790 780))
(connect D1:1 D0:1
(points 2 200 190 215 190))
(connect D16:1 D1:1
(points 2 137 190 159 190))
(connect D3:1 D2:1
(points 2 248 310 263 310))
(connect D0:1 D3:0
(points 5 465 180 480 180 480 230 220 230 220 300))
(connect D1:1 D3:1
(points 6 200 190 210 190 210 220 170 220 170 310 192 310))
(connect D5:1 D4:1
(points 2 281 420 289 420))
(connect D2:1 D5:1
(points 8 557 310 580 310 580 340 430 340 430 370 180 370 180 420 199 420))
(connect D10:1 D6:1
(points 2 478 410 500 410))
(connect D6:1 D8:0
(points 5 600 400 620 400 620 450 570 450 570 512))
(connect D10:1 D8:1
(points 6 478 410 490 410 490 480 500 480 500 530 523 530))
(connect D9:1 D8:2
(points 2 500 550 523 550))
(connect D10:1 D9:1
(points 6 478 410 490 410 490 480 330 480 330 540 340 540))
(connect D16:1 D9:2
(points 6 137 190 150 190 150 210 160 210 160 560 340 560))
(connect D2:1 D10:1
(points 8 557 310 580 310 580 340 430 340 430 370 420 370 420 400 442 400))
(connect D4:1 D10:2
(points 2 371 420 442 420))
(connect D12:1 D11:1
(points 6 719 560 740 560 740 600 130 600 130 670 152 670))
(connect D8:1 D12:1
(points 4 617 540 630 540 630 550 640 550))
(connect D4:0 D12:2
(points 7 330 448 330 470 320 470 320 590 630 590 630 570 640 570))
(connect D15:1 D13:0
(points 5 255 620 270 620 270 650 260 650 260 660))
(connect D11:1 D13:1
(points 2 208 670 241 670))
(connect D17:1 D14:1
(points 4 406 660 420 660 420 670 427 670))
(connect D12:1 D15:1
(points 6 719 560 740 560 740 600 150 600 150 630 165 630))
(connect D13:1 D17:1
(points 2 278 670 294 670))
(connect D14:1 D18:1
(points 4 592 660 600 660 600 690 613 690))
(connect D18:2 D19:0
(points 5 787 700 800 700 800 720 790 720 790 729))
(connect D14:1 D19:1
(points 4 592 660 600 660 600 740 770 740))
(connect D19:0 D20:0
(points 2 790 750 790 769))
(connect D19:1 O1:1
(points 4 810 740 830 740 830 479 873 479)))
(stackingOrder 4 8 12 11 5 15 17 14 18 16 1 0 3 2 10 6 19 13 20 7 9))))
(context 155
(properties
(name "CanMoveGrungePieceTowardHighPiece")
(trigMode deg)
(nextID 64)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 28 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 29 IFTHENELSE
(properties
(name "already moved?")
(cases 1 "OpponentsKnownBoard[move.from]!=-1"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 30 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "move")
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 31 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 32 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 33 EXITCONTEXT)
(device 34 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 35 FORMULA
(properties
(name "pick first (move[0])")
(expr 1 "move[0]"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 42 CONTEXT
(properties
(name "SafeMove")
(trigMode deg)
(nextID 10)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YES")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "piece and move.to")
(expr 1 "piece = KnownBoard[move.from], move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "piece")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 2 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 3 IFTHENELSE
(properties
(name "Is this a potential trap?")
(cases 1 "(piece>=1 AND piece<=4) AND (OpponentsKnownBoard[move.from]>1000)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "my piece weight")
(expr 1 "WeightOfPiece[KnownBoard[move.from]-1000]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 IFTHENELSE
(properties
(name "am I a miner?")
(cases 1 "w==8"))
(interface
(input 1
(name "w")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 IFTHENELSE
(properties
(name "Worthwhile?")
(cases 1 "IsWorthwhileSquare(move.to)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 IFTHENELSE
(properties
(name "downward move?")
(cases 1 "move.to==move.from+10"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D0:2 D1:2)
(connect D1:2 D2:1)
(connect D3:2 D2:2)
(connect D5:2 D3:0)
(connect D4:1 D3:1)
(connect I1:1 D3:2)
(connect D1:3 D4:0)
(connect I1:1 D4:1)
(connect D4:1 D5:1)
(connect D7:1 D6:0)
(connect I1:1 D6:1)
(connect D2:1 D7:0)
(connect I1:1 D7:1)
(connect D7:2 D8:1)
(connect D6:1 D8:2)
(connect D8:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 815 390)
(anchorPt 1 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 127 25))
(open
(extent 276 42))
(terminals on)
(pinCenter 130 80))
(devCarrierFor 1
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 320 80))
(devCarrierFor 2
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 600 110))
(devCarrierFor 3
(active icon)
(icon
(extent 157 25))
(open
(extent 552 53))
(terminals on)
(pinCenter 420 220))
(devCarrierFor 4
(active icon)
(icon
(extent 110 16))
(open
(extent 327 34))
(terminals on)
(pinCenter 250 140))
(devCarrierFor 5
(active icon)
(icon
(extent 93 25))
(open
(extent 61 53))
(terminals on)
(pinCenter 390 140))
(devCarrierFor 6
(active icon)
(icon
(extent 84 25))
(open
(extent 217 56))
(terminals on)
(pinCenter 680 280))
(devCarrierFor 7
(active icon)
(icon
(extent 119 25))
(open
(extent 188 53))
(terminals on)
(pinCenter 610 200))
(devCarrierFor 8
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 760 190))
(connect I1:1 D0:1
(points 4 -1 194 10 194 10 80 64 80))
(connect D0:1 D1:1
(points 2 196 70 227 70))
(connect D0:2 D1:2
(points 2 196 90 227 90))
(connect D1:2 D2:1
(points 4 412 80 430 80 430 100 583 100))
(connect D3:2 D2:2
(points 4 501 230 520 230 520 120 583 120))
(connect D5:2 D3:0
(points 5 439 150 460 150 460 180 420 180 420 205))
(connect D4:1 D3:1
(points 4 307 140 320 140 320 210 339 210))
(connect I1:1 D3:2
(points 6 -1 194 20 194 20 140 170 140 170 230 339 230))
(connect D1:3 D4:0
(points 5 412 90 420 90 420 120 250 120 250 129))
(connect I1:1 D4:1
(points 4 -1 194 20 194 20 140 192 140))
(connect D4:1 D5:1
(points 2 307 140 341 140))
(connect D7:1 D6:0
(points 5 672 190 700 190 700 240 680 240 680 265))
(connect I1:1 D6:1
(points 10 -1 194 20 194 20 140 170 140 170 230 320 230 320 260 540 260 540 280
635 280))
(connect D2:1 D7:0
(points 5 617 110 640 110 640 150 610 150 610 185))
(connect I1:1 D7:1
(points 10 -1 194 20 194 20 140 170 140 170 230 320 230 320 260 530 260 530 200
548 200))
(connect D7:2 D8:1
(points 4 672 210 690 210 690 180 743 180))
(connect D6:1 D8:2
(points 6 724 270 730 270 730 250 720 250 720 200 743 200))
(connect D8:1 O1:1
(points 4 777 190 795 190 795 194 813 194)))
(stackingOrder 0 1 3 4 2 5 8 7 6))))
(device 50 CONTEXT
(properties
(name "FindPossMoves")
(trigMode deg)
(nextID 49)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "GrungeMoves")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 FORMULA
(properties
(name "move.from")
(expr 1 "move.from"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 FORMULA
(properties
(name "horiz dist")
(expr 1 "(to MOD 10)-(from MOD 10)"))
(interface
(input 1
(name "from")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "if can move closer")
(cases 4 "to-from==10 AND vdist>0" "from-to==10 AND vdist<0"
"to-from==1 AND hdist>0" "from-to==1 AND hdist<0"))
(interface
(input 1
(name "to")
(optional yes))
(input 2
(name "from")
(optional yes))
(input 3
(name "hdist")
(optional yes))
(input 4
(name "vdist")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 11 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 13 FORMULA
(properties
(name "vert dist ")
(expr 1 "(to DIV 10)-(from DIV 10)"))
(interface
(input 1
(name "from")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 15 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data")
(requires
(datatype Record)
(shape "Scalar")))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 25 FORMULA
(properties
(name "rank position[i]")
(expr 1 "positions[i]"))
(interface
(input 1
(name "positions")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 27 CALL
(properties
(name "Call SortByProximity")
(callFunc "SortByProximity")
(parmMode rev30))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "sorted moves")
(lock name constraints)
(optional yes))))
(device 28 IFTHENELSE
(properties
(name "any moves?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 29 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 30 FORCOUNT
(properties
(count 5))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 32 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "targetSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 34 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, to = move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "to")
(optional yes))))
(device 43 FORMULA
(properties
(name "# high-rank locs")
(expr 1 "TotSize(positions)"))
(interface
(input 1
(name "positions")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 45 IFTHENELSE
(properties
(name "grunge piece?")
(cases 1 "w>=5 AND w<=9"))
(interface
(input 1
(name "w")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 46 IFTHENELSE
(properties
(name "already adjacent?")
(cases 1 "abs(h)+abs(v)==1"))
(interface
(input 1
(name "h")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "v")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 48 CALL
(properties
(name "Call GetHighRankPositions")
(callFunc "GetHighRankPositions")
(parmMode rev30))
(interface
(output 1
(name "positions")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect D17:1 D1:0)
(connect D0:1 D1:1)
(connect D3:1 D2:1)
(connect D1:1 D3:1)
(connect I1:1 D3:2)
(connect D3:1 D4:1)
(connect D4:1 D5:1)
(connect D13:1 D5:2)
(connect D8:2 D6:0)
(connect D3:1 D6:1)
(connect D21:1 D7:0)
(connect D2:1 D7:1)
(connect D4:1 D7:2)
(connect D5:1 D7:3)
(connect D10:1 D7:4)
(connect D3:1 D8:1)
(connect D7:1 D9:1)
(connect D7:2 D9:2)
(connect D7:3 D9:3)
(connect D7:4 D9:4)
(connect D4:1 D10:1)
(connect D13:1 D10:2)
(connect D22:2 D11:0)
(connect D3:1 D11:1)
(connect D18:1 D12:1)
(connect D17:0 D12:2)
(connect D23:1 D13:1)
(connect D17:1 D13:2)
(connect D15:1 D14:0)
(connect D12:1 D14:1)
(connect D16:5 D15:1)
(connect D12:1 D16:1)
(connect D20:1 D17:1)
(connect D19:1 D18:1)
(connect D19:2 D18:2)
(connect D13:1 D18:3)
(connect D11:1 D19:1)
(connect D23:1 D20:1)
(connect D6:2 D21:1)
(connect D9:1 D22:0)
(connect D5:1 D22:1)
(connect D10:1 D22:2)
(connect D14:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1103 701)
(anchorPt 103 -136)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 180 300))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 260 300))
(devCarrierFor 4
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter 260 400))
(devCarrierFor 5
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 350 310))
(devCarrierFor 7
(active icon)
(icon
(extent 83 15))
(open
(extent 92 31))
(terminals on)
(pinCenter 270 430))
(devCarrierFor 8
(active icon)
(icon
(extent 73 25))
(open
(extent 229 42))
(terminals on)
(pinCenter 240 490))
(devCarrierFor 9
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 580 320))
(devCarrierFor 10
(active icon)
(icon
(extent 141 54))
(open
(extent 222 102))
(terminals on)
(pinCenter 430 510))
(devCarrierFor 11
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 480 270))
(devCarrierFor 12
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 590 510))
(devCarrierFor 13
(active icon)
(icon
(extent 70 25))
(open
(extent 229 42))
(terminals on)
(pinCenter 240 540))
(devCarrierFor 14
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 660 520))
(devCarrierFor 15
(active icon)
(icon
(extent 74 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 880 600))
(devCarrierFor 25
(active icon)
(icon
(extent 101 25))
(open
(extent 99 42))
(terminals on)
(pinCenter 70 500))
(devCarrierFor 27
(active icon)
(icon
(extent 138 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 920 710))
(devCarrierFor 28
(active icon)
(icon
(extent 83 25))
(open
(extent 55 65))
(terminals on)
(pinCenter 750 750))
(devCarrierFor 29
(active icon)
(icon
(extent 180 61)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 600 730))
(devCarrierFor 30
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 91 49))
(pinCenter 280 180))
(devCarrierFor 32
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 69 82))
(terminals on)
(pinCenter 890 510))
(devCarrierFor 34
(active icon)
(icon
(extent 52 45))
(open
(extent 230 85))
(terminals on)
(pinCenter 740 520))
(devCarrierFor 43
(active icon)
(icon
(extent 111 25))
(open
(extent 147 42))
(terminals on)
(pinCenter 160 180))
(devCarrierFor 45
(active icon)
(icon
(extent 100 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 760 340))
(devCarrierFor 46
(active icon)
(icon
(extent 124 25))
(open
(extent 145 53))
(terminals on)
(pinCenter 720 450))
(devCarrierFor 48
(active icon)
(icon
(extent 185 16))
(open
(extent 196 53))
(terminals on)
(pinCenter -5 180))
(connect I1:1 D0:1
(points 4 -103 486 -90 486 -90 300 148 300))
(connect D17:1 D1:0
(points 5 317 180 340 180 340 240 260 240 260 271))
(connect D0:1 D1:1
(points 2 211 300 222 300))
(connect D3:1 D2:1
(points 6 371 310 390 310 390 350 210 350 210 400 226 400))
(connect D1:1 D3:1
(points 2 297 300 328 300))
(connect I1:1 D3:2
(points 6 -103 486 -90 486 -90 360 320 360 320 320 328 320))
(connect D3:1 D4:1
(points 6 371 310 390 310 390 350 210 350 210 430 226 430))
(connect D4:1 D5:1
(points 6 314 430 320 430 320 460 190 460 190 480 201 480))
(connect D13:1 D5:2
(points 2 123 500 201 500))
(connect D8:2 D6:0
(points 3 567 280 580 280 580 305))
(connect D3:1 D6:1
(points 4 371 310 390 310 390 320 514 320))
(connect D21:1 D7:0
(points 5 812 330 830 330 830 380 430 380 430 480))
(connect D2:1 D7:1
(points 4 293 400 330 400 330 490 357 490))
(connect D4:1 D7:2
(points 4 314 430 320 430 320 500 357 500))
(connect D5:1 D7:3
(points 4 279 490 300 490 300 510 357 510))
(connect D10:1 D7:4
(points 4 277 540 300 540 300 520 357 520))
(connect D3:1 D8:1
(points 4 371 310 380 310 380 270 393 270))
(connect D7:1 D9:1
(points 2 503 490 573 490))
(connect D7:2 D9:2
(points 2 503 500 573 500))
(connect D7:3 D9:3
(points 2 503 510 573 510))
(connect D7:4 D9:4
(points 2 503 520 573 520))
(connect D4:1 D10:1
(points 8 314 430 320 430 320 460 190 460 190 480 180 480 180 530 202 530))
(connect D13:1 D10:2
(points 4 123 500 170 500 170 550 202 550))
(connect D22:2 D11:0
(points 5 784 460 800 460 800 490 660 490 660 510))
(connect D3:1 D11:1
(points 8 371 310 390 310 390 320 490 320 490 360 630 360 630 520 638 520))
(connect D18:1 D12:1
(points 6 937 510 960 510 960 560 830 560 830 590 840 590))
(connect D17:0 D12:2
(points 5 280 208 280 230 690 230 690 610 840 610))
(connect D23:1 D13:1
(points 6 90 180 100 180 100 220 10 220 10 490 17 490))
(connect D17:1 D13:2
(points 6 317 180 340 180 340 240 0 240 0 510 17 510))
(connect D15:1 D14:0
(points 5 794 740 810 740 810 680 920 680 920 695))
(connect D12:1 D14:1
(points 6 919 600 940 600 940 640 830 640 830 710 848 710))
(connect D16:5 D15:1
(points 2 692 750 706 750))
(connect D12:1 D16:1
(points 6 919 600 940 600 940 640 490 640 490 730 507 730))
(connect D20:1 D17:1
(points 2 218 180 242 180))
(connect D19:1 D18:1
(points 4 768 510 790 510 790 500 843 500))
(connect D19:2 D18:2
(points 4 768 530 800 530 800 510 843 510))
(connect D13:1 D18:3
(points 6 123 500 170 500 170 580 810 580 810 520 843 520))
(connect D11:1 D19:1
(points 2 681 520 711 520))
(connect D23:1 D20:1
(points 2 90 180 102 180))
(connect D6:2 D21:1
(points 4 645 330 670 330 670 340 707 340))
(connect D9:1 D22:0
(points 7 606 510 620 510 620 490 640 490 640 420 720 420 720 435))
(connect D5:1 D22:1
(points 6 279 490 300 490 300 480 340 480 340 440 655 440))
(connect D10:1 D22:2
(points 6 277 540 310 540 310 560 650 560 650 460 655 460))
(connect D14:1 O1:1
(points 6 991 710 1000 710 1000 690 990 690 990 486 999 486)))
(stackingOrder 0 1 2 3 4 9 10 11 8 19 16 15 18 12 14 13 17 20 6 21 7 5 22 23))))
(device 51 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 52 IFTHENELSE
(properties
(name "close enough?")
(cases 1
"( NOT (totSize(moves)>8 AND moves[0].distance>8)) AND (OpponentsKnownBoard[moves[0].from]==-1)"
))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 53 IFTHENELSE
(properties
(name "Worthwhile?")
(cases 1 "IsWorthwhileSquare(move.to)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 54 IFTHENELSE
(properties
(name "downward move?")
(cases 1 "move.to==move.from+10"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 55 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 56 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 62 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 63 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect D16:1 D0:1)
(connect D2:1 D1:1)
(connect D9:1 D2:1)
(connect D0:1 D2:2)
(connect D4:1 D3:1)
(connect D6:1 D4:1)
(connect D14:1 D4:2)
(connect D3:0 D5:0)
(connect D8:1 D6:0)
(connect D2:1 D6:1)
(connect D11:1 D7:0)
(connect D9:1 D7:1)
(connect D17:1 D8:0)
(connect D2:1 D8:1)
(connect I1:1 D9:1)
(connect D1:1 D10:0)
(connect D2:1 D10:1)
(connect D0:0 D11:0)
(connect D9:1 D11:1)
(connect D13:1 D12:0)
(connect D7:1 D12:1)
(connect D7:1 D13:1)
(connect D15:1 D14:0)
(connect D7:1 D14:1)
(connect D13:2 D15:1)
(connect D12:1 D15:2)
(connect D9:1 D16:1)
(connect D10:2 D17:1)
(connect D1:2 D17:2)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 955 504)
(anchorPt -3 -152)
(configuration
(devCarrierFor 28
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 190 350))
(devCarrierFor 29
(active icon)
(icon
(extent 121 25))
(open
(extent 305 52))
(terminals on)
(pinCenter 440 350))
(devCarrierFor 30
(active icon)
(icon
(extent 38 25))
(open
(extent 73 42))
(terminals on)
(pinCenter 310 350))
(devCarrierFor 31
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 820 440))
(devCarrierFor 32
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 740 440))
(devCarrierFor 33
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 820 510))
(devCarrierFor 34
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 670 430))
(devCarrierFor 35
(active icon)
(icon
(extent 127 25))
(open
(extent 226 42))
(terminals on)
(pinCenter 220 490))
(devCarrierFor 42
(active icon)
(icon
(extent 69 16))
(terminals on)
(pinCenter 620 400))
(devCarrierFor 50
(active icon)
(icon
(extent 110 16))
(terminals on)
(pinCenter 120 220))
(devCarrierFor 51
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 630 300))
(devCarrierFor 52
(active icon)
(icon
(extent 102 25))
(open
(extent 686 53))
(terminals on)
(pinCenter 200 430))
(devCarrierFor 53
(active icon)
(icon
(extent 84 25))
(open
(extent 217 56))
(terminals on)
(pinCenter 500 540))
(devCarrierFor 54
(active icon)
(icon
(extent 119 25))
(open
(extent 188 53))
(terminals on)
(pinCenter 400 500))
(devCarrierFor 55
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 630 510))
(devCarrierFor 56
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 560 480))
(devCarrierFor 62
(active icon)
(icon
(extent 58 16))
(open
(extent 107 32))
(terminals on)
(pinCenter 250 220))
(devCarrierFor 63
(active icon)
(icon
(extent 32 25))
(open
(extent 12 82))
(terminals on)
(pinCenter 570 350))
(connect D16:1 D0:1
(points 6 281 220 300 220 300 260 130 260 130 350 152 350))
(connect D2:1 D1:1
(points 2 331 350 377 350))
(connect D9:1 D2:1
(points 6 177 220 200 220 200 250 250 250 250 340 288 340))
(connect D0:1 D2:2
(points 4 227 350 250 350 250 360 288 360))
(connect D4:1 D3:1
(points 2 756 440 798 440))
(connect D6:1 D4:1
(points 2 691 430 723 430))
(connect D14:1 D4:2
(points 4 650 510 700 510 700 450 723 450))
(connect D3:0 D5:0
(points 2 820 450 820 500))
(connect D8:1 D6:0
(points 3 657 400 670 400 670 420))
(connect D2:1 D6:1
(points 6 331 350 360 350 360 410 520 410 520 430 648 430))
(connect D11:1 D7:0
(points 5 253 420 270 420 270 460 220 460 220 475))
(connect D9:1 D7:1
(points 6 177 220 200 220 200 250 120 250 120 490 154 490))
(connect D17:1 D8:0
(points 3 588 350 620 350 620 389))
(connect D2:1 D8:1
(points 6 331 350 360 350 360 410 520 410 520 400 583 400))
(connect I1:1 D9:1
(points 4 3 403 10 403 10 220 62 220))
(connect D1:1 D10:0
(points 5 503 340 520 340 520 270 630 270 630 285))
(connect D2:1 D10:1
(points 4 331 350 360 350 360 300 543 300))
(connect D0:0 D11:0
(points 4 190 378 190 400 200 400 200 415))
(connect D9:1 D11:1
(points 6 177 220 200 220 200 250 120 250 120 430 146 430))
(connect D13:1 D12:0
(points 3 462 490 500 490 500 525))
(connect D7:1 D12:1
(points 4 286 490 310 490 310 540 455 540))
(connect D7:1 D13:1
(points 4 286 490 310 490 310 500 338 500))
(connect D15:1 D14:0
(points 3 576 480 630 480 630 499))
(connect D7:1 D14:1
(points 6 286 490 310 490 310 590 590 590 590 510 610 510))
(connect D13:2 D15:1
(points 4 462 510 480 510 480 470 543 470))
(connect D12:1 D15:2
(points 6 544 530 550 530 550 520 530 520 530 490 543 490))
(connect D9:1 D16:1
(points 2 177 220 218 220))
(connect D10:2 D17:1
(points 8 717 310 740 310 740 340 610 340 610 330 540 330 540 340 551 340))
(connect D1:2 D17:2
(points 2 503 360 551 360))
(connect D3:1 O1:1
(points 4 841 440 860 440 860 403 957 403)))
(stackingOrder 0 2 6 3 5 4 8 14 15 1 7 16 13 12 11 9 10 17))))
(context 85
(properties
(name "CanMoveLowPieceDownToWreckHavoc")
(trigMode deg)
(nextID 96)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 56 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 57 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 58 IFTHENELSE
(properties
(name "already moved?")
(cases 1
"(onlyAlreadyMoved AND OpponentsKnownBoard[move.from]!=-1) OR  NOT onlyAlreadyMoved"
))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 59 NOTE
(properties
(name "Comment")
(text2 4 "First see if we can do this" "only with pieces that have"
"already moved." "Then try new ones.")))
(device 60 FORMULA
(properties
(name "onlyAlreadyMoved=!a")
(expr 1 "onlyAlreadyMoved =  NOT a"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 67 EXITCONTEXT)
(device 69 IFTHENELSE
(properties
(name "0 < weight<=4")
(cases 1 "w>0 AND w<=4"))
(interface
(input 1
(name "w")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 70 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 71 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 72 DECLVAR
(properties
(name "Declare onlyAlreadyMoved")
(scope con)
(globalName "onlyAlreadyMoved"))
(implementation
(value Int32
(data  0))))
(device 73 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 74 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 75 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 76 FORCOUNT
(properties
(count 2))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 79 IFTHENELSE
(properties
(name "down square open?")
(cases 1 "KnownBoard[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 80 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 81 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 82 FORMULA
(properties
(name "my piece")
(expr 1 "KnownBoard[move.from]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 83 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 84 IFTHENELSE
(properties
(name "down direction?")
(cases 1 "move.from==(move.to-10)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 87 IFTHENELSE
(properties
(name "OK To Move Marshal?")
(cases 1 "OKToMoveMarshal(targetSquare)"))
(interface
(input 1
(name "targetSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 88 IFTHENELSE
(properties
(name "Is this piece my marshal and Known?")
(cases 1 "piece==1 AND OpponentsKnownBoard[loc]==1003"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 89 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 90 FORMULA
(properties
(name "move.from")
(expr 1 "move.from"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 92 IFTHENELSE
(properties
(name "bomb protector?")
(cases 1 "IsABombProtector(pieceLoc)"))
(interface
(input 1
(name "pieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 95 IFTHENELSE
(properties
(name "Worthwhile?")
(cases 1 "IsWorthwhileSquare(square)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D15:1 D0:0)
(connect D7:1 D0:1)
(connect D7:1 D1:1)
(connect D6:1 D2:0)
(connect D7:1 D2:1)
(connect D13:1 D4:1)
(connect D0:0 D5:0)
(connect D8:2 D6:1)
(connect D12:1 D7:1)
(connect I1:1 D7:2)
(connect D1:2 D8:0)
(connect D7:1 D8:1)
(connect D7:1 D10:1)
(connect I1:1 D11:1)
(connect D4:0 D12:0)
(connect D11:1 D12:1)
(connect D22:1 D14:0)
(connect D10:1 D14:1)
(connect D25:1 D15:1)
(connect D18:1 D15:2)
(connect D17:1 D16:1)
(connect D10:1 D16:2)
(connect D14:2 D17:0)
(connect D7:1 D17:1)
(connect D16:2 D18:1)
(connect D16:3 D18:2)
(connect D2:1 D19:0)
(connect D7:1 D19:1)
(connect D21:1 D20:0)
(connect D10:1 D20:1)
(connect D24:2 D21:0)
(connect D23:1 D21:1)
(connect D8:2 D21:2)
(connect D20:1 D22:1)
(connect D21:2 D22:2)
(connect D7:1 D23:1)
(connect D19:1 D24:0)
(connect D10:1 D24:1)
(connect D14:1 D25:0)
(connect D10:1 D25:1)
(connect D0:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1179 721)
(anchorPt -57 -259)
(configuration
(devCarrierFor 56
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 1050 540))
(devCarrierFor 57
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 470 440))
(devCarrierFor 58
(active icon)
(icon
(extent 121 25))
(open
(extent 686 52))
(terminals on)
(pinCenter 360 600))
(devCarrierFor 59
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 282 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 740 370))
(devCarrierFor 60
(active icon)
(icon
(extent 166 15))
(open
(extent 231 31))
(terminals on)
(pinCenter 330 400))
(devCarrierFor 67
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 1050 590))
(devCarrierFor 69
(active icon)
(icon
(extent 96 25))
(open
(extent 126 51))
(terminals on)
(pinCenter 580 520))
(devCarrierFor 70
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 310 490))
(devCarrierFor 71
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 420 490))
(devCarrierFor 72
(active icon)
(icon
(extent 209 15))
(open
(extent 245 103))
(pinCenter 190 310))
(devCarrierFor 73
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter 570 720))
(devCarrierFor 74
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 140 480))
(devCarrierFor 75
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 480))
(devCarrierFor 76
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 150 400))
(devCarrierFor 79
(active icon)
(icon
(extent 137 25))
(open
(extent 213 58))
(terminals on)
(pinCenter 950 760))
(devCarrierFor 80
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 990 490))
(devCarrierFor 81
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 990 870))
(devCarrierFor 82
(active icon)
(icon
(extent 61 16))
(open
(extent 198 37))
(terminals on)
(pinCenter 850 860))
(devCarrierFor 83
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 1140 920))
(devCarrierFor 84
(active icon)
(icon
(extent 108 25))
(open
(extent 213 58))
(terminals on)
(pinCenter 510 610))
(devCarrierFor 87
(active icon)
(icon
(extent 155 25))
(open
(extent 280 53))
(terminals on)
(pinCenter 860 710))
(devCarrierFor 88
(active icon)
(icon
(extent 255 25))
(open
(extent 350 53))
(terminals on)
(pinCenter 760 650))
(devCarrierFor 89
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 1000 710))
(devCarrierFor 90
(active icon)
(icon
(extent 72 15))
(open
(extent 100 31))
(terminals on)
(pinCenter 550 650))
(devCarrierFor 92
(active icon)
(icon
(extent 114 25))
(open
(extent 212 57))
(terminals on)
(pinCenter 760 600))
(devCarrierFor 95
(active icon)
(icon
(extent 84 25))
(open
(extent 208 56))
(terminals on)
(pinCenter 1080 800))
(connect D15:1 D0:0
(points 3 1007 490 1050 490 1050 530))
(connect D7:1 D0:1
(points 6 331 490 340 490 340 560 650 560 650 540 1028 540))
(connect D7:1 D1:1
(points 4 331 490 340 490 340 440 383 440))
(connect D6:1 D2:0
(points 7 630 510 640 510 640 490 510 490 510 530 360 530 360 585))
(connect D7:1 D2:1
(points 6 331 490 340 490 340 560 290 560 290 600 297 600))
(connect D13:1 D4:1
(points 2 187 400 244 400))
(connect D0:0 D5:0
(points 2 1050 550 1050 580))
(connect D8:2 D6:1
(points 4 485 500 500 500 500 520 529 520))
(connect D12:1 D7:1
(points 2 257 480 288 480))
(connect I1:1 D7:2
(points 4 57 619 280 619 280 500 288 500))
(connect D1:2 D8:0
(points 7 557 450 580 450 580 480 510 480 510 470 420 470 420 475))
(connect D7:1 D8:1
(points 2 331 490 354 490))
(connect D7:1 D10:1
(points 8 331 490 340 490 340 560 440 560 440 650 490 650 490 720 536 720))
(connect I1:1 D11:1
(points 4 57 619 80 619 80 480 108 480))
(connect D4:0 D12:0
(points 4 330 410 330 430 220 430 220 451))
(connect D11:1 D12:1
(points 2 171 480 182 480))
(connect D22:1 D14:0
(points 5 1017 710 1040 710 1040 740 950 740 950 745))
(connect D10:1 D14:1
(points 6 603 720 620 720 620 710 760 710 760 760 879 760))
(connect D25:1 D15:1
(points 6 1124 790 1140 790 1140 460 960 460 960 480 973 480))
(connect D18:1 D15:2
(points 6 1157 920 1180 920 1180 650 950 650 950 500 973 500))
(connect D17:1 D16:1
(points 2 883 860 897 860))
(connect D10:1 D16:2
(points 6 603 720 620 720 620 890 880 890 880 880 897 880))
(connect D14:2 D17:0
(points 7 1021 770 1030 770 1030 790 1020 790 1020 810 850 810 850 849))
(connect D7:1 D17:1
(points 8 331 490 340 490 340 560 610 560 610 690 630 690 630 860 817 860))
(connect D16:2 D18:1
(points 4 1082 870 1100 870 1100 910 1123 910))
(connect D16:3 D18:2
(points 4 1082 880 1090 880 1090 930 1123 930))
(connect D2:1 D19:0
(points 5 423 590 430 590 430 580 510 580 510 595))
(connect D7:1 D19:1
(points 6 331 490 340 490 340 560 440 560 440 610 453 610))
(connect D21:1 D20:0
(points 5 890 640 910 640 910 680 860 680 860 695))
(connect D10:1 D20:1
(points 4 603 720 620 720 620 710 780 710))
(connect D24:2 D21:0
(points 5 819 610 830 610 830 630 760 630 760 635))
(connect D23:1 D21:1
(points 4 588 650 600 650 600 640 630 640))
(connect D8:2 D21:2
(points 8 485 500 500 500 500 520 520 520 520 570 620 570 620 660 630 660))
(connect D20:1 D22:1
(points 2 940 700 983 700))
(connect D21:2 D22:2
(points 4 890 660 960 660 960 720 983 720))
(connect D7:1 D23:1
(points 6 331 490 340 490 340 560 440 560 440 650 511 650))
(connect D19:1 D24:0
(points 5 566 600 630 600 630 570 760 570 760 585))
(connect D10:1 D24:1
(points 6 603 720 620 720 620 710 670 710 670 600 700 600))
(connect D14:1 D25:0
(points 3 1021 750 1080 750 1080 785))
(connect D10:1 D25:1
(points 8 603 720 620 720 620 710 760 710 760 760 860 760 860 800 1035 800))
(connect D0:1 O1:1
(points 4 1071 540 1130 540 1130 619 1235 619)))
(stackingOrder 1 4 7 8 11 12 0 5 13 15 18 2 9 22 20 21 10 23 3 19 24 14 17 16 25
6))))
(context 82
(properties
(name "CanMoveLowPieceUpToCapture")
(trigMode deg)
(nextID 60)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 2 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "1 thru 5")
(cases 1 "a>0 AND a<=5"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORMULA
(properties
(name "move.from")
(expr 1 "move.from"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 12 EXITCONTEXT)
(device 18 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 20 IFTHENELSE
(properties
(name "down, up, right")
(cases 3 "to-from==10" "from-to==10" "to-from==1"))
(interface
(input 1
(name "to")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 47 IFTHENELSE
(properties
(name "? checkUpDown(a,fr,99,10)")
(cases 1 "CheckUpAndDownForKills(A, from, 99, 10)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 51 IFTHENELSE
(properties
(name "? checkUpDown(a,fr,0,-10)")
(cases 1 "CheckUpAndDownForKills(A, from, 0, -10)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 52 IFTHENELSE
(properties
(name "? checkLeftRight(a,fr,?,1)")
(cases 1 "CheckLeftAndRightForKills(A, from, (from DIV 10)*10+9, 1)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 53 IFTHENELSE
(properties
(name "? checkLeftRight(a,fr,?,-1)")
(cases 1 "CheckLeftAndRightForKills(A, from, (from DIV 10)*10, -1)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 54 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 55 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 56 FORMULA
(properties
(name "my piece")
(expr 1 "KnownBoard[move.from]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 57 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 58 IFTHENELSE
(properties
(name "is it worth killing?")
(cases 1
"(oppPiece>0 AND OppPiece<=40 ? WeightOfPiece[oppPiece]-myPieceWeight<=2 : 0)"))
(interface
(input 1
(name "myPieceWeight")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 59 FORMULA
(properties
(name "opponent piece")
(expr 1 "KnownBoard[to]"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D15:2 D0:0)
(connect D1:1 D0:1)
(connect D2:1 D1:1)
(connect I1:1 D1:2)
(connect D3:1 D2:1)
(connect I1:1 D3:1)
(connect D0:2 D4:1)
(connect D4:1 D5:0)
(connect D1:1 D5:1)
(connect D1:1 D6:1)
(connect D18:1 D7:0)
(connect D1:1 D7:1)
(connect D7:0 D8:0)
(connect D11:1 D9:1)
(connect D12:1 D9:2)
(connect D13:1 D9:3)
(connect D14:1 D9:4)
(connect D5:1 D10:1)
(connect D6:1 D10:2)
(connect D10:1 D11:0)
(connect D0:2 D11:1)
(connect D5:1 D11:2)
(connect D10:2 D12:0)
(connect D0:2 D12:1)
(connect D5:1 D12:2)
(connect D10:3 D13:0)
(connect D0:2 D13:1)
(connect D5:1 D13:2)
(connect D10:4 D14:0)
(connect D0:2 D14:1)
(connect D5:1 D14:2)
(connect D1:1 D15:1)
(connect D9:1 D16:0)
(connect D17:1 D16:1)
(connect D5:1 D16:2)
(connect D1:1 D17:1)
(connect D16:2 D18:1)
(connect D19:1 D18:2)
(connect D0:2 D19:1)
(connect D20:1 D19:2)
(connect D16:3 D20:0)
(connect D5:1 D20:1)
(connect D7:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1044 749)
(anchorPt -55 -215)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 430 330))
(devCarrierFor 3
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 320 330))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 230 320))
(devCarrierFor 5
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 150 320))
(devCarrierFor 7
(active icon)
(icon
(extent 61 25))
(open
(extent 198 51))
(terminals on)
(pinCenter 410 410))
(devCarrierFor 9
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter 240 490))
(devCarrierFor 10
(active icon)
(icon
(extent 83 15))
(open
(extent 92 31))
(terminals on)
(pinCenter 250 520))
(devCarrierFor 11
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 830 780))
(devCarrierFor 12
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 830 830))
(devCarrierFor 18
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 820 500))
(devCarrierFor 20
(active icon)
(icon
(extent 113 45))
(open
(extent 163 82))
(terminals on)
(pinCenter 420 520))
(devCarrierFor 47
(active icon)
(icon
(extent 205 25))
(open
(extent 422 51))
(terminals on)
(pinCenter 630 440))
(devCarrierFor 51
(active icon)
(icon
(extent 205 25))
(open
(extent 422 51))
(terminals on)
(pinCenter 640 490))
(devCarrierFor 52
(active icon)
(icon
(extent 193 25))
(open
(extent 553 51))
(terminals on)
(pinCenter 630 550))
(devCarrierFor 53
(active icon)
(icon
(extent 203 25))
(open
(extent 544 51))
(terminals on)
(pinCenter 630 610))
(devCarrierFor 54
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 480 270))
(devCarrierFor 55
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 890 570))
(devCarrierFor 56
(active icon)
(icon
(extent 61 16))
(open
(extent 190 33))
(terminals on)
(pinCenter 400 690))
(devCarrierFor 57
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 930 640))
(devCarrierFor 58
(active icon)
(icon
(extent 116 25))
(open
(extent 599 60))
(terminals on)
(pinCenter 590 730))
(devCarrierFor 59
(active icon)
(icon
(extent 107 16))
(open
(extent 172 32))
(terminals on)
(pinCenter 420 740))
(connect D15:2 D0:0
(points 5 567 280 590 280 590 310 430 310 430 315))
(connect D1:1 D0:1
(points 2 341 330 364 330))
(connect D2:1 D1:1
(points 2 267 320 298 320))
(connect I1:1 D1:2
(points 6 55 589 320 589 320 480 290 480 290 340 298 340))
(connect D3:1 D2:1
(points 2 181 320 192 320))
(connect I1:1 D3:1
(points 4 55 589 100 589 100 320 118 320))
(connect D0:2 D4:1
(points 6 495 340 510 340 510 380 360 380 360 410 377 410))
(connect D4:1 D5:0
(points 5 443 400 460 400 460 450 240 450 240 480))
(connect D1:1 D5:1
(points 8 341 330 350 330 350 360 340 360 340 370 190 370 190 490 206 490))
(connect D1:1 D6:1
(points 8 341 330 350 330 350 360 340 360 340 370 190 370 190 520 206 520))
(connect D18:1 D7:0
(points 5 947 640 970 640 970 680 830 680 830 770))
(connect D1:1 D7:1
(points 10 341 330 350 330 350 360 340 360 340 370 190 370 190 700 320 700 320
780 808 780))
(connect D7:0 D8:0
(points 2 830 790 830 820))
(connect D11:1 D9:1
(points 4 735 430 780 430 780 480 803 480))
(connect D12:1 D9:2
(points 4 745 480 770 480 770 490 803 490))
(connect D13:1 D9:3
(points 4 729 540 760 540 760 500 803 500))
(connect D14:1 D9:4
(points 4 734 600 770 600 770 510 803 510))
(connect D5:1 D10:1
(points 4 273 490 330 490 330 510 361 510))
(connect D6:1 D10:2
(points 4 294 520 310 520 310 530 361 530))
(connect D10:1 D11:0
(points 5 479 500 490 500 490 410 630 410 630 425))
(connect D0:2 D11:1
(points 4 495 340 510 340 510 430 525 430))
(connect D5:1 D11:2
(points 6 273 490 330 490 330 480 480 480 480 450 525 450))
(connect D10:2 D12:0
(points 5 479 510 500 510 500 470 640 470 640 475))
(connect D0:2 D12:1
(points 4 495 340 510 340 510 480 535 480))
(connect D5:1 D12:2
(points 8 273 490 330 490 330 480 480 480 480 450 520 450 520 500 535 500))
(connect D10:3 D13:0
(points 3 479 520 630 520 630 535))
(connect D0:2 D13:1
(points 4 495 340 510 340 510 540 531 540))
(connect D5:1 D13:2
(points 8 273 490 330 490 330 480 480 480 480 450 520 450 520 560 531 560))
(connect D10:4 D14:0
(points 5 479 530 500 530 500 590 630 590 630 595))
(connect D0:2 D14:1
(points 4 495 340 510 340 510 600 526 600))
(connect D5:1 D14:2
(points 6 273 490 330 490 330 510 340 510 340 620 526 620))
(connect D1:1 D15:1
(points 4 341 330 350 330 350 270 393 270))
(connect D9:1 D16:0
(points 3 836 500 890 500 890 550))
(connect D17:1 D16:1
(points 6 433 690 450 690 450 660 790 660 790 560 797 560))
(connect D5:1 D16:2
(points 10 273 490 330 490 330 510 340 510 340 620 510 620 510 650 780 650 780
580 797 580))
(connect D1:1 D17:1
(points 10 341 330 350 330 350 360 340 360 340 370 190 370 190 700 340 700 340
690 367 690))
(connect D16:2 D18:1
(points 6 982 570 990 570 990 610 900 610 900 630 913 630))
(connect D19:1 D18:2
(points 4 650 720 800 720 800 650 913 650))
(connect D0:2 D19:1
(points 6 495 340 510 340 510 600 500 600 500 720 529 720))
(connect D20:1 D19:2
(points 2 476 740 529 740))
(connect D16:3 D20:0
(points 7 982 580 1010 580 1010 690 490 690 490 710 420 710 420 729))
(connect D5:1 D20:1
(points 8 273 490 330 490 330 510 340 510 340 620 330 620 330 740 364 740))
(connect D7:1 O1:1
(points 4 851 780 1000 780 1000 589 1098 589)))
(stackingOrder 3 1 5 6 2 12 13 14 4 15 0 11 9 10 16 17 7 8 18 20 19))))
(context 84
(properties
(name "CanMoveLowPieceUpToFindUnknown")
(trigMode deg)
(nextID 57)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 2 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "a==b")
(cases 1 "a==b"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORMULA
(properties
(name "move.from")
(expr 1 "move.from"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 12 EXITCONTEXT)
(device 18 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 20 IFTHENELSE
(properties
(name "down, up, right")
(cases 3 "to-from==10" "from-to==10" "to-from==1"))
(interface
(input 1
(name "to")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 47 IFTHENELSE
(properties
(name "? checkUpDown(a,fr,99,10)")
(cases 1 "CheckUpAndDownForUnknownsAndKills(A, from, 99, 10)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 51 IFTHENELSE
(properties
(name "? checkUpDown(a,fr,0,-10)")
(cases 1 "CheckUpAndDownForUnknownsAndKills(A, from, 0, -10)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 52 IFTHENELSE
(properties
(name "? checkLeftRight(a,fr,?,1)")
(cases 1 "CheckLeftAndRightForUnknownsAndKills(A, from, (from DIV 10)*10+9, 1)")
)
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 53 IFTHENELSE
(properties
(name "? checkLeftRight(a,fr,?,-1)")
(cases 1 "CheckLeftAndRightForUnknownsAndKills(A, from, (from DIV 10)*10, -1)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 54 FORRANGE
(properties
(from 5)
(thru 0)
(step -1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 55 NOTE
(properties
(name "Comment")
(text2 2 "Try a 5 to move up, then " "a 4, then a 3, etc.")))
(device 56 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D17:2 D0:0)
(connect D1:1 D0:1)
(connect D2:1 D1:1)
(connect I1:1 D1:2)
(connect D15:1 D2:0)
(connect D3:1 D2:1)
(connect I1:1 D3:1)
(connect D0:2 D4:1)
(connect D15:1 D4:2)
(connect D4:1 D5:0)
(connect D1:1 D5:1)
(connect D1:1 D6:1)
(connect D9:1 D7:0)
(connect D1:1 D7:1)
(connect D7:0 D8:0)
(connect D11:1 D9:1)
(connect D12:1 D9:2)
(connect D13:1 D9:3)
(connect D14:1 D9:4)
(connect D5:1 D10:1)
(connect D6:1 D10:2)
(connect D10:1 D11:0)
(connect D0:2 D11:1)
(connect D5:1 D11:2)
(connect D10:2 D12:0)
(connect D0:2 D12:1)
(connect D5:1 D12:2)
(connect D10:3 D13:0)
(connect D0:2 D13:1)
(connect D5:1 D13:2)
(connect D10:4 D14:0)
(connect D0:2 D14:1)
(connect D5:1 D14:2)
(connect D1:1 D17:1)
(connect D7:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1044 658)
(anchorPt -49 -95)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 430 330))
(devCarrierFor 3
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 320 330))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 230 320))
(devCarrierFor 5
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 150 320))
(devCarrierFor 7
(active icon)
(icon
(extent 39 25))
(open
(extent 65 51))
(terminals on)
(pinCenter 400 410))
(devCarrierFor 9
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter 240 490))
(devCarrierFor 10
(active icon)
(icon
(extent 83 15))
(open
(extent 92 31))
(terminals on)
(pinCenter 250 520))
(devCarrierFor 11
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 880 510))
(devCarrierFor 12
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 880 580))
(devCarrierFor 18
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 810 480))
(devCarrierFor 20
(active icon)
(icon
(extent 113 45))
(open
(extent 163 82))
(terminals on)
(pinCenter 420 520))
(devCarrierFor 47
(active icon)
(icon
(extent 205 25))
(open
(extent 422 51))
(terminals on)
(pinCenter 630 440))
(devCarrierFor 51
(active icon)
(icon
(extent 205 25))
(open
(extent 422 51))
(terminals on)
(pinCenter 640 490))
(devCarrierFor 52
(active icon)
(icon
(extent 193 25))
(open
(extent 553 51))
(terminals on)
(pinCenter 630 550))
(devCarrierFor 53
(active icon)
(icon
(extent 203 25))
(open
(extent 544 51))
(terminals on)
(pinCenter 630 610))
(devCarrierFor 54
(active open)
(icon
(iconImage "loop.icn"))
(open
(extent 113 79))
(pinCenter 150 220))
(devCarrierFor 55
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 282 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 930 180))
(devCarrierFor 56
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 470 280))
(connect D17:2 D0:0
(points 7 557 290 580 290 580 320 520 320 520 310 430 310 430 315))
(connect D1:1 D0:1
(points 2 341 330 364 330))
(connect D2:1 D1:1
(points 2 267 320 298 320))
(connect I1:1 D1:2
(points 6 49 423 320 423 320 480 290 480 290 340 298 340))
(connect D15:1 D2:0
(points 3 209 220 230 220 230 291))
(connect D3:1 D2:1
(points 2 181 320 192 320))
(connect I1:1 D3:1
(points 4 49 423 100 423 100 320 118 320))
(connect D0:2 D4:1
(points 6 495 340 520 340 520 370 360 370 360 400 378 400))
(connect D15:1 D4:2
(points 8 209 220 230 220 230 270 280 270 280 380 330 380 330 420 378 420))
(connect D4:1 D5:0
(points 5 422 400 440 400 440 450 240 450 240 480))
(connect D1:1 D5:1
(points 8 341 330 350 330 350 360 340 360 340 370 190 370 190 490 206 490))
(connect D1:1 D6:1
(points 8 341 330 350 330 350 360 340 360 340 370 190 370 190 520 206 520))
(connect D9:1 D7:0
(points 3 826 480 880 480 880 500))
(connect D1:1 D7:1
(points 8 341 330 350 330 350 360 340 360 340 380 850 380 850 510 858 510))
(connect D7:0 D8:0
(points 2 880 520 880 570))
(connect D11:1 D9:1
(points 4 735 430 760 430 760 460 793 460))
(connect D12:1 D9:2
(points 4 745 480 760 480 760 470 793 470))
(connect D13:1 D9:3
(points 4 729 540 760 540 760 480 793 480))
(connect D14:1 D9:4
(points 4 734 600 770 600 770 490 793 490))
(connect D5:1 D10:1
(points 4 273 490 330 490 330 510 361 510))
(connect D6:1 D10:2
(points 4 294 520 310 520 310 530 361 530))
(connect D10:1 D11:0
(points 5 479 500 490 500 490 410 630 410 630 425))
(connect D0:2 D11:1
(points 6 495 340 520 340 520 370 510 370 510 430 525 430))
(connect D5:1 D11:2
(points 6 273 490 330 490 330 480 450 480 450 450 525 450))
(connect D10:2 D12:0
(points 5 479 510 500 510 500 460 640 460 640 475))
(connect D0:2 D12:1
(points 6 495 340 520 340 520 370 510 370 510 480 535 480))
(connect D5:1 D12:2
(points 6 273 490 330 490 330 560 520 560 520 500 535 500))
(connect D10:3 D13:0
(points 3 479 520 630 520 630 535))
(connect D0:2 D13:1
(points 6 495 340 520 340 520 370 510 370 510 540 531 540))
(connect D5:1 D13:2
(points 4 273 490 330 490 330 560 531 560))
(connect D10:4 D14:0
(points 5 479 530 490 530 490 590 630 590 630 595))
(connect D0:2 D14:1
(points 6 495 340 520 340 520 370 510 370 510 600 526 600))
(connect D5:1 D14:2
(points 6 273 490 330 490 330 560 500 560 500 620 526 620))
(connect D1:1 D17:1
(points 4 341 330 350 330 350 280 383 280))
(connect D7:1 O1:1
(points 4 901 510 920 510 920 423 1092 423)))
(stackingOrder 3 1 5 6 2 0 10 12 15 4 11 14 13 9 7 8 16 17))))
(context 132
(properties
(name "CanMovePieceTowardPotentialFlag")
(trigMode deg)
(nextID 57)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 18 NOTE
(properties
(name "Comment")
(text2 4 "If there\'s a known bomb," "look thru all the \'other\'"
"moves to see if we can get" "an 8 closer to it.")))
(device 23 NOTE
(properties
(name "if can move closer")
(text2 4 "Move down and vertDist + (below me)"
"Move up and vertDist - (above me)" "Move right and hDist > 0 (right of me)"
"Move left and hDist<0 (left of me)")))
(device 24 NOTE
(properties
(name "Comment")
(text2 4 "Many times there\'s multiple" "8\'s that can move.  If so,"
"pick one that\'s already" "moved.")))
(device 28 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 29 IFTHENELSE
(properties
(name "already moved?")
(cases 1 "OpponentsKnownBoard[move.from]!=-1"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 30 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "move")
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 31 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 32 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 33 EXITCONTEXT)
(device 34 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 35 FORMULA
(properties
(name "pick first (move[0])")
(expr 1 "move[0]"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 42 CONTEXT
(properties
(name "SafeMove")
(trigMode deg)
(nextID 10)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YES")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "piece and move.to")
(expr 1 "piece = KnownBoard[move.from], move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "piece")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 2 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 3 IFTHENELSE
(properties
(name "Is this a potential trap?")
(cases 1 "(piece>=1 AND piece<=4) AND (OpponentsKnownBoard[move.from]>1000)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "my piece weight")
(expr 1 "WeightOfPiece[KnownBoard[move.from]-1000]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 IFTHENELSE
(properties
(name "am I a miner?")
(cases 1 "w==8"))
(interface
(input 1
(name "w")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 IFTHENELSE
(properties
(name "Worthwhile?")
(cases 1 "IsWorthwhileSquare(move.to)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 IFTHENELSE
(properties
(name "downward move?")
(cases 1 "move.to==move.from+10"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D0:2 D1:2)
(connect D1:2 D2:1)
(connect D3:2 D2:2)
(connect D5:2 D3:0)
(connect D4:1 D3:1)
(connect I1:1 D3:2)
(connect D1:3 D4:0)
(connect I1:1 D4:1)
(connect D4:1 D5:1)
(connect D7:1 D6:0)
(connect I1:1 D6:1)
(connect D2:1 D7:0)
(connect I1:1 D7:1)
(connect D7:2 D8:1)
(connect D6:1 D8:2)
(connect D8:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 815 390)
(anchorPt 1 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 127 25))
(open
(extent 276 42))
(terminals on)
(pinCenter 130 80))
(devCarrierFor 1
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 320 80))
(devCarrierFor 2
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 600 110))
(devCarrierFor 3
(active icon)
(icon
(extent 157 25))
(open
(extent 552 53))
(terminals on)
(pinCenter 420 220))
(devCarrierFor 4
(active icon)
(icon
(extent 110 16))
(open
(extent 327 34))
(terminals on)
(pinCenter 250 140))
(devCarrierFor 5
(active icon)
(icon
(extent 93 25))
(open
(extent 61 53))
(terminals on)
(pinCenter 390 140))
(devCarrierFor 6
(active icon)
(icon
(extent 84 25))
(open
(extent 217 56))
(terminals on)
(pinCenter 680 280))
(devCarrierFor 7
(active icon)
(icon
(extent 119 25))
(open
(extent 188 53))
(terminals on)
(pinCenter 610 200))
(devCarrierFor 8
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 760 190))
(connect I1:1 D0:1
(points 4 -1 194 10 194 10 80 64 80))
(connect D0:1 D1:1
(points 2 196 70 227 70))
(connect D0:2 D1:2
(points 2 196 90 227 90))
(connect D1:2 D2:1
(points 4 412 80 430 80 430 100 583 100))
(connect D3:2 D2:2
(points 4 501 230 520 230 520 120 583 120))
(connect D5:2 D3:0
(points 5 439 150 460 150 460 180 420 180 420 205))
(connect D4:1 D3:1
(points 4 307 140 320 140 320 210 339 210))
(connect I1:1 D3:2
(points 6 -1 194 20 194 20 140 170 140 170 230 339 230))
(connect D1:3 D4:0
(points 5 412 90 420 90 420 120 250 120 250 129))
(connect I1:1 D4:1
(points 4 -1 194 20 194 20 140 192 140))
(connect D4:1 D5:1
(points 2 307 140 341 140))
(connect D7:1 D6:0
(points 5 672 190 700 190 700 240 680 240 680 265))
(connect I1:1 D6:1
(points 10 -1 194 20 194 20 140 170 140 170 230 320 230 320 260 540 260 540 280
635 280))
(connect D2:1 D7:0
(points 5 617 110 640 110 640 150 610 150 610 185))
(connect I1:1 D7:1
(points 10 -1 194 20 194 20 140 170 140 170 230 320 230 320 260 530 260 530 200
548 200))
(connect D7:2 D8:1
(points 4 672 210 690 210 690 180 743 180))
(connect D6:1 D8:2
(points 6 724 270 730 270 730 250 720 250 720 200 743 200))
(connect D8:1 O1:1
(points 4 777 190 795 190 795 194 813 194)))
(stackingOrder 0 1 3 4 2 5 8 7 6))))
(device 48 IFTHENELSE
(properties
(name "any moves?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 49 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 50 CONTEXT
(properties
(name "FindFlagGetterMoves")
(trigMode deg)
(nextID 43)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "FlagGetterMoves")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 FORMULA
(properties
(name "move.from")
(expr 1 "move.from"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 FORMULA
(properties
(name "horiz dist")
(expr 1 "(to MOD 10)-(from MOD 10)"))
(interface
(input 1
(name "from")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "if can move closer")
(cases 4 "to-from==10 AND vdist>0" "from-to==10 AND vdist<0"
"to-from==1 AND hdist>0" "from-to==1 AND hdist<0"))
(interface
(input 1
(name "to")
(optional yes))
(input 2
(name "from")
(optional yes))
(input 3
(name "hdist")
(optional yes))
(input 4
(name "vdist")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 11 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 13 FORMULA
(properties
(name "vert dist ")
(expr 1 "(to DIV 10)-(from DIV 10)"))
(interface
(input 1
(name "from")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 15 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data")
(requires
(datatype Record)
(shape "Scalar")))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 25 FORMULA
(properties
(name "flag position[i]")
(expr 1 "PossibleOppFlagPositions[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 27 CALL
(properties
(name "Call SortByProximity")
(callFunc "SortByProximity")
(parmMode rev30))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "sorted moves")
(lock name constraints)
(optional yes))))
(device 28 IFTHENELSE
(properties
(name "any moves?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 29 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 30 FORCOUNT
(properties
(count 5))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 31 FORMULA
(properties
(name "# flag locs")
(expr 1 "n = TotSize(PossibleOppFlagPositions), (n>5 ? 2 : 1)"))
(interface
(output 1
(name "n")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 32 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "targetSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 34 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, to = move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "to")
(optional yes))))
(device 38 IFTHENELSE
(properties
(name "flag surrounded by bombs?")
(cases 1 "IsSurroundedByBombs(pos)"))
(interface
(input 1
(name "pos")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 39 IFTHENELSE
(properties
(name "miner?")
(cases 1 "w==8"))
(interface
(input 1
(name "w")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 40 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 41 IFTHENELSE
(properties
(name "is bungus location?")
(cases 1 "IsBungusLocation(to, flagLoc)"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "flagLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I1:1 D0:1)
(connect D17:1 D1:0)
(connect D0:1 D1:1)
(connect D3:1 D2:1)
(connect D1:1 D3:1)
(connect I1:1 D3:2)
(connect D3:1 D4:1)
(connect D4:1 D5:1)
(connect D13:1 D5:2)
(connect D8:2 D6:0)
(connect D3:1 D6:1)
(connect D23:1 D7:0)
(connect D2:1 D7:1)
(connect D4:1 D7:2)
(connect D5:1 D7:3)
(connect D10:1 D7:4)
(connect D3:1 D8:1)
(connect D7:1 D9:1)
(connect D7:2 D9:2)
(connect D7:3 D9:3)
(connect D7:4 D9:4)
(connect D4:1 D10:1)
(connect D13:1 D10:2)
(connect D9:1 D11:0)
(connect D3:1 D11:1)
(connect D19:1 D12:1)
(connect D17:0 D12:2)
(connect D17:1 D13:1)
(connect D15:1 D14:0)
(connect D12:1 D14:1)
(connect D16:5 D15:1)
(connect D12:1 D16:1)
(connect D18:2 D17:1)
(connect D20:1 D19:1)
(connect D20:2 D19:2)
(connect D13:1 D19:3)
(connect D11:1 D20:1)
(connect D22:2 D21:0)
(connect D13:1 D21:1)
(connect D6:2 D22:1)
(connect D22:1 D23:1)
(connect D24:2 D23:2)
(connect D21:2 D24:0)
(connect D2:1 D24:1)
(connect D13:1 D24:2)
(connect D14:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1108 630)
(anchorPt 91 -159)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 180 300))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 260 300))
(devCarrierFor 4
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter 260 400))
(devCarrierFor 5
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 350 310))
(devCarrierFor 7
(active icon)
(icon
(extent 83 15))
(open
(extent 92 31))
(terminals on)
(pinCenter 270 430))
(devCarrierFor 8
(active icon)
(icon
(extent 73 25))
(open
(extent 229 42))
(terminals on)
(pinCenter 240 490))
(devCarrierFor 9
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 580 320))
(devCarrierFor 10
(active icon)
(icon
(extent 141 54))
(open
(extent 222 102))
(terminals on)
(pinCenter 470 510))
(devCarrierFor 11
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 480 270))
(devCarrierFor 12
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 590 510))
(devCarrierFor 13
(active icon)
(icon
(extent 70 25))
(open
(extent 229 42))
(terminals on)
(pinCenter 240 540))
(devCarrierFor 14
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 660 520))
(devCarrierFor 15
(active icon)
(icon
(extent 74 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 880 600))
(devCarrierFor 25
(active icon)
(icon
(extent 95 16))
(open
(extent 215 32))
(terminals on)
(pinCenter 70 500))
(devCarrierFor 27
(active icon)
(icon
(extent 138 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 920 710))
(devCarrierFor 28
(active icon)
(icon
(extent 83 25))
(open
(extent 55 65))
(terminals on)
(pinCenter 750 750))
(devCarrierFor 29
(active icon)
(icon
(extent 180 61)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 600 730))
(devCarrierFor 30
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 91 49))
(pinCenter 110 220))
(devCarrierFor 31
(active icon)
(icon
(extent 70 25))
(open
(extent 366 42))
(terminals on)
(pinCenter 0 210))
(devCarrierFor 32
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 69 82))
(terminals on)
(pinCenter 890 510))
(devCarrierFor 34
(active icon)
(icon
(extent 52 45))
(open
(extent 230 85))
(terminals on)
(pinCenter 740 520))
(devCarrierFor 38
(active icon)
(icon
(extent 190 25))
(open
(extent 300 53))
(terminals on)
(pinCenter 770 360))
(devCarrierFor 39
(active icon)
(icon
(extent 47 25))
(open
(extent 61 53))
(terminals on)
(pinCenter 720 300))
(devCarrierFor 40
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 850 290))
(devCarrierFor 41
(active icon)
(icon
(extent 134 25))
(open
(extent 223 58))
(terminals on)
(pinCenter 770 420))
(connect I1:1 D0:1
(points 4 -91 473 0 473 0 300 148 300))
(connect D17:1 D1:0
(points 7 147 220 170 220 170 270 190 270 190 260 260 260 260 271))
(connect D0:1 D1:1
(points 2 211 300 222 300))
(connect D3:1 D2:1
(points 6 371 310 390 310 390 350 210 350 210 400 226 400))
(connect D1:1 D3:1
(points 2 297 300 328 300))
(connect I1:1 D3:2
(points 8 -91 473 0 473 0 300 140 300 140 250 320 250 320 320 328 320))
(connect D3:1 D4:1
(points 6 371 310 390 310 390 350 210 350 210 430 226 430))
(connect D4:1 D5:1
(points 6 314 430 330 430 330 460 180 460 180 480 201 480))
(connect D13:1 D5:2
(points 2 120 500 201 500))
(connect D8:2 D6:0
(points 3 567 280 580 280 580 305))
(connect D3:1 D6:1
(points 4 371 310 390 310 390 320 514 320))
(connect D23:1 D7:0
(points 5 867 290 910 290 910 460 470 460 470 480))
(connect D2:1 D7:1
(points 4 293 400 350 400 350 490 397 490))
(connect D4:1 D7:2
(points 6 314 430 330 430 330 460 340 460 340 500 397 500))
(connect D5:1 D7:3
(points 4 279 490 300 490 300 510 397 510))
(connect D10:1 D7:4
(points 4 277 540 300 540 300 520 397 520))
(connect D3:1 D8:1
(points 4 371 310 380 310 380 270 393 270))
(connect D7:1 D9:1
(points 2 543 490 573 490))
(connect D7:2 D9:2
(points 2 543 500 573 500))
(connect D7:3 D9:3
(points 2 543 510 573 510))
(connect D7:4 D9:4
(points 2 543 520 573 520))
(connect D4:1 D10:1
(points 6 314 430 330 430 330 460 180 460 180 530 202 530))
(connect D13:1 D10:2
(points 6 120 500 140 500 140 530 150 530 150 550 202 550))
(connect D9:1 D11:0
(points 5 606 510 620 510 620 490 660 490 660 510))
(connect D3:1 D11:1
(points 6 371 310 390 310 390 360 630 360 630 520 638 520))
(connect D19:1 D12:1
(points 6 937 510 960 510 960 560 830 560 830 590 840 590))
(connect D17:0 D12:2
(points 5 110 248 110 280 130 280 130 610 840 610))
(connect D17:1 D13:1
(points 6 147 220 170 220 170 270 -10 270 -10 500 20 500))
(connect D15:1 D14:0
(points 5 794 740 810 740 810 680 920 680 920 695))
(connect D12:1 D14:1
(points 6 919 600 940 600 940 640 830 640 830 710 848 710))
(connect D16:5 D15:1
(points 2 692 750 706 750))
(connect D12:1 D16:1
(points 6 919 600 940 600 940 640 490 640 490 730 507 730))
(connect D18:2 D17:1
(points 2 37 220 72 220))
(connect D20:1 D19:1
(points 4 768 510 780 510 780 500 843 500))
(connect D20:2 D19:2
(points 4 768 530 780 530 780 510 843 510))
(connect D13:1 D19:3
(points 8 120 500 140 500 140 530 150 530 150 580 790 580 790 520 843 520))
(connect D11:1 D20:1
(points 2 681 520 711 520))
(connect D22:2 D21:0
(points 3 746 310 770 310 770 345))
(connect D13:1 D21:1
(points 6 120 500 170 500 170 370 640 370 640 360 672 360))
(connect D6:2 D22:1
(points 4 645 330 670 330 670 300 694 300))
(connect D22:1 D23:1
(points 4 746 290 770 290 770 280 833 280))
(connect D24:2 D23:2
(points 6 839 430 900 430 900 330 810 330 810 300 833 300))
(connect D21:2 D24:0
(points 5 867 370 890 370 890 400 770 400 770 405))
(connect D2:1 D24:1
(points 4 293 400 350 400 350 410 700 410))
(connect D13:1 D24:2
(points 6 120 500 170 500 170 370 640 370 640 430 700 430))
(connect D14:1 O1:1
(points 4 991 710 1010 710 1010 473 1016 473)))
(stackingOrder 0 1 2 3 4 9 10 11 8 5 17 20 7 16 15 19 12 14 6 13 22 23 21 24 18))))
(device 51 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 52 IFTHENELSE
(properties
(name "close enough?")
(cases 1
"( NOT (totSize(moves)>8 AND moves[0].distance>8)) AND (OpponentsKnownBoard[moves[0].from]==-1)"
))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 53 IFTHENELSE
(properties
(name "Worthwhile?")
(cases 1 "IsWorthwhileSquare(move.to)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 54 IFTHENELSE
(properties
(name "downward move?")
(cases 1 "move.to==move.from+10"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 55 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 56 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect D12:1 D3:0)
(connect D13:5 D3:1)
(connect D5:1 D4:1)
(connect D14:1 D5:1)
(connect D3:1 D5:2)
(connect D7:1 D6:1)
(connect D9:1 D7:1)
(connect D19:1 D7:2)
(connect D6:0 D8:0)
(connect D11:1 D9:0)
(connect D5:1 D9:1)
(connect D16:1 D10:0)
(connect D14:1 D10:1)
(connect D15:2 D11:0)
(connect D5:1 D11:1)
(connect D13:5 D12:1)
(connect D14:1 D13:1)
(connect I1:1 D14:1)
(connect D4:1 D15:0)
(connect D5:1 D15:1)
(connect D3:0 D16:0)
(connect D14:1 D16:1)
(connect D18:1 D17:0)
(connect D10:1 D17:1)
(connect D10:1 D18:1)
(connect D20:1 D19:0)
(connect D10:1 D19:1)
(connect D18:2 D20:1)
(connect D17:1 D20:2)
(connect D6:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 912 672)
(anchorPt 2 -113)
(configuration
(devCarrierFor 18
(active open)
(icon
(extent 68 52)
(iconImage "notepad.icn"))
(open
(extent 276 90)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 760 220))
(devCarrierFor 23
(active open)
(icon
(extent 141 0)
(iconImage "notepad.icn"))
(open
(extent 373 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 510 690))
(devCarrierFor 24
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 282 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 160 690))
(devCarrierFor 28
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 190 350))
(devCarrierFor 29
(active icon)
(icon
(extent 121 25))
(open
(extent 305 52))
(terminals on)
(pinCenter 440 350))
(devCarrierFor 30
(active icon)
(icon
(extent 38 25))
(open
(extent 73 42))
(terminals on)
(pinCenter 310 350))
(devCarrierFor 31
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 820 440))
(devCarrierFor 32
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 740 440))
(devCarrierFor 33
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 820 510))
(devCarrierFor 34
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 670 430))
(devCarrierFor 35
(active icon)
(icon
(extent 127 25))
(open
(extent 226 42))
(terminals on)
(pinCenter 220 490))
(devCarrierFor 42
(active icon)
(icon
(extent 69 16))
(terminals on)
(pinCenter 620 400))
(devCarrierFor 48
(active icon)
(icon
(extent 83 25))
(open
(extent 55 65))
(terminals on)
(pinCenter 530 270))
(devCarrierFor 49
(active icon)
(icon
(extent 180 61)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 360 250))
(devCarrierFor 50
(active icon)
(icon
(extent 150 16))
(terminals on)
(pinCenter 150 170))
(devCarrierFor 51
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 620 350))
(devCarrierFor 52
(active icon)
(icon
(extent 102 25))
(open
(extent 686 53))
(terminals on)
(pinCenter 190 430))
(devCarrierFor 53
(active icon)
(icon
(extent 84 25))
(open
(extent 217 56))
(terminals on)
(pinCenter 520 550))
(devCarrierFor 54
(active icon)
(icon
(extent 119 25))
(open
(extent 188 53))
(terminals on)
(pinCenter 430 500))
(devCarrierFor 55
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 630 510))
(devCarrierFor 56
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 560 480))
(connect D12:1 D3:0
(points 5 574 260 590 260 590 310 190 310 190 321))
(connect D13:5 D3:1
(points 6 452 270 470 270 470 300 130 300 130 350 152 350))
(connect D5:1 D4:1
(points 2 331 350 377 350))
(connect D14:1 D5:1
(points 4 227 170 250 170 250 340 288 340))
(connect D3:1 D5:2
(points 4 227 350 250 350 250 360 288 360))
(connect D7:1 D6:1
(points 2 756 440 798 440))
(connect D9:1 D7:1
(points 2 691 430 723 430))
(connect D19:1 D7:2
(points 4 650 510 700 510 700 450 723 450))
(connect D6:0 D8:0
(points 2 820 450 820 500))
(connect D11:1 D9:0
(points 3 657 400 670 400 670 420))
(connect D5:1 D9:1
(points 6 331 350 360 350 360 410 520 410 520 430 648 430))
(connect D16:1 D10:0
(points 5 243 420 260 420 260 460 220 460 220 475))
(connect D14:1 D10:1
(points 6 227 170 250 170 250 290 120 290 120 490 154 490))
(connect D15:2 D11:0
(points 7 707 360 730 360 730 390 680 390 680 380 620 380 620 389))
(connect D5:1 D11:1
(points 6 331 350 360 350 360 410 520 410 520 400 583 400))
(connect D13:5 D12:1
(points 2 452 270 486 270))
(connect D14:1 D13:1
(points 4 227 170 250 170 250 250 267 250))
(connect I1:1 D14:1
(points 4 -2 448 10 448 10 170 72 170))
(connect D4:1 D15:0
(points 5 503 340 510 340 510 320 620 320 620 335))
(connect D5:1 D15:1
(points 6 331 350 360 350 360 410 520 410 520 350 533 350))
(connect D3:0 D16:0
(points 2 190 378 190 415))
(connect D14:1 D16:1
(points 6 227 170 250 170 250 290 120 290 120 430 136 430))
(connect D18:1 D17:0
(points 3 492 490 520 490 520 535))
(connect D10:1 D17:1
(points 4 286 490 310 490 310 550 475 550))
(connect D10:1 D18:1
(points 4 286 490 310 490 310 500 368 500))
(connect D20:1 D19:0
(points 3 576 480 630 480 630 499))
(connect D10:1 D19:1
(points 6 286 490 310 490 310 590 590 590 590 510 610 510))
(connect D18:2 D20:1
(points 4 492 510 510 510 510 470 543 470))
(connect D17:1 D20:2
(points 6 564 540 570 540 570 530 530 530 530 490 543 490))
(connect D6:1 O1:1
(points 4 841 440 860 440 860 448 909 448)))
(stackingOrder 3 5 9 6 8 7 12 0 1 2 13 15 11 18 19 20 17 4 10 16 14))))
(context 80
(properties
(name "CanMoveSpyTowardMarshal")
(trigMode deg)
(nextID 28)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 3 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 IFTHENELSE
(properties
(name "if KnownBoard[i] is Marshall")
(cases 1 "knownboard[i]==3"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 IFTHENELSE
(properties
(name "piece==1002 (spy)")
(cases 1 "piece==1002"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORMULA
(properties
(name "move.from")
(expr 1 "move.from"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 12 EXITCONTEXT)
(device 14 NOTE
(properties
(name "if can move closer")
(text2 4 "Move down and vertDist + (below me)"
"Move up and vertDist - (above me)" "Move right and hDist > 0 (right of me)"
"Move left and hDist<0 (left of me)")))
(device 19 IFTHENELSE
(properties
(name "if can move closer")
(cases 4 "to-from==10 AND vdist>0" "from-to==10 AND vdist<0"
"to-from==1 AND hdist>0" "from-to==1 AND hdist<0"))
(interface
(input 1
(name "to")
(optional yes))
(input 2
(name "from")
(optional yes))
(input 3
(name "hdist")
(optional yes))
(input 4
(name "vdist")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 20 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 22 FORCOUNT
(properties
(name "For 100")
(count 100))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 23 FORMULA
(properties
(name "horiz dist")
(expr 1 "(to MOD 10)-(from MOD 10)"))
(interface
(input 1
(name "from")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 24 FORMULA
(properties
(name "vert dist ")
(expr 1 "(to DIV 10)-(from DIV 10)"))
(interface
(input 1
(name "from")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 25 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 26 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 27 FORMULA
(properties
(name "my piece")
(expr 1 "KnownBoard[from]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D1:1 D0:1)
(connect I1:1 D0:2)
(connect D3:1 D1:0)
(connect D2:1 D1:1)
(connect I1:1 D2:1)
(connect D12:1 D3:1)
(connect D15:2 D4:0)
(connect D17:1 D4:1)
(connect D0:1 D5:1)
(connect D0:1 D6:1)
(connect D11:1 D7:0)
(connect D0:1 D7:1)
(connect D7:0 D8:0)
(connect D16:2 D10:0)
(connect D5:1 D10:1)
(connect D6:1 D10:2)
(connect D13:1 D10:3)
(connect D14:1 D10:4)
(connect D10:1 D11:1)
(connect D10:2 D11:2)
(connect D10:3 D11:3)
(connect D10:4 D11:4)
(connect D6:1 D13:1)
(connect D12:1 D13:2)
(connect D6:1 D14:1)
(connect D12:1 D14:2)
(connect D0:1 D15:1)
(connect D4:1 D16:0)
(connect D17:1 D16:1)
(connect D5:1 D16:2)
(connect D6:1 D17:1)
(connect D7:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 951 650)
(anchorPt -2 -141)
(configuration
(devCarrierFor 3
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 310 340))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 230 320))
(devCarrierFor 5
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 150 320))
(devCarrierFor 6
(active icon)
(icon
(extent 215 25))
(open
(extent 171 51))
(terminals on)
(pinCenter 310 210))
(devCarrierFor 7
(active icon)
(icon
(extent 129 25))
(open
(extent 110 51))
(terminals on)
(pinCenter 380 440))
(devCarrierFor 9
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter 240 620))
(devCarrierFor 10
(active icon)
(icon
(extent 83 15))
(open
(extent 92 31))
(terminals on)
(pinCenter 250 650))
(devCarrierFor 11
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 680 680))
(devCarrierFor 12
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 680 710))
(devCarrierFor 14
(active open)
(icon
(extent 141 0)
(iconImage "notepad.icn"))
(open
(extent 405 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 670 250))
(devCarrierFor 19
(active icon)
(icon
(extent 141 54))
(open
(extent 222 102))
(terminals on)
(pinCenter 450 650))
(devCarrierFor 20
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 570 650))
(devCarrierFor 22
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 110 230))
(devCarrierFor 23
(active icon)
(icon
(extent 73 25))
(open
(extent 229 42))
(terminals on)
(pinCenter 220 700))
(devCarrierFor 24
(active icon)
(icon
(extent 70 25))
(open
(extent 229 42))
(terminals on)
(pinCenter 210 740))
(devCarrierFor 25
(active icon)
(icon
(extent 167 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 500 330))
(devCarrierFor 26
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 480 500))
(devCarrierFor 27
(active icon)
(icon
(extent 61 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 240 420))
(connect D1:1 D0:1
(points 4 267 320 280 320 280 330 288 330))
(connect I1:1 D0:2
(points 6 2 465 30 465 30 370 280 370 280 350 288 350))
(connect D3:1 D1:0
(points 5 420 200 440 200 440 250 230 250 230 291))
(connect D2:1 D1:1
(points 2 181 320 192 320))
(connect I1:1 D2:1
(points 4 2 465 30 465 30 320 118 320))
(connect D12:1 D3:1
(points 4 146 230 170 230 170 210 200 210))
(connect D15:2 D4:0
(points 5 586 340 610 340 610 370 380 370 380 425))
(connect D17:1 D4:1
(points 4 273 420 290 420 290 440 313 440))
(connect D0:1 D5:1
(points 6 331 340 350 340 350 380 190 380 190 620 206 620))
(connect D0:1 D6:1
(points 6 331 340 350 340 350 380 190 380 190 650 206 650))
(connect D11:1 D7:0
(points 3 586 650 680 650 680 670))
(connect D0:1 D7:1
(points 6 331 340 350 340 350 380 610 380 610 680 658 680))
(connect D7:0 D8:0
(points 2 680 690 680 700))
(connect D16:2 D10:0
(points 5 572 500 590 500 590 540 450 540 450 620))
(connect D5:1 D10:1
(points 4 273 620 310 620 310 630 377 630))
(connect D6:1 D10:2
(points 6 294 650 310 650 310 670 330 670 330 640 377 640))
(connect D13:1 D10:3
(points 6 259 700 300 700 300 640 320 640 320 650 377 650))
(connect D14:1 D10:4
(points 4 247 740 320 740 320 660 377 660))
(connect D10:1 D11:1
(points 2 523 630 553 630))
(connect D10:2 D11:2
(points 2 523 640 553 640))
(connect D10:3 D11:3
(points 2 523 650 553 650))
(connect D10:4 D11:4
(points 2 523 660 553 660))
(connect D6:1 D13:1
(points 6 294 650 310 650 310 780 150 780 150 690 181 690))
(connect D12:1 D13:2
(points 6 146 230 170 230 170 280 100 280 100 710 181 710))
(connect D6:1 D14:1
(points 6 294 650 310 650 310 780 150 780 150 730 172 730))
(connect D12:1 D14:2
(points 8 146 230 170 230 170 280 100 280 100 710 140 710 140 750 172 750))
(connect D0:1 D15:1
(points 4 331 340 350 340 350 330 414 330))
(connect D4:1 D16:0
(points 3 447 430 480 430 480 480))
(connect D17:1 D16:1
(points 4 273 420 290 420 290 490 387 490))
(connect D5:1 D16:2
(points 6 273 620 310 620 310 630 360 630 360 510 387 510))
(connect D6:1 D17:1
(points 8 294 650 310 650 310 670 330 670 330 590 200 590 200 420 207 420))
(connect D7:1 O1:1
(points 4 701 680 720 680 720 465 952 465)))
(stackingOrder 1 2 3 5 6 0 14 15 12 10 13 11 17 7 8 4 16 9))))
(context 66
(properties
(name "CanMyPieceGetKilled")
(trigMode deg)
(nextID 32)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "Maybe")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "can be killed, adj unknown, adj tie, or okay?")
(cases 3 "canBeKilled" "adjacentUnknown" "adjacentTie"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "adj piece unknown, bomb, ==, def>, def<")
(cases 4 "defender==-1 OR defender==-2" "defender==-100" "defender==attacker"
"(defender==0 ? attacker!=1 : attacker<defender)"))
(interface
(input 1
(name "attacker")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "defender")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "adjTie = TRUE")
(expr 1 "adjacentTie = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "adjUnkn = TRUE")
(expr 1 "adjacentUnknown = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 IFTHENELSE
(properties
(name "my piece or open?")
(cases 1 "def>1000 OR def==0"))
(interface
(input 1
(name "def")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "knownBoard[bs]")
(expr 1 "knownBoard[bs]"))
(interface
(input 1
(name "bs")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "defender piece weight")
(expr 1 "op = (op>=1000 ? op-1000 : op), (op<0 ? op : WeightOfPiece[op])"))
(interface
(input 1
(name "op")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "op")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "ok bs?")
(cases 1 "bs!=-1"))
(interface
(input 1
(name "bs")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 FORMULA
(properties
(name "BorderSquares[moveTo, ndx]")
(expr 1 "bordersquares[moveTo, ndx]"))
(interface
(input 1
(name "ndx")
(optional yes))
(input 2
(name "moveTo")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORCOUNT
(properties
(name "For Borders")
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 10 DECLVAR
(properties
(name "Declare Local \'adjacentTie\'")
(scope con)
(globalName "adjacentTie"))
(implementation
(value Int32
(data  0))))
(device 11 DECLVAR
(properties
(name "Declare Local \'adjacentUnknown\'")
(scope con)
(globalName "adjacentUnknown"))
(implementation
(value Int32
(data  0))))
(device 12 FORMULA
(properties
(name "adjUnkn = adjTie = canBeKilled = FALSE")
(expr 1 "adjacentUnknown = 0, adjacentTie = 0, canBeKilled = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 DECLVAR
(properties
(name "Declare Local \'canBeKilled\'")
(scope con)
(globalName "canBeKilled"))
(implementation
(value Int32
(data  0))))
(device 14 FORMULA
(properties
(name "canBeKilled = TRUE")
(expr 1 "canBeKilled = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 16 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 17 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 18 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 19 FORMULA
(properties
(name "my piece weight")
(expr 1 "op = (op>=1000 ? op-1000 : op), (op<0 ? op : WeightOfPiece[op])"))
(interface
(input 1
(name "op")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "op")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 21 IFTHENELSE
(properties
(name "lose == 0.0, 1.0, or in-between?")
(cases 2 "lose==0.0" "lose==1.0"))
(interface
(input 1
(name "lose")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 22 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 23 CALL
(properties
(name "Call AttackProbabilityOfUnknownFixed")
(callFunc "AttackProbabilityOfUnknownFixed")
(parmMode rev30))
(interface
(input 1
(name "attackPiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Win")
(lock name constraints)
(optional yes))
(output 2
(name "Tie")
(lock name constraints)
(optional yes))
(output 3
(name "Lose")
(lock name constraints)
(optional yes))
(output 4
(name "Bombed")
(lock name constraints)
(optional yes))))
(device 24 CALL
(properties
(name "Call AttackProbabilityOfUnknownMovable")
(callFunc "AttackProbabilityOfUnknownMovable")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Win")
(lock name constraints)
(optional yes))
(output 2
(name "Tie")
(lock name constraints)
(optional yes))
(output 3
(name "Lose")
(lock name constraints)
(optional yes))))
(device 25 IFTHENELSE
(properties
(name "has neighbor moved?")
(cases 1 "KnownBoard[neighbor]==-2"))
(interface
(input 1
(name "neighbor")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 27 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 29 FORMULA
(properties
(name "lose + bombed")
(expr 1 "l+b"))
(interface
(input 1
(name "l")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 2
(name "b")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 31 CONTEXT
(properties
(name "Check Marshal/Spy case")
(trigMode deg)
(nextID 6)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "is my piece a marshal?")
(cases 1 "piece==1003"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 IFTHENELSE
(properties
(name "opp spy alive?")
(cases 1 "OpponentPieceTable[0].known_dead==0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:0)
(connect D1:2 D2:1)
(connect D0:2 D2:2)
(connect D1:1 O1:1)
(connect D2:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 522 237)
(anchorPt 0 1)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 158 25))
(open
(extent 116 53))
(terminals on)
(pinCenter 120 90))
(devCarrierFor 4
(active icon)
(icon
(extent 100 25))
(open
(extent 290 53))
(terminals on)
(pinCenter 330 130))
(devCarrierFor 5
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 440 150))
(connect I1:1 D0:1
(points 4 0 117 10 117 10 90 38 90))
(connect D0:1 D1:0
(points 3 201 80 330 80 330 115))
(connect D1:2 D2:1
(points 2 382 140 423 140))
(connect D0:2 D2:2
(points 6 201 100 220 100 220 170 400 170 400 160 423 160))
(connect D1:1 O1:1
(points 4 382 120 400 120 400 57 521 57))
(connect D2:1 O2:1
(points 4 457 150 480 150 480 177 521 177)))
(stackingOrder 1 2 0))))
(configuration
(connect D9:0 D0:0)
(connect D19:2 D1:1)
(connect D6:2 D1:2)
(connect D1:3 D2:0)
(connect D1:1 D3:0)
(connect D5:1 D4:1)
(connect D7:1 D5:0)
(connect D8:1 D5:1)
(connect D4:2 D6:0)
(connect D5:1 D6:1)
(connect D8:1 D7:1)
(connect D9:1 D8:1)
(connect I2:1 D8:2)
(connect D12:0 D9:0)
(connect D1:5 D14:0)
(connect D17:1 D15:0)
(connect D20:3 D16:0)
(connect D0:1 D17:1)
(connect D0:3 D17:2)
(connect D20:2 D17:3)
(connect D27:1 D17:4)
(connect D21:1 D18:0)
(connect I1:1 D19:1)
(connect D25:1 D20:1)
(connect D0:4 D21:1)
(connect D20:1 D21:2)
(connect D24:2 D22:0)
(connect I1:1 D22:1)
(connect D27:2 D23:0)
(connect I1:1 D23:1)
(connect D0:2 D24:0)
(connect I2:1 D24:1)
(connect D23:3 D25:1)
(connect D26:1 D25:2)
(connect D22:3 D26:1)
(connect D22:4 D26:2)
(connect D24:1 D27:0)
(connect I1:1 D27:1)
(connect D15:1 O1:1)
(connect D18:1 O2:1)
(connect D16:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 1130 802)
(anchorPt 25 59)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 302 45))
(open
(extent 258 82))
(terminals on)
(pinCenter 180 420))
(devCarrierFor 1
(active icon)
(icon
(extent 276 67))
(open
(extent 342 106))
(terminals on)
(titleFont "lucida" 12)
(pinCenter 620 280))
(devCarrierFor 2
(active icon)
(icon
(extent 105 16))
(open
(extent 143 32))
(terminals on)
(pinCenter 840 330))
(devCarrierFor 3
(active icon)
(icon
(extent 118 16))
(open
(extent 169 32))
(terminals on)
(pinCenter 850 280))
(devCarrierFor 4
(active icon)
(icon
(extent 128 25))
(open
(extent 243 51))
(terminals on)
(pinCenter 790 150))
(devCarrierFor 5
(active icon)
(icon
(extent 121 15))
(open
(extent 146 31))
(terminals on)
(pinCenter 630 150))
(devCarrierFor 6
(active icon)
(icon
(extent 152 25))
(open
(extent 505 53))
(terminals on)
(pinCenter 340 290))
(devCarrierFor 7
(active icon)
(icon
(extent 46 25))
(open
(extent 84 51))
(terminals on)
(pinCenter 530 120))
(devCarrierFor 8
(active icon)
(icon
(extent 218 25))
(open
(extent 328 55))
(terminals on)
(pinCenter 370 160))
(devCarrierFor 9
(active icon)
(icon
(extent 83 52)
(iconImage "loop.icn"))
(open
(extent 119 32))
(pinCenter 180 150))
(devCarrierFor 10
(active icon)
(icon
(extent 188 16))
(open
(extent 224 107))
(pinCenter 170 10))
(devCarrierFor 11
(active icon)
(icon
(extent 228 16))
(open
(extent 264 107))
(pinCenter 190 50))
(devCarrierFor 12
(active icon)
(icon
(extent 281 16))
(open
(extent 381 32))
(terminals on)
(pinCenter 180 90))
(devCarrierFor 13
(active icon)
(icon
(extent 188 16))
(open
(extent 224 107))
(pinCenter 170 -30))
(devCarrierFor 14
(active icon)
(icon
(extent 139 16))
(open
(extent 143 32))
(terminals on)
(pinCenter 840 380))
(devCarrierFor 15
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 890 60))
(devCarrierFor 16
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 940 480))
(devCarrierFor 17
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 560 440))
(devCarrierFor 18
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 960 270))
(devCarrierFor 19
(active icon)
(icon
(extent 110 25))
(open
(extent 505 53))
(terminals on)
(pinCenter 330 240))
(devCarrierFor 21
(active icon)
(icon
(extent 220 34))
(open
(extent 166 62))
(terminals on)
(pinCenter 730 510))
(devCarrierFor 22
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 880 230))
(devCarrierFor 23
(active icon)
(icon
(extent 261 45))
(open
(extent 274 61))
(terminals on)
(pinCenter 370 660))
(devCarrierFor 24
(active icon)
(icon
(extent 283 34))
(open
(extent 274 61))
(terminals on)
(pinCenter 370 580))
(devCarrierFor 25
(active icon)
(icon
(extent 150 34))
(open
(extent 201 63))
(terminals on)
(pinCenter 130 510))
(devCarrierFor 27
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 670 570))
(devCarrierFor 29
(active icon)
(icon
(extent 102 25))
(open
(extent 72 42))
(terminals on)
(pinCenter 650 650))
(devCarrierFor 31
(active icon)
(icon
(extent 171 25))
(terminals on)
(pinCenter 380 510))
(connect D9:0 D0:0
(points 2 180 178 180 395))
(connect D19:2 D1:1
(points 4 387 250 420 250 420 260 479 260))
(connect D6:2 D1:2
(points 2 418 300 479 300))
(connect D1:3 D2:0
(points 5 760 280 780 280 780 300 840 300 840 319))
(connect D1:1 D3:0
(points 5 760 260 770 260 770 250 850 250 850 269))
(connect D5:1 D4:1
(points 2 693 150 723 150))
(connect D7:1 D5:0
(points 3 555 110 630 110 630 140))
(connect D8:1 D5:1
(points 4 481 160 550 160 550 150 567 150))
(connect D4:2 D6:0
(points 9 856 160 880 160 880 190 840 190 840 210 410 210 410 270 340 270 340
275))
(connect D5:1 D6:1
(points 6 693 150 700 150 700 200 240 200 240 290 261 290))
(connect D8:1 D7:1
(points 4 481 160 490 160 490 120 504 120))
(connect D9:1 D8:1
(points 2 224 150 258 150))
(connect I2:1 D8:2
(points 10 -25 541 -10 541 -10 510 10 510 10 380 230 380 230 190 240 190 240 170
258 170))
(connect D12:0 D9:0
(points 2 180 100 180 121))
(connect D1:5 D14:0
(points 5 760 300 770 300 770 350 840 350 840 369))
(connect D17:1 D15:0
(points 5 577 440 930 440 930 30 890 30 890 49))
(connect D20:3 D16:0
(points 5 842 520 880 520 880 450 940 450 940 469))
(connect D0:1 D17:1
(points 4 333 400 450 400 450 420 543 420))
(connect D0:3 D17:2
(points 4 333 420 440 420 440 430 543 430))
(connect D20:2 D17:3
(points 8 842 510 870 510 870 460 600 460 600 490 520 490 520 440 543 440))
(connect D27:1 D17:4
(points 4 468 500 490 500 490 450 543 450))
(connect D21:1 D18:0
(points 3 897 230 960 230 960 259))
(connect I1:1 D19:1
(points 6 -25 141 -10 141 -10 150 -30 150 -30 240 272 240))
(connect D25:1 D20:1
(points 6 687 570 710 570 710 610 600 610 600 510 617 510))
(connect D0:4 D21:1
(points 4 333 430 430 430 430 220 863 220))
(connect D20:1 D21:2
(points 6 842 500 860 500 860 470 750 470 750 240 863 240))
(connect D24:2 D22:0
(points 5 207 520 220 520 220 620 370 620 370 635))
(connect I1:1 D22:1
(points 8 -25 141 -10 141 -10 150 -30 150 -30 580 210 580 210 660 237 660))
(connect D27:2 D23:0
(points 5 468 520 480 520 480 540 370 540 370 560))
(connect I1:1 D23:1
(points 6 -25 141 -10 141 -10 150 -30 150 -30 580 226 580))
(connect D0:2 D24:0
(points 5 333 410 350 410 350 470 130 470 130 490))
(connect I2:1 D24:1
(points 4 -25 541 -10 541 -10 510 52 510))
(connect D23:3 D25:1
(points 4 514 590 530 590 530 560 653 560))
(connect D26:1 D25:2
(points 6 703 650 720 650 720 620 630 620 630 580 653 580))
(connect D22:3 D26:1
(points 4 503 660 520 660 520 640 596 640))
(connect D22:4 D26:2
(points 4 503 670 530 670 530 660 596 660))
(connect D24:1 D27:0
(points 5 207 500 230 500 230 480 380 480 380 495))
(connect I1:1 D27:1
(points 10 -25 141 -10 141 -10 150 -30 150 -30 580 210 580 210 550 230 550 230
510 292 510))
(connect D15:1 O1:1
(points 4 913 60 940 60 940 71 1104 71))
(connect D18:1 O2:1
(points 4 983 270 1000 270 1000 341 1104 341))
(connect D16:1 O3:1
(points 4 963 480 980 480 980 611 1104 611)))
(stackingOrder 9 5 4 2 3 11 10 12 13 14 15 18 7 6 0 21 16 20 24 22 26 25 23 17
19 27 1 8))))
(context 52
(properties
(name "CanNeighborKillMe")
(trigMode deg)
(nextID 25)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "neighbor")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "me")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "Maybe")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "can neighbor kill me?")
(cases 1
"(KnownBoard[neighbor]==2 ? KnownBoard[me]==1003 : WeightOfPiece[KnownBoard[neighbor]]<WeightOfPiece[KnownBoard[me]-1000])"
))
(interface
(input 1
(name "neighbor")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "me")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "Is neighbor piece known and movable?")
(cases 2 "KnownBoard[neighbor]>0 AND KnownBoard[neighbor]<35"
"KnownBoard[neighbor]>=35 AND KnownBoard[neighbor]<=40"))
(interface
(input 1
(name "neighbor")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 2 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(input 6
(name "F")
(optional yes))
(output 1
(name "Data"))))
(device 3 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 4 IFTHENELSE
(properties
(name "am I known?")
(cases 1 "OpponentsKnownBoard[me]>1000"))
(interface
(input 1
(name "me")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 IFTHENELSE
(properties
(name "will neighbor likely try to kill me?")
(cases 1 "OppProbOfKillingPiece(me)>0.8"))
(interface
(input 1
(name "me")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 NOTE
(properties
(name "Comment")
(text2 7 "This function fires YES if " "the opponent\'s piece in the"
"neighbor square can and most-" "likely WILL kill your piece."
"Doug thinks \'likely to kill\' " "means opponent < 3.  Sue says"
"no, don\'t worry about it.")))
(device 8 IFTHENELSE
(properties
(name "has he seen me move?")
(cases 1 "OpponentsKnownBoard[me]==-2"))
(interface
(input 1
(name "me")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 10 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 12 CALL
(properties
(name "Call AttackProbabilityOfUnknownMovable")
(callFunc "AttackProbabilityOfUnknownMovable")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Win")
(lock name constraints)
(optional yes))
(output 2
(name "Tie")
(lock name constraints)
(optional yes))
(output 3
(name "Lose")
(lock name constraints)
(optional yes))))
(device 13 FORMULA
(properties
(name "my piece")
(expr 1 "KnownBoard[me]"))
(interface
(input 1
(name "me")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 IFTHENELSE
(properties
(name "will I get killed (guaranteed)?")
(cases 2 "lose==1.0" "lose==0"))
(interface
(input 1
(name "lose")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 15 IFTHENELSE
(properties
(name "am I a miner & opp movable?")
(cases 1 "(me>=1022 AND me<=1026) AND (KnownBoard[neighbor]!=-1)"))
(interface
(input 1
(name "neighbor")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "me")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 17 IFTHENELSE
(properties
(name "has neighbor moved?")
(cases 1 "KnownBoard[neighbor]==-2"))
(interface
(input 1
(name "neighbor")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 18 CALL
(properties
(name "Call AttackProbabilityOfUnknownFixed")
(callFunc "AttackProbabilityOfUnknownFixed")
(parmMode rev30))
(interface
(input 1
(name "attackPiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Win")
(lock name constraints)
(optional yes))
(output 2
(name "Tie")
(lock name constraints)
(optional yes))
(output 3
(name "Lose")
(lock name constraints)
(optional yes))
(output 4
(name "Bombed")
(lock name constraints)
(optional yes))))
(device 19 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 20 FORMULA
(properties
(name "lose + bombed")
(expr 1 "l+b"))
(interface
(input 1
(name "l")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 2
(name "b")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 IFTHENELSE
(properties
(name "can neighbor kill me?")
(cases 1
"(KnownBoard[neighbor]==2 ? KnownBoard[me]==1003 : WeightOfPiece[KnownBoard[neighbor]]<WeightOfPiece[KnownBoard[me]-1000])"
))
(interface
(input 1
(name "neighbor")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "me")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 23 CONTEXT
(properties
(name "Check Marshal/Spy case")
(trigMode deg)
(nextID 6)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "is my piece a marshal?")
(cases 1 "piece==1003"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 IFTHENELSE
(properties
(name "opp spy alive?")
(cases 1 "OpponentPieceTable[0].known_dead==0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:0)
(connect D1:2 D2:1)
(connect D0:2 D2:2)
(connect D1:1 O1:1)
(connect D2:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 522 237)
(anchorPt 0 1)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 158 25))
(open
(extent 116 53))
(terminals on)
(pinCenter 120 90))
(devCarrierFor 4
(active icon)
(icon
(extent 100 25))
(open
(extent 290 53))
(terminals on)
(pinCenter 330 130))
(devCarrierFor 5
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 440 150))
(connect I1:1 D0:1
(points 4 0 117 10 117 10 90 38 90))
(connect D0:1 D1:0
(points 3 201 80 330 80 330 115))
(connect D1:2 D2:1
(points 2 382 140 423 140))
(connect D0:2 D2:2
(points 6 201 100 220 100 220 170 400 170 400 160 423 160))
(connect D1:1 O1:1
(points 4 382 120 400 120 400 57 521 57))
(connect D2:1 O2:1
(points 4 457 150 480 150 480 177 521 177)))
(stackingOrder 0 1 2))))
(device 24 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect D4:1 D0:0)
(connect I1:1 D0:1)
(connect I2:1 D0:2)
(connect I1:1 D1:1)
(connect D1:2 D2:1)
(connect D0:2 D2:2)
(connect D18:2 D2:3)
(connect D5:2 D2:4)
(connect D7:2 D2:5)
(connect D12:2 D2:6)
(connect D2:1 D3:0)
(connect D1:1 D4:0)
(connect I2:1 D4:1)
(connect D7:1 D5:0)
(connect I2:1 D5:1)
(connect D18:1 D7:0)
(connect I2:1 D7:1)
(connect D9:1 D8:0)
(connect D0:1 D9:1)
(connect D5:1 D9:2)
(connect D13:1 D9:3)
(connect D12:1 D9:4)
(connect D19:2 D10:0)
(connect D11:1 D10:1)
(connect D1:3 D11:0)
(connect I2:1 D11:1)
(connect D16:1 D12:1)
(connect D12:3 D13:0)
(connect I1:1 D13:1)
(connect D11:1 D13:2)
(connect D11:1 D14:0)
(connect I1:1 D14:1)
(connect D14:2 D15:0)
(connect D11:1 D15:1)
(connect D10:3 D16:1)
(connect D17:1 D16:2)
(connect D15:3 D17:1)
(connect D15:4 D17:2)
(connect D4:2 D18:0)
(connect I1:1 D18:1)
(connect I2:1 D18:2)
(connect D14:1 D19:0)
(connect D11:1 D19:1)
(connect D13:2 D20:1)
(connect D19:1 D20:2)
(connect D8:1 O1:1)
(connect D3:1 O2:1)
(connect D20:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 1072 755)
(anchorPt 30 41)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 147 25))
(open
(extent 893 58))
(terminals on)
(pinCenter 540 250))
(devCarrierFor 1
(active icon)
(icon
(extent 269 34))
(open
(extent 467 63))
(terminals on)
(pinCenter 220 140))
(devCarrierFor 2
(active icon)
(icon
(extent 29 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 720 210))
(devCarrierFor 3
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 850 200))
(devCarrierFor 4
(active icon)
(icon
(extent 85 25))
(open
(extent 301 63))
(terminals on)
(pinCenter 420 180))
(devCarrierFor 5
(active icon)
(icon
(extent 220 25))
(open
(extent 300 55))
(terminals on)
(pinCenter 670 410))
(devCarrierFor 7
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 247 123)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 550 40))
(devCarrierFor 8
(active icon)
(icon
(extent 161 25))
(open
(extent 245 60))
(terminals on)
(pinCenter 630 340))
(devCarrierFor 9
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 850 120))
(devCarrierFor 10
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 780 100))
(devCarrierFor 12
(active icon)
(icon
(extent 283 34))
(open
(extent 274 61))
(terminals on)
(pinCenter 300 500))
(devCarrierFor 13
(active icon)
(icon
(extent 61 16))
(open
(extent 141 32))
(terminals on)
(pinCenter 40 400))
(devCarrierFor 14
(active icon)
(icon
(extent 198 34))
(open
(extent 90 62))
(terminals on)
(pinCenter 640 450))
(devCarrierFor 15
(active icon)
(icon
(extent 201 25))
(open
(extent 428 63))
(terminals on)
(pinCenter 780 500))
(devCarrierFor 17
(active icon)
(icon
(extent 150 34))
(open
(extent 201 63))
(terminals on)
(pinCenter 180 360))
(devCarrierFor 18
(active icon)
(icon
(extent 261 45))
(open
(extent 274 61))
(terminals on)
(pinCenter 270 570))
(devCarrierFor 19
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 500 450))
(devCarrierFor 20
(active icon)
(icon
(extent 102 25))
(open
(extent 72 42))
(terminals on)
(pinCenter 530 510))
(devCarrierFor 22
(active icon)
(icon
(extent 147 25))
(open
(extent 893 58))
(terminals on)
(pinCenter 350 290))
(devCarrierFor 23
(active icon)
(icon
(extent 171 25))
(terminals on)
(pinCenter 350 410))
(devCarrierFor 24
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 790 560))
(connect D4:1 D0:0
(points 3 465 170 540 170 540 235))
(connect I1:1 D0:1
(points 4 -30 146 40 146 40 240 464 240))
(connect I2:1 D0:2
(points 8 -30 526 -10 526 -10 370 60 370 60 300 250 300 250 260 464 260))
(connect I1:1 D1:1
(points 4 -30 146 40 146 40 140 83 140))
(connect D1:2 D2:1
(points 4 357 140 550 140 550 180 703 180))
(connect D0:2 D2:2
(points 4 616 260 650 260 650 190 703 190))
(connect D18:2 D2:3
(points 4 426 300 640 300 640 200 703 200))
(connect D5:2 D2:4
(points 6 782 420 800 420 800 300 670 300 670 210 703 210))
(connect D7:2 D2:5
(points 6 713 350 730 350 730 310 680 310 680 220 703 220))
(connect D12:2 D2:6
(points 8 741 450 750 450 750 470 820 470 820 290 690 290 690 230 703 230))
(connect D2:1 D3:0
(points 5 737 210 770 210 770 170 850 170 850 189))
(connect D1:1 D4:0
(points 3 357 130 420 130 420 165))
(connect I2:1 D4:1
(points 10 -30 526 -10 526 -10 370 60 370 60 300 250 300 250 260 350 260 350 180
375 180))
(connect D7:1 D5:0
(points 5 713 330 740 330 740 380 670 380 670 395))
(connect I2:1 D5:1
(points 14 -30 526 -20 526 -20 600 -10 600 -10 370 60 370 60 300 250 300 250 310
260 310 260 340 530 340 530 410 557 410))
(connect D18:1 D7:0
(points 5 426 280 440 280 440 290 630 290 630 325))
(connect I2:1 D7:1
(points 10 -30 526 -10 526 -10 370 60 370 60 300 250 300 250 310 260 310 260 340
547 340))
(connect D9:1 D8:0
(points 5 797 100 810 100 810 90 850 90 850 109))
(connect D0:1 D9:1
(points 6 616 240 630 240 630 160 700 160 700 80 763 80))
(connect D5:1 D9:2
(points 8 782 400 790 400 790 380 760 380 760 170 730 170 730 90 763 90))
(connect D13:1 D9:3
(points 6 883 490 910 490 910 160 740 160 740 100 763 100))
(connect D12:1 D9:4
(points 8 741 440 750 440 750 450 810 450 810 150 750 150 750 110 763 110))
(connect D19:2 D10:0
(points 5 438 420 450 420 450 450 300 450 300 480))
(connect D11:1 D10:1
(points 8 73 400 80 400 80 420 70 420 70 480 140 480 140 500 156 500))
(connect D1:3 D11:0
(points 9 357 150 370 150 370 170 340 170 340 180 60 180 60 250 40 250 40 389))
(connect I2:1 D11:1
(points 4 -30 526 -14 526 -14 400 7 400))
(connect D16:1 D12:1
(points 2 517 450 538 450))
(connect D12:3 D13:0
(points 3 741 460 780 460 780 485))
(connect I1:1 D13:1
(points 6 -30 146 -40 146 -40 630 610 630 610 490 677 490))
(connect D11:1 D13:2
(points 12 73 400 80 400 80 420 70 420 70 480 110 480 110 570 120 570 120 620
600 620 600 510 677 510))
(connect D11:1 D14:0
(points 5 73 400 80 400 80 320 180 320 180 340))
(connect I1:1 D14:1
(points 6 -30 146 40 146 40 240 70 240 70 360 102 360))
(connect D14:2 D15:0
(points 3 257 370 270 370 270 545))
(connect D11:1 D15:1
(points 8 73 400 80 400 80 420 70 420 70 480 110 480 110 570 137 570))
(connect D10:3 D16:1
(points 6 444 510 450 510 450 490 460 490 460 440 483 440))
(connect D17:1 D16:2
(points 6 583 510 590 510 590 480 470 480 470 460 483 460))
(connect D15:3 D17:1
(points 4 403 570 470 570 470 500 476 500))
(connect D15:4 D17:2
(points 4 403 580 460 580 460 520 476 520))
(connect D4:2 D18:0
(points 7 465 190 490 190 490 220 360 220 360 270 350 270 350 275))
(connect I1:1 D18:1
(points 8 -30 146 -20 146 -20 160 40 160 40 240 240 240 240 280 274 280))
(connect I2:1 D18:2
(points 8 -30 526 -20 526 -20 600 -10 600 -10 370 60 370 60 300 274 300))
(connect D14:1 D19:0
(points 3 257 350 350 350 350 395))
(connect D11:1 D19:1
(points 4 73 400 90 400 90 410 262 410))
(connect D13:2 D20:1
(points 8 883 510 900 510 900 540 830 540 830 530 760 530 760 550 773 550))
(connect D19:1 D20:2
(points 4 438 400 490 400 490 570 773 570))
(connect D8:1 O1:1
(points 4 873 120 900 120 900 86 1041 86))
(connect D3:1 O2:1
(points 4 873 200 890 200 890 336 1041 336))
(connect D20:1 O3:1
(points 4 807 560 830 560 830 586 1041 586)))
(stackingOrder 8 3 7 6 11 10 16 15 14 20 19 4 17 9 13 5 18 1 0 12 2))))
(context 100
(properties
(name "CanPieceGetToLoc")
(trigMode deg)
(nextID 62)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "move")
(lock constraints)
(optional yes)))
(deviceList
(device 51 FORMULA
(properties
(name "delta col, delta row")
(expr 1
"dc = (oppPieceLoc MOD 10)-(ourPieceLoc MOD 10), (oppPieceLoc DIV 10)-(ourPieceLoc DIV 10)"
))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dc")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 52 IFTHENELSE
(properties
(name "Is it adjacent, close, or distant?")
(cases 2 "(abs(dc)+abs(dr))==1" "(abs(dc)+abs(dr))==2"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 54 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(output 1
(name "Data"))))
(device 56 TORECORD
(properties
(name "ATTACK!!")
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 57 CALL
(properties
(name "Call PinPieceDown")
(callFunc "PinPieceDown")
(parmMode rev30))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "shouldNotPin")
(lock name constraints)
(optional yes))
(output 2
(name "pinned")
(lock name constraints)
(optional yes))
(output 3
(name "move")
(lock name constraints)
(optional yes))))
(device 58 IFTHENELSE
(properties
(name "Is our piece known?")
(cases 1 "OpponentsKnownBoard[ourPieceLoc]>1000"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 59 CALL
(properties
(name "Call GetPieceCloser")
(callFunc "GetPieceCloser")
(parmMode rev30))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record")
(lock name constraints)
(optional yes))))
(device 60 CALL
(properties
(name "Call GetPieceCloser")
(callFunc "GetPieceCloser")
(parmMode rev30))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record")
(lock name constraints)
(optional yes))))
(device 61 CALL
(properties
(name "Call GetPieceCloser")
(callFunc "GetPieceCloser")
(parmMode rev30))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect I2:1 D0:2)
(connect D0:1 D1:1)
(connect D0:2 D1:2)
(connect D3:1 D2:1)
(connect D4:3 D2:2)
(connect D6:1 D2:3)
(connect D7:1 D2:4)
(connect D8:1 D2:5)
(connect D1:1 D3:0)
(connect I1:1 D3:1)
(connect I2:1 D3:2)
(connect D5:1 D4:0)
(connect I1:1 D4:1)
(connect I2:1 D4:2)
(connect D1:2 D5:0)
(connect I1:1 D5:1)
(connect D1:3 D6:0)
(connect I1:1 D6:1)
(connect I2:1 D6:2)
(connect D5:2 D7:0)
(connect I1:1 D7:1)
(connect I2:1 D7:2)
(connect D4:2 D8:0)
(connect I1:1 D8:1)
(connect I2:1 D8:2)
(connect D2:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1027 434)
(anchorPt 12 41)
(configuration
(devCarrierFor 51
(active icon)
(icon
(extent 129 25))
(open
(extent 649 42))
(terminals on)
(pinCenter 130 110))
(devCarrierFor 52
(active icon)
(icon
(extent 214 34))
(open
(extent 168 62))
(terminals on)
(pinCenter 330 110))
(devCarrierFor 54
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 920 230))
(devCarrierFor 56
(active icon)
(icon
(extent 71 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 520 40))
(devCarrierFor 57
(active icon)
(icon
(extent 129 34))
(open
(extent 196 53))
(terminals on)
(pinCenter 710 140))
(devCarrierFor 58
(active icon)
(icon
(extent 137 25))
(open
(extent 309 53))
(terminals on)
(pinCenter 540 120))
(devCarrierFor 59
(active icon)
(icon
(extent 139 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 550 200))
(devCarrierFor 60
(active icon)
(icon
(extent 139 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 710 220))
(devCarrierFor 61
(active icon)
(icon
(extent 139 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 850 100))
(connect I1:1 D0:1
(points 4 -12 65 30 65 30 100 63 100))
(connect I2:1 D0:2
(points 6 -12 285 0 285 0 170 50 170 50 120 63 120))
(connect D0:1 D1:1
(points 2 197 100 220 100))
(connect D0:2 D1:2
(points 2 197 120 220 120))
(connect D3:1 D2:1
(points 6 558 40 950 40 950 150 880 150 880 210 903 210))
(connect D4:3 D2:2
(points 4 777 150 820 150 820 220 903 220))
(connect D6:1 D2:3
(points 6 622 200 640 200 640 190 810 190 810 230 903 230))
(connect D7:1 D2:4
(points 4 782 220 800 220 800 240 903 240))
(connect D8:1 D2:5
(points 6 922 100 970 100 970 280 880 280 880 250 903 250))
(connect D1:1 D3:0
(points 5 439 100 450 100 450 -10 520 -10 520 11))
(connect I1:1 D3:1
(points 4 -12 65 460 65 460 30 482 30))
(connect I2:1 D3:2
(points 6 -12 285 0 285 0 170 20 170 20 50 482 50))
(connect D5:1 D4:0
(points 5 611 110 640 110 640 100 710 100 710 120))
(connect I1:1 D4:1
(points 6 -12 65 460 65 460 90 630 90 630 130 643 130))
(connect I2:1 D4:2
(points 6 -12 285 0 285 0 170 610 170 610 150 643 150))
(connect D1:2 D5:0
(points 5 439 110 470 110 470 100 540 100 540 105))
(connect I1:1 D5:1
(points 4 -12 65 460 65 460 120 469 120))
(connect D1:3 D6:0
(points 5 439 120 450 120 450 160 550 160 550 185))
(connect I1:1 D6:1
(points 6 -12 65 30 65 30 100 40 100 40 190 478 190))
(connect I2:1 D6:2
(points 4 -12 285 0 285 0 210 478 210))
(connect D5:2 D7:0
(points 7 611 130 620 130 620 140 640 140 640 180 710 180 710 205))
(connect I1:1 D7:1
(points 8 -12 65 460 65 460 90 620 90 620 170 630 170 630 210 638 210))
(connect I2:1 D7:2
(points 8 -12 285 0 285 0 210 460 210 460 240 620 240 620 230 638 230))
(connect D4:2 D8:0
(points 7 777 140 880 140 880 130 940 130 940 70 850 70 850 85))
(connect I1:1 D8:1
(points 4 -12 65 460 65 460 90 778 90))
(connect I2:1 D8:2
(points 10 -12 285 0 285 0 170 20 170 20 50 470 50 470 80 760 80 760 110 778 110))
(connect D2:1 O1:1
(points 4 937 230 960 230 960 175 1014 175)))
(stackingOrder 1 0 3 5 7 6 4 8 2))))
(context 160
(properties
(name "CanPieceGetToUnknown")
(trigMode deg)
(nextID 15)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "location + (i+1)*10")
(expr 1 "loc+(i+1)*10"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 10))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "off the board?")
(cases 1
"l>=100 OR (l==42 OR l==43 OR l==52 OR l==53 OR l==46 OR l==47 OR l==56 OR l==57)"
))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 5 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 6 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 7 EXITCONTEXT)
(device 8 IFTHENELSE
(properties
(name "square open, unknown opponent, or other?")
(cases 2 "v==0" "v==-1 OR v==-2"))
(interface
(input 1
(name "v")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "contents")
(expr 1 "KnownBoard[loc]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 11 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 12 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 13 FORMULA
(properties
(name "piece")
(expr 1 "KnownBoard[loc]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect D1:1 D0:1)
(connect I1:1 D0:2)
(connect D0:1 D2:1)
(connect D5:1 D3:1)
(connect D2:1 D4:0)
(connect D4:1 D5:1)
(connect D9:1 D5:2)
(connect D10:1 D5:3)
(connect D13:1 D5:4)
(connect D3:0 D6:0)
(connect D8:1 D7:1)
(connect D2:2 D8:0)
(connect D0:1 D8:1)
(connect D7:2 D9:0)
(connect D7:3 D10:0)
(connect D12:1 D11:1)
(connect D0:1 D11:2)
(connect D7:1 D12:0)
(connect I1:1 D12:1)
(connect D11:1 D13:0)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1009 491)
(anchorPt 7 -2)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 126 25))
(open
(extent 110 42))
(terminals on)
(pinCenter 230 140))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 90 90))
(devCarrierFor 2
(active icon)
(icon
(extent 97 25))
(open
(extent 612 54))
(terminals on)
(pinCenter 370 140))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 910 260))
(devCarrierFor 5
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 530 120))
(devCarrierFor 6
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 850 270))
(devCarrierFor 7
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 910 310))
(devCarrierFor 8
(active icon)
(icon
(extent 301 34))
(open
(extent 133 69))
(terminals on)
(pinCenter 370 210))
(devCarrierFor 9
(active icon)
(icon
(extent 59 14))
(open
(extent 140 32))
(terminals on)
(pinCenter 150 210))
(devCarrierFor 10
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 560 240))
(devCarrierFor 11
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 550 280))
(devCarrierFor 12
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 700 170))
(devCarrierFor 13
(active icon)
(icon
(extent 38 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 630 110))
(devCarrierFor 14
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 800 210))
(connect D1:1 D0:1
(points 4 127 90 150 90 150 130 164 130))
(connect I1:1 D0:2
(points 4 -7 247 0 247 0 150 164 150))
(connect D0:1 D2:1
(points 2 295 140 319 140))
(connect D5:1 D3:1
(points 4 867 270 880 270 880 260 890 260))
(connect D2:1 D4:0
(points 5 421 130 440 130 440 90 530 90 530 109))
(connect D4:1 D5:1
(points 6 544 120 580 120 580 170 600 170 600 250 833 250))
(connect D9:1 D5:2
(points 4 578 240 590 240 590 260 833 260))
(connect D10:1 D5:3
(points 4 564 280 580 280 580 270 833 270))
(connect D13:1 D5:4
(points 6 814 210 820 210 820 230 810 230 810 280 833 280))
(connect D3:0 D6:0
(points 2 910 270 910 299))
(connect D8:1 D7:1
(points 2 182 210 217 210))
(connect D2:2 D8:0
(points 7 421 150 530 150 530 250 190 250 190 190 150 190 150 200))
(connect D0:1 D8:1
(points 6 295 140 310 140 310 180 100 180 100 210 118 210))
(connect D7:2 D9:0
(points 3 523 210 560 210 560 229))
(connect D7:3 D10:0
(points 3 523 220 550 220 550 269))
(connect D12:1 D11:1
(points 6 651 110 660 110 660 130 600 130 600 160 607 160))
(connect D0:1 D11:2
(points 6 295 140 310 140 310 80 560 80 560 180 607 180))
(connect D7:1 D12:0
(points 5 523 200 590 200 590 80 630 80 630 99))
(connect I1:1 D12:1
(points 8 -7 247 0 247 0 150 30 150 30 40 570 40 570 110 608 110))
(connect D11:1 D13:0
(points 3 792 160 800 160 800 199))
(connect D3:1 O1:1
(points 4 930 260 950 260 950 247 1001 247)))
(stackingOrder 1 0 2 4 6 8 10 3 5 12 13 11 9 7))))
(context 135
(properties
(name "CanProtectOurDiscoveredBomb")
(trigMode deg)
(nextID 32)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "our bomb?")
(cases 1 "lhp>=1035 AND lhp<=1040"))
(interface
(input 1
(name "lhp")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "opp last \"hit\" piece")
(expr 1 "OpponentsKnownBoard[LastOpponentMove.to]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 DECLVAR
(properties
(name "Declare Local \'OpenBorderSquares\'")
(scope con)
(globalName "OpenBorderSquares"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 8 IFTHENELSE
(properties
(name "open square?")
(cases 1 "(border>-1 ? KnownBoard[border]==0 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[LastOpponentMove.to, i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 12 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 13 IFTHENELSE
(properties
(name "any open squares?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 14 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 15 IFTHENELSE
(properties
(name "bomb guarded?")
(cases 1
"(border>-1 ? KnownBoard[border]>1003 AND Knownboard[border]<=1021 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 16 EXITCONTEXT)
(device 17 FORMULA
(properties
(name "set \'OpenBorderSquares\'")
(expr 1 "OpenBorderSquares = squares"))
(interface
(input 1
(name "squares")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 IFTHENELSE
(properties
(name "can cover?")
(cases 1
"(move.to==OpenBorderSquares[i]) AND (KnownBoard[move.from]>=1003 AND KnownBoard[move.from]<=1021)"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 19 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 22 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 23 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 24 FORMULA
(properties
(name "our piece, dest")
(expr 1 "piece = KnownBoard[move.from], move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "piece")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 25 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 26 EXITCONTEXT)
(device 27 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 29 FORRANGE
(properties
(name "For (1-3)")
(from 1)
(thru 3)
(step 1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 30 FORMULA
(properties
(name "protector piece")
(expr 1 "KnownBoard[move.from]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 31 CALL
(properties
(name "Call AddProtectorPiece")
(callFunc "AddProtectorPiece")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(configuration
(connect D1:1 D0:1)
(connect D3:1 D2:1)
(connect I1:1 D2:2)
(connect D4:1 D3:1)
(connect D14:0 D4:0)
(connect I1:1 D4:1)
(connect D12:2 D6:0)
(connect D7:1 D6:1)
(connect D23:1 D7:1)
(connect D9:1 D8:1)
(connect D23:0 D8:2)
(connect D6:1 D9:0)
(connect D7:1 D9:1)
(connect D11:5 D10:1)
(connect D8:1 D11:1)
(connect D7:1 D12:1)
(connect D12:1 D13:0)
(connect D10:1 D14:0)
(connect D8:1 D14:1)
(connect D2:1 D15:1)
(connect D16:1 D15:2)
(connect D3:1 D16:0)
(connect D11:5 D16:1)
(connect D19:1 D17:1)
(connect D19:2 D17:2)
(connect D17:2 D18:1)
(connect D17:3 D18:2)
(connect D22:2 D19:0)
(connect D2:1 D19:1)
(connect D18:1 D20:0)
(connect D2:1 D20:1)
(connect D20:0 D21:0)
(connect D15:1 D22:0)
(connect D2:1 D22:1)
(connect D0:1 D23:0)
(connect D20:1 D24:1)
(connect D24:1 D25:1)
(connect D20:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1103 672)
(anchorPt 61 41)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 74 25))
(open
(extent 330 53))
(terminals on)
(pinCenter 210 90))
(devCarrierFor 1
(active icon)
(icon
(extent 128 16))
(open
(extent 332 32))
(terminals on)
(pinCenter 80 90))
(devCarrierFor 2
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 220 520))
(devCarrierFor 3
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 140 500))
(devCarrierFor 4
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 60 500))
(devCarrierFor 6
(active icon)
(icon
(extent 250 16))
(open
(extent 286 110))
(pinCenter 100 -10))
(devCarrierFor 8
(active icon)
(icon
(extent 96 25))
(open
(extent 291 55))
(terminals on)
(pinCenter 430 270))
(devCarrierFor 9
(active icon)
(icon
(extent 99 25))
(open
(extent 289 42))
(terminals on)
(pinCenter 160 190))
(devCarrierFor 11
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 610 300))
(devCarrierFor 12
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 530 290))
(devCarrierFor 13
(active icon)
(icon
(extent 134 25))
(open
(extent 100 65))
(terminals on)
(pinCenter 580 400))
(devCarrierFor 14
(active icon)
(icon
(extent 180 61)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 400 380))
(devCarrierFor 15
(active icon)
(icon
(extent 110 25))
(open
(extent 524 55))
(terminals on)
(pinCenter 290 190))
(devCarrierFor 16
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 460 210))
(devCarrierFor 17
(active icon)
(icon
(extent 176 16))
(open
(extent 240 32))
(terminals on)
(pinCenter 730 440))
(devCarrierFor 18
(active icon)
(icon
(extent 77 25))
(open
(extent 736 53))
(terminals on)
(pinCenter 430 540))
(devCarrierFor 19
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 310 540))
(devCarrierFor 22
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 830 590))
(devCarrierFor 23
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 970 590))
(devCarrierFor 24
(active icon)
(icon
(extent 103 25))
(open
(extent 296 42))
(terminals on)
(pinCenter 660 590))
(devCarrierFor 25
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 930 490))
(devCarrierFor 26
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 940 530))
(devCarrierFor 27
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 610 510))
(devCarrierFor 29
(active icon)
(icon
(extent 68 52)
(iconImage "loop.icn"))
(open
(extent 110 82))
(pinCenter 40 190))
(devCarrierFor 30
(active icon)
(icon
(extent 104 16))
(open
(extent 188 32))
(terminals on)
(pinCenter 790 90))
(devCarrierFor 31
(active icon)
(icon
(extent 160 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 950 90))
(connect D1:1 D0:1
(points 2 146 90 170 90))
(connect D3:1 D2:1
(points 4 177 500 190 500 190 510 198 510))
(connect I1:1 D2:2
(points 8 -61 294 -50 294 -50 500 10 500 10 550 190 550 190 530 198 530))
(connect D4:1 D3:1
(points 2 91 500 102 500))
(connect D14:0 D4:0
(points 6 730 450 730 470 620 470 620 450 60 450 60 489))
(connect I1:1 D4:1
(points 4 -61 294 -50 294 -50 500 28 500))
(connect D12:2 D6:0
(points 5 347 200 370 200 370 230 430 230 430 255))
(connect D7:1 D6:1
(points 6 212 190 220 190 220 240 350 240 350 270 379 270))
(connect D23:1 D7:1
(points 2 76 190 108 190))
(connect D9:1 D8:1
(points 2 550 290 577 290))
(connect D23:0 D8:2
(points 5 40 218 40 320 560 320 560 310 577 310))
(connect D6:1 D9:0
(points 3 480 260 530 260 530 279))
(connect D7:1 D9:1
(points 6 212 190 220 190 220 240 500 240 500 290 510 290))
(connect D11:5 D10:1
(points 2 492 400 510 400))
(connect D8:1 D11:1
(points 8 643 300 660 300 660 340 560 340 560 330 290 330 290 380 307 380))
(connect D7:1 D12:1
(points 2 212 190 232 190))
(connect D12:1 D13:0
(points 3 347 180 460 180 460 199))
(connect D10:1 D14:0
(points 3 649 390 730 390 730 429))
(connect D8:1 D14:1
(points 6 643 300 660 300 660 340 630 340 630 440 639 440))
(connect D2:1 D15:1
(points 6 241 520 250 520 250 490 370 490 370 530 389 530))
(connect D16:1 D15:2
(points 4 347 540 370 540 370 550 389 550))
(connect D3:1 D16:0
(points 5 177 500 200 500 200 480 310 480 310 511))
(connect D11:5 D16:1
(points 6 492 400 500 400 500 430 260 430 260 540 272 540))
(connect D19:1 D17:1
(points 2 714 580 737 580))
(connect D19:2 D17:2
(points 2 714 600 737 600))
(connect D17:2 D18:1
(points 4 922 590 930 590 930 580 953 580))
(connect D17:3 D18:2
(points 2 922 600 953 600))
(connect D22:2 D19:0
(points 5 697 520 720 520 720 550 660 550 660 575))
(connect D2:1 D19:1
(points 8 241 520 250 520 250 490 370 490 370 500 480 500 480 590 606 590))
(connect D18:1 D20:0
(points 5 987 590 1020 590 1020 460 930 460 930 479))
(connect D2:1 D20:1
(points 10 241 520 250 520 250 490 370 490 370 500 480 500 480 480 720 480 720
490 910 490))
(connect D20:0 D21:0
(points 4 930 500 930 510 940 510 940 519))
(connect D15:1 D22:0
(points 5 471 530 490 530 490 490 610 490 610 495))
(connect D2:1 D22:1
(points 8 241 520 250 520 250 490 370 490 370 500 480 500 480 510 523 510))
(connect D0:1 D23:0
(points 5 249 80 270 80 270 130 40 130 40 161))
(connect D20:1 D24:1
(points 6 950 490 970 490 970 280 720 280 720 90 735 90))
(connect D24:1 D25:1
(points 2 844 90 867 90))
(connect D20:1 O1:1
(points 4 950 490 970 490 970 294 1041 294)))
(stackingOrder 1 0 3 4 2 7 6 13 9 8 5 11 10 14 16 19 17 18 20 21 22 23 24 25 12
15))))
(context 76
(properties
(name "CanStrikePotentialFlag")
(trigMode deg)
(nextID 19)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "attackerWeight")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "risk 5?")
(cases 1 "flagPotential<10 OR unlikelyBomb"))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "known")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "flagPotential")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "unlikelyBomb")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "Known to opponent bool")
(expr 1 "OpponentsKnownBoard[move.from]>0"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "PotentialFlagPos")
(expr 1 "PotentialFlagPos(move.to)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "Good not-a-bomb chance boolean")
(expr 1 "UnlikelyBomb(move.to)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "risk 9, 7, or 6?")
(cases 1 "flagPotential<30"))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "flagPotential")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 IFTHENELSE
(properties
(name "piece a 9, 8, 7, 6, 5, 4, or 3?")
(cases 8 "w==9" "w==8" "w==7" "w==6" "w==5" "w==4" "w==3" "w==2"))
(interface
(input 1
(name "w")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else If")
(lock name constraints))
(output 6
(name "Else If")
(lock name constraints))
(output 7
(name "Else If")
(lock name constraints))
(output 8
(name "Else If")
(lock name constraints))
(output 9
(name "Else")
(lock name constraints))))
(device 12 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 13 IFTHENELSE
(properties
(name "risk 8?")
(cases 1 "flagPotential<7 OR probablyABomb"))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "known")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "flagPotential")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "unlikelyBomb")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 5
(name "probablyABomb")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 14 IFTHENELSE
(properties
(name "risk 4?")
(cases 1 "(flagPotential<=6 OR (unlikelyBomb AND random(0, 1)<0.4))"))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "known")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "flagPotential")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "unlikelyBomb")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 15 IFTHENELSE
(properties
(name "risk 3?")
(cases 1
"flagPotential<=4 OR ((unlikelyBomb AND  NOT probablyABomb) AND random(0, 1)<0.3)"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "known")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "flagPotential")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "unlikelyBomb")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 5
(name "probablyABomb")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 16 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "E")
(optional yes))
(input 5
(name "C")
(optional yes))
(input 6
(name "F")
(optional yes))
(output 1
(name "Data"))))
(device 17 IFTHENELSE
(properties
(name "risk 2?")
(cases 1
"flagPotential<=4 OR ((unlikelyBomb AND  NOT probablyABomb) AND random(0, 1)<0.2)"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "known")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "flagPotential")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "unlikelyBomb")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 5
(name "probablyABomb")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 18 FORMULA
(properties
(name "probably a  bomb boolean")
(expr 1 "IsProbablyABomb(move.to)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D5:5 D0:0)
(connect I1:1 D0:1)
(connect D1:1 D0:2)
(connect D2:1 D0:3)
(connect D3:1 D0:4)
(connect I2:1 D1:1)
(connect I2:1 D2:1)
(connect I2:1 D3:1)
(connect D6:1 D4:0)
(connect I1:1 D4:1)
(connect D2:1 D4:2)
(connect I1:1 D5:1)
(connect D5:1 D6:1)
(connect D5:3 D6:2)
(connect D5:4 D6:3)
(connect D5:2 D7:0)
(connect I1:1 D7:1)
(connect D1:1 D7:2)
(connect D2:1 D7:3)
(connect D3:1 D7:4)
(connect D12:1 D7:5)
(connect D5:6 D8:0)
(connect I1:1 D8:1)
(connect D1:1 D8:2)
(connect D2:1 D8:3)
(connect D3:1 D8:4)
(connect D5:7 D9:0)
(connect I1:1 D9:1)
(connect D1:1 D9:2)
(connect D2:1 D9:3)
(connect D3:1 D9:4)
(connect D12:1 D9:5)
(connect D4:1 D10:1)
(connect D7:1 D10:2)
(connect D0:1 D10:3)
(connect D8:1 D10:4)
(connect D9:1 D10:5)
(connect D11:1 D10:6)
(connect D5:8 D11:0)
(connect I1:1 D11:1)
(connect D1:1 D11:2)
(connect D2:1 D11:3)
(connect D3:1 D11:4)
(connect D12:1 D11:5)
(connect I2:1 D12:1)
(connect D10:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1096 694)
(anchorPt 28 -161)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 46 45))
(open
(extent 246 82))
(terminals on)
(pinCenter 650 500))
(devCarrierFor 2
(active icon)
(icon
(extent 168 16))
(open
(extent 274 32))
(terminals on)
(pinCenter 110 280))
(devCarrierFor 5
(active icon)
(icon
(extent 117 16))
(open
(extent 215 36))
(terminals on)
(pinCenter 100 220))
(devCarrierFor 9
(active icon)
(icon
(extent 238 16))
(open
(extent 178 32))
(terminals on)
(pinCenter 150 340))
(devCarrierFor 10
(active icon)
(icon
(extent 100 45))
(open
(extent 130 82))
(terminals on)
(pinCenter 680 320))
(devCarrierFor 11
(active icon)
(icon
(extent 196 94))
(open
(extent 61 182))
(terminals on)
(pinCenter 390 420))
(devCarrierFor 12
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 580 280))
(devCarrierFor 13
(active icon)
(icon
(extent 46 54))
(open
(extent 255 102))
(terminals on)
(pinCenter 690 410))
(devCarrierFor 14
(active icon)
(icon
(extent 46 45))
(open
(extent 486 82))
(terminals on)
(pinCenter 650 600))
(devCarrierFor 15
(active icon)
(icon
(extent 46 54))
(open
(extent 585 107))
(terminals on)
(pinCenter 680 710))
(devCarrierFor 16
(active icon)
(icon
(extent 29 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 810 510))
(devCarrierFor 17
(active icon)
(icon
(extent 46 54))
(open
(extent 585 102))
(terminals on)
(pinCenter 680 780))
(devCarrierFor 18
(active icon)
(icon
(extent 181 16))
(open
(extent 205 32))
(terminals on)
(pinCenter 150 390))
(connect D5:5 D0:0
(points 5 490 420 550 420 550 460 650 460 650 475))
(connect I1:1 D0:1
(points 6 -28 327 -20 327 -20 580 590 580 590 480 624 480))
(connect D1:1 D0:2
(points 8 196 280 290 280 290 350 550 350 550 390 580 390 580 490 624 490))
(connect D2:1 D0:3
(points 4 161 220 530 220 530 500 624 500))
(connect D3:1 D0:4
(points 8 271 340 560 340 560 380 610 380 610 420 600 420 600 510 624 510))
(connect I2:1 D1:1
(points 6 -28 687 -20 687 -20 680 -40 680 -40 280 23 280))
(connect I2:1 D2:1
(points 8 -28 687 -20 687 -20 680 -40 680 -40 280 0 280 0 220 39 220))
(connect I2:1 D3:1
(points 8 -28 687 -20 687 -20 680 -40 680 -40 320 -10 320 -10 340 28 340))
(connect D6:1 D4:0
(points 3 597 280 680 280 680 295))
(connect I1:1 D4:1
(points 8 -28 327 -20 327 -20 580 590 580 590 360 610 360 610 310 627 310))
(connect D2:1 D4:2
(points 4 161 220 530 220 530 330 627 330))
(connect I1:1 D5:1
(points 4 -28 327 -20 327 -20 420 289 420))
(connect D5:1 D6:1
(points 4 490 380 540 380 540 270 563 270))
(connect D5:3 D6:2
(points 4 490 400 500 400 500 280 563 280))
(connect D5:4 D6:3
(points 4 490 410 510 410 510 290 563 290))
(connect D5:2 D7:0
(points 9 490 390 520 390 520 400 570 400 570 350 630 350 630 360 690 360 690
380))
(connect I1:1 D7:1
(points 8 -28 327 -20 327 -20 580 590 580 590 370 630 370 630 390 664 390))
(connect D1:1 D7:2
(points 8 196 280 290 280 290 350 550 350 550 390 600 390 600 400 664 400))
(connect D2:1 D7:3
(points 6 161 220 530 220 530 330 620 330 620 410 664 410))
(connect D3:1 D7:4
(points 6 271 340 560 340 560 380 610 380 610 420 664 420))
(connect D12:1 D7:5
(points 8 243 390 250 390 250 490 480 490 480 480 540 480 540 430 664 430))
(connect D5:6 D8:0
(points 5 490 430 520 430 520 560 650 560 650 575))
(connect I1:1 D8:1
(points 4 -28 327 -20 327 -20 580 624 580))
(connect D1:1 D8:2
(points 6 196 280 290 280 290 360 270 360 270 590 624 590))
(connect D2:1 D8:3
(points 4 161 220 530 220 530 600 624 600))
(connect D3:1 D8:4
(points 8 271 340 280 340 280 350 260 350 260 430 240 430 240 610 624 610))
(connect D5:7 D9:0
(points 7 490 440 510 440 510 550 700 550 700 650 680 650 680 680))
(connect I1:1 D9:1
(points 6 -28 327 -20 327 -20 580 520 580 520 690 654 690))
(connect D1:1 D9:2
(points 10 196 280 290 280 290 360 270 360 270 590 290 590 290 680 280 680 280
700 654 700))
(connect D2:1 D9:3
(points 6 161 220 530 220 530 600 590 600 590 710 654 710))
(connect D3:1 D9:4
(points 12 271 340 280 340 280 350 260 350 260 430 240 430 240 610 600 610 600
650 630 650 630 720 654 720))
(connect D12:1 D9:5
(points 6 243 390 250 390 250 490 260 490 260 730 654 730))
(connect D4:1 D10:1
(points 4 732 310 750 310 750 480 793 480))
(connect D7:1 D10:2
(points 4 715 390 740 390 740 490 793 490))
(connect D0:1 D10:3
(points 4 675 490 700 490 700 500 793 500))
(connect D8:1 D10:4
(points 6 675 590 690 590 690 540 700 540 700 510 793 510))
(connect D9:1 D10:5
(points 4 705 690 730 690 730 520 793 520))
(connect D11:1 D10:6
(points 4 705 760 740 760 740 530 793 530))
(connect D5:8 D11:0
(points 7 490 450 500 450 500 830 730 830 730 740 680 740 680 750))
(connect I1:1 D11:1
(points 8 -28 327 -20 327 -20 580 520 580 520 690 610 690 610 760 654 760))
(connect D1:1 D11:2
(points 12 196 280 290 280 290 360 270 360 270 590 290 590 290 680 280 680 280
700 580 700 580 770 654 770))
(connect D2:1 D11:3
(points 8 161 220 530 220 530 600 590 600 590 710 620 710 620 780 654 780))
(connect D3:1 D11:4
(points 12 271 340 280 340 280 350 260 350 260 430 240 430 240 610 600 610 600
650 630 650 630 790 654 790))
(connect D12:1 D11:5
(points 8 243 390 250 390 250 490 260 490 260 730 570 730 570 800 654 800))
(connect I2:1 D12:1
(points 8 -28 687 -20 687 -20 680 -40 680 -40 320 -10 320 -10 390 57 390))
(connect D10:1 O1:1
(points 4 827 510 948 510 948 507 1067 507)))
(stackingOrder 6 8 2 5 10 4 1 3 12 7 9 11 0))))
(context 36
(properties
(name "CanUnburyPiece")
(trigMode deg)
(nextID 18)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "boardLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Move")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "Difficulty")
(lock constraints)
(optional yes)))
(deviceList
(device 8 CALL
(properties
(name "Call LocateNearestLevelOne")
(callFunc "LocateNearestLevelOne")
(parmMode rev30))
(interface
(input 1
(name "SourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 9 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 11 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 12 CALL
(properties
(name "Call LocateNearestLevelTwo")
(callFunc "LocateNearestLevelTwo")
(parmMode rev30))
(interface
(input 1
(name "SourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 13 CONSTANT
(properties
(name "1"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 14 CONSTANT
(properties
(name "2"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  2))
(initValue Int32
(data  0))))
(device 15 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 16 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 17 EXITCONTEXT)
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D3:1 D1:2)
(connect D1:1 D2:1)
(connect D0:0 D3:0)
(connect I1:1 D3:1)
(connect D0:1 D4:0)
(connect D3:1 D5:0)
(connect D2:0 D6:0)
(connect D7:1 D6:1)
(connect D4:1 D7:1)
(connect D5:1 D7:2)
(connect D6:0 D8:0)
(connect D2:1 O1:1)
(connect D6:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 759 465)
(anchorPt 0 -4)
(configuration
(devCarrierFor 8
(active icon)
(icon
(extent 199 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 140 140))
(devCarrierFor 9
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 550 150))
(devCarrierFor 11
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 630 150))
(devCarrierFor 12
(active icon)
(icon
(extent 198 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 140 210))
(devCarrierFor 13
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 490 230))
(devCarrierFor 14
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 490 270))
(devCarrierFor 15
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 630 230))
(devCarrierFor 16
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 550 240))
(devCarrierFor 17
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 630 330))
(connect I1:1 D0:1
(points 4 0 236 10 236 10 140 38 140))
(connect D0:1 D1:1
(points 2 242 140 533 140))
(connect D3:1 D1:2
(points 4 241 210 260 210 260 160 533 160))
(connect D1:1 D2:1
(points 2 567 150 610 150))
(connect D0:0 D3:0
(points 2 140 150 140 199))
(connect I1:1 D3:1
(points 4 0 236 10 236 10 210 38 210))
(connect D0:1 D4:0
(points 3 242 140 490 140 490 219))
(connect D3:1 D5:0
(points 5 241 210 270 210 270 250 490 250 490 259))
(connect D2:0 D6:0
(points 2 630 160 630 219))
(connect D7:1 D6:1
(points 4 567 240 590 240 590 230 610 230))
(connect D4:1 D7:1
(points 2 504 230 533 230))
(connect D5:1 D7:2
(points 4 504 270 510 270 510 250 533 250))
(connect D6:0 D8:0
(points 2 630 240 630 319))
(connect D2:1 O1:1
(points 4 650 150 670 150 670 116 758 116))
(connect D6:1 O2:1
(points 4 650 230 670 230 670 356 758 356)))
(stackingOrder 1 2 4 5 7 6 8 0 3))))
(context 53
(properties
(name "CheckDoomMoves")
(trigMode deg)
(nextID 34)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "nada")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "move")
(expr 1 "to = move[i].to, move[i].from"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "to")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 IFTHENELSE
(properties
(name "can our adj piece take opponent?")
(cases 1
"((our>1000 AND our<=1035) ? WeightOfPiece[our-1000]<WeightOfPiece[opponent] : 0)"
))
(interface
(input 1
(name "our")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "opponent")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 IFTHENELSE
(properties
(name "our piece adj?")
(cases 1
"(border>-1 ? (KnownBoard[border]>1000 AND KnownBoard[border]<=1040) : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 DECLVAR
(properties
(name "Declare Local \'IsVulnerable\'")
(scope con)
(globalName "isVulnerable"))
(implementation
(value Int32
(data  0))))
(device 8 FORMULA
(properties
(name "isVulnerable = YES")
(expr 1 "isVulnerable = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "isVulnerable = NO")
(expr 1 "isVulnerable = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 BREAK)
(device 11 IFTHENELSE
(properties
(name "piece vulnerable?")
(cases 1 "isVulnerable OR (KnownBoard[from]>=1022 AND KnownBoard[from]<=1026)"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 19 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 23 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 24 NOTE
(properties
(name "Comment")
(text2 8 "This function looks at the list" "of opponent attack moves that"
"will kill our pieces.  It determines" "which of these moves are detrimental"
"to our health, and attempts to" "choose an evasive move away from"
"our opponent." "")))
(device 25 CALL
(properties
(name "Call FindEvasiveMove")
(callFunc "FindEvasiveMove")
(parmMode rev30))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "to")
(lock name constraints)
(optional yes))
(output 2
(name "NoEscape")
(lock name constraints)
(optional yes))))
(device 26 IFTHENELSE
(properties
(name "strafing piece?")
(cases 1 "KnownBoard[loc]==strafingPiece"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 27 CALL
(properties
(name "Call DoTheStrafe")
(callFunc "DoTheStrafe")
(parmMode rev30))
(interface
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))))
(device 28 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 29 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 30 EXITCONTEXT)
(device 31 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 32 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 33 BREAK)
(configuration
(connect D1:1 D0:1)
(connect I1:1 D0:2)
(connect D2:1 D1:1)
(connect I1:1 D2:1)
(connect D16:2 D3:0)
(connect D5:1 D3:1)
(connect D0:1 D3:2)
(connect D8:0 D4:0)
(connect D0:2 D5:1)
(connect D4:1 D5:2)
(connect D5:1 D6:1)
(connect D0:1 D8:0)
(connect D3:1 D9:0)
(connect D9:0 D10:0)
(connect D4:0 D11:0)
(connect D0:2 D11:1)
(connect D1:0 D12:0)
(connect D15:1 D13:0)
(connect D0:2 D13:1)
(connect D11:1 D15:0)
(connect D0:2 D15:1)
(connect D6:1 D16:0)
(connect D5:1 D16:1)
(connect D16:1 D17:0)
(connect D13:1 D18:1)
(connect D17:1 D18:2)
(connect D15:1 D19:1)
(connect D17:2 D19:2)
(connect D22:0 D20:0)
(connect D18:1 D21:1)
(connect D21:0 D22:0)
(connect D19:1 D22:1)
(connect D17:0 D23:0)
(connect D21:1 O1:1)
(connect D22:1 O2:1)
(connect D12:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 1055 694)
(anchorPt 10 -4)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 38 34))
(open
(extent 305 62))
(terminals on)
(pinCenter 290 120))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 180 110))
(devCarrierFor 2
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 80 110))
(devCarrierFor 3
(active icon)
(icon
(extent 233 25))
(open
(extent 584 53))
(terminals on)
(pinCenter 570 340))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 190 280))
(devCarrierFor 5
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 330 270))
(devCarrierFor 6
(active icon)
(icon
(extent 99 25))
(open
(extent 535 55))
(terminals on)
(pinCenter 480 270))
(devCarrierFor 7
(active icon)
(icon
(extent 192 16))
(open
(extent 259 111))
(pinCenter 150 40))
(devCarrierFor 8
(active icon)
(icon
(extent 133 16))
(open
(extent 155 32))
(terminals on)
(pinCenter 190 210))
(devCarrierFor 9
(active icon)
(icon
(extent 125 16))
(open
(extent 155 32))
(terminals on)
(pinCenter 740 390))
(devCarrierFor 10
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 740 430))
(devCarrierFor 11
(active icon)
(icon
(extent 123 25))
(open
(extent 513 53))
(terminals on)
(pinCenter 190 360))
(devCarrierFor 19
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 100 610))
(devCarrierFor 23
(active icon)
(icon
(extent 41 15))
(open)
(terminals on)
(pinCenter 530 500))
(devCarrierFor 24
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 307 129)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 670 110))
(devCarrierFor 25
(active icon)
(icon
(extent 152 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 360 480))
(devCarrierFor 26
(active icon)
(icon
(extent 102 25))
(open
(extent 236 53))
(terminals on)
(pinCenter 610 280))
(devCarrierFor 27
(active icon)
(icon
(extent 119 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 770 280))
(devCarrierFor 28
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 870 130))
(devCarrierFor 29
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 880 380))
(devCarrierFor 30
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 940 420))
(devCarrierFor 31
(active icon)
(icon
(extent 41 15))
(open)
(terminals on)
(pinCenter 940 130))
(devCarrierFor 32
(active icon)
(icon
(extent 41 15))
(open)
(terminals on)
(pinCenter 980 350))
(devCarrierFor 33
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 770 330))
(connect D1:1 D0:1
(points 2 217 110 268 110))
(connect I1:1 D0:2
(points 6 -10 350 0 350 0 170 240 170 240 130 268 130))
(connect D2:1 D1:1
(points 2 111 110 142 110))
(connect I1:1 D2:1
(points 6 -10 350 0 350 0 170 20 170 20 110 48 110))
(connect D16:2 D3:0
(points 5 663 290 670 290 670 310 570 310 570 325))
(connect D5:1 D3:1
(points 4 382 270 420 270 420 330 451 330))
(connect D0:1 D3:2
(points 4 311 110 410 110 410 350 451 350))
(connect D8:0 D4:0
(points 2 190 220 190 251))
(connect D0:2 D5:1
(points 6 311 130 330 130 330 240 270 240 270 260 278 260))
(connect D4:1 D5:2
(points 2 227 280 278 280))
(connect D5:1 D6:1
(points 2 382 270 428 270))
(connect D0:1 D8:0
(points 5 311 110 320 110 320 180 190 180 190 199))
(connect D3:1 D9:0
(points 5 689 330 710 330 710 360 740 360 740 379))
(connect D9:0 D10:0
(points 2 740 400 740 419))
(connect D4:0 D11:0
(points 2 190 308 190 345))
(connect D0:2 D11:1
(points 8 311 130 400 130 400 380 300 380 300 400 110 400 110 360 126 360))
(connect D1:0 D12:0
(points 4 180 138 180 160 100 160 100 599))
(connect D15:1 D13:0
(points 3 438 470 530 470 530 490))
(connect D0:2 D13:1
(points 6 311 130 400 130 400 380 460 380 460 500 507 500))
(connect D11:1 D15:0
(points 3 254 350 360 350 360 465))
(connect D0:2 D15:1
(points 8 311 130 400 130 400 380 300 380 300 400 260 400 260 480 281 480))
(connect D6:1 D16:0
(points 5 532 260 540 260 540 250 610 250 610 265))
(connect D5:1 D16:1
(points 6 382 270 420 270 420 310 540 310 540 280 556 280))
(connect D16:1 D17:0
(points 5 663 270 680 270 680 250 770 250 770 265))
(connect D13:1 D18:1
(points 6 553 500 850 500 850 170 840 170 840 120 853 120))
(connect D17:1 D18:2
(points 6 832 270 840 270 840 250 830 250 830 140 853 140))
(connect D15:1 D19:1
(points 6 438 470 530 470 530 460 830 460 830 370 863 370))
(connect D17:2 D19:2
(points 4 832 290 840 290 840 390 863 390))
(connect D22:0 D20:0
(points 4 980 360 980 380 940 380 940 409))
(connect D18:1 D21:1
(points 2 887 130 917 130))
(connect D21:0 D22:0
(points 4 940 140 940 160 980 160 980 340))
(connect D19:1 D22:1
(points 4 897 380 920 380 920 350 957 350))
(connect D17:0 D23:0
(points 2 770 295 770 319))
(connect D21:1 O1:1
(points 4 963 130 980 130 980 120 1044 120))
(connect D22:1 O2:1
(points 4 1003 350 1023 350 1023 350 1044 350))
(connect D12:1 O3:1
(points 4 123 610 140 610 140 580 1044 580)))
(stackingOrder 1 7 13 12 8 4 2 3 6 0 11 15 14 5 9 10 16 17 18 19 21 22 20 23))))
(context 33
(properties
(name "CheckLeftAndRightForKills")
(trigMode deg)
(nextID 16)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "From")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 3
(name "thru")
(optional yes))
(input 4
(name "step")
(optional yes))
(output 1
(type data)
(name "Data")
(lock constraints)
(optional yes)))
(deviceList
(device 0 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 1 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "if 0, mine, unknown")
(cases 3 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "down of left square")
(cases 1 "(bordersquares[i, 1]!=-1)*borderSquares[i, 1]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 IFTHENELSE
(properties
(name "if 0, mine, unknown")
(cases 3 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 8 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 IFTHENELSE
(properties
(name "up of leftsquare")
(cases 1 "(bordersquares[i, 0]!=-1)*borderSquares[i, 0]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 10 FORMULA
(properties
(name "weight defender")
(expr 1 "p = KnownBoard[to], (p<0 ? p : WeightOfPiece[p])"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 IFTHENELSE
(properties
(name "if 0, mine, lake, unknown")
(cases 4 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]==-3"
"knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 12 BREAK)
(device 13 FORRANGE
(properties
(name "For down")
(from 0)
(thru 99)
(step 10))
(interface
(input 1
(name "From")
(tag "From")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(input 2
(name "Thru")
(tag "Thru")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(input 3
(name "Step")
(tag "Step")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Data")
(lock name constraints))))
(device 14 NOTE
(properties
(name "if can move closer")
(text2 6 "If 0 keep trying" "if mine break" "if unknown go get it"
"else if I can kill do it" "NOTE output is 1 or nada " "cannot send 0 to Jct")))
(device 15 BREAK)
(configuration
(connect D6:1 D0:1)
(connect D4:1 D0:2)
(connect D1:1 D0:3)
(connect D2:4 D1:0)
(connect I1:1 D1:1)
(connect D8:2 D1:2)
(connect D3:1 D2:1)
(connect D11:1 D3:1)
(connect D5:4 D4:0)
(connect I1:1 D4:1)
(connect D8:2 D4:2)
(connect D7:1 D5:1)
(connect I1:1 D6:1)
(connect D8:2 D6:2)
(connect D11:1 D7:1)
(connect D9:5 D8:0)
(connect D11:1 D8:1)
(connect D11:1 D9:1)
(connect D9:2 D10:0)
(connect I2:1 D11:1)
(connect I3:1 D11:2)
(connect I4:1 D11:3)
(connect D9:3 D13:0)
(connect D0:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 774 531)
(anchorPt 0 2)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 28 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 680 320))
(devCarrierFor 1
(active icon)
(icon
(extent 183 25))
(open
(extent 210 60))
(terminals on)
(pinCenter 450 460))
(devCarrierFor 2
(active icon)
(icon
(extent 148 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 380 370))
(devCarrierFor 3
(active icon)
(icon
(extent 148 25))
(open
(extent 351 51))
(terminals on)
(pinCenter 200 370))
(devCarrierFor 5
(active icon)
(icon
(extent 183 25))
(open
(extent 210 60))
(terminals on)
(pinCenter 460 310))
(devCarrierFor 7
(active icon)
(icon
(extent 148 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 390 240))
(devCarrierFor 8
(active icon)
(icon
(extent 183 25))
(open
(extent 210 60))
(terminals on)
(pinCenter 460 170))
(devCarrierFor 9
(active icon)
(icon
(extent 122 25))
(open
(extent 351 51))
(terminals on)
(pinCenter 210 240))
(devCarrierFor 10
(active icon)
(icon
(extent 123 25))
(open
(extent 372 57))
(terminals on)
(pinCenter 210 170))
(devCarrierFor 11
(active icon)
(icon
(extent 191 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 240 90))
(devCarrierFor 12
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 390 90))
(devCarrierFor 13
(active icon)
(icon
(extent 70 51)
(iconImage "loop.icn"))
(open
(extent 112 79))
(pinCenter 90 100))
(devCarrierFor 14
(active open)
(icon
(extent 141 0)
(iconImage "notepad.icn"))
(open
(extent 255 117)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 580 90))
(devCarrierFor 15
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 380 120))
(connect D6:1 D0:1
(points 6 554 160 560 160 560 170 580 170 580 300 663 300))
(connect D4:1 D0:2
(points 4 554 300 570 300 570 320 663 320))
(connect D1:1 D0:3
(points 4 544 450 570 450 570 340 663 340))
(connect D2:4 D1:0
(points 5 456 380 480 380 480 420 450 420 450 445))
(connect I1:1 D1:1
(points 6 0 63 20 63 20 150 90 150 90 450 356 450))
(connect D8:2 D1:2
(points 10 274 180 290 180 290 210 280 210 280 250 290 250 290 320 270 320 270
470 356 470))
(connect D3:1 D2:1
(points 4 276 360 290 360 290 370 303 370))
(connect D11:1 D3:1
(points 8 127 100 140 100 140 140 110 140 110 170 100 170 100 370 123 370))
(connect D5:4 D4:0
(points 5 466 250 490 250 490 280 460 280 460 295))
(connect I1:1 D4:1
(points 6 0 63 20 63 20 150 90 150 90 300 366 300))
(connect D8:2 D4:2
(points 8 274 180 290 180 290 210 280 210 280 250 290 250 290 320 366 320))
(connect D7:1 D5:1
(points 4 273 230 290 230 290 240 313 240))
(connect I1:1 D6:1
(points 8 0 63 30 63 30 40 420 40 420 140 360 140 360 160 366 160))
(connect D8:2 D6:2
(points 2 274 180 366 180))
(connect D11:1 D7:1
(points 8 127 100 140 100 140 140 110 140 110 170 120 170 120 240 146 240))
(connect D9:5 D8:0
(points 5 338 110 350 110 350 140 210 140 210 155))
(connect D11:1 D8:1
(points 6 127 100 140 100 140 140 110 140 110 170 146 170))
(connect D11:1 D9:1
(points 2 127 100 142 90))
(connect D9:2 D10:0
(points 5 338 80 350 80 350 60 390 60 390 80))
(connect I2:1 D11:1
(points 4 0 193 10 193 10 90 52 90))
(connect I3:1 D11:2
(points 4 0 323 30 323 30 100 52 100))
(connect I4:1 D11:3
(points 4 0 453 40 453 40 110 52 110))
(connect D9:3 D13:0
(points 5 338 90 350 90 350 100 380 100 380 110))
(connect D0:1 O1:1
(points 4 696 320 720 320 720 263 773 263)))
(stackingOrder 2 4 11 8 5 6 7 3 0 10 13 9 1 12))))
(context 35
(properties
(name "CheckLeftAndRightForUnknownsAndKills")
(trigMode deg)
(nextID 43)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "From")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 3
(name "thru")
(optional yes))
(input 4
(name "step")
(optional yes))
(output 1
(type data)
(name "Data")
(lock constraints)
(optional yes)))
(deviceList
(device 0 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "E")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "F")
(optional yes))
(input 6
(name "G")
(optional yes))
(input 7
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 1 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "if 0, mine, unknown")
(cases 3 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "down of LR square")
(cases 1 "(bordersquares[i, 1]!=-1)*borderSquares[i, 1]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 IFTHENELSE
(properties
(name "if 0, mine, unknown")
(cases 3 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 8 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 IFTHENELSE
(properties
(name "up of LR square")
(cases 1 "(bordersquares[i, 0]!=-1)*borderSquares[i, 0]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 10 FORMULA
(properties
(name "weight defender")
(expr 1
"p = KnownBoard[to], p = (p>1000 ? p-1000 : p), (p<0 ? p : WeightOfPiece[p])"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 IFTHENELSE
(properties
(name "if 0, my, lake, unknown")
(cases 4 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]==-3"
"knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 13 FORRANGE
(properties
(name "For LR")
(from 0)
(thru 99)
(step 10))
(interface
(input 1
(name "From")
(tag "From")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(input 2
(name "Thru")
(tag "Thru")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(input 3
(name "Step")
(tag "Step")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Data")
(lock name constraints))))
(device 14 NOTE
(properties
(name "if can move closer")
(text2 6 "If 0 keep trying" "if my piece break" "if unknown go get it"
"else if I can kill do it" "NOTE output is 1 or nada " "cannot send 0 to Jct")))
(device 17 FORMULA
(properties
(name "break=0")
(expr 1 "breakAfterCheckLR = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 FORMULA
(properties
(name "break=1")
(expr 1 "breakAfterCheckLR = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 IFTHENELSE
(properties
(name "not bomb && can kill me and knows it")
(cases 1 "d!=-100 AND opponentsKnownBoard[s]>1000"))
(interface
(input 1
(name "s")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 21 BREAK)
(device 22 BREAK)
(device 23 IFTHENELSE
(properties
(name "not bomb && can kill me and knows it")
(cases 1 "d!=-100 AND opponentsKnownBoard[s]>1000"))
(interface
(input 1
(name "s")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 24 FORMULA
(properties
(name "weight defender")
(expr 1
"p = KnownBoard[to], p = (p>1000 ? p-1000 : p), (p<0 ? p : WeightOfPiece[p])"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 26 FORMULA
(properties
(name "weight defender")
(expr 1
"p = KnownBoard[to], p = (p>1000 ? p-1000 : p), (p<0 ? p : WeightOfPiece[p])"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 28 IFTHENELSE
(properties
(name "not bomb && can kill me and knows it")
(cases 1 "d!=-100 AND opponentsKnownBoard[s]>1000"))
(interface
(input 1
(name "s")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 29 BREAK)
(device 31 IFTHENELSE
(properties
(name "if breakAfter")
(cases 1 "breakAfterCheckLR"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 34 BREAK)
(device 35 EXITCONTEXT)
(device 36 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 37 BREAK)
(device 38 IFTHENELSE
(properties
(name "if down, L and R are all filled stop looking")
(cases 1 "knownboard[l]!=0 AND knownboard[r]!=0 AND knownboard[d]!=0"))
(interface
(input 1
(name "d")
(optional yes))
(input 2
(name "l")
(optional yes))
(input 3
(name "r")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 39 IFTHENELSE
(properties
(name "? checkUpDown(a,fr+10,99,10)")
(cases 1 "CheckUpAndDownForUnknownsAndKills(A, from+10, 99, 10)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "from")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 40 BREAK)
(device 41 BREAK)
(device 42 DECLVAR
(properties
(scope con)
(globalName "breakAfterCheckLR"))
(implementation
(value Int32
(data  0))))
(configuration
(connect D9:4 D0:1)
(connect D6:1 D0:2)
(connect D5:3 D0:3)
(connect D4:1 D0:4)
(connect D2:3 D0:5)
(connect D28:1 D0:6)
(connect D1:1 D0:7)
(connect D2:4 D1:0)
(connect I1:1 D1:1)
(connect D19:2 D1:2)
(connect D3:1 D2:1)
(connect D7:0 D3:0)
(connect D10:1 D3:1)
(connect D5:4 D4:0)
(connect I1:1 D4:1)
(connect D18:2 D4:2)
(connect D7:1 D5:1)
(connect I1:1 D6:1)
(connect D8:2 D6:2)
(connect D9:0 D7:0)
(connect D10:1 D7:1)
(connect D9:5 D8:0)
(connect D10:1 D8:1)
(connect D10:1 D9:1)
(connect D12:0 D10:0)
(connect I2:1 D10:1)
(connect I3:1 D10:2)
(connect I4:1 D10:3)
(connect D6:2 D13:0)
(connect D6:2 D14:0)
(connect D10:1 D14:1)
(connect D8:2 D14:2)
(connect D14:1 D15:0)
(connect D17:1 D16:0)
(connect D4:2 D17:0)
(connect D7:1 D17:1)
(connect D18:2 D17:2)
(connect D7:1 D18:1)
(connect D3:1 D19:1)
(connect D1:2 D20:0)
(connect D3:1 D20:1)
(connect D19:2 D20:2)
(connect D20:1 D21:0)
(connect D3:0 D22:0)
(connect D22:1 D23:0)
(connect D25:0 D24:0)
(connect D0:1 D25:1)
(connect D27:1 D26:0)
(connect D22:0 D27:0)
(connect D10:1 D27:1)
(connect D7:1 D27:2)
(connect D3:1 D27:3)
(connect D2:1 D28:0)
(connect I1:1 D28:1)
(connect D3:1 D28:2)
(connect D9:3 D29:0)
(connect D9:2 D30:0)
(connect D25:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 812 711)
(anchorPt 17 23)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 28 74))
(open
(extent 12 142))
(terminals on)
(pinCenter 780 350))
(devCarrierFor 1
(active icon)
(icon
(extent 183 25))
(open
(extent 210 60))
(terminals on)
(pinCenter 470 530))
(devCarrierFor 2
(active icon)
(icon
(extent 148 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 400 470))
(devCarrierFor 3
(active icon)
(icon
(extent 138 25))
(open
(extent 351 51))
(terminals on)
(pinCenter 150 450))
(devCarrierFor 5
(active icon)
(icon
(extent 183 25))
(open
(extent 210 62))
(terminals on)
(pinCenter 450 370))
(devCarrierFor 7
(active icon)
(icon
(extent 148 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 440 300))
(devCarrierFor 8
(active icon)
(icon
(extent 183 25))
(open
(extent 252 62))
(terminals on)
(pinCenter 480 170))
(devCarrierFor 9
(active icon)
(icon
(extent 116 25))
(open
(extent 351 51))
(terminals on)
(pinCenter 150 280))
(devCarrierFor 10
(active icon)
(icon
(extent 123 25))
(open
(extent 554 57))
(terminals on)
(pinCenter 310 170))
(devCarrierFor 11
(active icon)
(icon
(extent 177 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 240 90))
(devCarrierFor 13
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 112 79))
(pinCenter 90 100))
(devCarrierFor 14
(active open)
(icon
(extent 141 0)
(iconImage "notepad.icn"))
(open
(extent 263 120)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 630 90))
(devCarrierFor 17
(active icon)
(icon
(extent 64 15))
(open
(extent 201 31))
(terminals on)
(pinCenter 90 50))
(devCarrierFor 18
(active icon)
(icon
(extent 64 15))
(open
(extent 201 31))
(terminals on)
(pinCenter 690 200))
(devCarrierFor 19
(active icon)
(icon
(extent 290 25))
(open
(extent 348 62))
(terminals on)
(pinCenter 460 240))
(devCarrierFor 21
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 610 290))
(devCarrierFor 22
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 670 450))
(devCarrierFor 23
(active icon)
(icon
(extent 290 25))
(open
(extent 348 62))
(terminals on)
(pinCenter 530 410))
(devCarrierFor 24
(active icon)
(icon
(extent 123 25))
(open
(extent 554 57))
(terminals on)
(pinCenter 240 360))
(devCarrierFor 26
(active icon)
(icon
(extent 123 25))
(open
(extent 554 57))
(terminals on)
(pinCenter 260 530))
(devCarrierFor 28
(active icon)
(icon
(extent 290 25))
(open
(extent 348 62))
(terminals on)
(pinCenter 510 590))
(devCarrierFor 29
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 690 620))
(devCarrierFor 31
(active icon)
(icon
(extent 103 25))
(open
(extent 200 51))
(terminals on)
(pinCenter 140 600))
(devCarrierFor 34
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 220 640))
(devCarrierFor 35
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 850 390))
(devCarrierFor 36
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 830 340))
(devCarrierFor 37
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 450 710))
(devCarrierFor 38
(active icon)
(icon
(extent 321 34))
(open
(extent 485 62))
(terminals on)
(pinCenter 250 680))
(devCarrierFor 39
(active icon)
(icon
(extent 235 25))
(open
(extent 449 51))
(terminals on)
(pinCenter 640 490))
(devCarrierFor 40
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 380 110))
(devCarrierFor 41
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 400 70))
(devCarrierFor 42
(active icon)
(icon
(extent 133 15))
(open
(extent 240 103))
(pinCenter 250 -10))
(connect D9:4 D0:1
(points 10 331 100 350 100 350 130 460 130 460 -10 780 -10 780 170 740 170 740
320 763 320))
(connect D6:1 D0:2
(points 8 574 160 600 160 600 180 640 180 640 230 660 230 660 330 763 330))
(connect D5:3 D0:3
(points 4 516 300 550 300 550 340 763 340))
(connect D4:1 D0:4
(points 4 544 360 560 360 560 350 763 350))
(connect D2:3 D0:5
(points 4 476 470 720 470 720 360 763 360))
(connect D28:1 D0:6
(points 6 760 480 770 480 770 460 740 460 740 370 763 370))
(connect D1:1 D0:7
(points 8 564 520 570 520 570 530 780 530 780 450 750 450 750 380 763 380))
(connect D2:4 D1:0
(points 5 476 480 490 480 490 510 470 510 470 515))
(connect I1:1 D1:1
(points 12 -17 62 20 62 20 330 320 330 320 360 330 360 330 400 290 400 290 530
360 530 360 520 376 520))
(connect D19:2 D1:2
(points 2 324 540 376 540))
(connect D3:1 D2:1
(points 4 221 440 240 440 240 470 323 470))
(connect D7:0 D3:0
(points 2 150 295 150 435))
(connect D10:1 D3:1
(points 6 126 100 140 100 140 170 70 170 70 450 78 450))
(connect D5:4 D4:0
(points 5 516 310 540 310 540 340 450 340 450 355))
(connect I1:1 D4:1
(points 6 -17 62 20 62 20 330 320 330 320 360 356 360))
(connect D18:2 D4:2
(points 4 304 370 320 370 320 380 356 380))
(connect D7:1 D5:1
(points 4 210 270 230 270 230 300 363 300))
(connect I1:1 D6:1
(points 8 -17 62 20 62 20 20 450 20 450 140 380 140 380 160 386 160))
(connect D8:2 D6:2
(points 2 374 180 386 180))
(connect D9:0 D7:0
(points 4 240 119 240 140 150 140 150 265))
(connect D10:1 D7:1
(points 6 126 100 140 100 140 170 70 170 70 280 89 280))
(connect D9:5 D8:0
(points 5 331 110 340 110 340 140 310 140 310 155))
(connect D10:1 D8:1
(points 4 126 100 140 100 140 170 246 170))
(connect D10:1 D9:1
(points 4 126 100 140 100 140 90 149 90))
(connect D12:0 D10:0
(points 2 90 60 90 72))
(connect I2:1 D10:1
(points 6 -17 242 50 242 50 230 30 230 30 90 53 90))
(connect I3:1 D10:2
(points 6 -17 422 60 422 60 220 40 220 40 100 53 100))
(connect I4:1 D10:3
(points 6 -17 602 50 602 50 590 10 590 10 110 53 110))
(connect D6:2 D13:0
(points 5 574 180 590 180 590 170 690 170 690 190))
(connect D6:2 D14:0
(points 5 574 180 590 180 590 210 460 210 460 225))
(connect D10:1 D14:1
(points 6 126 100 140 100 140 170 230 170 230 230 312 230))
(connect D8:2 D14:2
(points 6 374 180 380 180 380 210 290 210 290 250 312 250))
(connect D14:1 D15:0
(points 5 607 230 630 230 630 270 610 270 610 280))
(connect D17:1 D16:0
(points 5 677 400 690 400 690 430 670 430 670 440))
(connect D4:2 D17:0
(points 5 544 380 550 380 550 390 530 390 530 395))
(connect D7:1 D17:1
(points 8 210 270 230 270 230 300 340 300 340 370 350 370 350 400 382 400))
(connect D18:2 D17:2
(points 6 304 370 320 370 320 380 340 380 340 420 382 420))
(connect D7:1 D18:1
(points 6 210 270 230 270 230 320 160 320 160 360 176 360))
(connect D3:1 D19:1
(points 6 221 440 240 440 240 490 180 490 180 530 196 530))
(connect D1:2 D20:0
(points 5 564 540 570 540 570 560 510 560 510 575))
(connect D3:1 D20:1
(points 10 221 440 240 440 240 470 300 470 300 510 330 510 330 520 350 520 350
580 362 580))
(connect D19:2 D20:2
(points 4 324 540 340 540 340 600 362 600))
(connect D20:1 D21:0
(points 3 657 580 690 580 690 610))
(connect D3:0 D22:0
(points 4 150 465 150 490 140 490 140 585))
(connect D22:1 D23:0
(points 3 194 590 220 590 220 630))
(connect D25:0 D24:0
(points 4 830 350 830 370 850 370 850 380))
(connect D0:1 D25:1
(points 2 796 350 808 340))
(connect D27:1 D26:0
(points 3 413 670 450 670 450 700))
(connect D22:0 D27:0
(points 8 140 615 140 640 70 640 70 570 270 570 270 650 250 650 250 660))
(connect D10:1 D27:1
(points 10 126 100 140 100 140 170 70 170 70 450 60 450 60 490 80 490 80 670 87
670))
(connect D7:1 D27:2
(points 12 210 270 230 270 230 320 160 320 160 360 80 360 80 430 50 430 50 670
70 670 70 680 87 680))
(connect D3:1 D27:3
(points 10 221 440 240 440 240 490 180 490 180 530 60 530 60 660 80 660 80 690
87 690))
(connect D2:1 D28:0
(points 5 476 450 500 450 500 460 640 460 640 475))
(connect I1:1 D28:1
(points 14 -17 62 20 62 20 330 320 330 320 360 330 360 330 400 290 400 290 530
360 530 360 560 500 560 500 480 520 480))
(connect D3:1 D28:2
(points 12 221 440 240 440 240 470 300 470 300 510 330 510 330 520 350 520 350
510 460 510 460 500 520 500))
(connect D9:3 D29:0
(points 3 331 90 380 90 380 100))
(connect D9:2 D30:0
(points 5 331 80 350 80 350 40 400 40 400 60))
(connect D25:1 O1:1
(points 4 851 340 832 340 832 332 794 332)))
(stackingOrder 13 14 5 4 1 17 20 8 19 12 21 23 22 27 26 10 7 3 2 25 24 0 28 16
18 15 29 9 30 31 6 11))))
(context 89
(properties
(name "CheckProbabilitiesFirst")
(trigMode deg)
(nextID 16)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "nada")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 CONTEXT
(properties
(name "CheckMove")
(trigMode deg)
(nextID 26)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "move")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "guaranteed win, guaranteed win or tie, or less?")
(cases 2 "move.win==1.0" "(move.win+move.tie)==1.0"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 2 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 12 NOTE
(properties
(name "Comment")
(text2 7 "This function determines " "whether this move will"
"succeed (based on neighboring " "pieces),  It also checks for"
"\"traps\" (like a spy sitting" "next to a high ranking opponent" "piece).")))
(device 13 IFTHENELSE
(properties
(name "Is this a potential trap?")
(cases 1 "(piece>=1 AND piece<=4) AND (OpponentsKnownBoard[move.from]>1000)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 14 FORMULA
(properties
(name "my piece")
(expr 1 "KnownBoard[move.from]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 17 FORMULA
(properties
(name "destination")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 19 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 20 EXITCONTEXT)
(device 22 IFTHENELSE
(properties
(name "Is my piece a nine & it hasn\'t moved")
(cases 1 "WeightOfPiece[KnownBoard[move.from]-1000]==9 AND move.win!=1.0"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 25 IFTHENELSE
(properties
(name "Is my piece an unknown eight & opp piece nine?")
(cases 1
"WeightOfPiece[KnownBoard[move.from]-1000]==8 AND (KnownBoard[move.to]>0 ? WeightOfPiece[KnownBoard[move.to]]==9 : 0) AND OpponentsKnownBoard[move.from]<0"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D0:2 D1:2)
(connect D5:3 D3:0)
(connect D4:1 D3:1)
(connect I1:1 D3:2)
(connect I1:1 D4:1)
(connect D1:1 D5:0)
(connect D4:1 D5:1)
(connect D6:1 D5:2)
(connect I1:1 D6:1)
(connect D3:2 D7:1)
(connect D11:2 D7:2)
(connect D7:1 D8:0)
(connect I1:1 D8:1)
(connect D8:0 D9:0)
(connect D5:2 D10:0)
(connect I1:1 D10:1)
(connect D10:2 D11:0)
(connect I1:1 D11:1)
(connect D8:1 O1:1)))
(contextCarrier
(wndOrigin 322 630)
(wndRestoredOrigin 2 2)
(wndRestoredExtent 1057 478)
(wndState min)
(active detail)
(detail
(extent 1057 478)
(anchorPt -16 37)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 325 34))
(open
(extent 261 62))
(terminals on)
(pinCenter 230 80))
(devCarrierFor 2
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 460 80))
(devCarrierFor 12
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 253 131)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 910 60))
(devCarrierFor 13
(active icon)
(icon
(extent 157 25))
(open
(extent 552 53))
(terminals on)
(pinCenter 300 240))
(devCarrierFor 14
(active icon)
(icon
(extent 61 16))
(open
(extent 192 34))
(terminals on)
(pinCenter 120 150))
(devCarrierFor 16
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 300 170))
(devCarrierFor 17
(active icon)
(icon
(extent 75 16))
(open
(extent 84 34))
(terminals on)
(pinCenter 110 190))
(devCarrierFor 18
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 890 280))
(devCarrierFor 19
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 920 310))
(devCarrierFor 20
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 920 350))
(devCarrierFor 22
(active icon)
(icon
(extent 247 25))
(open
(extent 456 53))
(terminals on)
(pinCenter 550 170))
(devCarrierFor 25
(active icon)
(icon
(extent 290 25))
(open
(extent 976 53))
(terminals on)
(pinCenter 650 230))
(connect I1:1 D0:1
(points 4 16 201 50 201 50 80 65 80))
(connect D0:1 D1:1
(points 2 395 70 443 70))
(connect D0:2 D1:2
(points 4 395 80 420 80 420 90 443 90))
(connect D5:3 D3:0
(points 5 392 180 400 180 400 210 300 210 300 225))
(connect D4:1 D3:1
(points 4 153 150 180 150 180 230 219 230))
(connect I1:1 D3:2
(points 4 16 201 50 201 50 250 219 250))
(connect I1:1 D4:1
(points 4 16 201 50 201 50 150 87 150))
(connect D1:1 D5:0
(points 5 477 80 500 80 500 130 300 130 300 150))
(connect D4:1 D5:1
(points 4 153 150 180 150 180 160 207 160))
(connect D6:1 D5:2
(points 4 150 190 170 190 170 180 207 180))
(connect I1:1 D6:1
(points 4 16 201 32 201 32 190 70 190))
(connect D3:2 D7:1
(points 4 381 250 400 250 400 270 873 270))
(connect D11:2 D7:2
(points 4 797 240 820 240 820 290 873 290))
(connect D7:1 D8:0
(points 3 907 280 920 280 920 299))
(connect I1:1 D8:1
(points 8 16 201 50 201 50 250 200 250 200 280 420 280 420 310 900 310))
(connect D8:0 D9:0
(points 2 920 320 920 339))
(connect D5:2 D10:0
(points 5 392 170 400 170 400 140 550 140 550 155))
(connect I1:1 D10:1
(points 8 16 201 50 201 50 250 200 250 200 280 410 280 410 170 424 170))
(connect D10:2 D11:0
(points 5 676 180 690 180 690 200 650 200 650 215))
(connect I1:1 D11:1
(points 8 16 201 50 201 50 250 200 250 200 280 410 280 410 230 502 230))
(connect D8:1 O1:1
(points 4 940 310 960 310 960 201 1072 201)))
(stackingOrder 1 5 6 4 0 3 2 10 7 8 9 11))))
(device 10 FORMULA
(properties
(name "unpack move")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 14 EXITCONTEXT)
(configuration
(connect D1:1 D0:1)
(connect I1:1 D0:2)
(connect D2:1 D1:1)
(connect I1:1 D2:1)
(connect D0:1 D3:1)
(connect D3:1 D4:1)
(connect D1:0 D5:0)
(connect D4:0 D6:0)
(connect D4:1 O1:1)
(connect D4:2 O2:1)
(connect D5:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 694 307)
(anchorPt -64 -25)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 330 130))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 230 120))
(devCarrierFor 2
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 130 120))
(devCarrierFor 8
(active icon)
(icon
(extent 81 34))
(terminals on)
(pinCenter 440 130))
(devCarrierFor 10
(active icon)
(icon
(extent 92 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 600 130))
(devCarrierFor 11
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 230 230))
(devCarrierFor 14
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 600 180))
(connect D1:1 D0:1
(points 2 267 120 308 120))
(connect I1:1 D0:2
(points 6 64 178 70 178 70 170 290 170 290 140 308 140))
(connect D2:1 D1:1
(points 2 161 120 192 120))
(connect I1:1 D2:1
(points 4 64 178 70 178 70 120 98 120))
(connect D0:1 D3:1
(points 2 351 130 397 130))
(connect D3:1 D4:1
(points 2 483 130 551 130))
(connect D1:0 D5:0
(points 2 230 148 230 219))
(connect D4:0 D6:0
(points 2 600 145 600 169))
(connect D4:1 O1:1
(points 4 648 120 670 120 670 78 757 78))
(connect D4:2 O2:1
(points 6 648 140 660 140 660 150 790 150 790 178 757 178))
(connect D5:1 O3:1
(points 4 244 230 260 230 260 278 757 278)))
(stackingOrder 0 1 2 4 5 6 3))))
(context 34
(properties
(name "CheckUpAndDownForKills")
(trigMode deg)
(nextID 41)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "From")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 3
(name "thru")
(optional yes))
(input 4
(name "step")
(optional yes))
(output 1
(type data)
(name "Data")
(lock constraints)
(optional yes)))
(deviceList
(device 0 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 1 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "if 0, mine, unknown")
(cases 3 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "right of down square")
(cases 1 "(bordersquares[i, 3]!=-1)*borderSquares[i, 3]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 IFTHENELSE
(properties
(name "if 0, mine, unknown")
(cases 3 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 8 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 IFTHENELSE
(properties
(name "left of down square")
(cases 1 "(bordersquares[i, 2]!=-1)*borderSquares[i, 2]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 10 FORMULA
(properties
(name "weight defender")
(expr 1
"p = KnownBoard[to], p = (p>1000 ? p-1000 : p), (p<0 ? p : WeightOfPiece[p])"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 IFTHENELSE
(properties
(name "if 0, my, lake, unknown")
(cases 4 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]==-3"
"knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 13 FORRANGE
(properties
(name "For down")
(from 0)
(thru 99)
(step 10))
(interface
(input 1
(name "From")
(tag "From")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(input 2
(name "Thru")
(tag "Thru")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(input 3
(name "Step")
(tag "Step")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Data")
(lock name constraints))))
(device 14 NOTE
(properties
(name "if can move closer")
(text2 6 "If 0 keep trying" "if my piece break" "if unknown go get it"
"else if I can kill do it" "NOTE output is 1 or nada " "cannot send 0 to Jct")))
(device 16 DECLVAR
(properties
(scope con)
(globalName "breakAfterCheckLR"))
(implementation
(value Int32
(data  0))))
(device 17 FORMULA
(properties
(name "break=0")
(expr 1 "breakAfterCheckLR = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 FORMULA
(properties
(name "break=1")
(expr 1 "breakAfterCheckLR = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 IFTHENELSE
(properties
(name "not bomb && can kill me and knows it")
(cases 1 "d!=-100 AND opponentsKnownBoard[s]>1000"))
(interface
(input 1
(name "s")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 21 BREAK)
(device 22 BREAK)
(device 23 IFTHENELSE
(properties
(name "not bomb && can kill me and knows it")
(cases 1 "d!=-100 AND opponentsKnownBoard[s]>1000"))
(interface
(input 1
(name "s")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 24 FORMULA
(properties
(name "weight defender")
(expr 1
"p = KnownBoard[to], p = (p>1000 ? p-1000 : p), (p<0 ? p : WeightOfPiece[p])"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 26 FORMULA
(properties
(name "weight defender")
(expr 1
"p = KnownBoard[to], p = (p>1000 ? p-1000 : p), (p<0 ? p : WeightOfPiece[p])"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 28 IFTHENELSE
(properties
(name "not bomb && can kill me and knows it")
(cases 1 "d!=-100 AND opponentsKnownBoard[s]>1000"))
(interface
(input 1
(name "s")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 29 BREAK)
(device 31 IFTHENELSE
(properties
(name "if breakAfter")
(cases 1 "breakAfterCheckLR"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 34 BREAK)
(device 35 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 36 EXITCONTEXT)
(device 37 BREAK)
(device 38 IFTHENELSE
(properties
(name "if down, L and R are all filled stop looking")
(cases 1 "knownboard[l]!=0 AND knownboard[r]!=0 AND knownboard[d]!=0"))
(interface
(input 1
(name "d")
(optional yes))
(input 2
(name "l")
(optional yes))
(input 3
(name "r")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 39 BREAK)
(device 40 BREAK)
(configuration
(connect D6:1 D0:1)
(connect D4:1 D0:2)
(connect D1:1 D0:3)
(connect D2:4 D1:0)
(connect I1:1 D1:1)
(connect D20:2 D1:2)
(connect D3:1 D2:1)
(connect D7:0 D3:0)
(connect D10:1 D3:1)
(connect D5:4 D4:0)
(connect I1:1 D4:1)
(connect D19:2 D4:2)
(connect D7:1 D5:1)
(connect I1:1 D6:1)
(connect D8:2 D6:2)
(connect D9:0 D7:0)
(connect D10:1 D7:1)
(connect D9:5 D8:0)
(connect D10:1 D8:1)
(connect D10:1 D9:1)
(connect D13:0 D10:0)
(connect I2:1 D10:1)
(connect I3:1 D10:2)
(connect I4:1 D10:3)
(connect D6:2 D14:0)
(connect D6:2 D15:0)
(connect D10:1 D15:1)
(connect D8:2 D15:2)
(connect D15:1 D16:0)
(connect D18:1 D17:0)
(connect D4:2 D18:0)
(connect D7:1 D18:1)
(connect D19:2 D18:2)
(connect D7:1 D19:1)
(connect D3:1 D20:1)
(connect D1:2 D21:0)
(connect D3:1 D21:1)
(connect D20:2 D21:2)
(connect D21:1 D22:0)
(connect D3:0 D23:0)
(connect D23:1 D24:0)
(connect D0:1 D25:1)
(connect D25:0 D26:0)
(connect D28:1 D27:0)
(connect D10:1 D28:1)
(connect D7:1 D28:2)
(connect D3:1 D28:3)
(connect D9:3 D29:0)
(connect D9:2 D30:0)
(connect D25:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 812 711)
(anchorPt -1 61)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 28 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 690 310))
(devCarrierFor 1
(active icon)
(icon
(extent 183 25))
(open
(extent 210 60))
(terminals on)
(pinCenter 470 530))
(devCarrierFor 2
(active icon)
(icon
(extent 148 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 400 470))
(devCarrierFor 3
(active icon)
(icon
(extent 158 25))
(open
(extent 351 51))
(terminals on)
(pinCenter 150 450))
(devCarrierFor 5
(active icon)
(icon
(extent 183 25))
(open
(extent 210 62))
(terminals on)
(pinCenter 450 370))
(devCarrierFor 7
(active icon)
(icon
(extent 148 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 440 300))
(devCarrierFor 8
(active icon)
(icon
(extent 183 25))
(open
(extent 252 62))
(terminals on)
(pinCenter 480 170))
(devCarrierFor 9
(active icon)
(icon
(extent 148 25))
(open
(extent 351 51))
(terminals on)
(pinCenter 150 280))
(devCarrierFor 10
(active icon)
(icon
(extent 123 25))
(open
(extent 554 57))
(terminals on)
(pinCenter 310 170))
(devCarrierFor 11
(active icon)
(icon
(extent 177 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 240 90))
(devCarrierFor 13
(active icon)
(icon
(extent 70 51)
(iconImage "loop.icn"))
(open
(extent 112 79))
(pinCenter 90 100))
(devCarrierFor 14
(active open)
(icon
(extent 141 0)
(iconImage "notepad.icn"))
(open
(extent 263 120)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 630 90))
(devCarrierFor 16
(active icon)
(icon
(extent 133 15))
(open
(extent 240 103))
(pinCenter 320 -10))
(devCarrierFor 17
(active icon)
(icon
(extent 64 15))
(open
(extent 201 31))
(terminals on)
(pinCenter 90 50))
(devCarrierFor 18
(active icon)
(icon
(extent 64 15))
(open
(extent 201 31))
(terminals on)
(pinCenter 690 200))
(devCarrierFor 19
(active icon)
(icon
(extent 290 25))
(open
(extent 348 62))
(terminals on)
(pinCenter 460 240))
(devCarrierFor 21
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 580 280))
(devCarrierFor 22
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 650 450))
(devCarrierFor 23
(active icon)
(icon
(extent 290 25))
(open
(extent 348 62))
(terminals on)
(pinCenter 530 410))
(devCarrierFor 24
(active icon)
(icon
(extent 123 25))
(open
(extent 554 57))
(terminals on)
(pinCenter 260 350))
(devCarrierFor 26
(active icon)
(icon
(extent 123 25))
(open
(extent 554 57))
(terminals on)
(pinCenter 260 530))
(devCarrierFor 28
(active icon)
(icon
(extent 290 25))
(open
(extent 348 62))
(terminals on)
(pinCenter 510 590))
(devCarrierFor 29
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 690 620))
(devCarrierFor 31
(active icon)
(icon
(extent 103 25))
(open
(extent 200 51))
(terminals on)
(pinCenter 140 600))
(devCarrierFor 34
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 220 640))
(devCarrierFor 35
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 740 310))
(devCarrierFor 36
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 770 350))
(devCarrierFor 37
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 440 720))
(devCarrierFor 38
(active icon)
(icon
(extent 321 34))
(open
(extent 485 62))
(terminals on)
(pinCenter 240 690))
(devCarrierFor 39
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 380 120))
(devCarrierFor 40
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 390 90))
(connect D6:1 D0:1
(points 8 574 160 580 160 580 170 600 170 600 190 630 190 630 290 673 290))
(connect D4:1 D0:2
(points 4 544 360 560 360 560 310 673 310))
(connect D1:1 D0:3
(points 6 564 520 710 520 710 380 650 380 650 330 673 330))
(connect D2:4 D1:0
(points 5 476 480 490 480 490 510 470 510 470 515))
(connect I1:1 D1:1
(points 9 1 24 1 420 90 420 90 390 300 390 300 500 320 500 320 520 376 520))
(connect D20:2 D1:2
(points 2 324 540 376 540))
(connect D3:1 D2:1
(points 4 231 440 250 440 250 470 323 470))
(connect D7:0 D3:0
(points 2 150 295 150 435))
(connect D10:1 D3:1
(points 8 127 100 140 100 140 220 100 220 100 250 50 250 50 450 68 450))
(connect D5:4 D4:0
(points 5 516 310 540 310 540 340 450 340 450 355))
(connect I1:1 D4:1
(points 8 1 24 -40 24 -40 420 90 420 90 390 310 390 310 360 356 360))
(connect D19:2 D4:2
(points 4 324 360 330 360 330 380 356 380))
(connect D7:1 D5:1
(points 4 226 270 250 270 250 300 363 300))
(connect I1:1 D6:1
(points 8 1 24 20 24 20 20 410 20 410 120 380 120 380 160 386 160))
(connect D8:2 D6:2
(points 2 374 180 386 180))
(connect D9:0 D7:0
(points 4 240 119 240 140 150 140 150 265))
(connect D10:1 D7:1
(points 8 127 100 140 100 140 220 100 220 100 250 50 250 50 280 73 280))
(connect D9:5 D8:0
(points 5 331 110 340 110 340 140 310 140 310 155))
(connect D10:1 D8:1
(points 4 127 100 140 100 140 170 246 170))
(connect D10:1 D9:1
(points 4 127 100 140 100 140 90 149 90))
(connect D13:0 D10:0
(points 2 90 60 90 72))
(connect I2:1 D10:1
(points 4 1 204 10 204 10 90 52 90))
(connect I3:1 D10:2
(points 4 1 384 30 384 30 100 52 100))
(connect I4:1 D10:3
(points 4 1 564 40 564 40 110 52 110))
(connect D6:2 D14:0
(points 5 574 180 630 180 630 170 690 170 690 190))
(connect D6:2 D15:0
(points 5 574 180 590 180 590 220 460 220 460 225))
(connect D10:1 D15:1
(points 6 127 100 140 100 140 220 290 220 290 230 312 230))
(connect D8:2 D15:2
(points 8 374 180 380 180 380 200 320 200 320 210 280 210 280 250 312 250))
(connect D15:1 D16:0
(points 5 607 230 620 230 620 260 580 260 580 270))
(connect D18:1 D17:0
(points 5 677 400 700 400 700 430 650 430 650 440))
(connect D4:2 D18:0
(points 5 544 380 550 380 550 390 530 390 530 395))
(connect D7:1 D18:1
(points 6 226 270 250 270 250 300 340 300 340 400 382 400))
(connect D19:2 D18:2
(points 4 324 360 330 360 330 420 382 420))
(connect D7:1 D19:1
(points 6 226 270 250 270 250 320 180 320 180 350 196 350))
(connect D3:1 D20:1
(points 6 231 440 250 440 250 490 170 490 170 530 196 530))
(connect D1:2 D21:0
(points 5 564 540 570 540 570 560 510 560 510 575))
(connect D3:1 D21:1
(points 6 231 440 250 440 250 490 170 490 170 580 362 580))
(connect D20:2 D21:2
(points 4 324 540 340 540 340 600 362 600))
(connect D21:1 D22:0
(points 3 657 580 690 580 690 610))
(connect D3:0 D23:0
(points 4 150 465 150 490 140 490 140 585))
(connect D23:1 D24:0
(points 3 194 590 220 590 220 630))
(connect D0:1 D25:1
(points 2 706 310 718 310))
(connect D25:0 D26:0
(points 4 740 320 740 330 770 330 770 340))
(connect D28:1 D27:0
(points 3 403 680 440 680 440 710))
(connect D10:1 D28:1
(points 8 127 100 140 100 140 220 100 220 100 250 50 250 50 680 77 680))
(connect D7:1 D28:2
(points 8 226 270 250 270 250 320 180 320 180 350 60 350 60 690 77 690))
(connect D3:1 D28:3
(points 8 231 440 250 440 250 490 170 490 170 570 70 570 70 700 77 700))
(connect D9:3 D29:0
(points 5 331 90 340 90 340 100 380 100 380 110))
(connect D9:2 D30:0
(points 5 331 80 350 80 350 60 390 60 390 80))
(connect D25:1 O1:1
(points 4 761 310 780 310 780 294 812 294)))
(stackingOrder 10 12 6 14 15 17 5 4 7 3 2 1 21 8 19 20 13 22 24 23 0 25 26 27 28
18 16 29 9 30 11))))
(context 20
(properties
(name "CheckUpAndDownForUnknownsAndKills")
(trigMode deg)
(nextID 41)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "From")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 3
(name "thru")
(optional yes))
(input 4
(name "step")
(optional yes))
(output 1
(type data)
(name "Data")
(lock constraints)
(optional yes)))
(deviceList
(device 0 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "E")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "F")
(optional yes))
(input 6
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 1 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "if 0, mine, unknown")
(cases 3 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "right of down square")
(cases 1 "(bordersquares[i, 3]!=-1)*borderSquares[i, 3]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 IFTHENELSE
(properties
(name "if 0, mine, unknown")
(cases 3 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 8 IFTHENELSE
(properties
(name "def != bomb && I can kill")
(cases 1 "d!=-100 AND d>a"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 IFTHENELSE
(properties
(name "left of down square")
(cases 1 "(bordersquares[i, 2]!=-1)*borderSquares[i, 2]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 10 FORMULA
(properties
(name "weight defender")
(expr 1
"p = KnownBoard[to], p = (p>1000 ? p-1000 : p), (p<0 ? p : WeightOfPiece[p])"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 IFTHENELSE
(properties
(name "if 0, my, lake, unknown")
(cases 4 "knownboard[i]==0" "knownboard[i]>1000" "knownboard[i]==-3"
"knownboard[i]<0"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 13 FORRANGE
(properties
(name "For down")
(from 0)
(thru 99)
(step 10))
(interface
(input 1
(name "From")
(tag "From")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(input 2
(name "Thru")
(tag "Thru")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(input 3
(name "Step")
(tag "Step")
(requires
(datatype Real)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Data")
(lock name constraints))))
(device 14 NOTE
(properties
(name "if can move closer")
(text2 7 "If 0 keep trying" "if my piece break at end" "if a lake quit"
"if unknown go get it" "else if I can kill do it" "NOTE output is 1 or nada "
"cannot send 0 to Jct")))
(device 16 DECLVAR
(properties
(scope con)
(globalName "breakAfterCheckLR"))
(implementation
(value Int32
(data  0))))
(device 17 FORMULA
(properties
(name "break=0")
(expr 1 "breakAfterCheckLR = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 FORMULA
(properties
(name "break=1")
(expr 1 "breakAfterCheckLR = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 IFTHENELSE
(properties
(name "not bomb && can kill me and knows it")
(cases 1 "d!=-100 AND opponentsKnownBoard[s]>1000"))
(interface
(input 1
(name "s")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 21 BREAK)
(device 22 BREAK)
(device 23 IFTHENELSE
(properties
(name "not bomb && can kill me and knows it")
(cases 1 "d!=-100 AND opponentsKnownBoard[s]>1000"))
(interface
(input 1
(name "s")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 24 FORMULA
(properties
(name "weight defender")
(expr 1
"p = KnownBoard[to], p = (p>1000 ? p-1000 : p), (p<0 ? p : WeightOfPiece[p])"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 26 FORMULA
(properties
(name "weight defender")
(expr 1
"p = KnownBoard[to], p = (p>1000 ? p-1000 : p), (p<0 ? p : WeightOfPiece[p])"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 28 IFTHENELSE
(properties
(name "not bomb && can kill me and knows it")
(cases 1 "d!=-100 AND opponentsKnownBoard[s]>1000"))
(interface
(input 1
(name "s")
(optional yes))
(input 2
(name "d")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 29 BREAK)
(device 31 IFTHENELSE
(properties
(name "if breakAfter")
(cases 1 "breakAfterCheckLR"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 34 BREAK)
(device 35 EXITCONTEXT)
(device 36 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 37 BREAK)
(device 38 IFTHENELSE
(properties
(name "if down, L and R are all filled stop looking")
(cases 1 "knownboard[l]!=0 AND knownboard[r]!=0 AND knownboard[d]!=0"))
(interface
(input 1
(name "d")
(optional yes))
(input 2
(name "l")
(optional yes))
(input 3
(name "r")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 39 BREAK)
(device 40 BREAK)
(configuration
(connect D9:4 D0:1)
(connect D6:1 D0:2)
(connect D5:3 D0:3)
(connect D4:1 D0:4)
(connect D2:3 D0:5)
(connect D1:1 D0:6)
(connect D2:4 D1:0)
(connect I1:1 D1:1)
(connect D20:2 D1:2)
(connect D3:1 D2:1)
(connect D7:0 D3:0)
(connect D10:1 D3:1)
(connect D5:4 D4:0)
(connect I1:1 D4:1)
(connect D19:2 D4:2)
(connect D7:1 D5:1)
(connect I1:1 D6:1)
(connect D8:2 D6:2)
(connect D9:0 D7:0)
(connect D10:1 D7:1)
(connect D9:5 D8:0)
(connect D10:1 D8:1)
(connect D10:1 D9:1)
(connect D13:0 D10:0)
(connect I2:1 D10:1)
(connect I3:1 D10:2)
(connect I4:1 D10:3)
(connect D6:2 D14:0)
(connect D6:2 D15:0)
(connect D10:1 D15:1)
(connect D8:2 D15:2)
(connect D15:1 D16:0)
(connect D18:1 D17:0)
(connect D4:2 D18:0)
(connect D7:1 D18:1)
(connect D19:2 D18:2)
(connect D7:1 D19:1)
(connect D3:1 D20:1)
(connect D1:2 D21:0)
(connect D3:1 D21:1)
(connect D20:2 D21:2)
(connect D21:1 D22:0)
(connect D3:0 D23:0)
(connect D23:1 D24:0)
(connect D26:0 D25:0)
(connect D0:1 D26:1)
(connect D28:1 D27:0)
(connect D23:0 D28:0)
(connect D10:1 D28:1)
(connect D7:1 D28:2)
(connect D3:1 D28:3)
(connect D9:3 D29:0)
(connect D9:2 D30:0)
(connect D26:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 812 711)
(anchorPt 15 60)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 28 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 690 340))
(devCarrierFor 1
(active icon)
(icon
(extent 183 25))
(open
(extent 210 60))
(terminals on)
(pinCenter 470 530))
(devCarrierFor 2
(active icon)
(icon
(extent 148 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 400 470))
(devCarrierFor 3
(active icon)
(icon
(extent 158 25))
(open
(extent 351 51))
(terminals on)
(pinCenter 150 450))
(devCarrierFor 5
(active icon)
(icon
(extent 183 25))
(open
(extent 210 62))
(terminals on)
(pinCenter 450 370))
(devCarrierFor 7
(active icon)
(icon
(extent 148 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 440 300))
(devCarrierFor 8
(active icon)
(icon
(extent 183 25))
(open
(extent 252 62))
(terminals on)
(pinCenter 480 170))
(devCarrierFor 9
(active icon)
(icon
(extent 148 25))
(open
(extent 351 51))
(terminals on)
(pinCenter 150 280))
(devCarrierFor 10
(active icon)
(icon
(extent 123 25))
(open
(extent 554 57))
(terminals on)
(pinCenter 310 170))
(devCarrierFor 11
(active icon)
(icon
(extent 177 54))
(open
(extent 186 102))
(terminals on)
(pinCenter 240 90))
(devCarrierFor 13
(active icon)
(icon
(extent 70 51)
(iconImage "loop.icn"))
(open
(extent 112 79))
(pinCenter 90 100))
(devCarrierFor 14
(active open)
(icon
(extent 141 0)
(iconImage "notepad.icn"))
(open
(extent 279 128)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 640 90))
(devCarrierFor 16
(active icon)
(icon
(extent 133 15))
(open
(extent 240 103))
(pinCenter 320 -10))
(devCarrierFor 17
(active icon)
(icon
(extent 64 15))
(open
(extent 201 31))
(terminals on)
(pinCenter 90 50))
(devCarrierFor 18
(active icon)
(icon
(extent 64 15))
(open
(extent 201 31))
(terminals on)
(pinCenter 690 200))
(devCarrierFor 19
(active icon)
(icon
(extent 290 25))
(open
(extent 348 62))
(terminals on)
(pinCenter 460 240))
(devCarrierFor 21
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 580 280))
(devCarrierFor 22
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 650 450))
(devCarrierFor 23
(active icon)
(icon
(extent 290 25))
(open
(extent 348 62))
(terminals on)
(pinCenter 530 410))
(devCarrierFor 24
(active icon)
(icon
(extent 123 25))
(open
(extent 554 57))
(terminals on)
(pinCenter 260 350))
(devCarrierFor 26
(active icon)
(icon
(extent 123 25))
(open
(extent 554 57))
(terminals on)
(pinCenter 260 530))
(devCarrierFor 28
(active icon)
(icon
(extent 290 25))
(open
(extent 348 62))
(terminals on)
(pinCenter 510 590))
(devCarrierFor 29
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 690 620))
(devCarrierFor 31
(active icon)
(icon
(extent 103 25))
(open
(extent 200 51))
(terminals on)
(pinCenter 140 600))
(devCarrierFor 34
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 220 640))
(devCarrierFor 35
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 790 380))
(devCarrierFor 36
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 760 340))
(devCarrierFor 37
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 450 710))
(devCarrierFor 38
(active icon)
(icon
(extent 321 34))
(open
(extent 485 62))
(terminals on)
(pinCenter 250 680))
(devCarrierFor 39
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 400 130))
(devCarrierFor 40
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 380 100))
(connect D9:4 D0:1
(points 6 331 100 350 100 350 210 640 210 640 310 673 310))
(connect D6:1 D0:2
(points 8 574 160 580 160 580 170 600 170 600 190 630 190 630 320 673 320))
(connect D5:3 D0:3
(points 4 516 300 550 300 550 330 673 330))
(connect D4:1 D0:4
(points 4 544 360 560 360 560 340 673 340))
(connect D2:3 D0:5
(points 4 476 470 570 470 570 350 673 350))
(connect D1:1 D0:6
(points 6 564 520 710 520 710 390 660 390 660 360 673 360))
(connect D2:4 D1:0
(points 5 476 480 490 480 490 510 470 510 470 515))
(connect I1:1 D1:1
(points 9 -15 25 -15 420 90 420 90 390 300 390 300 500 320 500 320 520 376 520))
(connect D20:2 D1:2
(points 2 324 540 376 540))
(connect D3:1 D2:1
(points 4 231 440 250 440 250 470 323 470))
(connect D7:0 D3:0
(points 2 150 295 150 435))
(connect D10:1 D3:1
(points 8 127 100 150 100 150 130 140 130 140 150 50 150 50 450 68 450))
(connect D5:4 D4:0
(points 5 516 310 540 310 540 340 450 340 450 355))
(connect I1:1 D4:1
(points 8 -15 25 -40 25 -40 420 90 420 90 390 310 390 310 360 356 360))
(connect D19:2 D4:2
(points 4 324 360 330 360 330 380 356 380))
(connect D7:1 D5:1
(points 4 226 270 250 270 250 300 363 300))
(connect I1:1 D6:1
(points 8 -15 25 20 25 20 20 410 20 410 120 380 120 380 160 386 160))
(connect D8:2 D6:2
(points 2 374 180 386 180))
(connect D9:0 D7:0
(points 4 240 119 240 140 150 140 150 265))
(connect D10:1 D7:1
(points 8 127 100 150 100 150 130 140 130 140 150 50 150 50 280 73 280))
(connect D9:5 D8:0
(points 5 331 110 340 110 340 140 310 140 310 155))
(connect D10:1 D8:1
(points 6 127 100 150 100 150 130 160 130 160 170 246 170))
(connect D10:1 D9:1
(points 4 127 100 140 100 140 90 149 90))
(connect D13:0 D10:0
(points 2 90 60 90 72))
(connect I2:1 D10:1
(points 4 -15 205 30 205 30 90 52 90))
(connect I3:1 D10:2
(points 4 -15 385 40 385 40 100 52 100))
(connect I4:1 D10:3
(points 8 -15 565 -20 565 -20 630 -50 630 -50 90 -20 90 -20 110 52 110))
(connect D6:2 D14:0
(points 5 574 180 630 180 630 170 690 170 690 190))
(connect D6:2 D15:0
(points 5 574 180 590 180 590 220 460 220 460 225))
(connect D10:1 D15:1
(points 8 127 100 150 100 150 130 160 130 160 170 230 170 230 230 312 230))
(connect D8:2 D15:2
(points 8 374 180 380 180 380 200 320 200 320 210 280 210 280 250 312 250))
(connect D15:1 D16:0
(points 5 607 230 620 230 620 260 580 260 580 270))
(connect D18:1 D17:0
(points 5 677 400 700 400 700 430 650 430 650 440))
(connect D4:2 D18:0
(points 5 544 380 550 380 550 390 530 390 530 395))
(connect D7:1 D18:1
(points 6 226 270 250 270 250 300 340 300 340 400 382 400))
(connect D19:2 D18:2
(points 4 324 360 330 360 330 420 382 420))
(connect D7:1 D19:1
(points 6 226 270 250 270 250 320 180 320 180 350 196 350))
(connect D3:1 D20:1
(points 6 231 440 250 440 250 490 170 490 170 530 196 530))
(connect D1:2 D21:0
(points 5 564 540 570 540 570 560 510 560 510 575))
(connect D3:1 D21:1
(points 6 231 440 250 440 250 490 170 490 170 580 362 580))
(connect D20:2 D21:2
(points 4 324 540 340 540 340 600 362 600))
(connect D21:1 D22:0
(points 3 657 580 690 580 690 610))
(connect D3:0 D23:0
(points 4 150 465 150 490 140 490 140 585))
(connect D23:1 D24:0
(points 3 194 590 220 590 220 630))
(connect D26:0 D25:0
(points 4 760 350 760 360 790 360 790 370))
(connect D0:1 D26:1
(points 2 706 340 738 340))
(connect D28:1 D27:0
(points 3 413 670 450 670 450 700))
(connect D23:0 D28:0
(points 10 140 615 140 640 180 640 180 630 200 630 200 610 260 610 260 650 250
650 250 660))
(connect D10:1 D28:1
(points 10 127 100 150 100 150 130 140 130 140 150 50 150 50 450 30 450 30 670
87 670))
(connect D7:1 D28:2
(points 10 226 270 250 270 250 320 180 320 180 350 60 350 60 460 50 460 50 680
87 680))
(connect D3:1 D28:3
(points 8 231 440 250 440 250 490 170 490 170 570 70 570 70 690 87 690))
(connect D9:3 D29:0
(points 5 331 90 360 90 360 110 400 110 400 120))
(connect D9:2 D30:0
(points 5 331 80 340 80 340 70 380 70 380 90))
(connect D26:1 O1:1
(points 4 781 340 800 340 800 295 796 295)))
(stackingOrder 12 6 14 15 0 16 17 5 4 3 2 1 18 21 8 19 20 13 22 24 23 25 26 27
10 9 29 7 28 30 11))))
(context 137
(properties
(name "CleanUpClog")
(trigMode deg)
(nextID 30)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes)))
(deviceList
(device 23 CONTEXT
(properties
(name "Fix Bomb Clog")
(trigMode deg)
(nextID 18)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "Result")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORRANGE
(properties
(name "For Opponent Region (50-99)")
(from 50)
(thru 99)
(step 1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "piece")
(expr 1 "KnownBoard[square]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "my non-miner piece?")
(cases 1 "(piece>=1002 AND piece<=1021) OR (piece>=1027 AND piece<=1034)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "neighboring bomb?")
(cases 1 "NeighboringOpponentBomb(square)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 IFTHENELSE
(properties
(name "bomb in front?")
(cases 1 "(square+10>99 ? 0 : IsABomb(square+10))"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 IFTHENELSE
(properties
(name "my piece behind me?")
(cases 1 "KnownBoard[loc-10]>1000"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 IFTHENELSE
(properties
(name "bomb left?")
(cases 1 "(square MOD 10==0 ? 0 : IsABomb(square-1))"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 IFTHENELSE
(properties
(name "bomb right?")
(cases 1 "(square MOD 10==9 ? 0 : IsABomb(square+1))"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 CONTEXT
(properties
(name "PickLeftOrRight")
(trigMode deg)
(nextID 12)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "destSquare")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "both, left, right, or neither avail?")
(cases 3 "l AND r" "l" "r"))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "r")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "left open")
(expr 1 "(square MOD 10==0 ? 0 : KnownBoard[square-1]==0)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "right open")
(expr 1 "(square MOD 10==9 ? 0 : KnownBoard[square+1]==0)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORMULA
(properties
(name "left available bool")
(expr 1 "(left ?  NOT CanMyPieceGetKilled(piece, left) : 0)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "left")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "right available bool")
(expr 1 "(right ?  NOT CanMyPieceGetKilled(piece, right) : 0)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "right")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "random (left, right)")
(expr 1 "(random(0, 1)<0.5 ? square+1 : square-1)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 8 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 9 EXITCONTEXT)
(device 10 FORMULA
(properties
(name "left")
(expr 1 "square-1"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 FORMULA
(properties
(name "right")
(expr 1 "square+1"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D3:1 D0:1)
(connect D4:1 D0:2)
(connect I2:1 D1:1)
(connect I2:1 D2:1)
(connect I1:1 D3:1)
(connect D1:1 D3:2)
(connect I1:1 D4:1)
(connect D2:1 D4:2)
(connect D0:1 D5:0)
(connect I2:1 D5:1)
(connect D5:1 D6:1)
(connect D9:1 D6:2)
(connect D10:1 D6:3)
(connect D6:1 D7:1)
(connect D7:0 D8:0)
(connect D0:2 D9:0)
(connect I2:1 D9:1)
(connect D0:3 D10:0)
(connect I2:1 D10:1)
(connect D7:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 990 497)
(anchorPt 24 7)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 221 45))
(open
(extent 76 82))
(terminals on)
(pinCenter 410 250))
(devCarrierFor 1
(active icon)
(icon
(extent 60 16))
(open
(extent 373 32))
(terminals on)
(pinCenter 60 230))
(devCarrierFor 2
(active icon)
(icon
(extent 70 16))
(open
(extent 376 32))
(terminals on)
(pinCenter 70 300))
(devCarrierFor 4
(active icon)
(icon
(extent 121 25))
(open
(extent 343 41))
(terminals on)
(pinCenter 200 230))
(devCarrierFor 5
(active icon)
(icon
(extent 130 25))
(open
(extent 361 42))
(terminals on)
(pinCenter 200 290))
(devCarrierFor 6
(active icon)
(icon
(extent 128 16))
(open
(extent 299 32))
(terminals on)
(pinCenter 620 230))
(devCarrierFor 7
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 780 260))
(devCarrierFor 8
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 860 260))
(devCarrierFor 9
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 860 300))
(devCarrierFor 10
(active icon)
(icon
(extent 48 18))
(open
(extent 91 32))
(terminals on)
(pinCenter 600 270))
(devCarrierFor 11
(active icon)
(icon
(extent 32 18))
(open
(extent 94 32))
(terminals on)
(pinCenter 600 310))
(connect D3:1 D0:1
(points 4 263 230 280 230 280 240 297 240))
(connect D4:1 D0:2
(points 4 267 290 280 290 280 260 297 260))
(connect I2:1 D1:1
(points 4 -24 371 -10 371 -10 230 27 230))
(connect I2:1 D2:1
(points 4 -24 371 -10 371 -10 300 32 300))
(connect I1:1 D3:1
(points 6 -24 111 -10 111 -10 190 110 190 110 220 137 220))
(connect D1:1 D3:2
(points 4 92 230 110 230 110 240 137 240))
(connect I1:1 D4:1
(points 8 -24 111 -10 111 -10 190 110 190 110 220 120 220 120 280 132 280))
(connect D2:1 D4:2
(points 2 107 300 132 300))
(connect D0:1 D5:0
(points 5 523 230 530 230 530 200 620 200 620 219))
(connect I2:1 D5:1
(points 6 -24 371 -10 371 -10 330 530 330 530 230 553 230))
(connect D5:1 D6:1
(points 4 686 230 710 230 710 250 763 250))
(connect D9:1 D6:2
(points 4 626 270 640 270 640 260 763 260))
(connect D10:1 D6:3
(points 4 618 310 650 310 650 270 763 270))
(connect D6:1 D7:1
(points 2 797 260 840 260))
(connect D7:0 D8:0
(points 2 860 270 860 289))
(connect D0:2 D9:0
(points 5 523 240 550 240 550 250 600 250 600 258))
(connect I2:1 D9:1
(points 6 -24 371 -10 371 -10 330 530 330 530 270 573 270))
(connect D0:3 D10:0
(points 5 523 250 540 250 540 290 600 290 600 298))
(connect I2:1 D10:1
(points 6 -24 371 -10 371 -10 330 530 330 530 310 581 310))
(connect D7:1 O1:1
(points 4 880 260 900 260 900 241 965 241)))
(stackingOrder 5 9 10 6 7 8 1 2 3 4 0))))
(device 9 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 10 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 11 CONTEXT
(properties
(name "PickDownUpOrRight")
(trigMode deg)
(nextID 20)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "destSquare")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "down, up, or right avail?")
(cases 3 "d" "u" "r"))
(interface
(input 1
(name "d")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "u")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "r")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "up available bool")
(expr 1 "(up ?  NOT CanMyPieceGetKilled(piece, up) : 0)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "up")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "right available bool")
(expr 1 "(right ?  NOT CanMyPieceGetKilled(piece, right) : 0)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "right")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 8 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 9 EXITCONTEXT)
(device 10 FORMULA
(properties
(name "up")
(expr 1 "square-10"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 FORMULA
(properties
(name "right")
(expr 1 "square+1"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 FORMULA
(properties
(name "down open or unknown opp")
(expr 1 "(square+10>99 ? 0 : (KnownBoard[square+10]<=0))"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "right open")
(expr 1 "(square MOD 10==9 ? 0 : KnownBoard[square+1]==0)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 FORMULA
(properties
(name "up open or unknown opp")
(expr 1 "(KnownBoard[square-10]<=0)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 FORMULA
(properties
(name "down available bool")
(expr 1 "(down ?  NOT CanMyPieceGetKilled(piece, down) : 0)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "down")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 FORMULA
(properties
(name "down")
(expr 1 "square+10"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D11:1 D0:1)
(connect D1:1 D0:2)
(connect D2:1 D0:3)
(connect I1:1 D1:1)
(connect D10:1 D1:2)
(connect I1:1 D2:1)
(connect D9:1 D2:2)
(connect D12:1 D3:1)
(connect D6:1 D3:2)
(connect D7:1 D3:3)
(connect D3:1 D4:1)
(connect D4:0 D5:0)
(connect D0:2 D6:0)
(connect I2:1 D6:1)
(connect D0:3 D7:0)
(connect I2:1 D7:1)
(connect I2:1 D8:1)
(connect I2:1 D9:1)
(connect I2:1 D10:1)
(connect I1:1 D11:1)
(connect D8:1 D11:2)
(connect D0:1 D12:0)
(connect I2:1 D12:1)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1102 497)
(anchorPt 204 -1)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 166 45))
(open
(extent 122 82))
(terminals on)
(pinCenter 400 220))
(devCarrierFor 4
(active icon)
(icon
(extent 117 25))
(open
(extent 337 41))
(terminals on)
(pinCenter 220 230))
(devCarrierFor 5
(active icon)
(icon
(extent 130 25))
(open
(extent 361 42))
(terminals on)
(pinCenter 220 290))
(devCarrierFor 7
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 720 250))
(devCarrierFor 8
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 800 240))
(devCarrierFor 9
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 800 300))
(devCarrierFor 10
(active icon)
(icon
(extent 24 18))
(open
(extent 99 32))
(terminals on)
(pinCenter 600 270))
(devCarrierFor 11
(active icon)
(icon
(extent 32 18))
(open
(extent 94 32))
(terminals on)
(pinCenter 600 310))
(devCarrierFor 12
(active icon)
(icon
(extent 191 16))
(open
(extent 362 32))
(terminals on)
(pinCenter 10 170))
(devCarrierFor 16
(active icon)
(icon
(extent 70 16))
(open
(extent 376 32))
(terminals on)
(pinCenter 70 300))
(devCarrierFor 17
(active icon)
(icon
(extent 172 16))
(open
(extent 221 32))
(terminals on)
(pinCenter 30 240))
(devCarrierFor 18
(active icon)
(icon
(extent 136 25))
(open
(extent 371 41))
(terminals on)
(pinCenter 220 160))
(devCarrierFor 19
(active icon)
(icon
(extent 37 18))
(open
(extent 102 32))
(terminals on)
(pinCenter 610 220))
(connect D11:1 D0:1
(points 4 290 160 300 160 300 210 314 210))
(connect D1:1 D0:2
(points 4 281 230 290 230 290 220 314 220))
(connect D2:1 D0:3
(points 4 287 290 300 290 300 230 314 230))
(connect I1:1 D1:1
(points 8 -204 119 -190 119 -190 270 130 270 130 260 140 260 140 220 159 220))
(connect D10:1 D1:2
(points 2 118 240 159 240))
(connect I1:1 D2:1
(points 6 -204 119 -190 119 -190 270 130 270 130 280 152 280))
(connect D9:1 D2:2
(points 2 107 300 152 300))
(connect D12:1 D3:1
(points 4 631 220 650 220 650 240 703 240))
(connect D6:1 D3:2
(points 4 614 270 630 270 630 250 703 250))
(connect D7:1 D3:3
(points 4 618 310 640 310 640 260 703 260))
(connect D3:1 D4:1
(points 4 737 250 760 250 760 240 780 240))
(connect D4:0 D5:0
(points 2 800 250 800 289))
(connect D0:2 D6:0
(points 5 485 210 510 210 510 250 600 250 600 258))
(connect I2:1 D6:1
(points 6 -204 379 -180 379 -180 330 310 330 310 270 585 270))
(connect D0:3 D7:0
(points 5 485 220 500 220 500 290 600 290 600 298))
(connect I2:1 D7:1
(points 6 -204 379 -180 379 -180 330 310 330 310 310 581 310))
(connect I2:1 D8:1
(points 4 -204 379 -180 379 -180 170 -88 170))
(connect I2:1 D9:1
(points 4 -204 379 -180 379 -180 300 32 300))
(connect I2:1 D10:1
(points 4 -204 379 -180 379 -180 240 -59 240))
(connect I1:1 D11:1
(points 4 -204 119 130 119 130 150 149 150))
(connect D8:1 D11:2
(points 2 108 170 149 170))
(connect D0:1 D12:0
(points 5 485 200 510 200 510 190 610 190 610 208))
(connect I2:1 D12:1
(points 8 -204 379 -180 379 -180 330 310 330 310 270 560 270 560 220 589 220))
(connect D4:1 O1:1
(points 4 820 240 840 240 840 249 897 249)))
(stackingOrder 7 0 12 6 3 11 1 2 8 10 9 4 5))))
(device 12 CONTEXT
(properties
(name "PickDownUpOrLeft")
(trigMode deg)
(nextID 28)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "destSquare")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "down, up, or  left avail?")
(cases 3 "d" "u" "l"))
(interface
(input 1
(name "d")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "u")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "up available bool")
(expr 1 "(up ?  NOT CanMyPieceGetKilled(piece, up) : 0)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "up")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 8 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 9 EXITCONTEXT)
(device 10 FORMULA
(properties
(name "up")
(expr 1 "square-10"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 FORMULA
(properties
(name "down available bool")
(expr 1 "(down ?  NOT CanMyPieceGetKilled(piece, down) : 0)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "down")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 FORMULA
(properties
(name "down")
(expr 1 "square+10"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 21 FORMULA
(properties
(name "left available bool")
(expr 1 "(left ?  NOT CanMyPieceGetKilled(piece, left) : 0)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "left")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 FORMULA
(properties
(name "left open")
(expr 1 "(square MOD 10==0 ? 0 : KnownBoard[square-1]==0)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 23 FORMULA
(properties
(name "left")
(expr 1 "square-1"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 25 FORMULA
(properties
(name "down open or unknown opp")
(expr 1 "(square+10>99 ? 0 : (KnownBoard[square+10]<=0))"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 27 FORMULA
(properties
(name "up open or unknown opp")
(expr 1 "(KnownBoard[square-10]<=0)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D6:1 D0:1)
(connect D1:1 D0:2)
(connect D8:1 D0:3)
(connect I1:1 D1:1)
(connect D12:1 D1:2)
(connect D7:1 D2:1)
(connect D5:1 D2:2)
(connect D10:1 D2:3)
(connect D2:1 D3:1)
(connect D3:0 D4:0)
(connect D0:2 D5:0)
(connect I2:1 D5:1)
(connect I1:1 D6:1)
(connect D11:1 D6:2)
(connect D0:1 D7:0)
(connect I2:1 D7:1)
(connect I1:1 D8:1)
(connect D9:1 D8:2)
(connect I2:1 D9:1)
(connect D0:3 D10:0)
(connect I2:1 D10:1)
(connect I2:1 D11:1)
(connect I2:1 D12:1)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 990 497)
(anchorPt 128 8)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 160 45))
(open
(extent 116 82))
(terminals on)
(pinCenter 400 220))
(devCarrierFor 4
(active icon)
(icon
(extent 117 25))
(open
(extent 337 41))
(terminals on)
(pinCenter 220 230))
(devCarrierFor 7
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 720 250))
(devCarrierFor 8
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 810 250))
(devCarrierFor 9
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 810 300))
(devCarrierFor 10
(active icon)
(icon
(extent 24 18))
(open
(extent 99 32))
(terminals on)
(pinCenter 600 270))
(devCarrierFor 18
(active icon)
(icon
(extent 136 25))
(open
(extent 371 41))
(terminals on)
(pinCenter 220 160))
(devCarrierFor 19
(active icon)
(icon
(extent 37 18))
(open
(extent 102 32))
(terminals on)
(pinCenter 610 220))
(devCarrierFor 21
(active icon)
(icon
(extent 121 25))
(open
(extent 343 41))
(terminals on)
(pinCenter 220 300))
(devCarrierFor 22
(active icon)
(icon
(extent 60 16))
(open
(extent 373 32))
(terminals on)
(pinCenter 60 300))
(devCarrierFor 23
(active icon)
(icon
(extent 48 18))
(open
(extent 91 32))
(terminals on)
(pinCenter 600 320))
(devCarrierFor 25
(active icon)
(icon
(extent 191 16))
(open
(extent 362 32))
(terminals on)
(pinCenter 10 170))
(devCarrierFor 27
(active icon)
(icon
(extent 172 16))
(open
(extent 221 32))
(terminals on)
(pinCenter 20 250))
(connect D6:1 D0:1
(points 4 290 160 310 160 310 210 317 210))
(connect D1:1 D0:2
(points 4 281 230 290 230 290 220 317 220))
(connect D8:1 D0:3
(points 4 283 300 300 300 300 230 317 230))
(connect I1:1 D1:1
(points 6 -128 110 -10 110 -10 190 110 190 110 220 159 220))
(connect D12:1 D1:2
(points 4 108 250 140 250 140 240 159 240))
(connect D7:1 D2:1
(points 4 631 220 650 220 650 240 703 240))
(connect D5:1 D2:2
(points 4 614 270 630 270 630 250 703 250))
(connect D10:1 D2:3
(points 4 626 320 650 320 650 260 703 260))
(connect D2:1 D3:1
(points 2 737 250 790 250))
(connect D3:0 D4:0
(points 2 810 260 810 289))
(connect D0:2 D5:0
(points 5 482 210 510 210 510 250 600 250 600 258))
(connect I2:1 D5:1
(points 6 -128 370 -10 370 -10 330 530 330 530 270 585 270))
(connect I1:1 D6:1
(points 4 -128 110 120 110 120 150 149 150))
(connect D11:1 D6:2
(points 2 108 170 149 170))
(connect D0:1 D7:0
(points 5 482 200 500 200 500 190 610 190 610 208))
(connect I2:1 D7:1
(points 8 -128 370 -10 370 -10 330 530 330 530 270 550 270 550 220 589 220))
(connect I1:1 D8:1
(points 8 -128 110 -10 110 -10 190 110 190 110 220 130 220 130 290 157 290))
(connect D9:1 D8:2
(points 4 92 300 110 300 110 310 157 310))
(connect I2:1 D9:1
(points 4 -128 370 -10 370 -10 300 27 300))
(connect D0:3 D10:0
(points 5 482 220 500 220 500 290 600 290 600 308))
(connect I2:1 D10:1
(points 6 -128 370 -10 370 -10 330 530 330 530 320 573 320))
(connect I2:1 D11:1
(points 4 -128 370 -120 370 -120 170 -88 170))
(connect I2:1 D12:1
(points 4 -128 370 -120 370 -120 250 -69 250))
(connect D3:1 O1:1
(points 4 830 250 850 250 850 240 861 240)))
(stackingOrder 7 5 2 3 4 9 0 10 6 1 8 11 12))))
(device 13 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 14 EXITCONTEXT)
(device 15 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 16 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 17 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D0:1 D1:1)
(connect D1:1 D2:1)
(connect D2:1 D3:0)
(connect D0:1 D3:1)
(connect D3:1 D4:0)
(connect D0:1 D4:1)
(connect D4:2 D5:0)
(connect D0:1 D5:1)
(connect D5:1 D6:0)
(connect D0:1 D6:1)
(connect D6:2 D7:0)
(connect D0:1 D7:1)
(connect D4:1 D8:0)
(connect D1:1 D8:1)
(connect D0:1 D8:2)
(connect D13:0 D9:0)
(connect D10:1 D9:1)
(connect D8:1 D10:1)
(connect D11:1 D10:2)
(connect D12:1 D10:3)
(connect D6:1 D11:0)
(connect D1:1 D11:1)
(connect D0:1 D11:2)
(connect D7:1 D12:0)
(connect D1:1 D12:1)
(connect D0:1 D12:2)
(connect D10:1 D13:0)
(connect D0:1 D13:1)
(connect D17:0 D14:0)
(connect D16:1 D15:1)
(connect D13:1 D16:1)
(connect D10:1 D16:2)
(connect D15:2 D17:0)
(connect D16:1 D17:1)
(connect D17:1 O1:1)
(connect D17:2 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 1245 697)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 207 52)
(iconImage "loop.icn"))
(open
(extent 243 82))
(pinCenter 170 90))
(devCarrierFor 1
(active icon)
(icon
(extent 38 16))
(open
(extent 166 32))
(terminals on)
(pinCenter 120 170))
(devCarrierFor 2
(active icon)
(icon
(extent 145 25))
(open
(extent 688 53))
(terminals on)
(pinCenter 270 170))
(devCarrierFor 3
(active icon)
(icon
(extent 134 25))
(open
(extent 269 59))
(terminals on)
(pinCenter 340 230))
(devCarrierFor 4
(active icon)
(icon
(extent 100 25))
(open
(extent 445 61))
(terminals on)
(pinCenter 480 250))
(devCarrierFor 5
(active icon)
(icon
(extent 147 25))
(open
(extent 199 53))
(terminals on)
(pinCenter 550 390))
(devCarrierFor 6
(active icon)
(icon
(extent 72 25))
(open
(extent 445 61))
(terminals on)
(pinCenter 570 450))
(devCarrierFor 7
(active icon)
(icon
(extent 82 25))
(open
(extent 445 61))
(terminals on)
(pinCenter 580 600))
(devCarrierFor 8
(active icon)
(icon
(extent 108 25))
(terminals on)
(pinCenter 650 230))
(devCarrierFor 9
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 800 310))
(devCarrierFor 10
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 720 310))
(devCarrierFor 11
(active icon)
(icon
(extent 139 25))
(terminals on)
(pinCenter 680 500))
(devCarrierFor 12
(active icon)
(icon
(extent 129 25))
(terminals on)
(pinCenter 710 620))
(devCarrierFor 13
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 800 260))
(devCarrierFor 14
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 1050 380))
(devCarrierFor 15
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 1090 270))
(devCarrierFor 16
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 920 270))
(devCarrierFor 17
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 1050 330))
(connect D0:1 D1:1
(points 6 276 90 300 90 300 140 80 140 80 170 98 170))
(connect D1:1 D2:1
(points 2 141 170 195 170))
(connect D2:1 D3:0
(points 5 345 160 370 160 370 200 340 200 340 215))
(connect D0:1 D3:1
(points 6 276 90 300 90 300 140 180 140 180 230 270 230))
(connect D3:1 D4:0
(points 3 409 220 480 220 480 235))
(connect D0:1 D4:1
(points 6 276 90 300 90 300 140 420 140 420 250 427 250))
(connect D4:2 D5:0
(points 3 532 260 550 260 550 375))
(connect D0:1 D5:1
(points 6 276 90 300 90 300 140 420 140 420 390 474 390))
(connect D5:1 D6:0
(points 5 626 380 650 380 650 430 570 430 570 435))
(connect D0:1 D6:1
(points 6 276 90 300 90 300 140 420 140 420 450 531 450))
(connect D6:2 D7:0
(points 7 608 460 620 460 620 480 590 480 590 500 580 500 580 585))
(connect D0:1 D7:1
(points 8 276 90 300 90 300 140 420 140 420 450 510 450 510 600 536 600))
(connect D4:1 D8:0
(points 5 532 240 540 240 540 190 650 190 650 215))
(connect D1:1 D8:1
(points 6 141 170 160 170 160 290 560 290 560 220 593 220))
(connect D0:1 D8:2
(points 6 276 90 300 90 300 140 550 140 550 240 593 240))
(connect D13:0 D9:0
(points 2 800 270 800 299))
(connect D10:1 D9:1
(points 2 737 310 780 310))
(connect D8:1 D10:1
(points 6 706 230 720 230 720 270 680 270 680 300 703 300))
(connect D11:1 D10:2
(points 6 752 500 770 500 770 430 680 430 680 310 703 310))
(connect D12:1 D10:3
(points 6 777 620 800 620 800 420 690 420 690 320 703 320))
(connect D6:1 D11:0
(points 3 608 440 680 440 680 485))
(connect D1:1 D11:1
(points 6 141 170 160 170 160 290 410 290 410 490 608 490))
(connect D0:1 D11:2
(points 8 276 90 300 90 300 140 420 140 420 450 510 450 510 510 608 510))
(connect D7:1 D12:0
(points 3 623 590 710 590 710 605))
(connect D1:1 D12:1
(points 8 141 170 160 170 160 290 410 290 410 640 630 640 630 610 643 610))
(connect D0:1 D12:2
(points 10 276 90 300 90 300 140 420 140 420 450 510 450 510 600 520 600 520 630
643 630))
(connect D10:1 D13:0
(points 5 737 310 760 310 760 230 800 230 800 249))
(connect D0:1 D13:1
(points 8 276 90 300 90 300 140 550 140 550 200 730 200 730 260 780 260))
(connect D17:0 D14:0
(points 2 1050 345 1050 369))
(connect D16:1 D15:1
(points 2 967 270 1003 270))
(connect D13:1 D16:1
(points 2 820 260 873 260))
(connect D10:1 D16:2
(points 6 737 310 760 310 760 340 840 340 840 280 873 280))
(connect D15:2 D17:0
(points 5 1177 280 1200 280 1200 310 1050 310 1050 315))
(connect D16:1 D17:1
(points 4 967 270 990 270 990 330 1021 330))
(connect D17:1 O1:1
(points 4 1078 320 1210 320 1210 168 1244 168))
(connect D17:2 O2:1
(points 4 1078 340 1130 340 1130 528 1244 528)))
(stackingOrder 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17))))
(device 24 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 25 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 26 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 27 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 28 EXITCONTEXT)
(device 29 CONTEXT
(properties
(name "Fix Entry Clog")
(trigMode deg)
(nextID 14)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes)))
(deviceList
(device 1 IFTHENELSE
(properties
(name "clog at 50/51?")
(cases 1 "IsThereAClogAt(50)"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "clog at 54,55?")
(cases 1 "IsThereAClogAt(54)"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "clog at 58,59?")
(cases 1 "IsThereAClogAt(58)"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 CALL
(properties
(name "Call CanFixClog")
(callFunc "CanFixClog")
(parmMode rev30))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 7 CONSTANT
(properties
(name "50"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  50))
(initValue Int32
(data  0))))
(device 8 CONSTANT
(properties
(name "54"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  54))
(initValue Int32
(data  0))))
(device 9 CONSTANT
(properties
(name "58"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  58))
(initValue Int32
(data  0))))
(device 10 CALL
(properties
(name "Call CanFixClog")
(callFunc "CanFixClog")
(parmMode rev30))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 11 CALL
(properties
(name "Call CanFixClog")
(callFunc "CanFixClog")
(parmMode rev30))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 12 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 13 FORMULA
(properties
(name "from, to")
(expr 1 "f = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "f")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D0:2 D1:0)
(connect D1:2 D2:0)
(connect D4:1 D3:1)
(connect D0:1 D4:0)
(connect D1:1 D5:0)
(connect D2:1 D6:0)
(connect D5:1 D7:1)
(connect D6:1 D8:1)
(connect D3:1 D9:1)
(connect D7:1 D9:2)
(connect D8:1 D9:3)
(connect D9:1 D10:1)
(connect D10:1 O1:1)
(connect D10:2 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 788 287)
(anchorPt 24 31)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 190 59))
(terminals on)
(pinCenter 100 50))
(devCarrierFor 2
(active icon)
(icon
(extent 99 25))
(open
(extent 190 59))
(terminals on)
(pinCenter 100 110))
(devCarrierFor 3
(active icon)
(icon
(extent 99 25))
(open
(extent 190 59))
(terminals on)
(pinCenter 100 180))
(devCarrierFor 5
(active icon)
(icon
(extent 111 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 340 50))
(devCarrierFor 7
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 220 50))
(devCarrierFor 8
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 220 110))
(devCarrierFor 9
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 220 180))
(devCarrierFor 10
(active icon)
(icon
(extent 111 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 340 110))
(devCarrierFor 11
(active icon)
(icon
(extent 111 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 330 180))
(devCarrierFor 12
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 500 110))
(devCarrierFor 13
(active icon)
(icon
(extent 52 25))
(open
(extent 158 42))
(terminals on)
(pinCenter 590 110))
(connect D0:2 D1:0
(points 5 152 60 170 60 170 90 100 90 100 95))
(connect D1:2 D2:0
(points 5 152 120 170 120 170 150 100 150 100 165))
(connect D4:1 D3:1
(points 2 234 50 282 50))
(connect D0:1 D4:0
(points 5 152 40 170 40 170 20 220 20 220 39))
(connect D1:1 D5:0
(points 5 152 100 180 100 180 80 220 80 220 99))
(connect D2:1 D6:0
(points 5 152 170 180 170 180 150 220 150 220 169))
(connect D5:1 D7:1
(points 2 234 110 282 110))
(connect D6:1 D8:1
(points 2 234 180 272 180))
(connect D3:1 D9:1
(points 4 398 50 420 50 420 100 483 100))
(connect D7:1 D9:2
(points 2 398 110 483 110))
(connect D8:1 D9:3
(points 4 388 180 420 180 420 120 483 120))
(connect D9:1 D10:1
(points 2 517 110 561 110))
(connect D10:1 O1:1
(points 4 618 100 692 100 692 42 763 42))
(connect D10:2 O2:1
(points 4 618 120 640 120 640 182 763 182)))
(stackingOrder 1 2 0 4 5 6 7 3 8 9 10))))
(configuration
(connect D0:1 D1:1)
(connect D6:1 D1:2)
(connect D0:2 D2:1)
(connect D6:2 D2:2)
(connect D1:1 D3:1)
(connect D3:0 D4:0)
(connect D2:1 D4:1)
(connect D4:0 D5:0)
(connect D0:0 D6:0)
(connect D3:1 O1:1)
(connect D4:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 504 321)
(anchorPt 10 -27)
(configuration
(devCarrierFor 23
(active icon)
(icon
(extent 100 25))
(terminals on)
(pinCenter 130 140))
(devCarrierFor 24
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 260 140))
(devCarrierFor 25
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 260 230))
(devCarrierFor 26
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 370 130))
(devCarrierFor 27
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 370 190))
(devCarrierFor 28
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 370 260))
(devCarrierFor 29
(active icon)
(icon
(extent 96 25))
(terminals on)
(pinCenter 120 210))
(connect D0:1 D1:1
(points 2 182 130 243 130))
(connect D6:1 D1:2
(points 4 170 200 200 200 200 150 243 150))
(connect D0:2 D2:1
(points 6 182 150 190 150 190 160 210 160 210 220 243 220))
(connect D6:2 D2:2
(points 4 170 220 190 220 190 240 243 240))
(connect D1:1 D3:1
(points 4 277 140 300 140 300 130 350 130))
(connect D3:0 D4:0
(points 2 370 140 370 179))
(connect D2:1 D4:1
(points 4 277 230 300 230 300 190 350 190))
(connect D4:0 D5:0
(points 2 370 200 370 249))
(connect D0:0 D6:0
(points 4 130 155 130 180 120 180 120 195))
(connect D3:1 O1:1
(points 4 390 130 410 130 410 107 493 107))
(connect D4:1 O2:1
(points 6 390 190 400 190 400 210 460 210 460 267 493 267)))
(stackingOrder 0 1 2 3 4 5 6))))
(context 146
(properties
(name "ClearProtectorIfNecessary")
(trigMode deg)
(nextID 4)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 2 FORMULA
(properties
(name "remove if it voids a protector")
(expr 1 "(from MOD 10>0 ? RemoveProtectorPiece(from-1) : 1)"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 3 FORMULA
(properties
(name "remove if it voids a protector")
(expr 1 "(from MOD 10<9 ? RemoveProtectorPiece(from+1) : 1)"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect I1:1 D1:1)))
(contextCarrier
(active detail)
(detail
(extent 638 295)
(anchorPt -86 -166)
(configuration
(devCarrierFor 2
(active open)
(icon
(extent 196 0))
(open
(extent 366 32))
(terminals on)
(pinCenter 395 280))
(devCarrierFor 3
(active open)
(icon
(extent 196 0))
(open
(extent 379 32))
(terminals on)
(pinCenter 405 370))
(connect I1:1 D0:1
(points 4 86 313 100 313 100 280 169 280))
(connect I1:1 D1:1
(points 4 86 313 100 313 100 370 173 370)))
(stackingOrder 1 0))))
(context 109
(properties
(name "ClosestMovableOpponent")
(trigMode deg)
(nextID 28)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "ourPieceLocation")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Move")
(lock constraints)
(optional yes)))
(deviceList
(device 10 NOTE
(properties
(name "Comment")
(text2 8 "This uses the Janice Rand weave" "technique:" ""
"Start at our piece, and" "weave your way around, until"
"you find a movable opponent" "piece." "")))
(device 13 FORCOUNT
(properties
(count 48))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 14 IFTHENELSE
(properties
(name "opp movable piece at location?")
(cases 1
"(loc==-1 ? 0 : (KnownBoard[loc]>0 AND KnownBoard[loc]<=34) OR KnownBoard[loc]==-2)"
))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 15 FORMULA
(properties
(name "location")
(expr 1
"col = (oppLoc MOD 10)+dc, row = (oppLoc DIV 10)+dr, ((row<0 OR row>9 OR col<0 OR col>9) ? -1 : oppLoc+dr*10+dc)"
))
(interface
(input 1
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "row")
(optional yes))
(output 2
(name "col")
(optional yes))
(output 3
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 20 EXITCONTEXT)
(device 23 CALL
(properties
(name "Call CanPieceGetToLoc")
(callFunc "CanPieceGetToLoc")
(parmMode rev30))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 25 CONSTANT
(properties
(name "Weave Delta Col"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 48)
(data  [ 0 1 1 1 0 -1 -1 -1 -1 0 1 2 2 2 2 2 1 0 -1 -2 -2 -2 -2 -2 -2 -1 0 1 2 3
3 3 3 3 3 3 2 1 0 -1 -2 -3 -3 -3 -3 -3 -3 -3 ]))
(initValue Int32
(data  0))))
(device 26 CONSTANT
(properties
(name "Weave Delta Row"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 48)
(data  [ -1 -1 0 1 1 1 0 -1 -2 -2 -2 -2 -1 0 1 2 2 2 2 2 1 0 -1 -2 -3 -3 -3 -3
-3 -3 -2 -1 0 1 2 3 3 3 3 3 3 3 2 1 0 -1 -2 -3 ]))
(initValue Int32
(data  0))))
(device 27 FORMULA
(properties
(name "dr, dc")
(expr 1 "dr = wr[i], wc[i]"))
(interface
(input 1
(name "wr")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "wc")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 3
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dr")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D3:3 D2:1)
(connect I1:1 D3:1)
(connect D9:1 D3:2)
(connect D9:2 D3:3)
(connect D6:1 D4:1)
(connect D4:0 D5:0)
(connect D2:1 D6:0)
(connect I1:1 D6:1)
(connect D3:3 D6:2)
(connect D8:1 D9:1)
(connect D7:1 D9:2)
(connect D1:1 D9:3)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 951 448)
(anchorPt 61 200)
(configuration
(devCarrierFor 10
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 260 145)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 670 -70))
(devCarrierFor 13
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 20 50))
(devCarrierFor 14
(active icon)
(icon
(extent 215 25))
(open
(extent 595 53))
(terminals on)
(pinCenter 390 10))
(devCarrierFor 15
(active icon)
(icon
(extent 53 54))
(open
(extent 813 102))
(terminals on)
(pinCenter 220 -10))
(devCarrierFor 19
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 530 80))
(devCarrierFor 20
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 530 120))
(devCarrierFor 23
(active icon)
(icon
(extent 167 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 400 80))
(devCarrierFor 25
(active icon)
(icon
(extent 116 16))
(open
(extent 202 593)
(showFormat int))
(font "Arial" 11)
(pinCenter 30 -60))
(devCarrierFor 26
(active icon)
(icon
(extent 123 16))
(open
(extent 202 593)
(showFormat int))
(font "Arial" 11)
(pinCenter 20 -100))
(devCarrierFor 27
(active icon)
(icon
(extent 40 34))
(open
(extent 123 62))
(terminals on)
(pinCenter 140 0))
(connect D3:3 D2:1
(points 2 249 10 280 10))
(connect I1:1 D3:1
(points 6 -61 23 100 23 100 -40 170 -40 170 -30 191 -30))
(connect D9:1 D3:2
(points 2 162 -10 191 -10))
(connect D9:2 D3:3
(points 2 162 10 191 10))
(connect D6:1 D4:1
(points 2 486 80 510 80))
(connect D4:0 D5:0
(points 2 530 90 530 109))
(connect D2:1 D6:0
(points 5 500 0 520 0 520 50 400 50 400 65))
(connect I1:1 D6:1
(points 4 -61 23 100 23 100 70 314 70))
(connect D3:3 D6:2
(points 4 249 10 260 10 260 90 314 90))
(connect D8:1 D9:1
(points 4 84 -100 110 -100 110 -10 117 -10))
(connect D7:1 D9:2
(points 8 90 -60 100 -60 100 -50 90 -50 90 20 110 20 110 0 117 0))
(connect D1:1 D9:3
(points 4 57 50 80 50 80 10 117 10))
(connect D4:1 O1:1
(points 4 550 80 790 80 790 23 889 23)))
(stackingOrder 1 9 3 2 6 4 5 7 8 0))))
(context 99
(properties
(name "ClosestPieceThatBeatsMove")
(trigMode deg)
(nextID 47)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "opponentPieceLocation")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Move")
(lock constraints)
(optional yes)))
(deviceList
(device 10 NOTE
(properties
(name "Comment")
(text2 5 "This uses the Janice Rand weave" "technique:" ""
"Start at the target piece, and" "weave your way around.")))
(device 13 FORCOUNT
(properties
(count 48))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 14 IFTHENELSE
(properties
(name "our piece at location?")
(cases 1 "(loc==-1 ? 0 : (KnownBoard[loc]>1000 AND KnownBoard[loc]<=1034))"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 15 FORMULA
(properties
(name "location")
(expr 1
"col = (oppLoc MOD 10)+dc, row = (oppLoc DIV 10)+dr, ((row<0 OR row>9 OR col<0 OR col>9) ? -1 : oppLoc+dr*10+dc)"
))
(interface
(input 1
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "row")
(optional yes))
(output 2
(name "col")
(optional yes))
(output 3
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "our piece weight")
(expr 1 "WeightOfPiece[KnownBoard[loc]-1000]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 FORMULA
(properties
(name "opponent piece weight (if unknown, assume 3)")
(expr 1 "(KnownBoard[oppLoc]<0 ? 3 : WeightOfPiece[KnownBoard[oppLoc]])"))
(interface
(input 1
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 IFTHENELSE
(properties
(name "can it win (exclude spy)?")
(cases 1 "(w1==0 ? 0 : w1<w2)"))
(interface
(input 1
(name "w1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "w2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 20 EXITCONTEXT)
(device 23 CALL
(properties
(name "Call CanPieceGetToLoc")
(callFunc "CanPieceGetToLoc")
(parmMode rev30))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 25 CONSTANT
(properties
(name "Weave Delta Col"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 48)
(data  [ 0 1 1 1 0 -1 -1 -1 -1 0 1 2 2 2 2 2 1 0 -1 -2 -2 -2 -2 -2 -2 -1 0 1 2 3
3 3 3 3 3 3 2 1 0 -1 -2 -3 -3 -3 -3 -3 -3 -3 ]))
(initValue Int32
(data  0))))
(device 26 CONSTANT
(properties
(name "Weave Delta Row"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 48)
(data  [ -1 -1 0 1 1 1 0 -1 -2 -2 -2 -2 -1 0 1 2 2 2 2 2 1 0 -1 -2 -3 -3 -3 -3
-3 -3 -2 -1 0 1 2 3 3 3 3 3 3 3 2 1 0 -1 -2 -3 ]))
(initValue Int32
(data  0))))
(device 27 FORMULA
(properties
(name "dr, dc")
(expr 1 "dr = wr[i], wc[i]"))
(interface
(input 1
(name "wr")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "wc")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 3
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dr")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 30 CALL
(properties
(name "Call CanPieceGetToLoc")
(callFunc "CanPieceGetToLoc")
(parmMode rev30))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 31 IFTHENELSE
(properties
(name "can it tie?")
(cases 1 "(w1==w2)"))
(interface
(input 1
(name "w1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "w2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 33 FORMULA
(properties
(name "our piece weight")
(expr 1 "WeightOfPiece[KnownBoard[loc]-1000]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 34 IFTHENELSE
(properties
(name "our piece at location?")
(cases 1 "(loc==-1 ? 0 : (KnownBoard[loc]>1000 AND KnownBoard[loc]<=1034))"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 35 FORMULA
(properties
(name "location")
(expr 1
"col = (oppLoc MOD 10)+dc, row = (oppLoc DIV 10)+dr, ((row<0 OR row>9 OR col<0 OR col>9) ? -1 : oppLoc+dr*10+dc)"
))
(interface
(input 1
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "row")
(optional yes))
(output 2
(name "col")
(optional yes))
(output 3
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 36 FORMULA
(properties
(name "dr, dc")
(expr 1 "dr = wr[i], wc[i]"))
(interface
(input 1
(name "wr")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "wc")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 3
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dr")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 37 FORCOUNT
(properties
(count 48))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 38 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 39 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 40 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 46 FORMULA
(properties
(name "opponent piece weight (if unknown, assume 3)")
(expr 1 "(KnownBoard[oppLoc]<0 ? 3 : WeightOfPiece[KnownBoard[oppLoc]])"))
(interface
(input 1
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D3:3 D2:1)
(connect I1:1 D3:1)
(connect D11:1 D3:2)
(connect D11:2 D3:3)
(connect D2:1 D4:0)
(connect D3:3 D4:1)
(connect I1:1 D5:1)
(connect D4:1 D6:1)
(connect D5:1 D6:2)
(connect D20:0 D7:0)
(connect D6:1 D8:0)
(connect D3:3 D8:1)
(connect I1:1 D8:2)
(connect D10:1 D11:1)
(connect D9:1 D11:2)
(connect D1:1 D11:3)
(connect D13:1 D12:0)
(connect D16:3 D12:1)
(connect I1:1 D12:2)
(connect D14:1 D13:1)
(connect D22:1 D13:2)
(connect D15:1 D14:0)
(connect D16:3 D14:1)
(connect D16:3 D15:1)
(connect I1:1 D16:1)
(connect D17:1 D16:2)
(connect D17:2 D16:3)
(connect D10:1 D17:1)
(connect D9:1 D17:2)
(connect D18:1 D17:3)
(connect D1:0 D18:0)
(connect D8:1 D19:1)
(connect D12:1 D19:2)
(connect D21:2 D20:0)
(connect D19:1 D20:1)
(connect D19:1 D21:1)
(connect I1:1 D22:1)
(connect D20:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1058 716)
(anchorPt 98 151)
(configuration
(devCarrierFor 10
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 252 114)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 620 0))
(devCarrierFor 13
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 20 50))
(devCarrierFor 14
(active icon)
(icon
(extent 149 25))
(open
(extent 471 53))
(terminals on)
(pinCenter 280 60))
(devCarrierFor 15
(active icon)
(icon
(extent 53 54))
(open
(extent 813 102))
(terminals on)
(pinCenter 220 -10))
(devCarrierFor 16
(active icon)
(icon
(extent 113 16))
(open
(extent 279 32))
(terminals on)
(pinCenter 390 120))
(devCarrierFor 17
(active icon)
(icon
(extent 321 16))
(open
(extent 468 32))
(terminals on)
(pinCenter 310 150))
(devCarrierFor 18
(active icon)
(icon
(extent 169 25))
(open
(extent 157 60))
(terminals on)
(pinCenter 580 130))
(devCarrierFor 20
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 810 280))
(devCarrierFor 23
(active icon)
(icon
(extent 167 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 580 210))
(devCarrierFor 25
(active icon)
(icon
(extent 116 16))
(open
(extent 202 593)
(showFormat int))
(font "Arial" 11)
(pinCenter 20 -40))
(devCarrierFor 26
(active icon)
(icon
(extent 123 16))
(open
(extent 202 593)
(showFormat int))
(font "Arial" 11)
(pinCenter 20 -80))
(devCarrierFor 27
(active icon)
(icon
(extent 40 34))
(open
(extent 123 62))
(terminals on)
(pinCenter 140 0))
(devCarrierFor 30
(active icon)
(icon
(extent 167 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 610 460))
(devCarrierFor 31
(active icon)
(icon
(extent 67 25))
(open
(extent 88 60))
(terminals on)
(pinCenter 550 380))
(devCarrierFor 33
(active icon)
(icon
(extent 113 16))
(open
(extent 279 32))
(terminals on)
(pinCenter 420 370))
(devCarrierFor 34
(active icon)
(icon
(extent 149 25))
(open
(extent 471 53))
(terminals on)
(pinCenter 310 310))
(devCarrierFor 35
(active icon)
(icon
(extent 53 54))
(open
(extent 813 102))
(terminals on)
(pinCenter 250 240))
(devCarrierFor 36
(active icon)
(icon
(extent 40 34))
(open
(extent 123 62))
(terminals on)
(pinCenter 170 250))
(devCarrierFor 37
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 20 300))
(devCarrierFor 38
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 690 250))
(devCarrierFor 39
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 810 220))
(devCarrierFor 40
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 810 110))
(devCarrierFor 46
(active icon)
(icon
(extent 321 16))
(open
(extent 468 32))
(terminals on)
(pinCenter 330 410))
(connect D3:3 D2:1
(points 6 249 10 270 10 270 30 190 30 190 60 203 60))
(connect I1:1 D3:1
(points 6 -98 206 -50 206 -50 190 180 190 180 -30 191 -30))
(connect D11:1 D3:2
(points 2 162 -10 191 -10))
(connect D11:2 D3:3
(points 2 162 10 191 10))
(connect D2:1 D4:0
(points 3 357 50 390 50 390 109))
(connect D3:3 D4:1
(points 6 249 10 380 10 380 90 320 90 320 120 331 120))
(connect I1:1 D5:1
(points 6 -98 206 -50 206 -50 190 120 190 120 150 147 150))
(connect D4:1 D6:1
(points 2 449 120 493 120))
(connect D5:1 D6:2
(points 4 473 150 480 150 480 140 493 140))
(connect D20:0 D7:0
(points 2 810 230 810 269))
(connect D6:1 D8:0
(points 5 667 120 680 120 680 170 580 170 580 195))
(connect D3:3 D8:1
(points 8 249 10 400 10 400 80 490 80 490 170 480 170 480 200 494 200))
(connect I1:1 D8:2
(points 6 -98 206 -50 206 -50 190 300 190 300 220 494 220))
(connect D10:1 D11:1
(points 4 84 -80 100 -80 100 -10 117 -10))
(connect D9:1 D11:2
(points 4 80 -40 90 -40 90 0 117 0))
(connect D1:1 D11:3
(points 4 57 50 80 50 80 10 117 10))
(connect D13:1 D12:0
(points 3 586 370 610 370 610 445))
(connect D16:3 D12:1
(points 4 279 260 500 260 500 450 524 450))
(connect I1:1 D12:2
(points 4 -98 206 -40 206 -40 470 524 470))
(connect D14:1 D13:1
(points 2 479 370 514 370))
(connect D22:1 D13:2
(points 6 493 410 510 410 510 400 490 400 490 390 514 390))
(connect D15:1 D14:0
(points 3 387 300 420 300 420 359))
(connect D16:3 D14:1
(points 6 279 260 410 260 410 340 350 340 350 370 361 370))
(connect D16:3 D15:1
(points 6 279 260 300 260 300 280 220 280 220 310 233 310))
(connect I1:1 D16:1
(points 6 -98 206 -50 206 -50 190 200 190 200 220 221 220))
(connect D17:1 D16:2
(points 2 192 240 221 240))
(connect D17:2 D16:3
(points 2 192 260 221 260))
(connect D10:1 D17:1
(points 4 84 -80 100 -80 100 240 147 240))
(connect D9:1 D17:2
(points 4 80 -40 90 -40 90 250 147 250))
(connect D18:1 D17:3
(points 4 57 300 80 300 80 260 147 260))
(connect D1:0 D18:0
(points 2 20 78 20 271))
(connect D8:1 D19:1
(points 6 666 210 680 210 680 230 660 230 660 240 673 240))
(connect D12:1 D19:2
(points 6 696 460 720 460 720 430 650 430 650 260 673 260))
(connect D21:2 D20:0
(points 5 897 120 920 120 920 150 810 150 810 209))
(connect D19:1 D20:1
(points 4 707 250 730 250 730 220 790 220))
(connect D19:1 D21:1
(points 6 707 250 730 250 730 190 690 190 690 110 723 110))
(connect I1:1 D22:1
(points 4 -98 206 -40 206 -40 410 167 410))
(connect D20:1 O1:1
(points 4 830 220 910 220 910 206 959 206)))
(stackingOrder 1 11 4 12 14 15 16 17 13 18 19 21 20 7 0 3 2 9 10 8 6 5 22))))
(context 15
(properties
(name "ComputerKnownBoard")
(trigMode deg)
(nextID 2)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "board")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "Known Board")
(expr 1 "KnownBoard"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 NOTE
(properties
(name "Comment")
(text2 1 "Called from Main")))
(configuration
(connect D0:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 341 171)
(anchorPt 31 54)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 92 0))
(open
(extent 114 32))
(terminals on)
(pinCenter 110 70))
(devCarrierFor 1
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 239 42)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 120 0))
(connect D0:1 O1:1
(points 4 219 70 240 70 240 31 309 31)))
(stackingOrder 0 1))))
(context 30
(properties
(name "ComputerWeightedAttackMoves")
(trigMode deg)
(nextID 64)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "weightedMoves")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 52 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data")
(requires
(datatype Record)
(shape "Scalar")))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 54 FORMULA
(properties
(name "set \'WeightedAttackMoves\'")
(expr 1 "WeightedAttackMoves = recArray"))
(interface
(input 1
(name "recArray")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 56 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 57 IFTHENELSE
(properties
(name "a>0")
(cases 1 "a>0"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 60 IFTHENELSE
(properties
(name "Any Elements?")
(cases 1 "AnyElements(Array)"))
(interface
(input 1
(name "Array")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 61 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 62 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 63 CONTEXT
(properties
(name "Check Move")
(trigMode deg)
(nextID 21)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Record")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "un fixed, un movable, or known opp?")
(cases 2 "KnownBoard[move.to]==-1" "KnownBoard[move.to]==-2"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "from, to")
(expr 1 "to = move.to, move.from"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(optional yes))))
(device 2 CALL
(properties
(name "Call AttackProbabilityOfUnknownFixed")
(callFunc "AttackProbabilityOfUnknownFixed")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Win")
(lock name constraints)
(optional yes))
(output 2
(name "Tie")
(lock name constraints)
(optional yes))
(output 3
(name "Lose")
(lock name constraints)
(optional yes))
(output 4
(name "Bombed")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "attack piece")
(expr 1 "KnownBoard[move.from]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 CALL
(properties
(name "Call AttackProbabilityOfUnknownMovable")
(callFunc "AttackProbabilityOfUnknownMovable")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Win")
(lock name constraints)
(optional yes))
(output 2
(name "Tie")
(lock name constraints)
(optional yes))
(output 3
(name "Lose")
(lock name constraints)
(optional yes))))
(device 5 LITERALCONSTANT
(properties
(name "piece names")
(sizeFixed 1))
(interface
(output 1
(name "Text")
(lock name constraints)))
(implementation
(value Text
(numDims 1)
(size 12)
(data  [ "Flag" "Spy" "Marshal (1)" "General (2)" "Colonel (3)" "Major (4)"
"Captain (5)" "Lieutenant (6)" "Sergeant (7)" "Miner (8)" "Scout (9)" "Bomb" ]))
(initValue Text
(data  ""))))
(device 6 CONSTANT
(properties
(name "0.0"))
(interface
(output 1
(name "Real")
(lock name constraints)))
(implementation
(value Real
(data  0))
(initValue Real
(data  0))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 8 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 9 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 10 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 11 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "type")
(optional yes))
(input 2
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "win")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 5
(name "tie")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 6
(name "lose")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 7
(name "bombed")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 12 FORMULA
(properties
(name "piecenames[ndx]")
(expr 1 "piecenames[weightOfPiece[ndx-1000]+1]"))
(interface
(input 1
(name "piecenames")
(optional yes))
(input 2
(name "ndx")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 20 CONTEXT
(properties
(name "Create Certainty Probabilities")
(trigMode deg)
(nextID 20)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Win")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "Tie")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "Lose")
(lock constraints)
(optional yes))
(output 4
(type data)
(name "Bombed")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "defender piece weight")
(expr 1
"op = KnownBoard[move.To], op = (op>=1000 ? op-1000 : op), (op<0 ? op : WeightOfPiece[op])"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "op")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORMULA
(properties
(name "attacker piece weight")
(expr 1
"pp = KnownBoard[move.from], pp = (pp>=1000 ? pp-1000 : pp), (pp<0 ? pp : WeightOfPiece[pp])"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "pp")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "tie, win game/kill spy, die on bomb, suicide spy, win, or lose?")
(cases 5 "attacker==defender" "defender==10 OR defender==0"
"defender==-100 AND attacker!=8" "attacker==0 AND defender!=1"
"attacker<defender OR (defender==-100 AND attacker==8)"))
(interface
(input 1
(name "attacker")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "defender")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else If")
(lock name constraints))
(output 6
(name "Else")
(lock name constraints))))
(device 12 FORMULA
(properties
(name "tie values")
(expr 1 "[0, 1, 0, 0]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 FORMULA
(properties
(name "win game values")
(expr 1 "[1, 0, 0, 0]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORMULA
(properties
(name "die on bomb values")
(expr 1 "[0, 0, 0, 1]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 FORMULA
(properties
(name "death values")
(expr 1 "[0, 0, 1, 0]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "death values")
(expr 1 "[0, 0, 1, 0]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 FORMULA
(properties
(name "win values")
(expr 1 "[1, 0, 0, 0]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "F")
(optional yes))
(input 4
(name "E")
(optional yes))
(input 5
(name "D")
(optional yes))
(input 6
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 19 FORMULA
(properties
(name "unbuild")
(expr 1 "win = values[0], tie = values[1], lose = values[2], values[3]"))
(interface
(input 1
(name "values")
(requires
(datatype Real)
(shape "Array 1D"))
(optional yes))
(output 1
(name "win")
(optional yes))
(output 2
(name "tie")
(optional yes))
(output 3
(name "lose")
(optional yes))
(output 4
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect I1:1 D1:1)
(connect D1:2 D2:1)
(connect D0:2 D2:2)
(connect D2:1 D3:0)
(connect D2:2 D4:0)
(connect D2:3 D5:0)
(connect D2:4 D6:0)
(connect D2:6 D7:0)
(connect D2:5 D8:0)
(connect D3:1 D9:1)
(connect D4:1 D9:2)
(connect D5:1 D9:3)
(connect D6:1 D9:4)
(connect D8:1 D9:5)
(connect D7:1 D9:6)
(connect D9:1 D10:1)
(connect D10:1 O1:1)
(connect D10:2 O2:1)
(connect D10:3 O3:1)
(connect D10:4 O4:1)))
(contextCarrier
(active detail)
(detail
(extent 991 366)
(anchorPt 2 -31)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 152 25))
(open
(extent 828 42))
(terminals on)
(pinCenter 130 220))
(devCarrierFor 1
(active icon)
(icon
(extent 146 25))
(open
(extent 686 40))
(terminals on)
(pinCenter 130 170))
(devCarrierFor 2
(active icon)
(icon
(extent 364 129))
(open
(extent 400 122))
(terminals on)
(titleFont "lucida" 12)
(pinCenter 420 170))
(devCarrierFor 12
(active icon)
(icon
(extent 66 16))
(open
(extent 98 32))
(terminals on)
(pinCenter 690 100))
(devCarrierFor 13
(active icon)
(icon
(extent 114 16))
(open
(extent 98 32))
(terminals on)
(pinCenter 690 150))
(devCarrierFor 14
(active icon)
(icon
(extent 135 16))
(open
(extent 98 32))
(terminals on)
(pinCenter 690 190))
(devCarrierFor 15
(active icon)
(icon
(extent 89 16))
(open
(extent 98 32))
(terminals on)
(pinCenter 690 230))
(devCarrierFor 16
(active icon)
(icon
(extent 89 16))
(open
(extent 98 32))
(terminals on)
(pinCenter 690 310))
(devCarrierFor 17
(active icon)
(icon
(extent 71 16))
(open
(extent 98 32))
(terminals on)
(pinCenter 690 270))
(devCarrierFor 18
(active icon)
(icon
(extent 29 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 830 180))
(devCarrierFor 19
(active icon)
(icon
(extent 50 45))
(open
(extent 399 82))
(terminals on)
(pinCenter 890 180))
(connect I1:1 D0:1
(points 4 -2 213 10 213 10 220 51 220))
(connect I1:1 D1:1
(points 4 -2 213 10 213 10 170 54 170))
(connect D1:2 D2:1
(points 4 205 180 220 180 220 140 235 140))
(connect D0:2 D2:2
(points 4 208 230 220 230 220 200 235 200))
(connect D2:1 D3:0
(points 5 604 120 620 120 620 70 690 70 690 89))
(connect D2:2 D4:0
(points 5 604 140 610 140 610 130 690 130 690 139))
(connect D2:3 D5:0
(points 5 604 160 650 160 650 170 690 170 690 179))
(connect D2:4 D6:0
(points 7 604 180 610 180 610 170 640 170 640 210 690 210 690 219))
(connect D2:6 D7:0
(points 5 604 220 620 220 620 290 690 290 690 299))
(connect D2:5 D8:0
(points 7 604 200 610 200 610 210 630 210 630 250 690 250 690 259))
(connect D3:1 D9:1
(points 4 725 100 770 100 770 150 813 150))
(connect D4:1 D9:2
(points 4 749 150 760 150 760 160 813 160))
(connect D5:1 D9:3
(points 4 760 190 780 190 780 170 813 170))
(connect D6:1 D9:4
(points 4 737 230 790 230 790 180 813 180))
(connect D8:1 D9:5
(points 4 728 270 800 270 800 190 813 190))
(connect D7:1 D9:6
(points 4 737 310 780 310 780 200 813 200))
(connect D9:1 D10:1
(points 2 847 180 862 180))
(connect D10:1 O1:1
(points 4 917 160 940 160 940 73 988 73))
(connect D10:2 O2:1
(points 4 917 170 950 170 950 163 988 163))
(connect D10:3 O3:1
(points 4 917 180 940 180 940 253 988 253))
(connect D10:4 O4:1
(points 4 917 190 930 190 930 343 988 343)))
(stackingOrder 1 3 4 5 6 8 7 9 10 0 2))))
(configuration
(connect I1:1 D0:1)
(connect I1:1 D1:1)
(connect D0:1 D2:0)
(connect D3:1 D2:1)
(connect I1:1 D3:1)
(connect D0:2 D4:0)
(connect D3:1 D4:1)
(connect D4:0 D6:0)
(connect D2:1 D7:1)
(connect D4:1 D7:2)
(connect D13:1 D7:3)
(connect D2:2 D8:1)
(connect D4:2 D8:2)
(connect D13:2 D8:3)
(connect D2:3 D9:1)
(connect D4:3 D9:2)
(connect D13:3 D9:3)
(connect D2:4 D10:1)
(connect D6:1 D10:2)
(connect D13:4 D10:3)
(connect D12:1 D11:1)
(connect D1:1 D11:2)
(connect D1:2 D11:3)
(connect D7:1 D11:4)
(connect D8:1 D11:5)
(connect D9:1 D11:6)
(connect D10:1 D11:7)
(connect D5:1 D12:1)
(connect D3:1 D12:2)
(connect D0:3 D13:0)
(connect I1:1 D13:1)
(connect D11:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 969 571)
(anchorPt 61 14)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 254 34))
(open
(extent 199 62))
(terminals on)
(pinCenter 100 140))
(devCarrierFor 1
(active icon)
(icon
(extent 52 25))
(open
(extent 186 42))
(terminals on)
(pinCenter 0 270))
(devCarrierFor 2
(active icon)
(icon
(extent 262 45))
(open
(extent 291 83))
(terminals on)
(pinCenter 320 270))
(devCarrierFor 3
(active icon)
(icon
(extent 83 25))
(open
(extent 188 42))
(terminals on)
(pinCenter 20 210))
(devCarrierFor 4
(active icon)
(icon
(extent 283 34))
(open
(extent 274 61))
(terminals on)
(pinCenter 320 370))
(devCarrierFor 5
(active icon)
(icon
(extent 88 16))
(open
(extent 263 174))
(font "Arial" 11)
(pinCenter 80 90))
(devCarrierFor 6
(active icon)
(icon
(extent 24 16))
(open
(extent 69 30)
(showFormat real))
(pinCenter 320 420))
(devCarrierFor 7
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 570 260))
(devCarrierFor 8
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 570 320))
(devCarrierFor 9
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 570 370))
(devCarrierFor 10
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 570 420))
(devCarrierFor 11
(active icon)
(icon
(extent 125 285)
(iconImage "build.icn"))
(open
(extent 114 142))
(terminals on)
(pinCenter 750 280))
(devCarrierFor 12
(active icon)
(icon
(extent 126 25))
(open
(extent 308 42))
(terminals on)
(pinCenter 550 130))
(devCarrierFor 20
(active icon)
(icon
(extent 203 45))
(terminals on)
(pinCenter 270 490))
(connect I1:1 D0:1
(points 4 -61 271 -50 271 -50 140 -30 140))
(connect I1:1 D1:1
(points 4 -61 271 -45 271 -45 270 -29 270))
(connect D0:1 D2:0
(points 3 229 130 320 130 320 245))
(connect D3:1 D2:1
(points 4 64 210 180 210 180 270 186 270))
(connect I1:1 D3:1
(points 4 -61 271 -50 271 -50 210 -24 210))
(connect D0:2 D4:0
(points 7 229 140 250 140 250 180 170 180 170 320 320 320 320 350))
(connect D3:1 D4:1
(points 4 64 210 150 210 150 370 176 370))
(connect D4:0 D6:0
(points 2 320 389 320 409))
(connect D2:1 D7:1
(points 2 453 250 553 250))
(connect D4:1 D7:2
(points 6 464 360 470 360 470 350 490 350 490 260 553 260))
(connect D13:1 D7:3
(points 6 374 470 620 470 620 290 540 290 540 270 553 270))
(connect D2:2 D8:1
(points 4 453 260 470 260 470 310 553 310))
(connect D4:2 D8:2
(points 6 464 370 470 370 470 390 500 390 500 320 553 320))
(connect D13:2 D8:3
(points 4 374 480 530 480 530 330 553 330))
(connect D2:3 D9:1
(points 6 453 270 460 270 460 320 480 320 480 360 553 360))
(connect D4:3 D9:2
(points 4 464 380 480 380 480 370 553 370))
(connect D13:3 D9:3
(points 8 374 490 380 490 380 410 480 410 480 400 520 400 520 380 553 380))
(connect D2:4 D10:1
(points 4 453 280 510 280 510 410 553 410))
(connect D6:1 D10:2
(points 2 334 420 553 420))
(connect D13:4 D10:3
(points 4 374 500 390 500 390 430 553 430))
(connect D12:1 D11:1
(points 4 615 130 640 130 640 160 685 160))
(connect D1:1 D11:2
(points 4 28 260 70 260 70 200 685 200))
(connect D1:2 D11:3
(points 6 28 280 80 280 80 220 610 220 610 240 685 240))
(connect D7:1 D11:4
(points 4 587 260 610 260 610 280 685 280))
(connect D8:1 D11:5
(points 2 587 320 685 320))
(connect D9:1 D11:6
(points 4 587 370 610 370 610 360 685 360))
(connect D10:1 D11:7
(points 4 587 420 610 420 610 400 685 400))
(connect D5:1 D12:1
(points 4 126 90 250 90 250 120 484 120))
(connect D3:1 D12:2
(points 4 64 210 260 210 260 140 484 140))
(connect D0:3 D13:0
(points 9 229 150 240 150 240 170 160 170 160 180 140 180 140 410 270 410 270
465))
(connect I1:1 D13:1
(points 4 -61 271 -50 271 -50 490 166 490))
(connect D11:1 O1:1
(points 4 815 280 840 280 840 271 907 271)))
(stackingOrder 0 2 3 1 6 11 7 8 9 10 5 12 4 13))))
(configuration
(connect D1:1 D0:1)
(connect D7:1 D1:0)
(connect I1:1 D1:1)
(connect D0:1 D2:1)
(connect I1:1 D2:2)
(connect D10:1 D3:1)
(connect D0:0 D3:2)
(connect D6:1 D4:0)
(connect D3:1 D4:1)
(connect D3:1 D5:1)
(connect D5:5 D6:1)
(connect I1:1 D7:1)
(connect D3:1 D8:1)
(connect D9:1 D8:2)
(connect D7:2 D9:0)
(connect I1:1 D9:1)
(connect D2:1 D10:1)
(connect D8:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 877 390)
(anchorPt 81 87)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 140 20))
(devCarrierFor 2
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 40 20))
(devCarrierFor 5
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 220 30))
(devCarrierFor 52
(active icon)
(icon
(extent 61 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 450 40))
(devCarrierFor 54
(active icon)
(icon
(extent 185 16))
(open
(extent 244 32))
(terminals on)
(pinCenter 680 250))
(devCarrierFor 56
(active icon)
(icon
(extent 211 54)
(iconImage "unbuild.icn"))
(open
(extent 122 110))
(terminals on)
(pinCenter 480 150))
(devCarrierFor 57
(active icon)
(icon
(extent 31 25))
(open
(extent 60 51))
(terminals on)
(pinCenter 630 170))
(devCarrierFor 60
(active icon)
(icon
(extent 103 25))
(open
(extent 158 53))
(terminals on)
(pinCenter 10 -40))
(devCarrierFor 61
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 580 80))
(devCarrierFor 62
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 60 160))
(devCarrierFor 63
(active icon)
(icon
(extent 85 16))
(terminals on)
(pinCenter 320 30))
(connect D1:1 D0:1
(points 2 71 20 102 20))
(connect D7:1 D1:0
(points 5 64 -50 80 -50 80 -10 40 -10 40 9))
(connect I1:1 D1:1
(points 4 -81 107 -40 107 -40 20 8 20))
(connect D0:1 D2:1
(points 2 177 20 198 20))
(connect I1:1 D2:2
(points 6 -81 107 -40 107 -40 70 190 70 190 40 198 40))
(connect D10:1 D3:1
(points 2 365 30 417 30))
(connect D0:0 D3:2
(points 5 140 48 140 80 390 80 390 50 417 50))
(connect D6:1 D4:0
(points 3 648 160 680 160 680 239))
(connect D3:1 D4:1
(points 6 483 40 500 40 500 100 350 100 350 250 585 250))
(connect D3:1 D5:1
(points 6 483 40 500 40 500 100 350 100 350 150 372 150))
(connect D5:5 D6:1
(points 2 588 170 612 170))
(connect I1:1 D7:1
(points 6 -81 107 -40 107 -40 20 -60 20 -60 -40 -44 -40))
(connect D3:1 D8:1
(points 4 483 40 500 40 500 70 563 70))
(connect D9:1 D8:2
(points 4 80 160 100 160 100 90 563 90))
(connect D7:2 D9:0
(points 7 64 -30 70 -30 70 0 80 0 80 50 60 50 60 149))
(connect I1:1 D9:1
(points 4 -81 107 -40 107 -40 160 40 160))
(connect D2:1 D10:1
(points 2 241 30 275 30))
(connect D8:1 O1:1
(points 4 597 80 620 80 620 107 795 107)))
(stackingOrder 2 1 0 7 9 3 8 5 6 4 10))))
(context 102
(properties
(name "ConservativeBombAndFlagLayout")
(trigMode deg)
(nextID 23)
(popupTitleText "UserFunction")
(popupMoveable 1))
(deviceList
(device 0 CONSTANT
(properties
(name "Possible flag positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 20)
(data  [ 0 1 2 3 4 5 6 7 8 9 10 11 12 17 18 19 32 33 36 37 ]))
(initValue Int32
(data  0))))
(device 1 DECLVAR
(properties
(name "Declare Local \'nextBomb\'")
(scope con)
(globalName "nextBomb"))
(implementation
(value Int32
(data  0))))
(device 2 FORMULA
(properties
(name "nextBomb=35")
(expr 1 "nextBomb = 35"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORCOUNT
(properties
(name "For 4")
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 4 REPEATUNTILBREAK
(properties
(name "place rest of bombs"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "random -> flag position")
(expr 1 "asInt32(random(0, totsize(a)-1))"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "bordersquares(f, ndx)")
(expr 1 "bordersquares[f, ndx]"))
(interface
(input 1
(name "f")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "ndx")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "all bombs placed")
(cases 1 "nextBomb==41"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 FORMULA
(properties
(name "possible bomb positions")
(expr 1 "concat(a, [30, 31, 34, 35, 38, 39])"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "set bomb in b; nextB++")
(expr 1 "b[square] = nextBomb, nextBomb = nextBomb+1"))
(interface
(input 1
(name "square")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 BREAK)
(device 11 FORMULA
(properties
(name "random -> bomb position")
(expr 1 "asInt32(random(0, totsize(a)-1))"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 IFTHENELSE
(properties
(name "a != -1")
(cases 1 "a!=-1"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 13 FORMULA
(properties
(name "a[i]")
(expr 1 "a[i]"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORMULA
(properties
(name "set flag pos in b")
(expr 1 "b[f] = 1, flagPosition = f"))
(interface
(input 1
(name "f")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 FORMULA
(properties
(name "a[i]")
(expr 1 "a[i]"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "set bomb in b; nextB++")
(expr 1 "b[square] = nextBomb, nextBomb = nextBomb+1"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 22 CALL
(properties
(name "Call HasBorderBomb")
(callFunc "HasBorderBomb")
(parmMode rev30))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))))
(configuration
(connect D0:0 D2:0)
(connect D2:0 D3:0)
(connect D3:0 D4:0)
(connect D0:1 D5:1)
(connect D13:1 D6:1)
(connect D3:1 D6:2)
(connect D4:1 D7:0)
(connect D0:1 D8:1)
(connect D12:1 D9:0)
(connect D6:1 D9:1)
(connect D7:1 D10:0)
(connect D7:2 D11:0)
(connect D8:1 D11:1)
(connect D6:1 D12:1)
(connect D0:1 D13:1)
(connect D5:1 D13:2)
(connect D13:1 D14:1)
(connect D8:1 D15:1)
(connect D11:1 D15:2)
(connect D18:2 D16:0)
(connect D15:1 D16:1)
(connect D15:1 D17:1)
(connect D17:1 D18:0)
(connect D15:1 D18:1)))
(contextCarrier
(active detail)
(detail
(extent 1208 677)
(anchorPt 1 -2)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 170 15))
(open
(extent 121 319)
(showFormat int))
(font "lucida" 12)
(pinCenter 150 120))
(devCarrierFor 1
(active icon)
(icon
(extent 174 15))
(open
(extent 240 103))
(pinCenter 170 70))
(devCarrierFor 2
(active icon)
(icon
(extent 105 15))
(open
(extent 140 31))
(terminals on)
(pinCenter 160 210))
(devCarrierFor 3
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 160 260))
(devCarrierFor 4
(active icon)
(icon
(extent 150 51)
(iconImage "loop.icn"))
(open
(extent 66 30))
(terminals on)
(pinCenter 160 330))
(devCarrierFor 5
(active icon)
(icon
(extent 185 15))
(open
(extent 267 31))
(terminals on)
(pinCenter 360 180))
(devCarrierFor 6
(active icon)
(icon
(extent 161 25))
(open
(extent 183 42))
(terminals on)
(pinCenter 350 240))
(devCarrierFor 7
(active icon)
(icon
(extent 128 25))
(open
(extent 150 51))
(terminals on)
(pinCenter 330 330))
(devCarrierFor 8
(active icon)
(icon
(extent 180 15))
(open
(extent 270 31))
(terminals on)
(pinCenter 410 80))
(devCarrierFor 9
(active icon)
(icon
(extent 172 15))
(open
(extent 337 31))
(terminals on)
(pinCenter 510 290))
(devCarrierFor 10
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 450 330))
(devCarrierFor 11
(active icon)
(icon
(extent 196 15))
(open
(extent 267 31))
(terminals on)
(pinCenter 510 380))
(devCarrierFor 12
(active icon)
(icon
(extent 51 25))
(open
(extent 69 51))
(terminals on)
(pinCenter 490 240))
(devCarrierFor 13
(active icon)
(icon
(extent 28 25))
(open
(extent 80 42))
(terminals on)
(pinCenter 480 170))
(devCarrierFor 14
(active icon)
(icon
(extent 119 15))
(open
(extent 179 31))
(terminals on)
(pinCenter 620 170))
(devCarrierFor 15
(active icon)
(icon
(extent 28 25))
(open
(extent 80 42))
(terminals on)
(pinCenter 720 260))
(devCarrierFor 16
(active icon)
(icon
(extent 172 15))
(open
(extent 333 38))
(terminals on)
(pinCenter 930 380))
(devCarrierFor 17
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 810 250))
(devCarrierFor 22
(active icon)
(icon
(extent 144 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 920 310))
(connect D0:0 D2:0
(points 4 150 130 150 150 160 150 160 200))
(connect D2:0 D3:0
(points 2 160 220 160 232))
(connect D3:0 D4:0
(points 2 160 288 160 302))
(connect D0:1 D5:1
(points 6 237 120 260 120 260 150 250 150 250 180 265 180))
(connect D13:1 D6:1
(points 6 496 170 510 170 510 210 260 210 260 230 267 230))
(connect D3:1 D6:2
(points 4 196 260 220 260 220 250 267 250))
(connect D4:1 D7:0
(points 5 237 330 250 330 250 300 330 300 330 315))
(connect D0:1 D8:1
(points 4 237 120 290 120 290 80 317 80))
(connect D12:1 D9:0
(points 5 518 230 540 230 540 270 510 270 510 280))
(connect D6:1 D9:1
(points 6 433 240 440 240 440 270 410 270 410 290 421 290))
(connect D7:1 D10:0
(points 5 396 320 410 320 410 310 450 310 450 320))
(connect D7:2 D11:0
(points 5 396 340 410 340 410 350 510 350 510 370))
(connect D8:1 D11:1
(points 8 502 80 520 80 520 200 630 200 630 410 390 410 390 380 409 380))
(connect D6:1 D12:1
(points 2 433 240 462 240))
(connect D0:1 D13:1
(points 4 237 120 440 120 440 160 463 160))
(connect D5:1 D13:2
(points 2 455 180 463 180))
(connect D13:1 D14:1
(points 2 496 170 558 170))
(connect D8:1 D15:1
(points 6 502 80 520 80 520 200 630 200 630 250 703 250))
(connect D11:1 D15:2
(points 6 610 380 640 380 640 310 670 310 670 270 703 270))
(connect D18:2 D16:0
(points 5 994 320 1010 320 1010 350 930 350 930 370))
(connect D15:1 D16:1
(points 4 736 260 750 260 750 380 841 380))
(connect D15:1 D17:1
(points 4 736 260 750 260 750 250 761 250))
(connect D17:1 D18:0
(points 3 859 240 920 240 920 295))
(connect D15:1 D18:1
(points 4 736 260 750 260 750 310 845 310)))
(stackingOrder 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 16 15 17 18))))
(context 49
(properties
(name "CreateBorderSquaresArray")
(trigMode deg)
(nextID 13)
(popupTitleText "UserObject")
(popupMoveable 1))
(deviceList
(device 1 FORCOUNT
(properties
(name "For Square")
(count 100))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 2 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 4 FORMULA
(properties
(name "upper")
(expr 1
"up = i-10, ((up<0 OR up==42 OR up==43 OR up==52 OR up==53 OR up==46 OR up==47 OR up==56 OR up==57) ? -1 : up)"
))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "up")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 6 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 7 FORMULA
(properties
(name "lower")
(expr 1
"lr = i+10, ((lr>=100 OR lr==42 OR lr==43 OR lr==52 OR lr==53 OR lr==46 OR lr==47 OR lr==56 OR lr==57) ? -1 : lr)"
))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "lr")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 FORMULA
(properties
(name "left")
(expr 1
"l = i-1, (((l MOD 10==9) OR l==-1 OR l==42 OR l==43 OR l==52 OR l==53 OR l==46 OR l==47 OR l==56 OR l==57) ? -1 : l)"
))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "l")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "right")
(expr 1
"r = i+1, (((r MOD 10==0) OR r==42 OR r==43 OR r==52 OR r==53 OR r==46 OR r==47 OR r==56 OR r==57) ? -1 : r)"
))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "r")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORMULA
(properties
(name "set \'BorderSquares\'")
(expr 1 "BorderSquares = bs"))
(interface
(input 1
(name "bs")
(requires
(datatype Int32)
(shape "Array 2D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 NOTE
(properties
(name "Comment")
(text2 9 "The borderSquares are in" "order Up, Down, Left, Right (0-3)" "   "
"              0" "           2  X  3" "              1" ""
"  DO NOT CHANGE !!!!!" "")))
(configuration
(connect D4:1 D1:1)
(connect D7:0 D1:2)
(connect D0:1 D2:1)
(connect D1:1 D3:1)
(connect D0:0 D3:2)
(connect D2:2 D4:1)
(connect D5:2 D4:2)
(connect D6:2 D4:3)
(connect D7:2 D4:4)
(connect D2:0 D5:0)
(connect D0:1 D5:1)
(connect D5:0 D6:0)
(connect D0:1 D6:1)
(connect D6:0 D7:0)
(connect D0:1 D7:1)
(connect D3:1 D8:1)))
(contextCarrier
(active detail)
(detail
(extent 910 443)
(anchorPt -12 -12)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 79 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 90 70))
(devCarrierFor 2
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 420 160))
(devCarrierFor 4
(active icon)
(icon
(extent 41 25))
(open
(extent 876 40))
(terminals on)
(pinCenter 210 90))
(devCarrierFor 5
(active icon)
(icon
(extent 61 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 520 170))
(devCarrierFor 6
(active icon)
(icon
(extent 29 45))
(open)
(terminals on)
(pinCenter 290 150))
(devCarrierFor 7
(active icon)
(icon
(extent 37 25))
(open
(extent 823 42))
(terminals on)
(pinCenter 210 130))
(devCarrierFor 8
(active icon)
(icon
(extent 24 25))
(open
(extent 823 42))
(terminals on)
(pinCenter 210 180))
(devCarrierFor 9
(active icon)
(icon
(extent 32 25))
(open
(extent 823 42))
(terminals on)
(pinCenter 210 220))
(devCarrierFor 10
(active icon)
(icon
(extent 137 16))
(open
(extent 231 32))
(terminals on)
(pinCenter 660 170))
(devCarrierFor 12
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 328 174)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 680 330))
(connect D4:1 D1:1
(points 2 307 150 387 150))
(connect D7:0 D1:2
(points 5 210 235 210 260 330 260 330 170 387 170))
(connect D0:1 D2:1
(points 4 132 70 160 70 160 90 187 90))
(connect D1:1 D3:1
(points 2 453 160 487 160))
(connect D0:0 D3:2
(points 5 90 98 90 270 470 270 470 180 487 180))
(connect D2:2 D4:1
(points 4 233 100 250 100 250 130 273 130))
(connect D5:2 D4:2
(points 2 231 140 273 140))
(connect D6:2 D4:3
(points 4 224 190 250 190 250 150 273 150))
(connect D7:2 D4:4
(points 4 228 230 260 230 260 160 273 160))
(connect D2:0 D5:0
(points 2 210 105 210 115))
(connect D0:1 D5:1
(points 4 132 70 160 70 160 130 189 130))
(connect D5:0 D6:0
(points 2 210 145 210 165))
(connect D0:1 D6:1
(points 6 132 70 160 70 160 130 170 130 170 180 195 180))
(connect D6:0 D7:0
(points 2 210 195 210 205))
(connect D0:1 D7:1
(points 6 132 70 160 70 160 130 170 130 170 220 191 220))
(connect D3:1 D8:1
(points 2 553 170 589 170)))
(stackingOrder 4 1 3 0 5 6 7 8 2 9))))
(context 103
(properties
(name "DeceptiveBombAndFlagLayout")
(trigMode deg)
(nextID 25)
(popupTitleText "UserFunction")
(popupMoveable 1))
(deviceList
(device 0 CONSTANT
(properties
(name "Possible flag positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 14)
(data  [ 0 1 2 3 4 5 6 7 8 9 32 33 36 37 ]))
(initValue Int32
(data  0))))
(device 1 DECLVAR
(properties
(name "Declare Local \'nextBomb\'")
(scope con)
(globalName "nextBomb"))
(implementation
(value Int32
(data  0))))
(device 2 FORMULA
(properties
(name "nextBomb=35")
(expr 1 "nextBomb = 35"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 REPEATUNTILBREAK
(properties
(name "place bombs"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "random -> flag position")
(expr 1 "asInt32(random(0, totsize(a)-1))"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "all bombs placed")
(cases 1 "nextBomb==41"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 10 BREAK)
(device 11 FORMULA
(properties
(name "random -> bomb position")
(expr 1 "asInt32(random(0, totsize(a)-1))"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 FORMULA
(properties
(name "a[i]")
(expr 1 "a[i]"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORMULA
(properties
(name "set flag pos in b")
(expr 1 "b[f] = 1, flagPosition = f"))
(interface
(input 1
(name "f")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 FORMULA
(properties
(name "a[i]")
(expr 1 "a[i]"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "set bomb in b; nextB++")
(expr 1 "b[square] = nextBomb, nextBomb = nextBomb+1"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 20 CONTEXT
(properties
(name "GetBombLocations")
(trigMode deg)
(nextID 15)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "locs")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CONSTANT
(properties
(name "case 1 bomb positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 17)
(data  [ 0 2 4 6 8 11 13 15 17 19 20 22 24 26 28 30 39 ]))
(initValue Int32
(data  0))))
(device 1 CONSTANT
(properties
(name "case 2 bomb positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 17)
(data  [ 1 3 5 7 9 10 12 14 16 18 21 23 25 27 29 30 39 ]))
(initValue Int32
(data  0))))
(device 2 IFTHENELSE
(properties
(name "case 1, 2, 3, 4, or 5?")
(cases 4 "r<=0.10" "r<=0.20" "r<=0.40" "r<=0.60"))
(interface
(input 1
(name "r")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "random # (0-1)")
(expr 1 "random(0, 1)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(input 5
(name "E")
(optional yes))
(output 1
(name "Data"))))
(device 5 CONSTANT
(properties
(name "case 3 bomb positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 6)
(data  [ 0 2 11 4 6 15 ]))
(initValue Int32
(data  0))))
(device 6 FORMULA
(properties
(name "+ random(0-3)")
(expr 1 "locs+asInt32(floor(random(0, 3.9)))"))
(interface
(input 1
(name "locs")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 CONSTANT
(properties
(name "case 4 bomb positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 6)
(data  [ 9 18 29 0 11 20 ]))
(initValue Int32
(data  0))))
(device 8 CONSTANT
(properties
(name "case 5 bomb positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 6)
(data  [ 30 22 14 17 28 36 ]))
(initValue Int32
(data  0))))
(device 9 FORMULA
(properties
(name "random(0-3)")
(expr 1 "asInt32(floor(random(0, 3.9)))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 11 CONSTANT
(properties
(name "case 5 bomb positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 6)
(data  [ 39 27 15 22 11 13 ]))
(initValue Int32
(data  0))))
(device 12 CONSTANT
(properties
(name "case 5 bomb positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 6)
(data  [ 31 39 14 17 28 36 ]))
(initValue Int32
(data  0))))
(device 13 CONSTANT
(properties
(name "case 5 bomb positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 6)
(data  [ 20 23 25 16 7 28 ]))
(initValue Int32
(data  0))))
(device 14 IFTHENELSE
(properties
(name "case 1, 2, 3, 4, or 5?")
(cases 3 "r==0" "r==1" "r==2"))
(interface
(input 1
(name "r")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(configuration
(connect D2:1 D0:0)
(connect D2:2 D1:0)
(connect D3:1 D2:1)
(connect D0:1 D4:1)
(connect D1:1 D4:2)
(connect D6:1 D4:3)
(connect D7:1 D4:4)
(connect D10:1 D4:5)
(connect D2:3 D5:0)
(connect D5:1 D6:1)
(connect D2:4 D7:0)
(connect D14:1 D8:0)
(connect D2:5 D9:0)
(connect D8:1 D10:1)
(connect D11:1 D10:2)
(connect D12:1 D10:3)
(connect D13:1 D10:4)
(connect D14:2 D11:0)
(connect D14:3 D12:0)
(connect D14:4 D13:0)
(connect D9:1 D14:1)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 806 511)
(anchorPt -7 -108)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 155 15))
(open
(extent 203 319)
(showFormat int))
(font "lucida" 12)
(pinCenter 400 200))
(devCarrierFor 1
(active icon)
(icon
(extent 155 15))
(open
(extent 203 319)
(showFormat int))
(font "lucida" 12)
(pinCenter 400 250))
(devCarrierFor 2
(active icon)
(icon
(extent 144 54))
(open
(extent 100 102))
(terminals on)
(pinCenter 220 200))
(devCarrierFor 3
(active icon)
(icon
(extent 104 16))
(open
(extent 116 32))
(terminals on)
(pinCenter 80 200))
(devCarrierFor 4
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 650 260))
(devCarrierFor 5
(active icon)
(icon
(extent 155 15))
(open
(extent 205 112)
(showFormat int))
(font "lucida" 12)
(pinCenter 390 290))
(devCarrierFor 6
(active icon)
(icon
(extent 100 16))
(open
(extent 258 32))
(terminals on)
(pinCenter 540 290))
(devCarrierFor 7
(active icon)
(icon
(extent 155 15))
(open
(extent 205 112)
(showFormat int))
(font "lucida" 12)
(pinCenter 390 330))
(devCarrierFor 8
(active icon)
(icon
(extent 155 15))
(open
(extent 205 112)
(showFormat int))
(font "lucida" 12)
(pinCenter 530 400))
(devCarrierFor 9
(active icon)
(icon
(extent 86 16))
(open
(extent 258 32))
(terminals on)
(pinCenter 210 370))
(devCarrierFor 10
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 670 460))
(devCarrierFor 11
(active icon)
(icon
(extent 155 15))
(open
(extent 205 112)
(showFormat int))
(font "lucida" 12)
(pinCenter 530 440))
(devCarrierFor 12
(active icon)
(icon
(extent 155 15))
(open
(extent 205 112)
(showFormat int))
(font "lucida" 12)
(pinCenter 530 480))
(devCarrierFor 13
(active icon)
(icon
(extent 155 15))
(open
(extent 205 112)
(showFormat int))
(font "lucida" 12)
(pinCenter 530 530))
(devCarrierFor 14
(active icon)
(icon
(extent 144 54))
(open
(extent 63 102))
(terminals on)
(pinCenter 360 380))
(connect D2:1 D0:0
(points 3 294 180 400 180 400 190))
(connect D2:2 D1:0
(points 7 294 190 310 190 310 160 410 160 410 220 400 220 400 240))
(connect D3:1 D2:1
(points 2 134 200 145 200))
(connect D0:1 D4:1
(points 4 480 200 500 200 500 240 633 240))
(connect D1:1 D4:2
(points 2 480 250 633 250))
(connect D6:1 D4:3
(points 4 592 290 600 290 600 260 633 260))
(connect D7:1 D4:4
(points 4 470 330 610 330 610 270 633 270))
(connect D10:1 D4:5
(points 6 687 460 710 460 710 360 620 360 620 280 633 280))
(connect D2:3 D5:0
(points 5 294 200 300 200 300 170 390 170 390 280))
(connect D5:1 D6:1
(points 2 470 290 487 290))
(connect D2:4 D7:0
(points 7 294 210 310 210 310 220 380 220 380 310 390 310 390 320))
(connect D14:1 D8:0
(points 3 434 360 530 360 530 390))
(connect D2:5 D9:0
(points 5 294 220 300 220 300 250 210 250 210 359))
(connect D8:1 D10:1
(points 4 610 400 640 400 640 440 653 440))
(connect D11:1 D10:2
(points 4 610 440 620 440 620 450 653 450))
(connect D12:1 D10:3
(points 4 610 480 630 480 630 460 653 460))
(connect D13:1 D10:4
(points 6 610 530 630 530 630 490 640 490 640 470 653 470))
(connect D14:2 D11:0
(points 5 434 370 440 370 440 420 530 420 530 430))
(connect D14:3 D12:0
(points 7 434 380 450 380 450 370 630 370 630 460 530 460 530 470))
(connect D14:4 D13:0
(points 7 434 390 450 390 450 400 430 400 430 510 530 510 530 520))
(connect D9:1 D14:1
(points 4 255 370 270 370 270 380 285 380))
(connect D4:1 O1:1
(points 4 667 260 690 260 690 363 812 363)))
(stackingOrder 0 1 6 5 7 3 2 8 9 14 10 4 11 12 13))))
(device 21 IFTHENELSE
(properties
(name "open?")
(cases 1 "b[pos]==0"))
(interface
(input 1
(name "pos")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 22 REPEATUNTILBREAK
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 23 BREAK)
(configuration
(connect D3:0 D0:0)
(connect D13:0 D2:0)
(connect D2:0 D3:0)
(connect D15:1 D4:0)
(connect D0:1 D4:1)
(connect D3:1 D5:0)
(connect D5:1 D6:0)
(connect D5:2 D7:0)
(connect D13:1 D7:1)
(connect D0:1 D8:1)
(connect D4:1 D8:2)
(connect D14:1 D9:0)
(connect D8:1 D9:1)
(connect D13:1 D10:1)
(connect D7:1 D10:2)
(connect D12:1 D11:0)
(connect D10:1 D11:1)
(connect D10:1 D12:1)
(connect D8:1 D14:1)
(connect D0:0 D15:0)
(connect D9:0 D16:0)))
(contextCarrier
(active detail)
(detail
(extent 916 548)
(anchorPt -20 -113)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 170 15))
(open
(extent 118 263)
(showFormat int))
(font "lucida" 12)
(pinCenter 170 490))
(devCarrierFor 1
(active icon)
(icon
(extent 174 15))
(open
(extent 240 103))
(pinCenter 180 140))
(devCarrierFor 2
(active icon)
(icon
(extent 105 15))
(open
(extent 140 31))
(terminals on)
(pinCenter 170 230))
(devCarrierFor 4
(active icon)
(icon
(extent 88 51)
(iconImage "loop.icn"))
(open
(extent 66 30))
(terminals on)
(pinCenter 170 330))
(devCarrierFor 5
(active icon)
(icon
(extent 185 15))
(open
(extent 267 31))
(terminals on)
(pinCenter 380 570))
(devCarrierFor 7
(active icon)
(icon
(extent 128 25))
(open
(extent 150 51))
(terminals on)
(pinCenter 330 350))
(devCarrierFor 10
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 460 370))
(devCarrierFor 11
(active icon)
(icon
(extent 196 15))
(open
(extent 267 31))
(terminals on)
(pinCenter 410 410))
(devCarrierFor 13
(active icon)
(icon
(extent 28 25))
(open
(extent 80 42))
(terminals on)
(pinCenter 530 550))
(devCarrierFor 14
(active icon)
(icon
(extent 119 15))
(open
(extent 179 31))
(terminals on)
(pinCenter 770 580))
(devCarrierFor 15
(active icon)
(icon
(extent 28 25))
(open
(extent 80 42))
(terminals on)
(pinCenter 570 400))
(devCarrierFor 16
(active icon)
(icon
(extent 172 15))
(open
(extent 333 38))
(terminals on)
(pinCenter 810 420))
(devCarrierFor 17
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 660 400))
(devCarrierFor 20
(active icon)
(icon
(extent 132 16))
(terminals on)
(pinCenter 170 190))
(devCarrierFor 21
(active icon)
(icon
(extent 44 25))
(open
(extent 126 53))
(terminals on)
(pinCenter 610 550))
(devCarrierFor 22
(active icon)
(icon
(extent 74 52)
(iconImage "loop.icn"))
(open)
(terminals on)
(pinCenter 170 570))
(devCarrierFor 23
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 770 610))
(connect D3:0 D0:0
(points 2 170 358 170 480))
(connect D13:0 D2:0
(points 2 170 200 170 220))
(connect D2:0 D3:0
(points 2 170 240 170 302))
(connect D15:1 D4:0
(points 5 209 570 230 570 230 540 380 540 380 560))
(connect D0:1 D4:1
(points 4 257 490 280 490 280 570 285 570))
(connect D3:1 D5:0
(points 5 216 330 240 330 240 320 330 320 330 335))
(connect D5:1 D6:0
(points 3 396 340 460 340 460 360))
(connect D5:2 D7:0
(points 3 396 360 410 360 410 400))
(connect D13:1 D7:1
(points 8 238 190 260 190 260 220 250 220 250 340 240 340 240 410 309 410))
(connect D0:1 D8:1
(points 6 257 490 280 490 280 530 390 530 390 540 513 540))
(connect D4:1 D8:2
(points 4 475 570 490 570 490 560 513 560))
(connect D14:1 D9:0
(points 3 634 540 770 540 770 570))
(connect D8:1 D9:1
(points 6 546 550 570 550 570 590 650 590 650 580 708 580))
(connect D13:1 D10:1
(points 4 238 190 530 190 530 390 553 390))
(connect D7:1 D10:2
(points 2 510 410 553 410))
(connect D12:1 D11:0
(points 3 709 390 810 390 810 410))
(connect D10:1 D11:1
(points 6 586 400 600 400 600 440 710 440 710 420 721 420))
(connect D10:1 D12:1
(points 2 586 400 611 400))
(connect D8:1 D14:1
(points 2 546 550 585 550))
(connect D0:0 D15:0
(points 2 170 500 170 541))
(connect D9:0 D16:0
(points 2 770 590 770 600)))
(stackingOrder 2 3 7 6 10 11 12 5 1 0 15 4 8 14 9 16 13))))
(context 126
(properties
(name "DidOpponentMoveNextToOurPiece")
(trigMode deg)
(nextID 20)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[LastOpponentMove.to, i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 8 EXITCONTEXT)
(device 9 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 10 IFTHENELSE
(properties
(name "Is opponent\'s piece known?")
(cases 3 "piece==0" "piece>0 AND piece<=34" "piece>=1035 AND piece<=1040"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 11 FORMULA
(properties
(name "opponent\'s last moved piece")
(expr 1 "KnownBoard[LastOpponentMove.to]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 NOTE
(properties
(name "Comment")
(text2 8 "This function looks at our opponent\'s last"
"move.   If the opponent\'s piece that was moved is"
"known to us, just let the normal strategy"
"handle it.  If not, determine if the move is"
"\"aggresive\" --- the piece was moved next to one"
"of our known pieces.  If so, we need to determine"
"whether to \"get out of Dodge\" or do nothing." "")))
(device 13 FORMULA
(properties
(name "actual adj piece")
(expr 1 "(border>-1 ? KnownBoard[border] : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 IFTHENELSE
(properties
(name "our piece adjacent?")
(cases 1 "piece>1000 AND piece<=1040"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 18 CONTEXT
(properties
(name "CheckPiece")
(trigMode deg)
(nextID 23)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "our piece known?")
(cases 1
"OpponentsKnownBoard[border]>1000 AND OpponentsKnownBoard[border]<=1040"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 CALL
(properties
(name "Call FindEvasiveMove")
(callFunc "FindEvasiveMove")
(parmMode rev30))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "to")
(lock name constraints)
(optional yes))
(output 2
(name "NoEscape")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "Is it worth moving for?")
(cases 1 "piece==8 OR (piece<=6) OR 1"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "our piece weight")
(expr 1 "WeightOfPiece[OpponentsKnownBoard[border]-1000]"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 IFTHENELSE
(properties
(name "is our piece a bomb?")
(cases 1 "piece==-100"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 FORMULA
(properties
(name "Perhaps Attack (Potential Miner)")
(expr 1 "0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "is opponent known to us?")
(cases 1
"KnownBoard[LastOpponentMove.to]>0 AND KnownBoard[LastOpponentMove.to]<=40"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 9 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 10 CALL
(properties
(name "Call IsPieceProtected")
(callFunc "IsPieceProtected")
(parmMode rev30))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "Unknown")
(lock name constraints)
(optional yes))))
(device 11 FORMULA
(properties
(name "Last Opponent Move")
(expr 1 "LastOpponentMove.to"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 CALL
(properties
(name "Call CanNeighborKillMe")
(callFunc "CanNeighborKillMe")
(parmMode rev30))
(interface
(input 1
(name "neighbor")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "me")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 13 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 14 FORMULA
(properties
(name "neighbor square")
(expr 1 "LastOpponentMove.to"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 CONTEXT
(properties
(name "Check Marshal/Spy case")
(trigMode deg)
(nextID 14)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "attackTo")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "retreat")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "nada")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "is my piece a marshal?")
(cases 1 "KnownBoard[border]==1003"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 IFTHENELSE
(properties
(name "opp spy alive?")
(cases 1 "OpponentPieceTable[0].known_dead==0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 FORMULA
(properties
(name "Attack Piece")
(expr 1 "to = LastOpponentMove.to"))
(interface
(output 1
(name "to")
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "border square held by unknown opp or known spy?")
(cases 1 "(square!=-1 ? (KnownBoard[square]<0) OR (KnownBoard[square]==2) : 0)")
)
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 FORMULA
(properties
(name "opp border sq index")
(expr 1 "BorderSquares[LastOpponentMove.to, b]"))
(interface
(input 1
(name "b")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 10 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 11 EXITCONTEXT)
(device 12 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:0)
(connect D8:1 D2:0)
(connect D4:1 D3:1)
(connect D5:1 D4:1)
(connect D1:1 D5:0)
(connect D3:1 D6:1)
(connect D6:0 D7:0)
(connect D1:2 D8:1)
(connect D5:0 D8:2)
(connect D2:1 O1:1)
(connect D6:1 O2:1)
(connect D0:2 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 918 455)
(anchorPt 0 5)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 158 25))
(open
(extent 210 53))
(terminals on)
(pinCenter 170 90))
(devCarrierFor 4
(active icon)
(icon
(extent 100 25))
(open
(extent 290 53))
(terminals on)
(pinCenter 330 130))
(devCarrierFor 6
(active icon)
(icon
(extent 85 25))
(open
(extent 276 42))
(terminals on)
(pinCenter 600 160))
(devCarrierFor 7
(active icon)
(icon
(extent 261 25))
(open
(extent 501 53))
(terminals on)
(titleFont "Arial" 10)
(pinCenter 450 330))
(devCarrierFor 8
(active icon)
(icon
(extent 138 25))
(open
(extent 294 42))
(terminals on)
(pinCenter 230 320))
(devCarrierFor 9
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 110 320))
(devCarrierFor 10
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 750 320))
(devCarrierFor 11
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 750 380))
(devCarrierFor 12
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 530 110))
(connect I1:1 D0:1
(points 4 0 222 60 222 60 90 88 90))
(connect D0:1 D1:0
(points 3 251 80 330 80 330 115))
(connect D8:1 D2:0
(points 3 547 110 600 110 600 145))
(connect D4:1 D3:1
(points 4 301 320 310 320 310 330 317 330))
(connect D5:1 D4:1
(points 2 147 320 158 320))
(connect D1:1 D5:0
(points 5 382 120 400 120 400 170 110 170 110 291))
(connect D3:1 D6:1
(points 2 583 320 730 320))
(connect D6:0 D7:0
(points 2 750 330 750 369))
(connect D1:2 D8:1
(points 4 382 140 420 140 420 100 513 100))
(connect D5:0 D8:2
(points 7 110 348 110 370 50 370 50 60 430 60 430 120 513 120))
(connect D2:1 O1:1
(points 4 645 160 670 160 670 72 917 72))
(connect D6:1 O2:1
(points 4 770 320 790 320 790 222 917 222))
(connect D0:2 O3:1
(points 6 251 100 260 100 260 200 840 200 840 372 917 372)))
(stackingOrder 1 0 3 7 8 5 4 2 6))))
(device 16 CALL
(properties
(name "Call FindEvasiveMove")
(callFunc "FindEvasiveMove")
(parmMode rev30))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "to")
(lock name constraints)
(optional yes))
(output 2
(name "NoEscape")
(lock name constraints)
(optional yes))))
(device 17 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(output 1
(name "Data"))))
(device 18 IFTHENELSE
(properties
(name "is our piece a miner?")
(cases 1 "WeightOfPiece[KnownBoard[border]-1000]==8"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 19 CALL
(properties
(name "Call FindEvasiveMove")
(callFunc "FindEvasiveMove")
(parmMode rev30))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "to")
(lock name constraints)
(optional yes))
(output 2
(name "NoEscape")
(lock name constraints)
(optional yes))))
(device 20 CALL
(properties
(name "Call FindEvasiveMove")
(callFunc "FindEvasiveMove")
(parmMode rev30))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "to")
(lock name constraints)
(optional yes))
(output 2
(name "NoEscape")
(lock name constraints)
(optional yes))))
(device 21 IFTHENELSE
(properties
(name "evade half the time if we\'ve moved")
(cases 1 "(OpponentsKnownBoard[loc]!=-1 ? random(0, 1)<0.5 : 0)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 22 IFTHENELSE
(properties
(name "strafing piece?")
(cases 1 "KnownBoard[loc]==strafingPiece"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D21:2 D0:0)
(connect I1:1 D0:1)
(connect D9:2 D1:0)
(connect I1:1 D1:1)
(connect D12:1 D2:0)
(connect D3:1 D2:1)
(connect D0:1 D3:0)
(connect I1:1 D3:1)
(connect D3:1 D4:1)
(connect D4:1 D5:0)
(connect D4:2 D6:0)
(connect D16:1 D7:0)
(connect I1:1 D7:1)
(connect D7:0 D8:0)
(connect D16:1 D8:1)
(connect D2:1 D9:0)
(connect I1:1 D9:1)
(connect D10:1 D9:2)
(connect D13:1 D11:1)
(connect I1:1 D11:2)
(connect D11:1 D12:1)
(connect D11:3 D12:2)
(connect D14:3 D13:0)
(connect D6:2 D14:0)
(connect I1:1 D14:1)
(connect D14:2 D15:0)
(connect I1:1 D15:1)
(connect D15:1 D16:1)
(connect D1:1 D16:2)
(connect D14:1 D16:3)
(connect D18:1 D16:4)
(connect D19:1 D16:5)
(connect D0:2 D17:0)
(connect I1:1 D17:1)
(connect D17:1 D18:0)
(connect I1:1 D18:1)
(connect D20:1 D19:0)
(connect I1:1 D19:1)
(connect D17:2 D20:0)
(connect I1:1 D20:1)
(connect I1:1 D21:1)
(connect D7:1 O1:1)
(connect D8:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 971 693)
(anchorPt 307 53)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 122 25))
(open
(extent 675 55))
(terminals on)
(pinCenter -190 180))
(devCarrierFor 1
(active icon)
(icon
(extent 152 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 400 590))
(devCarrierFor 2
(active icon)
(icon
(extent 150 25))
(open
(extent 224 55))
(terminals on)
(pinCenter 190 480))
(devCarrierFor 3
(active icon)
(icon
(extent 113 16))
(open
(extent 373 33))
(terminals on)
(pinCenter -20 180))
(devCarrierFor 4
(active icon)
(icon
(extent 145 25))
(open
(extent 107 70))
(terminals on)
(pinCenter 130 120))
(devCarrierFor 6
(active icon)
(icon
(extent 224 16))
(open
(extent 61 32))
(terminals on)
(pinCenter 350 80))
(devCarrierFor 7
(active icon)
(icon
(extent 177 25))
(open
(extent 586 68))
(terminals on)
(pinCenter 190 180))
(devCarrierFor 8
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 580 80))
(devCarrierFor 9
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 580 170))
(devCarrierFor 10
(active icon)
(icon
(extent 147 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 310 530))
(devCarrierFor 11
(active icon)
(icon
(extent 145 16))
(open
(extent 174 32))
(terminals on)
(pinCenter 90 560))
(devCarrierFor 12
(active icon)
(icon
(extent 162 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 450 430))
(devCarrierFor 13
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 570 430))
(devCarrierFor 14
(active icon)
(icon
(extent 114 16))
(open
(extent 174 35))
(terminals on)
(pinCenter 290 420))
(devCarrierFor 15
(active icon)
(icon
(extent 171 34))
(terminals on)
(pinCenter 280 240))
(devCarrierFor 16
(active icon)
(icon
(extent 152 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 460 290))
(devCarrierFor 17
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 580 340))
(devCarrierFor 18
(active icon)
(icon
(extent 145 25))
(open
(extent 325 70))
(terminals on)
(pinCenter -40 240))
(devCarrierFor 19
(active icon)
(icon
(extent 152 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 50 390))
(devCarrierFor 20
(active icon)
(icon
(extent 152 25))
(open
(extent 196 53))
(terminals on)
(pinCenter -160 420))
(devCarrierFor 21
(active icon)
(icon
(extent 237 25))
(open
(extent 390 53))
(terminals on)
(pinCenter -160 310))
(devCarrierFor 22
(active icon)
(icon
(extent 102 25))
(open
(extent 236 53))
(terminals on)
(pinCenter -190 90))
(connect D21:2 D0:0
(points 5 -137 100 -120 100 -120 130 -190 130 -190 165))
(connect I1:1 D0:1
(points 4 -307 293 -280 293 -280 180 -254 180))
(connect D9:2 D1:0
(points 3 386 540 400 540 400 575))
(connect I1:1 D1:1
(points 6 -307 293 -270 293 -270 520 210 520 210 590 321 590))
(connect D12:1 D2:0
(points 7 587 430 610 430 610 470 350 470 350 450 190 450 190 465))
(connect D3:1 D2:1
(points 8 39 180 60 180 60 220 170 220 170 440 90 440 90 480 112 480))
(connect D0:1 D3:0
(points 5 -127 170 -110 170 -110 150 -20 150 -20 169))
(connect I1:1 D3:1
(points 6 -307 293 -140 293 -140 220 -100 220 -100 180 -79 180))
(connect D3:1 D4:1
(points 6 39 180 50 180 50 160 40 160 40 120 55 120))
(connect D4:1 D5:0
(points 5 205 110 220 110 220 40 350 40 350 69))
(connect D4:2 D6:0
(points 5 205 130 220 130 220 150 190 150 190 165))
(connect D16:1 D7:0
(points 5 597 340 620 340 620 50 580 50 580 69))
(connect I1:1 D7:1
(points 6 -307 293 -280 293 -280 50 480 50 480 80 560 80))
(connect D7:0 D8:0
(points 2 580 90 580 159))
(connect D16:1 D8:1
(points 6 597 340 620 340 620 260 540 260 540 170 560 170))
(connect D2:1 D9:0
(points 3 267 470 310 470 310 515))
(connect I1:1 D9:1
(points 4 -307 293 -270 293 -270 520 234 520))
(connect D10:1 D9:2
(points 4 165 560 190 560 190 540 234 540))
(connect D13:1 D11:1
(points 2 349 420 366 420))
(connect I1:1 D11:2
(points 4 -307 293 360 293 360 440 366 440))
(connect D11:1 D12:1
(points 2 533 420 553 420))
(connect D11:3 D12:2
(points 2 533 440 553 440))
(connect D14:3 D13:0
(points 7 368 250 380 250 380 270 370 270 370 280 290 280 290 409))
(connect D6:2 D14:0
(points 5 281 190 290 190 290 210 280 210 280 220))
(connect I1:1 D14:1
(points 4 -307 293 60 293 60 240 192 240))
(connect D14:2 D15:0
(points 3 368 240 460 240 460 275))
(connect I1:1 D15:1
(points 4 -307 293 37 293 37 290 381 290))
(connect D15:1 D16:1
(points 4 538 280 550 280 550 320 563 320))
(connect D1:1 D16:2
(points 6 478 580 620 580 620 390 540 390 540 330 563 330))
(connect D14:1 D16:3
(points 4 368 230 470 230 470 340 563 340))
(connect D18:1 D16:4
(points 4 128 380 150 380 150 350 563 350))
(connect D19:1 D16:5
(points 6 -82 410 -60 410 -60 430 160 430 160 360 563 360))
(connect D0:2 D17:0
(points 5 -127 190 -110 190 -110 210 -40 210 -40 225))
(connect I1:1 D17:1
(points 4 -307 293 -140 293 -140 240 -115 240))
(connect D17:1 D18:0
(points 3 35 230 50 230 50 375))
(connect I1:1 D18:1
(points 4 -307 293 -270 293 -270 390 -29 390))
(connect D20:1 D19:0
(points 5 -39 300 -20 300 -20 350 -160 350 -160 405))
(connect I1:1 D19:1
(points 4 -307 293 -270 293 -270 420 -239 420))
(connect D17:2 D20:0
(points 5 35 250 70 250 70 280 -160 280 -160 295))
(connect I1:1 D20:1
(points 4 -307 293 -300 293 -300 310 -281 310))
(connect I1:1 D21:1
(points 4 -307 293 -280 293 -280 90 -244 90))
(connect D7:1 O1:1
(points 4 600 80 630 80 630 113 663 113))
(connect D8:1 O2:1
(points 4 600 170 630 170 630 473 663 473)))
(stackingOrder 3 0 7 8 1 10 9 4 11 12 6 5 17 2 13 18 16 19 20 21 14 15))))
(configuration
(connect D5:4 D0:0)
(connect D0:1 D1:1)
(connect D4:0 D2:0)
(connect D10:2 D2:1)
(connect D2:0 D3:0)
(connect D10:1 D4:1)
(connect D6:1 D5:1)
(connect D1:1 D8:1)
(connect D8:1 D9:1)
(connect D9:1 D10:0)
(connect D1:1 D10:1)
(connect D4:1 O1:1)
(connect D2:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 1192 429)
(anchorPt -109 10)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 270 220))
(devCarrierFor 3
(active icon)
(icon
(extent 99 25))
(open
(extent 289 42))
(terminals on)
(pinCenter 380 220))
(devCarrierFor 7
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 870 300))
(devCarrierFor 8
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 870 350))
(devCarrierFor 9
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 870 260))
(devCarrierFor 10
(active icon)
(icon
(extent 191 45))
(open
(extent 232 82))
(terminals on)
(pinCenter 490 100))
(devCarrierFor 11
(active icon)
(icon
(extent 198 16))
(open
(extent 262 32))
(terminals on)
(pinCenter 270 100))
(devCarrierFor 12
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 401 142)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 970 90))
(devCarrierFor 13
(active icon)
(icon
(extent 108 16))
(open
(extent 349 32))
(terminals on)
(pinCenter 520 220))
(devCarrierFor 15
(active icon)
(icon
(extent 137 25))
(open
(extent 229 58))
(terminals on)
(pinCenter 670 220))
(devCarrierFor 18
(active icon)
(icon
(extent 82 25))
(terminals on)
(pinCenter 760 270))
(connect D5:4 D0:0
(points 5 588 110 610 110 610 150 270 150 270 191))
(connect D0:1 D1:1
(points 2 307 220 328 220))
(connect D4:0 D2:0
(points 2 870 270 870 289))
(connect D10:2 D2:1
(points 4 803 280 820 280 820 300 850 300))
(connect D2:0 D3:0
(points 2 870 310 870 339))
(connect D10:1 D4:1
(points 2 803 260 850 260))
(connect D6:1 D5:1
(points 2 371 100 392 100))
(connect D1:1 D8:1
(points 2 432 220 463 220))
(connect D8:1 D9:1
(points 2 576 220 599 220))
(connect D9:1 D10:0
(points 3 741 210 760 210 760 255))
(connect D1:1 D10:1
(points 4 432 220 450 220 450 270 716 270))
(connect D4:1 O1:1
(points 4 890 260 1190 260 1190 94 1300 94))
(connect D2:1 O2:1
(points 4 890 300 910 300 910 314 1300 314)))
(stackingOrder 0 6 1 8 9 7 4 2 3 5 10))))
(context 71
(properties
(name "DoesMoveCauseCycle")
(trigMode deg)
(nextID 8)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Bool")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "# most recent moves to check")
(expr 1 "ts = totsize(OurMoves)-1, (ts<7 ? ts : 7)"))
(interface
(output 1
(name "ts")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "cyclic predecessor?")
(cases 1
"(prevMove.from==move.to) AND (prevMove.to==move.from) AND (prevMove.piece==KnownBoard[move.from])"
))
(interface
(input 1
(name "prevMove")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "prev move")
(expr 1 "OurMoves[numMoves-i]"))
(interface
(input 1
(name "numMoves")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 5 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 6 EXITCONTEXT)
(device 7 CONSTANT
(properties
(name "FALSE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect D0:2 D1:1)
(connect D3:1 D2:1)
(connect I1:1 D2:2)
(connect D0:1 D3:1)
(connect D1:1 D3:2)
(connect D5:1 D4:1)
(connect D2:1 D5:1)
(connect D7:1 D5:2)
(connect D4:0 D6:0)
(connect D1:0 D7:0)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 865 240)
(anchorPt -2 4)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 206 25))
(open
(extent 323 42))
(terminals on)
(pinCenter 130 60))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 300 120))
(devCarrierFor 2
(active icon)
(icon
(extent 137 25))
(open
(extent 724 74))
(terminals on)
(pinCenter 560 110))
(devCarrierFor 3
(active icon)
(icon
(extent 72 25))
(open
(extent 202 89))
(terminals on)
(pinCenter 410 110))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 760 120))
(devCarrierFor 5
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 700 120))
(devCarrierFor 6
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 760 180))
(devCarrierFor 7
(active icon)
(icon
(extent 48 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 300 190))
(connect D0:2 D1:1
(points 4 235 70 250 70 250 120 262 120))
(connect D3:1 D2:1
(points 4 448 110 460 110 460 100 489 100))
(connect I1:1 D2:2
(points 8 2 115 10 115 10 110 0 110 0 30 470 30 470 120 489 120))
(connect D0:1 D3:1
(points 4 235 50 360 50 360 100 371 100))
(connect D1:1 D3:2
(points 2 337 120 371 120))
(connect D5:1 D4:1
(points 2 717 120 740 120))
(connect D2:1 D5:1
(points 4 631 100 650 100 650 110 683 110))
(connect D7:1 D5:2
(points 4 326 190 650 190 650 130 683 130))
(connect D4:0 D6:0
(points 2 760 130 760 169))
(connect D1:0 D7:0
(points 2 300 148 300 179))
(connect D4:1 O1:1
(points 4 780 120 823 120 823 115 866 115)))
(stackingOrder 1 5 7 4 6 2 3 0))))
(context 37
(properties
(name "DoesPieceHaveOpenPath")
(trigMode deg)
(nextID 12)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 NOTE
(properties
(name "Comment")
(text2 7 "Does the piece at location \'loc\'" "have at least two adjacent"
"open squares to roam through" "available.  This determines if the"
"specified piece has enough" "maneuverability to attack." "")))
(device 2 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "border square open?")
(cases 1 "(square!=-1 ? KnownBoard[square]==0 : 0)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "border sq index")
(expr 1 "BorderSquares[loc, b]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "b")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "adjacent square?")
(cases 1 " NOT IsPieceBuried(boardLoc)"))
(interface
(input 1
(name "boardLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 9 EXITCONTEXT)
(device 10 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 11 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect D3:1 D2:1)
(connect I1:1 D3:1)
(connect D1:1 D3:2)
(connect D2:1 D4:0)
(connect D3:1 D4:1)
(connect D7:1 D5:1)
(connect D5:0 D6:0)
(connect D4:1 D7:1)
(connect D8:1 D7:2)
(connect D1:0 D8:0)
(connect D5:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1032 399)
(anchorPt 2 -5)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 279 115)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 810 100))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 110 150))
(devCarrierFor 3
(active icon)
(icon
(extent 147 25))
(open
(extent 304 53))
(terminals on)
(pinCenter 420 160))
(devCarrierFor 5
(active icon)
(icon
(extent 107 25))
(open
(extent 172 42))
(terminals on)
(pinCenter 250 160))
(devCarrierFor 7
(active icon)
(icon
(extent 121 25))
(open
(extent 232 58))
(terminals on)
(pinCenter 530 220))
(devCarrierFor 8
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 730 210))
(devCarrierFor 9
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 730 280))
(devCarrierFor 10
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 660 210))
(devCarrierFor 11
(active icon)
(icon
(extent 34 23))
(open
(extent 84 30)
(showFormat int))
(pinCenter 110 240))
(connect D3:1 D2:1
(points 2 306 160 344 160))
(connect I1:1 D3:1
(points 6 -2 204 10 204 10 100 180 100 180 150 194 150))
(connect D1:1 D3:2
(points 4 147 150 170 150 170 170 194 170))
(connect D2:1 D4:0
(points 3 496 150 530 150 530 205))
(connect D3:1 D4:1
(points 4 306 160 330 160 330 220 467 220))
(connect D7:1 D5:1
(points 2 677 210 710 210))
(connect D5:0 D6:0
(points 2 730 220 730 269))
(connect D4:1 D7:1
(points 4 593 210 610 210 610 200 643 200))
(connect D8:1 D7:2
(points 6 129 240 150 240 150 260 610 260 610 220 643 220))
(connect D1:0 D8:0
(points 2 110 178 110 226))
(connect D5:1 O1:1
(points 4 750 210 810 210 810 204 1029 204)))
(stackingOrder 0 1 3 5 6 7 8 2 4))))
(context 121
(properties
(name "DoTheKamikaze")
(trigMode deg)
(nextID 20)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "doMove")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "Is this a kamikaze piece?")
(cases 1 "KamikazePiece==piece"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "my piece")
(expr 1 "KnownBoard[move.from]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 6 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 10 IFTHENELSE
(properties
(name "Is the opponent unknown & unmovable?")
(cases 1 "KnownBoard[move.to]==-1"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 FORMULA
(properties
(name "NumPiecesTakenByKamikaze++")
(expr 1 "NumPiecesTakenByKamikaze = NumPiecesTakenByKamikaze+1")))
(device 12 IFTHENELSE
(properties
(name "should we stop?")
(cases 1
"(weight<=2 ? NumPiecesTakenByKamikaze>=4 : NumPiecesTakenByKamikaze>=6)"))
(interface
(input 1
(name "weight")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 13 FORMULA
(properties
(name "weight")
(expr 1 "WeightOfPiece[piece-1000]"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORMULA
(properties
(name "KamikazePiece = 0")
(expr 1 "KamikazePiece = 0")))
(device 15 IFTHENELSE
(properties
(name "randomness")
(cases 1
"(move.to==(move.from+10) OR move.to==(move.from-10) ? random(0, 1)<0.55 : random(0, 1)<0.35)"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 17 IFTHENELSE
(properties
(name "probably a bomb?")
(cases 1 "(IsProbablyABomb(move.to) AND random(0, 1)<0.1)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 18 IFTHENELSE
(properties
(name "2nd row destination?")
(cases 1 "move.to>=70 AND move.to<=79"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 19 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect D2:1 D0:1)
(connect D12:2 D1:0)
(connect D2:1 D1:1)
(connect D3:1 D1:2)
(connect I1:1 D2:1)
(connect I1:1 D3:1)
(connect D14:1 D4:0)
(connect I1:1 D4:1)
(connect D1:2 D5:1)
(connect D1:3 D5:2)
(connect D8:2 D6:0)
(connect I1:1 D6:1)
(connect D4:0 D7:0)
(connect D0:1 D8:0)
(connect D9:1 D8:1)
(connect D2:1 D9:1)
(connect D8:1 D10:0)
(connect D13:2 D11:0)
(connect I1:1 D11:1)
(connect D6:1 D12:0)
(connect I1:1 D12:1)
(connect D5:1 D13:0)
(connect I1:1 D13:1)
(connect D13:1 D14:1)
(connect D11:1 D14:2)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1015 569)
(anchorPt 36 42)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 171 25))
(open
(extent 177 53))
(terminals on)
(pinCenter 210 60))
(devCarrierFor 1
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 610 190))
(devCarrierFor 2
(active icon)
(icon
(extent 61 16))
(open
(extent 188 32))
(terminals on)
(pinCenter 30 150))
(devCarrierFor 3
(active icon)
(icon
(extent 55 16))
(open
(extent 84 32))
(terminals on)
(pinCenter 450 350))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 790 390))
(devCarrierFor 6
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 750 240))
(devCarrierFor 10
(active icon)
(icon
(extent 277 25))
(open
(extent 195 53))
(terminals on)
(pinCenter 450 100))
(devCarrierFor 11
(active icon)
(icon
(extent 222 16))
(open
(extent 438 32))
(terminals on)
(pinCenter 790 460))
(devCarrierFor 12
(active icon)
(icon
(extent 112 25))
(open
(extent 554 56))
(terminals on)
(pinCenter 400 20))
(devCarrierFor 13
(active icon)
(icon
(extent 44 16))
(open
(extent 232 32))
(terminals on)
(pinCenter 260 20))
(devCarrierFor 14
(active icon)
(icon
(extent 130 16))
(open
(extent 153 32))
(terminals on)
(pinCenter 580 30))
(devCarrierFor 15
(active icon)
(icon
(extent 85 25))
(open
(extent 664 53))
(terminals on)
(pinCenter 650 380))
(devCarrierFor 17
(active icon)
(icon
(extent 125 25))
(open
(extent 359 53))
(terminals on)
(pinCenter 670 120))
(devCarrierFor 18
(active icon)
(icon
(extent 144 25))
(open
(extent 228 53))
(terminals on)
(pinCenter 620 300))
(devCarrierFor 19
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 820 310))
(connect D2:1 D0:1
(points 4 63 150 90 150 90 60 122 60))
(connect D12:2 D1:0
(points 5 735 130 760 130 760 160 610 160 610 170))
(connect D2:1 D1:1
(points 4 63 150 100 150 100 180 517 180))
(connect D3:1 D1:2
(points 4 480 350 500 350 500 200 517 200))
(connect I1:1 D2:1
(points 4 -36 242 -24 242 -24 150 -3 150))
(connect I1:1 D3:1
(points 4 -36 242 -10 242 -10 350 420 350))
(connect D14:1 D4:0
(points 5 837 310 860 310 860 350 790 350 790 379))
(connect I1:1 D4:1
(points 10 -36 242 -10 242 -10 350 400 350 400 380 590 380 590 420 720 420 720
390 770 390))
(connect D1:2 D5:1
(points 4 702 190 720 190 720 230 733 230))
(connect D1:3 D5:2
(points 4 702 200 710 200 710 250 733 250))
(connect D8:2 D6:0
(points 5 458 30 480 30 480 60 450 60 450 85))
(connect I1:1 D6:1
(points 4 -36 242 -20 242 -20 100 309 100))
(connect D4:0 D7:0
(points 2 790 400 790 449))
(connect D0:1 D8:0
(points 5 298 50 320 50 320 -10 400 -10 400 5))
(connect D9:1 D8:1
(points 2 284 20 341 20))
(connect D2:1 D9:1
(points 4 63 150 90 150 90 20 235 20))
(connect D8:1 D10:0
(points 5 458 10 480 10 480 0 580 0 580 19))
(connect D13:2 D11:0
(points 5 694 310 710 310 710 340 650 340 650 365))
(connect I1:1 D11:1
(points 6 -36 242 -10 242 -10 350 400 350 400 380 605 380))
(connect D6:1 D12:0
(points 3 591 90 670 90 670 105))
(connect I1:1 D12:1
(points 8 -36 242 -20 242 -20 100 290 100 290 140 600 140 600 120 605 120))
(connect D5:1 D13:0
(points 7 767 240 790 240 790 280 710 280 710 270 620 270 620 285))
(connect I1:1 D13:1
(points 8 -36 242 -10 242 -10 350 400 350 400 380 520 380 520 300 545 300))
(connect D13:1 D14:1
(points 4 694 290 710 290 710 300 803 300))
(connect D11:1 D14:2
(points 4 695 370 720 370 720 320 803 320))
(connect D4:1 O1:1
(points 4 810 390 969 390 969 242 978 242)))
(stackingOrder 3 0 2 9 10 1 5 8 6 12 4 14 11 7 13))))
(context 161
(properties
(name "DoTheStrafe")
(trigMode deg)
(nextID 49)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "Is there a strafing piece?")
(cases 1 "strafingPiece>0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 19 CONTEXT
(properties
(name "WhereIsIt")
(trigMode deg)
(nextID 4)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "location")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORRANGE
(properties
(from 99)
(thru 0)
(step -1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "there?")
(cases 1 "KnownBoard[loc]==strafingPiece"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 3 EXITCONTEXT)
(configuration
(connect D0:1 D1:1)
(connect D1:1 D2:0)
(connect D0:1 D2:1)
(connect D2:0 D3:0)
(connect D2:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 467 225)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active open)
(icon
(iconImage "loop.icn"))
(open
(extent 110 82))
(pinCenter 90 100))
(devCarrierFor 1
(active icon)
(icon
(extent 45 25))
(open
(extent 236 53))
(terminals on)
(pinCenter 220 90))
(devCarrierFor 2
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 320 90))
(devCarrierFor 3
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 330 150))
(connect D0:1 D1:1
(points 4 147 100 170 100 170 90 195 90))
(connect D1:1 D2:0
(points 5 245 80 270 80 270 60 320 60 320 79))
(connect D0:1 D2:1
(points 6 147 100 180 100 180 130 270 130 270 90 300 90))
(connect D2:0 D3:0
(points 4 320 100 320 120 330 120 330 139))
(connect D2:1 O1:1
(points 4 340 90 360 90 360 112 466 112)))
(stackingOrder 0 1 2 3))))
(device 25 IFTHENELSE
(properties
(name "unknown movable?")
(cases 1 "(loc==-1 ? 0 : KnownBoard[loc]==-2)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 26 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 27 FORRANGE
(properties
(name "For (1-3)")
(from 1)
(thru 3)
(step 1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 29 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "E")
(optional yes))
(input 5
(name "D")
(optional yes))
(input 6
(name "F")
(optional yes))
(output 1
(name "Data"))))
(device 31 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 32 EXITCONTEXT)
(device 33 IFTHENELSE
(properties
(name "can go down?")
(cases 1 "(loc+10<=99 ? KnownBoard[loc+10]==0 : 0)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 35 FORMULA
(properties
(name "loc+10")
(expr 1 "loc+10"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 36 IFTHENELSE
(properties
(name "can go left?")
(cases 1
"(BorderSquares[loc, 2]!=-1 ? KnownBoard[BorderSquares[loc, 2]]==0 : 0)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 37 IFTHENELSE
(properties
(name "can go right?")
(cases 1
"(BorderSquares[loc, 3]!=-1 ? KnownBoard[BorderSquares[loc, 3]]==0 : 0)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 38 FORMULA
(properties
(name "loc-1")
(expr 1 "loc-1"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 39 FORMULA
(properties
(name "loc+1")
(expr 1 "loc+1"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 40 FORMULA
(properties
(name "StrafingPiece = 0")
(expr 1 "StrafingPiece = 0")))
(device 41 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 42 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 43 CONTEXT
(properties
(name "Unknown Fixed Locations")
(trigMode deg)
(nextID 7)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "locations")
(lock constraints)
(optional yes)))
(deviceList
(device 0 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 1 IFTHENELSE
(properties
(name "unknown fixed?")
(cases 1 "(loc==-1 ? 0 : KnownBoard[loc]==-1)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 6 FORRANGE
(properties
(name "For (1-3)")
(from 1)
(thru 3)
(step 1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(configuration
(connect D1:1 D0:0)
(connect D2:1 D0:1)
(connect D2:1 D1:1)
(connect I1:1 D2:1)
(connect D4:1 D2:2)
(connect D0:1 D3:1)
(connect D4:0 D3:2)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 744 298)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 520 100))
(devCarrierFor 1
(active icon)
(icon
(extent 106 25))
(open
(extent 256 53))
(terminals on)
(pinCenter 390 80))
(devCarrierFor 2
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 250 80))
(devCarrierFor 4
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 610 110))
(devCarrierFor 6
(active icon)
(icon
(extent 68 52)
(iconImage "loop.icn"))
(open
(extent 110 82))
(pinCenter 100 110))
(connect D1:1 D0:0
(points 3 445 70 520 70 520 89))
(connect D2:1 D0:1
(points 6 302 80 320 80 320 50 470 50 470 100 500 100))
(connect D2:1 D1:1
(points 2 302 80 334 80))
(connect I1:1 D2:1
(points 6 0 148 10 148 10 40 160 40 160 70 198 70))
(connect D4:1 D2:2
(points 4 136 110 160 110 160 90 198 90))
(connect D0:1 D3:1
(points 2 540 100 577 100))
(connect D4:0 D3:2
(points 5 100 138 100 160 560 160 560 120 577 120))
(connect D3:1 O1:1
(points 4 643 110 660 110 660 148 743 148)))
(stackingOrder 0 1 2 3 4))))
(device 44 IFTHENELSE
(properties
(name "unknown fixed?")
(cases 1 "(loc==-1 ? 0 : KnownBoard[loc]==-1)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 45 FORMULA
(properties
(name "down square")
(expr 1 "BorderSquares[from, 1]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 46 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 47 IFTHENELSE
(properties
(name "any unknown fixed?")
(cases 1 "totSize(uf)>0"))
(interface
(input 1
(name "uf")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 48 FORMULA
(properties
(name "pick one")
(expr 1 "uf[floor(random(0, totSize(uf)-0.1))]"))
(interface
(input 1
(name "uf")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D0:1 D1:0)
(connect D3:1 D2:1)
(connect D1:1 D3:1)
(connect D4:1 D3:2)
(connect D17:0 D4:0)
(connect D22:1 D5:1)
(connect D6:1 D5:2)
(connect D9:1 D5:3)
(connect D12:1 D5:4)
(connect D13:1 D5:5)
(connect D20:1 D5:6)
(connect D2:1 D6:0)
(connect D3:1 D6:1)
(connect D16:0 D7:0)
(connect D4:0 D8:0)
(connect D1:1 D8:1)
(connect D8:1 D9:0)
(connect D1:1 D9:1)
(connect D8:0 D10:0)
(connect D1:1 D10:1)
(connect D10:0 D11:0)
(connect D1:1 D11:1)
(connect D10:1 D12:0)
(connect D1:1 D12:1)
(connect D11:1 D13:0)
(connect D1:1 D13:1)
(connect D11:0 D14:0)
(connect D5:1 D15:0)
(connect D1:1 D15:1)
(connect D15:0 D16:0)
(connect D5:1 D16:1)
(connect D19:0 D17:0)
(connect D1:1 D17:1)
(connect D19:1 D18:1)
(connect D1:1 D19:1)
(connect D18:1 D20:0)
(connect D19:1 D20:1)
(connect D17:1 D21:1)
(connect D21:1 D22:0)
(connect D17:1 D22:1)
(connect D15:1 O1:1)
(connect D16:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 1013 717)
(anchorPt 96 60)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 171 25))
(open
(extent 177 53))
(terminals on)
(pinCenter 60 -10))
(devCarrierFor 19
(active icon)
(icon
(extent 64 16))
(terminals on)
(pinCenter 240 10))
(devCarrierFor 25
(active icon)
(icon
(extent 133 25))
(open
(extent 260 53))
(terminals on)
(pinCenter 360 250))
(devCarrierFor 26
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 200 250))
(devCarrierFor 27
(active icon)
(icon
(extent 68 52)
(iconImage "loop.icn"))
(open
(extent 110 82))
(pinCenter 60 250))
(devCarrierFor 29
(active icon)
(icon
(extent 29 65))
(open
(extent 12 122))
(terminals on)
(pinCenter 570 310))
(devCarrierFor 31
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 470 270))
(devCarrierFor 32
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 680 320))
(devCarrierFor 33
(active icon)
(icon
(extent 96 25))
(open
(extent 325 70))
(terminals on)
(pinCenter 60 340))
(devCarrierFor 35
(active icon)
(icon
(extent 46 16))
(open
(extent 76 32))
(terminals on)
(pinCenter 220 360))
(devCarrierFor 36
(active icon)
(icon
(extent 81 25))
(open
(extent 492 70))
(terminals on)
(pinCenter 60 410))
(devCarrierFor 37
(active icon)
(icon
(extent 91 25))
(open
(extent 492 70))
(terminals on)
(pinCenter 60 470))
(devCarrierFor 38
(active icon)
(icon
(extent 35 16))
(open
(extent 76 32))
(terminals on)
(pinCenter 210 420))
(devCarrierFor 39
(active icon)
(icon
(extent 38 16))
(open
(extent 76 32))
(terminals on)
(pinCenter 210 480))
(devCarrierFor 40
(active icon)
(icon
(extent 118 16))
(open
(extent 142 32))
(terminals on)
(pinCenter 60 530))
(devCarrierFor 41
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 680 200))
(devCarrierFor 42
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 680 260))
(devCarrierFor 43
(active icon)
(icon
(extent 176 16))
(terminals on)
(pinCenter 60 140))
(devCarrierFor 44
(active icon)
(icon
(extent 106 25))
(open
(extent 256 53))
(terminals on)
(pinCenter 210 70))
(devCarrierFor 45
(active icon)
(icon
(extent 89 25))
(open
(extent 182 42))
(terminals on)
(pinCenter 60 60))
(devCarrierFor 46
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 350 70))
(devCarrierFor 47
(active icon)
(icon
(extent 136 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 240 140))
(devCarrierFor 48
(active icon)
(icon
(extent 58 16))
(open
(extent 255 32))
(terminals on)
(pinCenter 390 150))
(connect D0:1 D1:0
(points 3 148 -20 240 -20 240 -1))
(connect D3:1 D2:1
(points 2 252 250 291 250))
(connect D1:1 D3:1
(points 6 274 10 290 10 290 40 130 40 130 240 148 240))
(connect D4:1 D3:2
(points 4 96 250 120 250 120 260 148 260))
(connect D17:0 D4:0
(points 2 60 150 60 221))
(connect D22:1 D5:1
(points 4 421 150 520 150 520 280 553 280))
(connect D6:1 D5:2
(points 4 490 270 510 270 510 290 553 290))
(connect D9:1 D5:3
(points 4 245 360 280 360 280 300 553 300))
(connect D12:1 D5:4
(points 4 230 420 260 420 260 310 553 310))
(connect D13:1 D5:5
(points 4 231 480 270 480 270 320 553 320))
(connect D20:1 D5:6
(points 6 370 70 440 70 440 180 500 180 500 330 553 330))
(connect D2:1 D6:0
(points 3 429 240 470 240 470 259))
(connect D3:1 D6:1
(points 6 252 250 270 250 270 290 440 290 440 270 450 270))
(connect D16:0 D7:0
(points 2 680 270 680 309))
(connect D4:0 D8:0
(points 2 60 278 60 325))
(connect D1:1 D8:1
(points 6 274 10 290 10 290 40 -10 40 -10 340 9 340))
(connect D8:1 D9:0
(points 3 110 330 220 330 220 349))
(connect D1:1 D9:1
(points 12 274 10 290 10 290 40 -10 40 -10 470 -20 470 -20 560 140 560 140 480
160 480 160 360 194 360))
(connect D8:0 D10:0
(points 2 60 355 60 395))
(connect D1:1 D10:1
(points 6 274 10 290 10 290 40 -10 40 -10 410 17 410))
(connect D10:0 D11:0
(points 2 60 425 60 455))
(connect D1:1 D11:1
(points 6 274 10 290 10 290 40 -10 40 -10 470 12 470))
(connect D10:1 D12:0
(points 5 103 400 120 400 120 390 210 390 210 409))
(connect D1:1 D12:1
(points 12 274 10 290 10 290 40 -10 40 -10 470 -20 470 -20 560 140 560 140 480
160 480 160 420 190 420))
(connect D11:1 D13:0
(points 5 108 460 130 460 130 450 210 450 210 469))
(connect D1:1 D13:1
(points 10 274 10 290 10 290 40 -10 40 -10 470 -20 470 -20 560 140 560 140 480
188 480))
(connect D11:0 D14:0
(points 2 60 485 60 519))
(connect D5:1 D15:0
(points 7 587 310 610 310 610 260 640 260 640 170 680 170 680 189))
(connect D1:1 D15:1
(points 4 274 10 530 10 530 200 660 200))
(connect D15:0 D16:0
(points 2 680 210 680 249))
(connect D5:1 D16:1
(points 4 587 310 610 310 610 260 660 260))
(connect D19:0 D17:0
(points 2 60 75 60 129))
(connect D1:1 D17:1
(points 8 274 10 290 10 290 40 -10 40 -10 110 -50 110 -50 140 -31 140))
(connect D19:1 D18:1
(points 6 107 60 120 60 120 50 140 50 140 70 154 70))
(connect D1:1 D19:1
(points 6 274 10 290 10 290 40 -10 40 -10 60 13 60))
(connect D18:1 D20:0
(points 5 265 60 300 60 300 40 350 40 350 59))
(connect D19:1 D20:1
(points 6 107 60 120 60 120 50 290 50 290 70 330 70))
(connect D17:1 D21:1
(points 2 150 140 169 140))
(connect D21:1 D22:0
(points 5 310 130 340 130 340 120 390 120 390 139))
(connect D17:1 D22:1
(points 6 150 140 160 140 160 110 330 110 330 150 358 150))
(connect D15:1 O1:1
(points 4 700 200 720 200 720 118 916 118))
(connect D16:1 O2:1
(points 4 700 260 760 260 760 478 916 478)))
(stackingOrder 4 2 7 3 9 12 13 14 6 15 16 8 0 1 18 20 5 19 21 22 17 10 11))))
(context 127
(properties
(name "FindEvasiveMove")
(trigMode deg)
(nextID 43)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "NoEscape")
(lock constraints)
(optional yes)))
(deviceList
(device 5 NOTE
(properties
(name "Comment")
(text2 35 "This function is called when we want to"
"find an evasive move from an opponent\'s"
"piece.  Our opponent knows what this piece"
"is, and he knows that we know that he knows"
"what this piece is.  In other words, we" "want to amscray!" ""
"There is a StraVEEgo rule, that prohibits"
"a piece from moving back and forth between"
"two squares.  So we should probably try"
"to NOT choose a path that leads to this" "situation." ""
"As far as evasion, the rank of our piece"
"dictates how we schmaneuver.  For example,"
"if we are a scout (#9), we have several"
"options -- like moving multiple squares."
"We may also decide to attack an opponent\'s"
"piece that is unknown to us (so that we"
"may at least learn something before our demise)." ""
"If we are a high-ranking piece (say a"
"general or colonel) we may not be inclined"
"to give up too easily.  It could cost us"
"dearly (perhaps the game).  We may also"
"not wish to give up a Miner easily (especially"
"if he is the sole surviving miner).  For"
"these cases, we probably want to retreat"
"towards a safe location (home or near a" "more powerful ally piece." ""
"Needless to say, this function will inevitably"
"become convoluted and complicated." "" "")))
(device 6 IFTHENELSE
(properties
(name "our piece high ranking, miner, or other?")
(cases 2 "(KnownBoard[from]>=1003 AND KnownBoard[from]<=1009)"
"(KnownBoard[from]>=1022 AND KnownBoard[from]<=1026)"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 15 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "F")
(optional yes))
(input 2
(name "A")
(optional yes))
(input 3
(name "B")
(optional yes))
(output 1
(name "Data"))))
(device 19 EXITCONTEXT)
(device 23 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 31 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 32 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 34 IFTHENELSE
(properties
(name "Are my days numbered?")
(cases 1
"(OpponentsKnownBoard[from]>0) AND (from>=60) AND (OurMinerBombKillCount[KnownBoard[from]-1022]>0)"
))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 35 CONTEXT
(properties
(name "MoveSomewhereWorthwhile")
(trigMode deg)
(nextID 33)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "NoEscape")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "opp unknown unmovable?")
(cases 1 "(border>-1 ? KnownBoard[border]==-1 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 CALL
(properties
(name "Call PotentialFlagPos")
(callFunc "PotentialFlagPos")
(parmMode rev30))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Pos")
(lock name constraints)
(optional yes))))
(device 4 DECLVAR
(properties
(name "Declare Local \'BestPos\'")
(scope con)
(globalName "BestPos"))
(implementation
(value Int32
(data  0))))
(device 5 FORMULA
(properties
(name "BestPos = 100")
(expr 1 "BestPos = 100"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 IFTHENELSE
(properties
(name "Better pos?")
(cases 1 "pos<BestPos"))
(interface
(input 1
(name "pos")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "set \'BestPos\'")
(expr 1 "BestPos = pos"))
(interface
(input 1
(name "pos")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 IFTHENELSE
(properties
(name "BestPos < 100?")
(cases 1 "BestPos<100"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 DECLVAR
(properties
(name "Declare Local \'BestSquare\'")
(scope con)
(globalName "BestSquare"))
(implementation
(value Int32
(data  0))))
(device 10 FORMULA
(properties
(name "set \'BestSquare\'")
(expr 1 "BestSquare = s"))
(interface
(input 1
(name "s")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 FORMULA
(properties
(name "\'BestSquare\'")
(expr 1 "BestSquare"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 13 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 14 EXITCONTEXT)
(device 15 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 18 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 19 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 22 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 23 CONSTANT
(properties
(name "Nada"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 26 IFTHENELSE
(properties
(name "open square?")
(cases 1 "(border>-1 ? KnownBoard[border]==0 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 27 IFTHENELSE
(properties
(name "opp unknown movable?")
(cases 1 "(border>-1 ? KnownBoard[border]==-2 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 30 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 31 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, (from<=49 ? i : (i<=1 ? (i==0 ? 1 : 0) : i))]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 32 IFTHENELSE
(properties
(name "IsSquareCornered?")
(cases 1 "IsSquareCornered(location)"))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D1:1 D0:1)
(connect I1:1 D1:1)
(connect D2:1 D1:2)
(connect D5:0 D2:0)
(connect D0:1 D3:0)
(connect D1:1 D3:1)
(connect D3:1 D6:1)
(connect D6:1 D7:0)
(connect D3:1 D7:1)
(connect D2:0 D8:0)
(connect D7:0 D10:0)
(connect D1:1 D10:1)
(connect D8:1 D11:0)
(connect D11:1 D12:1)
(connect D15:1 D12:2)
(connect D17:1 D12:3)
(connect D12:1 D13:1)
(connect D13:0 D14:0)
(connect D24:2 D15:0)
(connect D23:1 D15:1)
(connect D8:0 D16:0)
(connect D21:1 D17:0)
(connect D22:1 D17:1)
(connect D16:0 D18:0)
(connect D18:0 D19:0)
(connect D23:1 D20:1)
(connect D22:1 D21:1)
(connect I1:1 D22:1)
(connect D18:1 D22:2)
(connect I1:1 D23:1)
(connect D16:1 D23:2)
(connect D20:1 D24:0)
(connect D23:1 D24:1)
(connect D13:1 O1:1)
(connect D19:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 919 554)
(anchorPt 44 -14)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 181 25))
(open
(extent 300 55))
(terminals on)
(pinCenter 360 110))
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 190 110))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 80 160))
(devCarrierFor 3
(active icon)
(icon
(extent 148 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 540 150))
(devCarrierFor 4
(active icon)
(icon
(extent 163 16))
(open
(extent 215 107))
(pinCenter 100 50))
(devCarrierFor 5
(active icon)
(icon
(extent 101 16))
(open
(extent 126 32))
(terminals on)
(pinCenter 80 80))
(devCarrierFor 6
(active icon)
(icon
(extent 80 25))
(open
(extent 126 53))
(terminals on)
(pinCenter 690 150))
(devCarrierFor 7
(active icon)
(icon
(extent 89 16))
(open
(extent 115 32))
(terminals on)
(pinCenter 760 190))
(devCarrierFor 8
(active icon)
(icon
(extent 110 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 80 240))
(devCarrierFor 9
(active icon)
(icon
(extent 188 16))
(open
(extent 224 107))
(pinCenter 300 50))
(devCarrierFor 10
(active icon)
(icon
(extent 113 16))
(open
(extent 131 32))
(terminals on)
(pinCenter 760 220))
(devCarrierFor 11
(active icon)
(icon
(extent 88 16))
(open
(extent 131 32))
(terminals on)
(pinCenter 240 260))
(devCarrierFor 12
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 710 310))
(devCarrierFor 13
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 790 310))
(devCarrierFor 14
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 790 370))
(devCarrierFor 15
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 460 370))
(devCarrierFor 18
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 80 340))
(devCarrierFor 19
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 470 480))
(devCarrierFor 22
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 80 450))
(devCarrierFor 23
(active icon)
(icon
(extent 37 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 80 540))
(devCarrierFor 26
(active icon)
(icon
(extent 96 25))
(open
(extent 291 55))
(terminals on)
(pinCenter 350 330))
(devCarrierFor 27
(active icon)
(icon
(extent 163 25))
(open
(extent 300 55))
(terminals on)
(pinCenter 370 430))
(devCarrierFor 30
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 200 440))
(devCarrierFor 31
(active icon)
(icon
(extent 99 25))
(open
(extent 429 42))
(terminals on)
(pinCenter 210 330))
(devCarrierFor 32
(active icon)
(icon
(extent 136 25))
(open
(extent 223 54))
(terminals on)
(pinCenter 500 330))
(connect D1:1 D0:1
(points 2 242 110 267 110))
(connect I1:1 D1:1
(points 6 -44 290 -30 290 -30 110 120 110 120 100 138 100))
(connect D2:1 D1:2
(points 4 117 160 130 160 130 120 138 120))
(connect D5:0 D2:0
(points 2 80 90 80 131))
(connect D0:1 D3:0
(points 3 453 100 540 100 540 139))
(connect D1:1 D3:1
(points 4 242 110 250 110 250 150 463 150))
(connect D3:1 D6:1
(points 2 616 150 647 150))
(connect D6:1 D7:0
(points 3 732 140 760 140 760 179))
(connect D3:1 D7:1
(points 4 616 150 630 150 630 190 713 190))
(connect D2:0 D8:0
(points 2 80 188 80 225))
(connect D7:0 D10:0
(points 2 760 200 760 209))
(connect D1:1 D10:1
(points 6 242 110 250 110 250 150 440 150 440 220 701 220))
(connect D8:1 D11:0
(points 3 137 230 240 230 240 249))
(connect D11:1 D12:1
(points 4 286 260 310 260 310 300 693 300))
(connect D15:1 D12:2
(points 4 480 370 580 370 580 310 693 310))
(connect D17:1 D12:3
(points 4 490 480 590 480 590 320 693 320))
(connect D12:1 D13:1
(points 2 727 310 770 310))
(connect D13:0 D14:0
(points 2 790 320 790 359))
(connect D24:2 D15:0
(points 7 570 340 600 340 600 400 470 400 470 350 460 350 460 359))
(connect D23:1 D15:1
(points 4 262 330 280 330 280 370 440 370))
(connect D8:0 D16:0
(points 2 80 255 80 311))
(connect D21:1 D17:0
(points 3 454 420 470 420 470 469))
(connect D22:1 D17:1
(points 4 252 440 270 440 270 480 450 480))
(connect D16:0 D18:0
(points 2 80 368 80 421))
(connect D18:0 D19:0
(points 2 80 478 80 529))
(connect D23:1 D20:1
(points 2 262 330 299 330))
(connect D22:1 D21:1
(points 4 252 440 270 440 270 430 286 430))
(connect I1:1 D22:1
(points 4 -44 290 140 290 140 430 148 430))
(connect D18:1 D22:2
(points 2 117 450 148 450))
(connect I1:1 D23:1
(points 4 -44 290 140 290 140 320 158 320))
(connect D16:1 D23:2
(points 2 117 340 158 340))
(connect D20:1 D24:0
(points 5 400 320 410 320 410 310 500 310 500 315))
(connect D23:1 D24:1
(points 6 262 330 280 330 280 370 420 370 420 330 429 330))
(connect D13:1 O1:1
(points 4 810 310 840 310 840 150 874 150))
(connect D19:1 O2:1
(points 4 101 540 600 540 600 430 874 430)))
(stackingOrder 2 1 0 3 4 5 6 7 8 9 10 11 13 14 16 15 12 18 19 20 21 17 22 23 24))))
(device 40 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 41 CONTEXT
(properties
(name "LowRankEvasion")
(trigMode deg)
(nextID 20)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "to")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "opp unknown unmovable?")
(cases 1 "(border>-1 ? KnownBoard[border]==-1 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 4 IFTHENELSE
(properties
(name "opp unknown movable?")
(cases 1 "(border>-1 ? KnownBoard[border]==-2 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "border square (down)")
(expr 1 "BorderSquares[from, 1]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 IFTHENELSE
(properties
(name "can we move toward opp?")
(cases 1 "(s==-1 ? 0 : KnownBoard[s]==0)"))
(interface
(input 1
(name "s")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 10 IFTHENELSE
(properties
(name "just moved next to us?")
(cases 1 "border==LastOpponentMove.to"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 12 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 13 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, 3-i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 IFTHENELSE
(properties
(name "open square?")
(cases 1 "(border>-1 ? KnownBoard[border]==0 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 15 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 16 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 17 EXITCONTEXT)
(device 18 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 19 IFTHENELSE
(properties
(name "IsSquareCornered?")
(cases 1 "IsSquareCornered(location)"))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I1:1 D1:1)
(connect D0:1 D1:2)
(connect D1:1 D2:1)
(connect D2:1 D3:0)
(connect D1:1 D3:1)
(connect D5:1 D4:1)
(connect I1:1 D5:1)
(connect D6:1 D5:2)
(connect D0:0 D6:0)
(connect D6:0 D7:0)
(connect I1:1 D7:1)
(connect D7:1 D8:1)
(connect D8:1 D9:0)
(connect D7:1 D9:1)
(connect D4:1 D10:0)
(connect D5:1 D10:1)
(connect D10:2 D11:0)
(connect D5:1 D11:1)
(connect D7:0 D12:0)
(connect I1:1 D13:1)
(connect D12:1 D13:2)
(connect D13:1 D14:1)
(connect D19:2 D15:0)
(connect D13:1 D15:1)
(connect D3:1 D16:1)
(connect D11:1 D16:2)
(connect D9:1 D16:3)
(connect D15:1 D16:4)
(connect D18:0 D17:0)
(connect D16:1 D18:1)
(connect D14:1 D19:0)
(connect D13:1 D19:1)
(connect D18:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 876 580)
(anchorPt -3 1)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 100 90))
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 220 80))
(devCarrierFor 2
(active icon)
(icon
(extent 181 25))
(open
(extent 300 55))
(terminals on)
(pinCenter 390 80))
(devCarrierFor 3
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 490 130))
(devCarrierFor 4
(active icon)
(icon
(extent 163 25))
(open
(extent 313 55))
(terminals on)
(pinCenter 390 220))
(devCarrierFor 5
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 230 220))
(devCarrierFor 6
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 100 220))
(devCarrierFor 7
(active icon)
(icon
(extent 150 25))
(open
(extent 182 42))
(terminals on)
(pinCenter 160 350))
(devCarrierFor 8
(active icon)
(icon
(extent 180 25))
(open
(extent 233 53))
(terminals on)
(pinCenter 360 350))
(devCarrierFor 9
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 480 400))
(devCarrierFor 10
(active icon)
(icon
(extent 155 25))
(open
(extent 313 55))
(terminals on)
(pinCenter 490 260))
(devCarrierFor 11
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 580 310))
(devCarrierFor 12
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 130 470))
(devCarrierFor 13
(active icon)
(icon
(extent 99 25))
(open
(extent 190 42))
(terminals on)
(pinCenter 260 460))
(devCarrierFor 14
(active icon)
(icon
(extent 96 25))
(open
(extent 291 55))
(terminals on)
(pinCenter 380 460))
(devCarrierFor 15
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 640 510))
(devCarrierFor 16
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 730 280))
(devCarrierFor 17
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 800 340))
(devCarrierFor 18
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 790 280))
(devCarrierFor 19
(active icon)
(icon
(extent 136 25))
(open
(extent 223 54))
(terminals on)
(pinCenter 540 480))
(connect I1:1 D1:1
(points 6 3 288 10 288 10 40 160 40 160 70 168 70))
(connect D0:1 D1:2
(points 2 137 90 168 90))
(connect D1:1 D2:1
(points 2 272 80 297 80))
(connect D2:1 D3:0
(points 3 483 70 490 70 490 119))
(connect D1:1 D3:1
(points 4 272 80 290 80 290 130 470 130))
(connect D5:1 D4:1
(points 2 282 220 306 220))
(connect I1:1 D5:1
(points 4 3 288 160 288 160 210 178 210))
(connect D6:1 D5:2
(points 4 137 220 150 220 150 230 178 230))
(connect D0:0 D6:0
(points 2 100 118 100 191))
(connect D6:0 D7:0
(points 4 100 248 100 290 160 290 160 335))
(connect I1:1 D7:1
(points 4 3 288 20 288 20 350 82 350))
(connect D7:1 D8:1
(points 2 237 350 267 350))
(connect D8:1 D9:0
(points 3 452 340 480 340 480 389))
(connect D7:1 D9:1
(points 4 237 350 250 350 250 400 460 400))
(connect D4:1 D10:0
(points 3 474 210 490 210 490 245))
(connect D5:1 D10:1
(points 4 282 220 290 220 290 260 410 260))
(connect D10:2 D11:0
(points 3 570 270 580 270 580 299))
(connect D5:1 D11:1
(points 6 282 220 290 220 290 260 390 260 390 310 560 310))
(connect D7:0 D12:0
(points 4 160 365 160 400 130 400 130 441))
(connect I1:1 D13:1
(points 8 3 288 20 288 20 350 60 350 60 390 190 390 190 450 208 450))
(connect D12:1 D13:2
(points 2 167 470 208 470))
(connect D13:1 D14:1
(points 2 312 460 329 460))
(connect D19:2 D15:0
(points 3 610 490 640 490 640 499))
(connect D13:1 D15:1
(points 6 312 460 320 460 320 520 450 520 450 510 620 510))
(connect D3:1 D16:1
(points 4 510 130 590 130 590 260 713 260))
(connect D11:1 D16:2
(points 4 600 310 630 310 630 270 713 270))
(connect D9:1 D16:3
(points 4 500 400 610 400 610 280 713 280))
(connect D15:1 D16:4
(points 4 660 510 680 510 680 290 713 290))
(connect D18:0 D17:0
(points 4 790 290 790 310 800 310 800 329))
(connect D16:1 D18:1
(points 2 747 280 770 280))
(connect D14:1 D19:0
(points 3 430 450 540 450 540 465))
(connect D13:1 D19:1
(points 6 312 460 320 460 320 520 450 520 450 480 469 480))
(connect D18:1 O1:1
(points 4 810 280 830 280 830 288 878 288)))
(stackingOrder 0 1 2 3 4 5 6 7 8 9 10 14 11 16 18 17 12 13 15 19))))
(device 42 CONTEXT
(properties
(name "HighRankEvasion")
(trigMode deg)
(nextID 23)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "to")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, (i==0 ? 1 : (i==1 ? 0 : i))]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "open square?")
(cases 1 "(border>-1 ? KnownBoard[border]==0 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "my piece")
(expr 1 "KnownBoard[square]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 5 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 6 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 7 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 8 IFTHENELSE
(properties
(name "just moved next to us?")
(cases 1 "border==LastOpponentMove.to"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 IFTHENELSE
(properties
(name "opp unknown movable and not miner")
(cases 1
"(border>-1 ? (KnownBoard[border]==-2 AND WeightOfPiece[piece-1000]!=8) : 0)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 10 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 12 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 13 IFTHENELSE
(properties
(name "opp unknown unmovable?")
(cases 1 "(border>-1 ? KnownBoard[border]==-1 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 14 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 16 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 17 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 18 EXITCONTEXT)
(device 19 IFTHENELSE
(properties
(name "IsSquareCornered?")
(cases 1 "IsSquareCornered(location)"))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 21 IFTHENELSE
(properties
(name "is my piece a marshal?")
(cases 1 "KnownBoard[from]==1003"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I1:1 D1:1)
(connect D0:1 D1:2)
(connect D1:1 D2:1)
(connect I1:1 D3:1)
(connect D19:2 D4:0)
(connect D3:1 D4:1)
(connect D1:1 D4:2)
(connect D4:2 D5:1)
(connect D4:3 D5:2)
(connect D20:1 D5:3)
(connect D5:1 D6:0)
(connect D1:1 D6:1)
(connect D8:2 D7:0)
(connect D10:1 D7:1)
(connect D9:1 D8:0)
(connect D10:1 D8:1)
(connect D3:1 D9:1)
(connect D10:1 D9:2)
(connect I1:1 D10:1)
(connect D11:1 D10:2)
(connect D0:0 D11:0)
(connect D13:1 D12:0)
(connect D14:1 D12:1)
(connect D14:1 D13:1)
(connect I1:1 D14:1)
(connect D15:1 D14:2)
(connect D11:0 D15:0)
(connect D6:1 D16:1)
(connect D7:1 D16:2)
(connect D12:1 D16:3)
(connect D16:1 D17:1)
(connect D17:0 D18:0)
(connect D20:2 D19:0)
(connect D1:1 D19:1)
(connect D2:1 D20:0)
(connect I1:1 D20:1)
(connect D17:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1023 541)
(anchorPt 12 22)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 100 90))
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 326 42))
(terminals on)
(pinCenter 230 80))
(devCarrierFor 2
(active icon)
(icon
(extent 96 25))
(open
(extent 291 55))
(terminals on)
(pinCenter 350 40))
(devCarrierFor 3
(active icon)
(icon
(extent 61 16))
(open
(extent 166 32))
(terminals on)
(pinCenter 250 140))
(devCarrierFor 4
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 460 130))
(devCarrierFor 5
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 620 140))
(devCarrierFor 6
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 670 170))
(devCarrierFor 7
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 570 310))
(devCarrierFor 8
(active icon)
(icon
(extent 155 25))
(open
(extent 313 55))
(terminals on)
(pinCenter 520 260))
(devCarrierFor 9
(active icon)
(icon
(extent 255 25))
(open
(extent 540 55))
(terminals on)
(pinCenter 410 220))
(devCarrierFor 10
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 200 220))
(devCarrierFor 11
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 90 220))
(devCarrierFor 12
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 480 390))
(devCarrierFor 13
(active icon)
(icon
(extent 181 25))
(open
(extent 300 55))
(terminals on)
(pinCenter 380 340))
(devCarrierFor 14
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 210 340))
(devCarrierFor 15
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 90 350))
(devCarrierFor 16
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 760 240))
(devCarrierFor 17
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 820 240))
(devCarrierFor 18
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 820 300))
(devCarrierFor 19
(active icon)
(icon
(extent 136 25))
(open
(extent 223 54))
(terminals on)
(pinCenter 500 70))
(devCarrierFor 21
(active icon)
(icon
(extent 158 25))
(open
(extent 220 53))
(terminals on)
(pinCenter 520 20))
(connect I1:1 D1:1
(points 6 -12 248 20 248 20 140 160 140 160 70 178 70))
(connect D0:1 D1:2
(points 2 137 90 178 90))
(connect D1:1 D2:1
(points 4 282 80 290 80 290 40 299 40))
(connect I1:1 D3:1
(points 4 -12 248 20 248 20 140 217 140))
(connect D19:2 D4:0
(points 5 570 80 580 80 580 100 460 100 460 110))
(connect D3:1 D4:1
(points 4 283 140 300 140 300 120 367 120))
(connect D1:1 D4:2
(points 6 282 80 290 80 290 110 310 110 310 140 367 140))
(connect D4:2 D5:1
(points 2 552 130 603 130))
(connect D4:3 D5:2
(points 2 552 140 603 140))
(connect D20:1 D5:3
(points 8 601 10 620 10 620 60 590 60 590 110 580 110 580 150 603 150))
(connect D5:1 D6:0
(points 3 637 140 670 140 670 159))
(connect D1:1 D6:1
(points 8 282 80 290 80 290 110 310 110 310 140 350 140 350 170 650 170))
(connect D8:2 D7:0
(points 5 600 270 630 270 630 290 570 290 570 299))
(connect D10:1 D7:1
(points 6 252 220 270 220 270 260 400 260 400 310 550 310))
(connect D9:1 D8:0
(points 5 540 210 550 210 550 240 520 240 520 245))
(connect D10:1 D8:1
(points 4 252 220 270 220 270 260 440 260))
(connect D3:1 D9:1
(points 6 283 140 300 140 300 170 270 170 270 210 280 210))
(connect D10:1 D9:2
(points 4 252 220 270 220 270 230 280 230))
(connect I1:1 D10:1
(points 6 -12 248 20 248 20 140 140 140 140 210 148 210))
(connect D11:1 D10:2
(points 4 127 220 140 220 140 230 148 230))
(connect D0:0 D11:0
(points 4 100 118 100 150 90 150 90 191))
(connect D13:1 D12:0
(points 3 473 330 480 330 480 379))
(connect D14:1 D12:1
(points 4 262 340 280 340 280 390 460 390))
(connect D14:1 D13:1
(points 2 262 340 287 340))
(connect I1:1 D14:1
(points 6 -12 248 20 248 20 270 150 270 150 330 158 330))
(connect D15:1 D14:2
(points 2 127 350 158 350))
(connect D11:0 D15:0
(points 2 90 248 90 321))
(connect D6:1 D16:1
(points 4 690 170 710 170 710 230 743 230))
(connect D7:1 D16:2
(points 4 590 310 610 310 610 240 743 240))
(connect D12:1 D16:3
(points 4 500 390 620 390 620 250 743 250))
(connect D16:1 D17:1
(points 2 777 240 800 240))
(connect D17:0 D18:0
(points 2 820 250 820 289))
(connect D20:2 D19:0
(points 5 601 30 610 30 610 50 500 50 500 55))
(connect D1:1 D19:1
(points 6 282 80 290 80 290 50 410 50 410 70 429 70))
(connect D2:1 D20:0
(points 5 400 30 410 30 410 -10 520 -10 520 5))
(connect I1:1 D20:1
(points 8 -12 248 20 248 20 140 160 140 160 10 420 10 420 20 438 20))
(connect D17:1 O1:1
(points 4 840 240 860 240 860 248 1010 248)))
(stackingOrder 0 4 7 11 12 13 14 15 16 17 18 3 10 9 8 1 19 2 20 6 5))))
(configuration
(connect I1:1 D1:1)
(connect D8:1 D2:1)
(connect D11:1 D2:2)
(connect D10:1 D2:3)
(connect D4:0 D3:0)
(connect D2:1 D4:1)
(connect D6:1 D5:0)
(connect D11:0 D6:1)
(connect D10:0 D6:2)
(connect D8:2 D6:3)
(connect D1:2 D7:0)
(connect I1:1 D7:1)
(connect D7:1 D8:0)
(connect I1:1 D8:1)
(connect D7:2 D9:1)
(connect D1:1 D9:2)
(connect D1:3 D10:0)
(connect I1:1 D10:1)
(connect D9:1 D11:0)
(connect I1:1 D11:1)
(connect D4:1 O1:1)
(connect D5:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 1099 435)
(anchorPt 93 86)
(configuration
(devCarrierFor 5
(active icon)
(icon
(extent 68 52)
(iconImage "notepad.icn"))
(open
(extent 368 511)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 780 -20))
(devCarrierFor 6
(active icon)
(icon
(extent 275 34))
(open
(extent 406 62))
(terminals on)
(pinCenter 80 -30))
(devCarrierFor 15
(active icon)
(icon
(extent 29 65))
(open
(extent 22 122))
(terminals on)
(pinCenter 810 170))
(devCarrierFor 19
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 860 230))
(devCarrierFor 23
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 860 170))
(devCarrierFor 31
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 560 300))
(devCarrierFor 32
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 500 270))
(devCarrierFor 34
(active icon)
(icon
(extent 169 25))
(open
(extent 848 53))
(terminals on)
(pinCenter 370 0))
(devCarrierFor 35
(active icon)
(icon
(extent 194 25))
(terminals on)
(pinCenter 620 30))
(devCarrierFor 40
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 280 50))
(devCarrierFor 41
(active icon)
(icon
(extent 118 45))
(terminals on)
(pinCenter 360 210))
(devCarrierFor 42
(active icon)
(icon
(extent 122 25))
(terminals on)
(pinCenter 360 110))
(connect I1:1 D1:1
(points 4 -93 131 -80 131 -80 -30 -60 -30))
(connect D8:1 D2:1
(points 6 719 20 730 20 730 30 750 30 750 150 793 150))
(connect D11:1 D2:2
(points 4 423 110 450 110 450 170 793 170))
(connect D10:1 D2:3
(points 4 421 210 450 210 450 190 793 190))
(connect D4:0 D3:0
(points 2 860 180 860 219))
(connect D2:1 D4:1
(points 2 827 170 840 170))
(connect D6:1 D5:0
(points 3 517 270 560 270 560 289))
(connect D11:0 D6:1
(points 7 360 125 360 140 370 140 370 150 440 150 440 260 483 260))
(connect D10:0 D6:2
(points 3 360 235 360 270 483 270))
(connect D8:2 D6:3
(points 6 719 40 740 40 740 70 460 70 460 280 483 280))
(connect D1:2 D7:0
(points 3 220 -30 370 -30 370 -15))
(connect I1:1 D7:1
(points 4 -93 131 250 131 250 0 283 0))
(connect D7:1 D8:0
(points 3 457 -10 620 -10 620 15))
(connect I1:1 D8:1
(points 6 -93 131 440 131 440 60 490 60 490 30 520 30))
(connect D7:2 D9:1
(points 8 457 10 480 10 480 40 320 40 320 30 250 30 250 40 263 40))
(connect D1:1 D9:2
(points 4 220 -40 230 -40 230 60 263 60))
(connect D1:3 D10:0
(points 5 220 -20 240 -20 240 150 360 150 360 185))
(connect I1:1 D10:1
(points 4 -93 131 270 131 270 210 298 210))
(connect D9:1 D11:0
(points 3 297 50 360 50 360 95))
(connect I1:1 D11:1
(points 4 -93 131 250 131 250 110 296 110))
(connect D4:1 O1:1
(points 4 880 170 900 170 900 21 1005 21))
(connect D5:1 O2:1
(points 4 583 300 600 300 600 241 1005 241)))
(stackingOrder 0 2 4 3 9 6 5 1 7 10 8 11))))
(context 94
(properties
(name "GetBombAdjacencyLocations")
(trigMode deg)
(nextID 27)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "adjLocs")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(count 40))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "bomb?")
(cases 1 "b[i]>=35"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "open square behind?")
(cases 1 "(i-10<0 ? 0 : b[i-10]==0)"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 5 IFTHENELSE
(properties
(name "open square to-the-left?")
(cases 1 "(((i MOD 10)==0) ? 0 : b[i-1]==0)"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 8 IFTHENELSE
(properties
(name "open square to-the-right?")
(cases 1 "(((i MOD 10)==9) ? 0 : b[i+1]==0)"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 13 FORMULA
(properties
(name "square -10")
(expr 1 "i-10"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORMULA
(properties
(name "square -1")
(expr 1 "i-1"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 FORMULA
(properties
(name "square +1")
(expr 1 "i+1"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "sort values")
(expr 1 "sort(ary)"))
(interface
(input 1
(name "ary")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 FORCOUNT
(properties
(count 40))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 18 FORMULA
(properties
(name "# values")
(expr 1 "totSize(ary)"))
(interface
(input 1
(name "ary")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 DECLVAR
(properties
(name "Declare Local \'lastValue\'")
(scope con)
(globalName "lastValue"))
(implementation
(value Int32
(data  0))))
(device 20 FORMULA
(properties
(name "lastValue = -1")
(expr 1 "lastValue = -1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 21 IFTHENELSE
(properties
(name "unique?")
(cases 1 "value!=lastValue"))
(interface
(input 1
(name "value")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 23 FORMULA
(properties
(name "value")
(expr 1 "values[i]"))
(interface
(input 1
(name "values")
(optional yes))
(input 2
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 24 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 25 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 26 FORMULA
(properties
(name "set \'lastValue\'")
(expr 1 "lastValue = value"))
(interface
(input 1
(name "value")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D14:0 D0:0)
(connect D0:1 D1:1)
(connect D1:1 D2:0)
(connect D0:1 D2:1)
(connect D5:1 D3:1)
(connect D0:0 D3:2)
(connect D2:2 D4:0)
(connect D0:1 D4:1)
(connect D7:1 D5:1)
(connect D8:1 D5:2)
(connect D9:1 D5:3)
(connect D4:2 D6:0)
(connect D0:1 D6:1)
(connect D2:1 D7:0)
(connect D0:1 D7:1)
(connect D4:1 D8:0)
(connect D0:1 D8:1)
(connect D6:1 D9:0)
(connect D0:1 D9:1)
(connect D3:1 D10:1)
(connect D12:1 D11:1)
(connect D10:1 D12:1)
(connect D16:1 D15:1)
(connect D10:1 D16:1)
(connect D11:1 D16:2)
(connect D18:1 D17:1)
(connect D11:0 D17:2)
(connect D15:1 D18:0)
(connect D16:1 D18:1)
(connect D15:0 D19:0)
(connect D16:1 D19:1)
(connect D17:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 832 615)
(anchorPt -13 16)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 120 120))
(devCarrierFor 1
(active icon)
(icon
(extent 47 25))
(open
(extent 79 53))
(terminals on)
(pinCenter 220 120))
(devCarrierFor 2
(active icon)
(icon
(extent 148 25))
(open
(extent 182 53))
(terminals on)
(pinCenter 320 160))
(devCarrierFor 3
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 690 290))
(devCarrierFor 5
(active icon)
(icon
(extent 168 25))
(open
(extent 237 53))
(terminals on)
(pinCenter 380 260))
(devCarrierFor 7
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 590 280))
(devCarrierFor 8
(active icon)
(icon
(extent 178 25))
(open
(extent 240 53))
(terminals on)
(pinCenter 390 350))
(devCarrierFor 13
(active icon)
(icon
(extent 75 16))
(open
(extent 72 32))
(terminals on)
(pinCenter 490 210))
(devCarrierFor 14
(active icon)
(icon
(extent 67 16))
(open
(extent 72 32))
(terminals on)
(pinCenter 510 310))
(devCarrierFor 15
(active icon)
(icon
(extent 70 16))
(open
(extent 72 32))
(terminals on)
(pinCenter 530 390))
(devCarrierFor 16
(active icon)
(icon
(extent 75 16))
(open
(extent 88 32))
(terminals on)
(pinCenter 180 480))
(devCarrierFor 17
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 380 480))
(devCarrierFor 18
(active icon)
(icon
(extent 58 16))
(open
(extent 106 32))
(terminals on)
(pinCenter 280 480))
(devCarrierFor 19
(active icon)
(icon
(extent 170 16))
(open
(extent 215 107))
(pinCenter 290 50))
(devCarrierFor 20
(active icon)
(icon
(extent 95 16))
(open
(extent 121 32))
(terminals on)
(pinCenter 120 50))
(devCarrierFor 21
(active icon)
(icon
(extent 56 25))
(open
(extent 148 53))
(terminals on)
(pinCenter 560 480))
(devCarrierFor 23
(active icon)
(icon
(extent 38 25))
(open
(extent 122 42))
(terminals on)
(pinCenter 480 480))
(devCarrierFor 24
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 720 530))
(devCarrierFor 25
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 640 500))
(devCarrierFor 26
(active icon)
(icon
(extent 95 16))
(open
(extent 132 32))
(terminals on)
(pinCenter 560 520))
(connect D14:0 D0:0
(points 2 120 60 120 91))
(connect D0:1 D1:1
(points 2 157 120 194 120))
(connect D1:1 D2:0
(points 3 246 110 320 110 320 145))
(connect D0:1 D2:1
(points 4 157 120 180 120 180 160 243 160))
(connect D5:1 D3:1
(points 2 607 280 657 280))
(connect D0:0 D3:2
(points 5 120 148 120 410 630 410 630 300 657 300))
(connect D2:2 D4:0
(points 5 396 170 410 170 410 210 380 210 380 245))
(connect D0:1 D4:1
(points 8 157 120 180 120 180 160 220 160 220 200 260 200 260 260 293 260))
(connect D7:1 D5:1
(points 4 530 210 550 210 550 270 573 270))
(connect D8:1 D5:2
(points 4 546 310 560 310 560 280 573 280))
(connect D9:1 D5:3
(points 6 567 390 590 390 590 360 540 360 540 290 573 290))
(connect D4:2 D6:0
(points 5 466 270 480 270 480 300 390 300 390 335))
(connect D0:1 D6:1
(points 10 157 120 180 120 180 160 220 160 220 200 260 200 260 260 270 260 270
350 298 350))
(connect D2:1 D7:0
(points 3 396 150 490 150 490 199))
(connect D0:1 D7:1
(points 8 157 120 180 120 180 160 220 160 220 200 420 200 420 210 450 210))
(connect D4:1 D8:0
(points 3 466 250 510 250 510 299))
(connect D0:1 D8:1
(points 10 157 120 180 120 180 160 220 160 220 200 260 200 260 260 270 260 270
310 474 310))
(connect D6:1 D9:0
(points 3 481 340 530 340 530 379))
(connect D0:1 D9:1
(points 12 157 120 180 120 180 160 220 160 220 200 260 200 260 260 270 260 270
350 280 350 280 390 492 390))
(connect D3:1 D10:1
(points 6 723 290 740 290 740 420 120 420 120 480 140 480))
(connect D12:1 D11:1
(points 2 311 480 342 480))
(connect D10:1 D12:1
(points 2 220 480 248 480))
(connect D16:1 D15:1
(points 2 501 480 529 480))
(connect D10:1 D16:1
(points 6 220 480 240 480 240 430 440 430 440 470 458 470))
(connect D11:1 D16:2
(points 4 417 480 440 480 440 490 458 490))
(connect D18:1 D17:1
(points 4 660 500 680 500 680 520 687 520))
(connect D11:0 D17:2
(points 5 380 508 380 550 630 550 630 540 687 540))
(connect D15:1 D18:0
(points 3 590 470 640 470 640 489))
(connect D16:1 D18:1
(points 6 501 480 520 480 520 450 610 450 610 500 620 500))
(connect D15:0 D19:0
(points 2 560 495 560 509))
(connect D16:1 D19:1
(points 6 501 480 510 480 510 500 500 500 500 520 510 520))
(connect D17:1 O1:1
(points 4 753 530 770 530 770 291 844 291)))
(stackingOrder 0 1 2 4 6 5 3 7 8 9 12 10 11 14 13 16 15 18 19 17))))
(context 157
(properties
(name "GetHighRankPositions")
(trigMode deg)
(nextID 17)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "positions")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORRANGE
(properties
(name "For (99-60)")
(from 99)
(thru 60)
(step -1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "piece @ loc")
(expr 1 "KnownBoard[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "our high piece?")
(cases 1 "piece>=1003 AND piece<=1009"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 4 IFTHENELSE
(properties
(name "any positions?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 6 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 7 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 9 NOTE
(properties
(name "Comment")
(text2 3 "This function locates all of our high-ranking"
"positions in enemy territory that are \"loners\"."
"That is, no grunge pieces of ours near them.")))
(device 16 CONTEXT
(properties
(name "Grunge Piece Near?")
(trigMode deg)
(nextID 10)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "ourLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CONSTANT
(properties
(name "Weave Delta Row"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 24)
(data  [ -1 -1 0 1 1 1 0 -1 -2 -2 -2 -2 -1 0 1 2 2 2 2 2 1 0 -1 -2 ]))
(initValue Int32
(data  0))))
(device 1 FORCOUNT
(properties
(count 24))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 2 CONSTANT
(properties
(name "Weave Delta Col"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 24)
(data  [ 0 1 1 1 0 -1 -1 -1 -1 0 1 2 2 2 2 2 1 0 -1 -2 -2 -2 -2 -2 ]))
(initValue Int32
(data  0))))
(device 3 IFTHENELSE
(properties
(name "our grunge piece at location?")
(cases 1 "(loc==-1 ? 0 : (KnownBoard[loc]>1009 AND KnownBoard[loc]<=1034))"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "location")
(expr 1
"col = (ourLoc MOD 10)+dc, row = (ourLoc DIV 10)+dr, ((row<0 OR row>9 OR col<0 OR col>9) ? -1 : ourLoc+dr*10+dc)"
))
(interface
(input 1
(name "ourLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "row")
(optional yes))
(output 2
(name "col")
(optional yes))
(output 3
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "dr, dc")
(expr 1 "dr = wr[i], wc[i]"))
(interface
(input 1
(name "wr")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "wc")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 3
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dr")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 7 EXITCONTEXT)
(device 9 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(configuration
(connect D4:3 D3:1)
(connect I1:1 D4:1)
(connect D5:1 D4:2)
(connect D5:2 D4:3)
(connect D0:1 D5:1)
(connect D2:1 D5:2)
(connect D1:1 D5:3)
(connect D3:1 D6:1)
(connect D6:0 D7:0)
(connect D1:0 D8:0)
(connect D6:1 O1:1)
(connect D8:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 792 390)
(anchorPt -5 48)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 123 16))
(open
(extent 202 371)
(showFormat int))
(font "Arial" 11)
(pinCenter 110 90))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 110 190))
(devCarrierFor 2
(active icon)
(icon
(extent 116 16))
(open
(extent 184 378)
(showFormat int))
(font "Arial" 11)
(pinCenter 120 130))
(devCarrierFor 3
(active icon)
(icon
(extent 203 25))
(open
(extent 471 53))
(terminals on)
(pinCenter 460 130))
(devCarrierFor 4
(active icon)
(icon
(extent 53 54))
(open
(extent 823 102))
(terminals on)
(pinCenter 310 120))
(devCarrierFor 5
(active icon)
(icon
(extent 40 34))
(open
(extent 123 62))
(terminals on)
(pinCenter 230 140))
(devCarrierFor 6
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 650 110))
(devCarrierFor 7
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 650 160))
(devCarrierFor 9
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 120 300))
(connect D4:3 D3:1
(points 4 339 140 350 140 350 130 356 130))
(connect I1:1 D4:1
(points 6 5 146 20 146 20 60 210 60 210 100 281 100))
(connect D5:1 D4:2
(points 4 252 130 260 130 260 120 281 120))
(connect D5:2 D4:3
(points 4 252 150 260 150 260 140 281 140))
(connect D0:1 D5:1
(points 4 174 90 190 90 190 130 207 130))
(connect D2:1 D5:2
(points 4 180 130 190 130 190 140 207 140))
(connect D1:1 D5:3
(points 4 147 190 170 190 170 150 207 150))
(connect D3:1 D6:1
(points 4 564 120 580 120 580 110 630 110))
(connect D6:0 D7:0
(points 2 650 120 650 149))
(connect D1:0 D8:0
(points 4 110 218 110 240 120 240 120 289))
(connect D6:1 O1:1
(points 4 670 110 730 110 730 46 796 46))
(connect D8:1 O2:1
(points 4 134 300 150 300 150 246 796 246)))
(stackingOrder 6 7 1 5 8 4 3 0 2))))
(configuration
(connect D0:1 D1:1)
(connect D1:1 D2:1)
(connect D9:2 D3:0)
(connect D0:1 D3:1)
(connect D5:5 D4:1)
(connect D6:1 D5:1)
(connect D3:1 D6:1)
(connect D0:0 D6:2)
(connect D4:1 D7:0)
(connect D6:1 D7:1)
(connect D2:1 D9:0)
(connect D0:1 D9:1)
(connect D7:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 810 468)
(anchorPt 19 16)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 80 52)
(iconImage "loop.icn"))
(open
(extent 116 82))
(pinCenter 60 40))
(devCarrierFor 1
(active icon)
(icon
(extent 81 16))
(open
(extent 125 32))
(terminals on)
(pinCenter 180 50))
(devCarrierFor 2
(active icon)
(icon
(extent 107 25))
(open
(extent 232 53))
(terminals on)
(pinCenter 300 50))
(devCarrierFor 3
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 600 100))
(devCarrierFor 4
(active icon)
(icon
(extent 100 25))
(open
(extent 66 65))
(terminals on)
(pinCenter 340 230))
(devCarrierFor 5
(active icon)
(icon
(extent 180 61)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 160 210))
(devCarrierFor 6
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 700 110))
(devCarrierFor 7
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 470 250))
(devCarrierFor 9
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 420 93)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 250 390))
(devCarrierFor 16
(active icon)
(icon
(extent 141 25))
(terminals on)
(pinCenter 450 60))
(connect D0:1 D1:1
(points 4 102 40 120 40 120 50 137 50))
(connect D1:1 D2:1
(points 2 223 50 244 50))
(connect D9:2 D3:0
(points 3 523 70 600 70 600 89))
(connect D0:1 D3:1
(points 6 102 40 120 40 120 20 540 20 540 100 580 100))
(connect D5:5 D4:1
(points 2 252 230 287 230))
(connect D6:1 D5:1
(points 6 733 110 750 110 750 150 50 150 50 210 67 210))
(connect D3:1 D6:1
(points 2 620 100 667 100))
(connect D0:0 D6:2
(points 5 60 68 60 130 640 130 640 120 667 120))
(connect D4:1 D7:0
(points 3 392 220 470 220 470 239))
(connect D6:1 D7:1
(points 6 733 110 750 110 750 150 430 150 430 250 450 250))
(connect D2:1 D9:0
(points 5 356 40 380 40 380 30 450 30 450 45))
(connect D0:1 D9:1
(points 6 102 40 120 40 120 20 370 20 370 60 377 60))
(connect D7:1 O1:1
(points 4 490 250 510 250 510 217 790 217)))
(stackingOrder 3 6 5 4 7 2 1 0 8 9))))
(context 5
(properties
(name "GetMovablePieceBoardLocations")
(trigMode deg)
(nextID 16)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "Pieces")
(lock constraints)
(optional yes)))
(deviceList
(device 2 IFTHENELSE
(properties
(name "any open?")
(cases 1 "open1 OR open2 OR open3 OR open4"))
(interface
(input 1
(name "open1")
(optional yes))
(input 2
(name "open2")
(optional yes))
(input 3
(name "open3")
(optional yes))
(input 4
(name "open4")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "border sq 4 open bool")
(expr 1
"b = BorderSquares[i, 3], (b==-1 ? 0 : KnownBoard[b]==0 OR KnownBoard[b]<1000)")
)
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "b")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "border sq 3 open bool")
(expr 1
"b = BorderSquares[i, 2], (b==-1 ? 0 : KnownBoard[b]==0 OR KnownBoard[b]<1000)")
)
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "b")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "border sq 2 bool")
(expr 1
"b = BorderSquares[i, 1], (b==-1 ? 0 : KnownBoard[b]==0 OR KnownBoard[b]<1000)")
)
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "b")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 FORMULA
(properties
(name "border sq 1 open bool")
(expr 1
"b = BorderSquares[i, 0], (b==-1 ? 0 : KnownBoard[b]==0 OR KnownBoard[b]<1000)")
)
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "b")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 IFTHENELSE
(properties
(name "bomb or flag?")
(cases 1 "KnownBoard[i]==1001 OR (KnownBoard[i]>=1035 AND KnownBoard[i]<=1040)")
)
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 IFTHENELSE
(properties
(name "my piece?")
(cases 1 "KnownBoard[bi]>=1000"))
(interface
(input 1
(name "bi")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 13 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 15 FORRANGE
(properties
(name "For Range (99-0)")
(from 99)
(thru 0)
(step -1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(configuration
(connect D4:2 D0:1)
(connect D3:2 D0:2)
(connect D2:2 D0:3)
(connect D1:2 D0:4)
(connect D8:1 D1:1)
(connect D8:1 D2:1)
(connect D8:1 D3:1)
(connect D5:2 D4:0)
(connect D8:1 D4:1)
(connect D6:1 D5:0)
(connect D8:1 D5:1)
(connect D8:1 D6:1)
(connect D0:1 D7:0)
(connect D8:1 D7:1)
(connect D8:0 D7:2)
(connect D7:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 836 425)
(anchorPt -96 -132)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 73 45))
(open
(extent 279 82))
(terminals on)
(pinCenter 660 380))
(devCarrierFor 4
(active icon)
(icon
(extent 154 25))
(open
(extent 557 42))
(terminals on)
(pinCenter 500 450))
(devCarrierFor 5
(active icon)
(icon
(extent 154 25))
(open
(extent 557 42))
(terminals on)
(pinCenter 490 390))
(devCarrierFor 6
(active icon)
(icon
(extent 114 25))
(open
(extent 557 42))
(terminals on)
(pinCenter 480 340))
(devCarrierFor 7
(active icon)
(icon
(extent 154 25))
(open
(extent 638 49))
(terminals on)
(pinCenter 530 290))
(devCarrierFor 8
(active icon)
(icon
(extent 95 25))
(open
(extent 524 53))
(terminals on)
(pinCenter 450 230))
(devCarrierFor 12
(active icon)
(icon
(extent 70 25))
(open
(extent 179 53))
(terminals on)
(pinCenter 290 240))
(devCarrierFor 13
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 800 400))
(devCarrierFor 15
(active icon)
(icon
(extent 122 52)
(iconImage "loop.icn"))
(open
(extent 110 82))
(pinCenter 170 240))
(connect D4:2 D0:1
(points 6 609 300 630 300 630 330 610 330 610 360 621 360))
(connect D3:2 D0:2
(points 4 539 350 560 350 560 370 621 370))
(connect D2:2 D0:3
(points 4 569 400 590 400 590 380 621 380))
(connect D1:2 D0:4
(points 4 579 460 600 460 600 390 621 390))
(connect D8:1 D1:1
(points 12 233 240 240 240 240 220 250 220 250 210 360 210 360 230 380 230 380
290 390 290 390 450 420 450))
(connect D8:1 D2:1
(points 12 233 240 240 240 240 220 250 220 250 210 360 210 360 230 380 230 380
290 390 290 390 390 410 390))
(connect D8:1 D3:1
(points 12 233 240 240 240 240 220 250 220 250 210 360 210 360 230 380 230 380
290 390 290 390 340 420 340))
(connect D5:2 D4:0
(points 3 500 240 530 240 530 275))
(connect D8:1 D4:1
(points 10 233 240 240 240 240 220 250 220 250 210 360 210 360 230 380 230 380
290 450 290))
(connect D6:1 D5:0
(points 5 327 230 350 230 350 200 450 200 450 215))
(connect D8:1 D5:1
(points 8 233 240 240 240 240 220 250 220 250 210 360 210 360 230 400 230))
(connect D8:1 D6:1
(points 2 233 240 252 240))
(connect D0:1 D7:0
(points 3 699 370 800 370 800 385))
(connect D8:1 D7:1
(points 8 233 240 240 240 240 220 250 220 250 190 720 190 720 390 767 390))
(connect D8:0 D7:2
(points 5 170 268 170 490 720 490 720 410 767 410))
(connect D7:1 O1:1
(points 4 833 400 850 400 850 344 931 344)))
(stackingOrder 5 0 7 6 3 2 1 4 8))))
(context 3
(properties
(name "GetMove")
(trigMode deg)
(nextID 40)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "fromIndex")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "toIndex")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "cannotMove")
(lock constraints)
(optional yes)))
(deviceList
(device 37 NOTE
(properties
(name "Comment")
(text2 26 "This function is called from the" "central StraVEEgo module.  This"
"function returns the computer\'s" "move (fromIndex, toIndex).  The"
"following knowledge is available" "to make an intelligent move:" ""
"The \'LegalMoves\' function returns" "two lists of available moves"
"(attackingMoves and otherMoves)." "The attackingMoves are those where"
"a computer piece is adjacent to" "an opponent\'s piece.  The otherMoves"
"are all remaining possible moves." "A move is in a record format which"
"contains two fields: \'from\' and \'to\'." ""
"A library local \'KnownBoard\' is a " "100-element 1D-array of type Int32."
"Location 0 refers to the upper-left" "corner of the board (which is "
"initially filled by a computer piece)." "The values which can fill a square"
"are identified in the \'SetupBoard\'" "function." "")))
(device 38 CALL
(properties
(name "Call GetMoveGuts")
(callFunc "GetMoveGuts")
(parmMode rev30))
(interface
(output 1
(name "fromIndex")
(lock name constraints)
(optional yes))
(output 2
(name "toIndex")
(lock name constraints)
(optional yes))
(output 3
(name "cannotMove")
(lock name constraints)
(optional yes))))
(device 39 DO
(interface
(output 1
(name "Do"))))
(configuration
(connect D1:0 D2:0)
(connect D1:1 O1:1)
(connect D1:2 O2:1)
(connect D1:3 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 438 711)
(anchorPt 22 125)
(configuration
(devCarrierFor 37
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 303 421)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 160 360))
(devCarrierFor 38
(active open)
(icon
(extent 126 0))
(open
(extent 196 62))
(terminals on)
(pinCenter 145 10))
(devCarrierFor 39
(active icon)
(icon
(extent 24 16))
(open)
(terminals on)
(pinCenter 170 80))
(connect D1:0 D2:0
(points 2 170 43 170 69))
(connect D1:1 O1:1
(points 4 325 -10 692 -10 692 -10 415 -10))
(connect D1:2 O2:1
(points 4 325 10 360 10 360 230 415 230))
(connect D1:3 O3:1
(points 4 325 30 350 30 350 470 415 470)))
(stackingOrder 2 1 0))))
(context 54
(properties
(name "GetMoveGuts")
(trigMode deg)
(nextID 24)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "fromIndex")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "toIndex")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "cannotMove")
(lock constraints)
(optional yes)))
(deviceList
(device 1 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "D")
(optional yes))
(input 2
(name "A")
(optional yes))
(input 3
(name "B")
(optional yes))
(input 4
(name "C")
(optional yes))
(input 5
(name "E")
(optional yes))
(output 1
(name "Data"))))
(device 2 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "E")
(optional yes))
(input 2
(name "A")
(optional yes))
(input 3
(name "B")
(optional yes))
(input 4
(name "C")
(optional yes))
(input 5
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 3 IFTHENELSE
(properties
(name "any attacking/retreating moves?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 CONTEXT
(properties
(name "Pick Attacking Move")
(trigMode deg)
(nextID 61)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "nada")
(lock constraints)
(optional yes)))
(deviceList
(device 55 CONTEXT
(properties
(name "Pick Attacking Move Guts")
(trigMode deg)
(nextID 8)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "nada")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CALL
(properties
(name "Call CheckProbabilitiesFirst")
(callFunc "CheckProbabilitiesFirst")
(parmMode rev30))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "nada")
(lock name constraints)
(optional yes))))
(device 1 IFTHENELSE
(properties
(name "Beginning, Middle, or End?")
(cases 2 "MoveNumber<50"
"NumMyMovablePiecesRemaining>13 AND NumOppMovablePiecesRemaining>13"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 2 CALL
(properties
(name "Call AttackBeginGame")
(callFunc "AttackBeginGame")
(parmMode rev30))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "X")
(optional yes))
(output 2
(name "Y")
(optional yes))
(output 3
(name "Z")
(optional yes))))
(device 3 CALL
(properties
(name "Call AttackMiddleGame")
(callFunc "AttackMiddleGame")
(parmMode rev30))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "X")
(lock name constraints)
(optional yes))
(output 2
(name "X")
(lock name constraints)
(optional yes))
(output 3
(name "Int32")
(lock name constraints)
(optional yes))))
(device 4 CALL
(properties
(name "Call AttackEndGame")
(callFunc "AttackEndGame")
(parmMode rev30))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "nada")
(lock name constraints)
(optional yes))))
(device 5 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 6 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:3 D1:0)
(connect D1:1 D2:0)
(connect I1:1 D2:1)
(connect D1:2 D3:0)
(connect I1:1 D3:1)
(connect D1:3 D4:0)
(connect I1:1 D4:1)
(connect D2:1 D5:1)
(connect D3:1 D5:2)
(connect D0:1 D5:3)
(connect D4:1 D5:4)
(connect D2:2 D6:1)
(connect D3:2 D6:2)
(connect D0:2 D6:3)
(connect D4:2 D6:4)
(connect D2:3 D7:1)
(connect D3:3 D7:2)
(connect D4:3 D7:3)
(connect D5:1 O1:1)
(connect D6:1 O2:1)
(connect D7:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 797 462)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 190 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 160 80))
(devCarrierFor 1
(active icon)
(icon
(extent 187 34))
(open
(extent 541 62))
(terminals on)
(pinCenter 250 150))
(devCarrierFor 2
(active icon)
(icon
(extent 155 34))
(open
(extent 196 53))
(terminals on)
(pinCenter 480 200))
(devCarrierFor 3
(active icon)
(icon
(extent 160 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 490 290))
(devCarrierFor 4
(active icon)
(icon
(extent 143 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 480 380))
(devCarrierFor 5
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 710 210))
(devCarrierFor 6
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 710 290))
(devCarrierFor 7
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 710 380))
(connect I1:1 D0:1
(points 6 0 230 10 230 10 200 30 200 30 80 62 80))
(connect D0:3 D1:0
(points 5 257 90 270 90 270 110 250 110 250 130))
(connect D1:1 D2:0
(points 3 346 140 480 140 480 180))
(connect I1:1 D2:1
(points 4 0 230 10 230 10 200 400 200))
(connect D1:2 D3:0
(points 7 346 150 380 150 380 190 390 190 390 240 490 240 490 270))
(connect I1:1 D3:1
(points 6 0 230 10 230 10 200 380 200 380 290 407 290))
(connect D1:3 D4:0
(points 5 346 160 370 160 370 330 480 330 480 360))
(connect I1:1 D4:1
(points 6 0 230 10 230 10 200 360 200 360 380 406 380))
(connect D2:1 D5:1
(points 2 560 190 693 190))
(connect D3:1 D5:2
(points 4 572 280 620 280 620 200 693 200))
(connect D0:1 D5:3
(points 4 257 70 610 70 610 210 693 210))
(connect D4:1 D5:4
(points 6 554 370 570 370 570 360 640 360 640 220 693 220))
(connect D2:2 D6:1
(points 4 560 200 600 200 600 270 693 270))
(connect D3:2 D6:2
(points 6 572 290 600 290 600 300 630 300 630 280 693 280))
(connect D0:2 D6:3
(points 4 257 80 590 80 590 290 693 290))
(connect D4:2 D6:4
(points 6 554 380 570 380 570 390 650 390 650 300 693 300))
(connect D2:3 D7:1
(points 6 560 210 580 210 580 300 590 300 590 370 693 370))
(connect D3:3 D7:2
(points 4 572 300 580 300 580 380 693 380))
(connect D4:3 D7:3
(points 6 554 390 560 390 560 400 660 400 660 390 693 390))
(connect D5:1 O1:1
(points 4 727 210 750 210 750 80 796 80))
(connect D6:1 O2:1
(points 4 727 290 750 290 750 230 796 230))
(connect D7:1 O3:1
(points 2 727 380 796 380)))
(stackingOrder 0 1 2 3 4 5 6 7))))
(device 56 IFTHENELSE
(properties
(name "cyclic move?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 57 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 58 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 59 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 60 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(configuration
(connect I1:1 D0:1)
(connect D2:1 D1:1)
(connect D0:1 D2:1)
(connect D0:2 D2:2)
(connect D1:1 D3:1)
(connect D0:3 D3:2)
(connect D1:2 D4:0)
(connect D0:1 D4:1)
(connect D4:0 D5:0)
(connect D0:2 D5:1)
(connect D4:1 O1:1)
(connect D5:1 O2:1)
(connect D3:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 765 437)
(anchorPt 60 94)
(configuration
(devCarrierFor 55
(active icon)
(icon
(extent 148 34))
(terminals on)
(pinCenter 110 100))
(devCarrierFor 56
(active icon)
(icon
(extent 88 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 380 90))
(devCarrierFor 57
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 270 90))
(devCarrierFor 58
(active icon)
(icon
(extent 26 25))
(open)
(terminals on)
(pinCenter 520 160))
(devCarrierFor 59
(active icon)
(icon
(extent 30 15))
(open)
(terminals on)
(pinCenter 530 30))
(devCarrierFor 60
(active icon)
(icon
(extent 30 15))
(open)
(terminals on)
(pinCenter 530 70))
(connect I1:1 D0:1
(points 4 -60 124 -20 124 -20 100 33 100))
(connect D2:1 D1:1
(points 2 317 90 333 90))
(connect D0:1 D2:1
(points 4 186 90 200 90 200 80 223 80))
(connect D0:2 D2:2
(points 2 186 100 223 100))
(connect D1:1 D3:1
(points 4 426 80 450 80 450 150 504 150))
(connect D0:3 D3:2
(points 4 186 110 200 110 200 170 504 170))
(connect D1:2 D4:0
(points 5 426 100 460 100 460 0 530 0 530 20))
(connect D0:1 D4:1
(points 4 186 90 200 90 200 30 512 30))
(connect D4:0 D5:0
(points 2 530 40 530 60))
(connect D0:2 D5:1
(points 6 186 100 210 100 210 140 470 140 470 70 512 70))
(connect D4:1 O1:1
(points 4 547 30 570 30 570 -16 704 -16))
(connect D5:1 O2:1
(points 4 547 70 570 70 570 124 704 124))
(connect D3:1 O3:1
(points 4 535 160 560 160 560 264 704 264)))
(stackingOrder 0 2 1 3 4 5))))
(device 6 CONTEXT
(properties
(name "Pick Other Move")
(trigMode deg)
(nextID 113)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "nada")
(lock constraints)
(optional yes)))
(deviceList
(device 78 EXITCONTEXT)
(device 97 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 98 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 102 CALL
(properties
(name "Call BasicOtherMiddleStrategy")
(callFunc "BasicOtherMiddleStrategy")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "Nada")
(lock name constraints)
(optional yes))))
(device 103 CALL
(properties
(name "Call BasicOtherBeginStrategy")
(callFunc "BasicOtherBeginStrategy")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "Nada")
(lock name constraints)
(optional yes))))
(device 104 IFTHENELSE
(properties
(name "Very Beginning, Early, Middle, or End?")
(cases 3 "MoveNumber<5" "MoveNumber<50"
"NumMyMovablePiecesRemaining>13 AND NumOppMovablePiecesRemaining>13"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 105 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(output 1
(name "Data"))))
(device 106 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(output 1
(name "Data"))))
(device 107 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 109 CALL
(properties
(name "Call BasicOtherEndStrategy")
(callFunc "BasicOtherEndStrategy")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "Nada")
(lock name constraints)
(optional yes))))
(device 110 CALL
(properties
(name "Call CleanUpClog")
(callFunc "CleanUpClog")
(parmMode rev30))
(interface
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))))
(device 111 CALL
(properties
(name "Call RemoveGuardPieceMoves")
(callFunc "RemoveGuardPieceMoves")
(parmMode rev30))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "unguardedMoves")
(lock name constraints)
(optional yes))))
(device 112 CALL
(properties
(name "Call BasicOtherVeryBeginStrategy")
(callFunc "BasicOtherVeryBeginStrategy")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "Nada")
(lock name constraints)
(optional yes))))
(configuration
(connect D2:0 D0:0)
(connect D6:1 D1:1)
(connect D1:0 D2:0)
(connect D7:1 D2:1)
(connect D5:3 D3:0)
(connect D11:1 D3:1)
(connect D5:2 D4:0)
(connect D11:1 D4:1)
(connect D10:0 D5:0)
(connect D4:1 D6:1)
(connect D3:1 D6:2)
(connect D9:1 D6:3)
(connect D10:1 D6:4)
(connect D12:1 D6:5)
(connect D4:2 D7:1)
(connect D3:2 D7:2)
(connect D9:2 D7:3)
(connect D10:2 D7:4)
(connect D12:2 D7:5)
(connect D4:3 D8:1)
(connect D3:3 D8:2)
(connect D9:3 D8:3)
(connect D12:3 D8:4)
(connect D5:4 D9:0)
(connect D11:1 D9:1)
(connect I1:1 D11:1)
(connect D5:1 D12:0)
(connect I1:1 D12:1)
(connect D1:1 O1:1)
(connect D2:1 O2:1)
(connect D8:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 983 607)
(anchorPt 166 453)
(configuration
(devCarrierFor 78
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 560 -70))
(devCarrierFor 97
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 560 -180))
(devCarrierFor 98
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 560 -130))
(devCarrierFor 102
(active icon)
(icon
(extent 211 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 230 -120))
(devCarrierFor 103
(active icon)
(icon
(extent 205 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 240 -220))
(devCarrierFor 104
(active icon)
(icon
(extent 267 45))
(open
(extent 543 82))
(terminals on)
(pinCenter -10 -340))
(devCarrierFor 105
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 430 -230))
(devCarrierFor 106
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 430 -160))
(devCarrierFor 107
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 420 -50))
(devCarrierFor 109
(active icon)
(icon
(extent 193 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 220 0))
(devCarrierFor 110
(active icon)
(icon
(extent 122 25))
(open
(extent 196 53))
(terminals on)
(pinCenter -10 -400))
(devCarrierFor 111
(active icon)
(icon
(extent 215 16))
(open
(extent 196 53))
(terminals on)
(pinCenter -20 -190))
(devCarrierFor 112
(active icon)
(icon
(extent 237 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 270 -310))
(connect D2:0 D0:0
(points 2 560 -120 560 -81))
(connect D6:1 D1:1
(points 4 447 -230 470 -230 470 -180 540 -180))
(connect D1:0 D2:0
(points 2 560 -170 560 -141))
(connect D7:1 D2:1
(points 4 447 -160 470 -160 470 -130 540 -130))
(connect D5:3 D3:0
(points 7 126 -340 160 -340 160 -270 130 -270 130 -180 230 -180 230 -140))
(connect D11:1 D3:1
(points 6 90 -190 110 -190 110 -160 100 -160 100 -120 122 -120))
(connect D5:2 D4:0
(points 3 126 -350 240 -350 240 -240))
(connect D11:1 D4:1
(points 4 90 -190 110 -190 110 -220 135 -220))
(connect D10:0 D5:0
(points 2 -10 -385 -10 -365))
(connect D4:1 D6:1
(points 4 345 -230 360 -230 360 -250 413 -250))
(connect D3:1 D6:2
(points 8 338 -130 350 -130 350 -190 360 -190 360 -230 370 -230 370 -240 413
-240))
(connect D9:1 D6:3
(points 4 319 -10 380 -10 380 -230 413 -230))
(connect D10:1 D6:4
(points 6 53 -410 430 -410 430 -270 400 -270 400 -220 413 -220))
(connect D12:1 D6:5
(points 4 391 -320 420 -320 420 -210 413 -210))
(connect D4:2 D7:1
(points 6 345 -220 380 -220 380 -210 400 -210 400 -180 413 -180))
(connect D3:2 D7:2
(points 4 338 -120 360 -120 360 -170 413 -170))
(connect D9:2 D7:3
(points 6 319 0 390 0 390 -140 400 -140 400 -160 413 -160))
(connect D10:2 D7:4
(points 6 53 -390 410 -390 410 -280 390 -280 390 -150 413 -150))
(connect D12:2 D7:5
(points 6 391 -310 610 -310 610 -110 400 -110 400 -140 413 -140))
(connect D4:3 D8:1
(points 4 345 -210 370 -210 370 -70 403 -70))
(connect D3:3 D8:2
(points 4 338 -110 360 -110 360 -60 403 -60))
(connect D9:3 D8:3
(points 4 319 10 340 10 340 -50 403 -50))
(connect D12:3 D8:4
(points 6 391 -300 480 -300 480 10 370 10 370 -40 403 -40))
(connect D5:4 D9:0
(points 9 126 -330 140 -330 140 -290 120 -290 120 -150 110 -150 110 -80 220 -80
220 -20))
(connect D11:1 D9:1
(points 6 90 -190 110 -190 110 -160 100 -160 100 0 121 0))
(connect I1:1 D11:1
(points 4 -166 -150 -140 -150 -140 -190 -130 -190))
(connect D5:1 D12:0
(points 3 126 -360 270 -360 270 -330))
(connect I1:1 D12:1
(points 8 -166 -150 -140 -150 -140 -190 -150 -190 -150 -230 110 -230 110 -310
149 -310))
(connect D1:1 O1:1
(points 4 580 -180 600 -180 600 -350 816 -350))
(connect D2:1 O2:1
(points 4 580 -130 600 -130 600 -150 816 -150))
(connect D8:1 O3:1
(points 4 437 -50 460 -50 460 50 816 50)))
(stackingOrder 2 1 0 11 3 4 6 7 8 5 10 12 9))))
(device 7 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 8 IFTHENELSE
(properties
(name "any other moves?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 10 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 11 CALL
(properties
(name "Call ImpendingDoomMove")
(callFunc "ImpendingDoomMove")
(parmMode rev30))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "youreOK")
(lock name constraints)
(optional yes))))
(device 12 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 13 CALL
(properties
(name "Call LegalMoves")
(callFunc "LegalMoves")
(parmMode rev30))
(interface
(output 1
(name "attackingMoves")
(lock name constraints)
(optional yes))
(output 2
(name "otherMoves")
(lock name constraints)
(optional yes))))
(device 14 CONTEXT
(properties
(name "Flag in direct danger?")
(trigMode deg)
(nextID 110)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "attacking")
(optional yes))
(input 2
(name "other")
(optional yes))
(output 1
(type data)
(name "move")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(name "For 40")
(count 40))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "knownboard[i] == flag?")
(cases 1 "knownboard[i]==1001"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 BREAK)
(device 4 FORCOUNT
(properties
(name "For 4")
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 IFTHENELSE
(properties
(name "opponent piece?")
(cases 1 "kb==-2 OR (kb>1 AND kb<35)"))
(interface
(input 1
(name "kb")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "knownboard[i]")
(expr 1 "knownboard[i]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "bs != -1?")
(cases 1 "bs!=-1"))
(interface
(input 1
(name "bs")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 IFTHENELSE
(properties
(name "any attacking moves?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 13 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 14 EXITCONTEXT)
(device 26 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 28 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 47 JUNCTION
(properties
(name "JCT move"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 50 NOTE
(properties
(name "Comment")
(text2 5 "If I can attack" "whoever\'s next to" "the flag, do it."
"Don\'t worry about" "suicide/etc.")))
(device 51 NOTE
(properties
(name "Comment")
(text2 4 "Can\'t kill them." "Can I move to a" "borderSquare of" "them?")))
(device 54 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 58 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 59 IFTHENELSE
(properties
(name "any other moves?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 61 IFTHENELSE
(properties
(name "open spot?")
(cases 1 "kb==0"))
(interface
(input 1
(name "kb")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 62 IFTHENELSE
(properties
(name "bs != -1?")
(cases 1 "bs!=-1"))
(interface
(input 1
(name "bs")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 63 FORMULA
(properties
(name "knownboard[i]")
(expr 1 "knownboard[i]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 64 FORMULA
(properties
(name "border square of opp piece")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 65 FORCOUNT
(properties
(name "For 4")
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 66 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 67 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 70 IFTHENELSE
(properties
(name "to == opp (and not miner)?")
(cases 1 "(move.to==opp) AND (WeightOfPiece[KnownBoard[move.from]-1000]!=8)"))
(interface
(input 1
(name "opp")
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 72 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 74 IFTHENELSE
(properties
(name "to == opp?")
(cases 1 "to==opp"))
(interface
(input 1
(name "opp")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 76 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 77 IFTHENELSE
(properties
(name "any other moves?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 78 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 79 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 81 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 82 NOTE
(properties
(name "Comment")
(text2 7 "Can\'t kill them, " "can\'t move to a" "borderSquare of" "them."
"Can I move to a " "borderSquare of a" "bs of them?")))
(device 83 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 84 FORMULA
(properties
(name "knownboard[i]")
(expr 1 "knownboard[i]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 85 IFTHENELSE
(properties
(name "bs != -1?")
(cases 1 "bs!=-1"))
(interface
(input 1
(name "bs")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 86 IFTHENELSE
(properties
(name "open spot or opp?")
(cases 1 "kb==0 OR kb==-2 OR (kb>0 AND kb<35)"))
(interface
(input 1
(name "kb")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 87 FORMULA
(properties
(name "border square of opp piece")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 88 FORCOUNT
(properties
(name "For 4")
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 89 FORMULA
(properties
(name "knownboard[i]")
(expr 1 "knownboard[i]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 90 IFTHENELSE
(properties
(name "bs != -1?")
(cases 1 "bs!=-1"))
(interface
(input 1
(name "bs")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 91 FORMULA
(properties
(name "border square of bs of opp piece")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 92 FORCOUNT
(properties
(name "For 4")
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 93 IFTHENELSE
(properties
(name "open spot?")
(cases 1 "kb==0"))
(interface
(input 1
(name "kb")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 94 IFTHENELSE
(properties
(name "deceptive layout and early in the game?")
(cases 1 "DeceptiveLayout AND MoveNumber<50"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 101 CONTEXT
(properties
(name "Is this suicide?")
(trigMode deg)
(nextID 2)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CALL
(properties
(name "Call SimpleAttackConsequences")
(callFunc "SimpleAttackConsequences")
(parmMode rev30))
(interface
(input 1
(name "attackMove")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "WinFully")
(lock name constraints)
(optional yes))
(output 2
(name "WinLose")
(lock name constraints)
(optional yes))
(output 3
(name "WinTie")
(lock name constraints)
(optional yes))
(output 4
(name "Tie")
(lock name constraints)
(optional yes))
(output 5
(name "Lose")
(lock name constraints)
(optional yes))
(output 6
(name "Other")
(lock name constraints)
(optional yes))))
(device 1 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D0:2 D1:2)
(connect D0:3 D1:3)
(connect D0:4 D1:4)
(connect D0:6 D1:5)
(connect D0:5 O1:1)
(connect D1:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 553 460)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 224 0))
(open
(extent 196 122))
(terminals on)
(pinCenter 230 140))
(devCarrierFor 1
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 460 140))
(connect I1:1 D0:1
(points 4 0 229 10 229 10 140 49 140))
(connect D0:1 D1:1
(points 4 390 90 430 90 430 120 443 120))
(connect D0:2 D1:2
(points 4 390 110 420 110 420 130 443 130))
(connect D0:3 D1:3
(points 4 390 130 410 130 410 140 443 140))
(connect D0:4 D1:4
(points 2 390 150 443 150))
(connect D0:6 D1:5
(points 4 390 190 410 190 410 160 443 160))
(connect D0:5 O1:1
(points 6 390 170 420 170 420 190 510 190 510 109 552 109))
(connect D1:1 O2:1
(points 4 477 140 500 140 500 349 552 349)))
(stackingOrder 0 1))))
(device 105 IFTHENELSE
(properties
(name "to == opp (and not miner)?")
(cases 1 "(move.to==opp) AND (WeightOfPiece[KnownBoard[move.from]-1000]!=8)"))
(interface
(input 1
(name "opp")
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 106 CALL
(properties
(name "Call IsOurFlagExposed")
(callFunc "IsOurFlagExposed")
(parmMode rev30))
(interface
(output 1
(name "go to location")
(lock name constraints)
(optional yes))
(output 2
(name "NO")
(lock name constraints)
(optional yes))))
(device 107 CONTEXT
(properties
(name "possible protector moves")
(trigMode deg)
(nextID 17)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "choices")
(lock constraints)
(optional yes)))
(deviceList
(device 0 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data")
(requires
(datatype Record)
(shape "Scalar")))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 1 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 2 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 3 IFTHENELSE
(properties
(name "if can move closer")
(cases 4 "to-from==10 AND vdist>0" "from-to==10 AND vdist<0"
"to-from==1 AND hdist>0" "from-to==1 AND hdist<0"))
(interface
(input 1
(name "to")
(optional yes))
(input 2
(name "from")
(optional yes))
(input 3
(name "hdist")
(optional yes))
(input 4
(name "vdist")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "vert dist ")
(expr 1 "(to DIV 10)-(from DIV 10)"))
(interface
(input 1
(name "from")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "horiz dist")
(expr 1 "(to MOD 10)-(from MOD 10)"))
(interface
(input 1
(name "from")
(optional yes))
(input 2
(name "to")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "move.from")
(expr 1 "move.from"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 IFTHENELSE
(properties
(name "0 < w <= 7")
(cases 1 "w>0 AND w<=7"))
(interface
(input 1
(name "w")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "will move cause a cycle?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 13 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FROMARRAY
(properties
(name "Get Values (totsize broken)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 15 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 16 IFTHENELSE
(properties
(name "size > 0?")
(cases 1 "size>0"))
(interface
(input 1
(name "size")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D1:1 D0:1)
(connect D12:0 D0:2)
(connect D2:1 D1:0)
(connect D11:1 D1:1)
(connect D3:1 D2:1)
(connect D3:2 D2:2)
(connect D3:3 D2:3)
(connect D3:4 D2:4)
(connect D8:1 D3:0)
(connect D7:1 D3:1)
(connect D6:1 D3:2)
(connect D5:1 D3:3)
(connect D4:1 D3:4)
(connect D6:1 D4:1)
(connect D7:1 D4:2)
(connect D6:1 D5:1)
(connect D7:1 D5:2)
(connect D11:1 D6:1)
(connect D11:1 D7:1)
(connect D9:2 D8:1)
(connect D10:2 D9:0)
(connect D11:1 D9:1)
(connect D11:1 D10:1)
(connect D12:1 D11:1)
(connect I1:1 D11:2)
(connect D13:1 D12:1)
(connect I1:1 D13:1)
(connect D0:1 D14:1)
(connect D16:1 D15:0)
(connect D0:1 D15:1)
(connect D14:5 D16:1)
(connect D15:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 845 485)
(anchorPt 60 46)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 74 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 610 310))
(devCarrierFor 1
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 530 300))
(devCarrierFor 2
(active icon)
(icon
(extent 28 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 460 290))
(devCarrierFor 3
(active icon)
(icon
(extent 141 54))
(open
(extent 222 102))
(terminals on)
(pinCenter 340 290))
(devCarrierFor 4
(active icon)
(icon
(extent 70 25))
(open
(extent 229 42))
(terminals on)
(pinCenter 110 320))
(devCarrierFor 5
(active icon)
(icon
(extent 73 25))
(open
(extent 229 42))
(terminals on)
(pinCenter 110 270))
(devCarrierFor 6
(active icon)
(icon
(extent 83 15))
(open
(extent 92 31))
(terminals on)
(pinCenter 140 210))
(devCarrierFor 7
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter 130 180))
(devCarrierFor 8
(active icon)
(icon
(extent 71 25))
(open
(extent 126 51))
(terminals on)
(pinCenter 240 160))
(devCarrierFor 9
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 460 100))
(devCarrierFor 10
(active icon)
(icon
(extent 169 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 350 50))
(devCarrierFor 11
(active icon)
(icon
(extent 38 34))
(open
(extent 79 64))
(terminals on)
(pinCenter 210 80))
(devCarrierFor 12
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 130 80))
(devCarrierFor 13
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 50 80))
(devCarrierFor 14
(active icon)
(icon
(extent 193 54)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 350 390))
(devCarrierFor 15
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 710 380))
(devCarrierFor 16
(active icon)
(icon
(extent 61 25))
(open
(extent 58 53))
(terminals on)
(pinCenter 520 390))
(connect D1:1 D0:1
(points 2 551 300 570 300))
(connect D12:0 D0:2
(points 9 130 108 130 140 40 140 40 360 500 360 500 330 550 330 550 320 570 320))
(connect D2:1 D1:0
(points 5 476 290 490 290 490 270 530 270 530 290))
(connect D11:1 D1:1
(points 8 231 80 250 80 250 100 370 100 370 140 500 140 500 300 508 300))
(connect D3:1 D2:1
(points 2 413 270 443 270))
(connect D3:2 D2:2
(points 2 413 280 443 280))
(connect D3:3 D2:3
(points 2 413 290 443 290))
(connect D3:4 D2:4
(points 2 413 300 443 300))
(connect D8:1 D3:0
(points 3 278 150 340 150 340 260))
(connect D7:1 D3:1
(points 8 163 180 170 180 170 190 190 190 190 200 210 200 210 270 267 270))
(connect D6:1 D3:2
(points 4 184 210 200 210 200 280 267 280))
(connect D5:1 D3:3
(points 4 149 270 170 270 170 290 267 290))
(connect D4:1 D3:4
(points 4 147 320 170 320 170 300 267 300))
(connect D6:1 D4:1
(points 6 184 210 200 210 200 240 50 240 50 310 72 310))
(connect D7:1 D4:2
(points 6 163 180 180 180 180 150 60 150 60 330 72 330))
(connect D6:1 D5:1
(points 6 184 210 200 210 200 240 50 240 50 260 71 260))
(connect D7:1 D5:2
(points 6 163 180 180 180 180 150 60 150 60 280 71 280))
(connect D11:1 D6:1
(points 6 231 80 250 80 250 130 80 130 80 210 96 210))
(connect D11:1 D7:1
(points 6 231 80 250 80 250 130 80 130 80 180 96 180))
(connect D9:2 D8:1
(points 8 525 110 550 110 550 150 360 150 360 140 190 140 190 160 202 160))
(connect D10:2 D9:0
(points 3 437 60 460 60 460 85))
(connect D11:1 D9:1
(points 4 231 80 250 80 250 100 394 100))
(connect D11:1 D10:1
(points 4 231 80 240 80 240 50 263 50))
(connect D12:1 D11:1
(points 4 167 80 180 80 180 70 188 70))
(connect I1:1 D11:2
(points 6 -60 196 -50 196 -50 120 180 120 180 90 188 90))
(connect D13:1 D12:1
(points 2 81 80 92 80))
(connect I1:1 D13:1
(points 4 -60 196 -50 196 -50 80 18 80))
(connect D0:1 D14:1
(points 8 649 310 670 310 670 350 550 350 550 340 230 340 230 390 251 390))
(connect D16:1 D15:0
(points 7 553 380 570 380 570 360 680 360 680 350 710 350 710 370))
(connect D0:1 D15:1
(points 4 649 310 670 310 670 380 688 380))
(connect D14:5 D16:1
(points 4 449 410 470 410 470 390 487 390))
(connect D15:1 O1:1
(points 4 731 380 750 380 750 196 784 196)))
(stackingOrder 1 2 3 4 5 6 7 9 10 12 13 11 8 0 14 15 16))))
(device 108 CONTEXT
(properties
(name "Pick move")
(trigMode deg)
(nextID 11)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "goToLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "choices")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "move")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORMULA
(properties
(name "distance")
(expr 1 "TravelDistance(from, goToLoc)"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "goToLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "sort by distance")
(expr 1 "sort(proximities, 1, \"distance\")"))
(interface
(input 1
(name "proximities")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 7 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "distance")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 8 FORMULA
(properties
(name "move")
(expr 1 "from = moves[i].from, to = moves[i].to, moves[i]"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "to")
(optional yes))))
(device 9 FORMULA
(properties
(name "closest (for now)")
(expr 1 "moves[0]"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORMULA
(properties
(name "mark as guard piece")
(expr 1 "IsAGuardPiece[KnownBoard[move.from]-1000] = 1"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))))
(configuration
(connect D1:1 D0:1)
(connect I2:1 D1:1)
(connect D6:1 D2:1)
(connect I1:1 D2:2)
(connect D4:1 D3:1)
(connect D5:1 D4:1)
(connect D0:0 D4:2)
(connect D6:1 D5:1)
(connect D6:2 D5:2)
(connect D2:1 D5:3)
(connect I2:1 D6:1)
(connect D0:1 D6:2)
(connect D3:1 D7:1)
(connect D7:1 D8:1)
(connect D7:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 987 446)
(anchorPt 47 -5)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 110 190))
(devCarrierFor 2
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 20 190))
(devCarrierFor 4
(active icon)
(icon
(extent 58 25))
(open
(extent 304 44))
(terminals on)
(pinCenter 290 190))
(devCarrierFor 5
(active icon)
(icon
(extent 110 16))
(open
(extent 221 37))
(terminals on)
(pinCenter 670 190))
(devCarrierFor 6
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 540 190))
(devCarrierFor 7
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 99 82))
(terminals on)
(pinCenter 440 180))
(devCarrierFor 8
(active icon)
(icon
(extent 38 45))
(open
(extent 326 85))
(terminals on)
(pinCenter 200 190))
(devCarrierFor 9
(active icon)
(icon
(extent 114 16))
(open
(extent 114 34))
(terminals on)
(pinCenter 800 190))
(devCarrierFor 10
(active icon)
(icon
(extent 141 16))
(open
(extent 361 37))
(terminals on)
(pinCenter 810 260))
(connect D1:1 D0:1
(points 2 51 190 72 190))
(connect I2:1 D1:1
(points 4 -47 337 -29 337 -29 190 -12 190))
(connect D6:1 D2:1
(points 2 221 180 258 180))
(connect I1:1 D2:2
(points 4 -47 117 240 117 240 200 258 200))
(connect D4:1 D3:1
(points 2 573 190 612 190))
(connect D5:1 D4:1
(points 2 487 180 507 180))
(connect D0:0 D4:2
(points 5 110 218 110 240 500 240 500 200 507 200))
(connect D6:1 D5:1
(points 6 221 180 250 180 250 160 340 160 340 170 393 170))
(connect D6:2 D5:2
(points 8 221 200 230 200 230 210 240 210 240 230 340 230 340 180 393 180))
(connect D2:1 D5:3
(points 2 321 190 393 190))
(connect I2:1 D6:1
(points 6 -47 337 -30 337 -30 140 170 140 170 180 178 180))
(connect D0:1 D6:2
(points 4 147 190 160 190 160 200 178 200))
(connect D3:1 D7:1
(points 2 727 190 740 190))
(connect D7:1 D8:1
(points 6 859 190 880 190 880 230 720 230 720 260 737 260))
(connect D7:1 O1:1
(points 4 859 190 880 190 880 227 939 227)))
(stackingOrder 1 0 6 2 3 7 4 8 5))))
(device 109 CONTEXT
(properties
(name "Is this suicide?")
(trigMode deg)
(nextID 2)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CALL
(properties
(name "Call SimpleAttackConsequences")
(callFunc "SimpleAttackConsequences")
(parmMode rev30))
(interface
(input 1
(name "attackMove")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "WinFully")
(lock name constraints)
(optional yes))
(output 2
(name "WinLose")
(lock name constraints)
(optional yes))
(output 3
(name "WinTie")
(lock name constraints)
(optional yes))
(output 4
(name "Tie")
(lock name constraints)
(optional yes))
(output 5
(name "Lose")
(lock name constraints)
(optional yes))
(output 6
(name "Other")
(lock name constraints)
(optional yes))))
(device 1 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D0:2 D1:2)
(connect D0:3 D1:3)
(connect D0:4 D1:4)
(connect D0:6 D1:5)
(connect D0:5 O1:1)
(connect D1:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 553 460)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 224 0))
(open
(extent 196 122))
(terminals on)
(pinCenter 230 140))
(devCarrierFor 1
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 460 140))
(connect I1:1 D0:1
(points 4 0 229 10 229 10 140 49 140))
(connect D0:1 D1:1
(points 4 390 90 430 90 430 120 443 120))
(connect D0:2 D1:2
(points 4 390 110 420 110 420 130 443 130))
(connect D0:3 D1:3
(points 4 390 130 410 130 410 140 443 140))
(connect D0:4 D1:4
(points 2 390 150 443 150))
(connect D0:6 D1:5
(points 4 390 190 410 190 410 160 443 160))
(connect D0:5 O1:1
(points 6 390 170 420 170 420 190 510 190 510 109 552 109))
(connect D1:1 O2:1
(points 4 477 140 500 140 500 349 552 349)))
(stackingOrder 0 1))))
(configuration
(connect D47:2 D0:0)
(connect D0:1 D1:1)
(connect D3:0 D2:0)
(connect D1:1 D3:0)
(connect D0:1 D4:1)
(connect D3:1 D4:2)
(connect D6:1 D5:1)
(connect D7:1 D6:0)
(connect D4:1 D6:1)
(connect D4:1 D7:1)
(connect D9:5 D8:1)
(connect D5:1 D9:0)
(connect I1:1 D9:1)
(connect D14:1 D10:1)
(connect D10:0 D11:0)
(connect D13:1 D12:1)
(connect I1:1 D12:2)
(connect D8:1 D13:0)
(connect D9:5 D13:1)
(connect D26:1 D14:1)
(connect D28:1 D14:2)
(connect D30:1 D14:3)
(connect D52:1 D14:4)
(connect D19:1 D17:0)
(connect D25:5 D17:1)
(connect D17:1 D18:1)
(connect I2:1 D18:2)
(connect D25:5 D19:1)
(connect D22:1 D20:1)
(connect D23:1 D21:1)
(connect D21:1 D22:0)
(connect D23:1 D22:1)
(connect D4:1 D23:1)
(connect D24:1 D23:2)
(connect D9:0 D24:0)
(connect D20:1 D25:0)
(connect I2:1 D25:1)
(connect D53:2 D26:0)
(connect D12:1 D26:1)
(connect D4:1 D27:1)
(connect D12:1 D27:2)
(connect D48:2 D28:0)
(connect D18:1 D28:1)
(connect D44:1 D29:1)
(connect D33:1 D29:2)
(connect D29:1 D30:0)
(connect D32:1 D30:1)
(connect D36:5 D31:1)
(connect D34:1 D32:1)
(connect I2:1 D32:2)
(connect D32:1 D33:1)
(connect D31:1 D34:0)
(connect D36:5 D34:1)
(connect D46:1 D36:0)
(connect I2:1 D36:1)
(connect D38:1 D37:0)
(connect D40:1 D37:1)
(connect D40:1 D38:1)
(connect D37:1 D39:1)
(connect D4:1 D40:1)
(connect D41:1 D40:2)
(connect D24:0 D41:0)
(connect D43:1 D42:0)
(connect D44:1 D42:1)
(connect D44:1 D43:1)
(connect D40:1 D44:1)
(connect D45:1 D44:2)
(connect D39:1 D45:0)
(connect D42:1 D46:1)
(connect D50:2 D47:0)
(connect D49:1 D48:0)
(connect D18:1 D48:1)
(connect D23:1 D49:1)
(connect D18:1 D49:2)
(connect D50:1 D51:0)
(connect I2:1 D51:1)
(connect D50:1 D52:1)
(connect D51:1 D52:2)
(connect D27:1 D53:0)
(connect D12:1 D53:1)
(connect D10:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1158 769)
(anchorPt 278 -281)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 70 120))
(devCarrierFor 2
(active icon)
(icon
(extent 177 25))
(open
(extent 189 51))
(terminals on)
(pinCenter 220 120))
(devCarrierFor 3
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 150 260))
(devCarrierFor 4
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 150 200))
(devCarrierFor 5
(active icon)
(icon
(extent 99 25))
(open
(extent 217 41))
(terminals on)
(pinCenter 310 190))
(devCarrierFor 8
(active icon)
(icon
(extent 123 25))
(open
(extent 268 52))
(terminals on)
(pinCenter 290 260))
(devCarrierFor 9
(active icon)
(icon
(extent 111 15))
(open
(extent 137 31))
(terminals on)
(pinCenter 490 190))
(devCarrierFor 10
(active icon)
(icon
(extent 63 25))
(open
(extent 74 51))
(terminals on)
(pinCenter 440 160))
(devCarrierFor 11
(active icon)
(icon
(extent 168 25))
(open
(extent 188 55))
(terminals on)
(pinCenter 390 360))
(devCarrierFor 12
(active icon)
(icon
(extent 193 54)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 160 340))
(devCarrierFor 13
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 920 660))
(devCarrierFor 14
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 920 690))
(devCarrierFor 26
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 370 460))
(devCarrierFor 28
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 290 450))
(devCarrierFor 47
(active icon)
(icon
(extent 72 45))
(open
(extent 38 82))
(terminals on)
(pinCenter 840 680))
(devCarrierFor 50
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 192 101)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 710 290))
(devCarrierFor 51
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 192 101)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 670 670))
(devCarrierFor 54
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 870))
(devCarrierFor 58
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 310 880))
(devCarrierFor 59
(active icon)
(icon
(extent 134 25))
(open
(extent 188 55))
(terminals on)
(pinCenter 410 770))
(devCarrierFor 61
(active icon)
(icon
(extent 80 25))
(open
(extent 74 51))
(terminals on)
(pinCenter 190 680))
(devCarrierFor 62
(active icon)
(icon
(extent 63 25))
(open
(extent 74 51))
(terminals on)
(pinCenter 400 570))
(devCarrierFor 63
(active icon)
(icon
(extent 111 15))
(open
(extent 137 31))
(terminals on)
(pinCenter 440 610))
(devCarrierFor 64
(active icon)
(icon
(extent 204 25))
(open
(extent 217 41))
(terminals on)
(pinCenter 250 610))
(devCarrierFor 65
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 80 620))
(devCarrierFor 66
(active icon)
(icon
(extent 193 54)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 170 750))
(devCarrierFor 67
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 580 480))
(devCarrierFor 70
(active icon)
(icon
(extent 185 25))
(open
(extent 492 62))
(terminals on)
(pinCenter 530 430))
(devCarrierFor 72
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 560 910))
(devCarrierFor 74
(active icon)
(icon
(extent 80 25))
(open
(extent 130 62))
(terminals on)
(pinCenter 480 1330))
(devCarrierFor 76
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 490 1390))
(devCarrierFor 77
(active icon)
(icon
(extent 134 25))
(open
(extent 188 55))
(terminals on)
(pinCenter 290 1300))
(devCarrierFor 78
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 250 1380))
(devCarrierFor 79
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter 360 1360))
(devCarrierFor 81
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 180 1370))
(devCarrierFor 82
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 218 153)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 690 1100))
(devCarrierFor 83
(active icon)
(icon
(extent 193 54)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 100 1280))
(devCarrierFor 84
(active icon)
(icon
(extent 111 15))
(open
(extent 137 31))
(terminals on)
(pinCenter 410 990))
(devCarrierFor 85
(active icon)
(icon
(extent 63 25))
(open
(extent 74 51))
(terminals on)
(pinCenter 370 950))
(devCarrierFor 86
(active icon)
(icon
(extent 134 25))
(open
(extent 316 51))
(terminals on)
(pinCenter 310 1080))
(devCarrierFor 87
(active icon)
(icon
(extent 204 25))
(open
(extent 217 41))
(terminals on)
(pinCenter 220 990))
(devCarrierFor 88
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 50 1000))
(devCarrierFor 89
(active icon)
(icon
(extent 111 15))
(open
(extent 137 31))
(terminals on)
(pinCenter 500 1150))
(devCarrierFor 90
(active icon)
(icon
(extent 63 25))
(open
(extent 74 51))
(terminals on)
(pinCenter 480 1110))
(devCarrierFor 91
(active icon)
(icon
(extent 245 25))
(open
(extent 217 41))
(terminals on)
(pinCenter 290 1150))
(devCarrierFor 92
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 90 1160))
(devCarrierFor 93
(active icon)
(icon
(extent 80 25))
(open
(extent 74 51))
(terminals on)
(pinCenter 250 1210))
(devCarrierFor 94
(active icon)
(icon
(extent 277 25))
(open
(extent 281 53))
(terminals on)
(pinCenter -80 60))
(devCarrierFor 101
(active icon)
(icon
(extent 101 25))
(terminals on)
(pinCenter 680 870))
(devCarrierFor 105
(active icon)
(icon
(extent 185 25))
(open
(extent 492 62))
(terminals on)
(pinCenter 500 840))
(devCarrierFor 106
(active icon)
(icon
(extent 158 25))
(open
(extent 196 53))
(terminals on)
(pinCenter -130 -20))
(devCarrierFor 107
(active icon)
(icon
(extent 173 16))
(terminals on)
(pinCenter 100 0))
(devCarrierFor 108
(active icon)
(icon
(extent 70 25))
(terminals on)
(pinCenter 250 0))
(devCarrierFor 109
(active icon)
(icon
(extent 101 25))
(terminals on)
(pinCenter 720 450))
(connect D47:2 D0:0
(points 3 61 70 70 70 70 92))
(connect D0:1 D1:1
(points 2 106 120 129 120))
(connect D3:0 D2:0
(points 2 150 228 150 250))
(connect D1:1 D3:0
(points 5 311 110 330 110 330 160 150 160 150 172))
(connect D0:1 D4:1
(points 6 106 120 120 120 120 150 210 150 210 180 258 180))
(connect D3:1 D4:2
(points 2 186 200 258 200))
(connect D6:1 D5:1
(points 6 548 190 570 190 570 230 210 230 210 260 226 260))
(connect D7:1 D6:0
(points 3 474 150 490 150 490 180))
(connect D4:1 D6:1
(points 2 362 190 432 190))
(connect D4:1 D7:1
(points 4 362 190 380 190 380 160 406 160))
(connect D9:5 D8:1
(points 2 259 360 303 360))
(connect D5:1 D9:0
(points 5 354 250 370 250 370 290 160 290 160 310))
(connect I1:1 D9:1
(points 4 -278 475 -300 475 -300 340 61 340))
(connect D14:1 D10:1
(points 4 878 680 890 680 890 660 898 660))
(connect D10:0 D11:0
(points 2 920 670 920 680))
(connect D13:1 D12:1
(points 2 327 450 348 450))
(connect I1:1 D12:2
(points 8 -278 475 -300 475 -300 340 40 340 40 500 340 500 340 470 348 470))
(connect D8:1 D13:0
(points 7 476 350 500 350 500 400 420 400 420 410 290 410 290 421))
(connect D9:5 D13:1
(points 6 259 360 270 360 270 400 230 400 230 450 252 450))
(connect D26:1 D14:1
(points 4 601 480 790 480 790 660 801 660))
(connect D28:1 D14:2
(points 6 581 910 600 910 600 920 790 920 790 670 801 670))
(connect D30:1 D14:3
(points 8 511 1390 530 1390 530 1330 820 1330 820 980 780 980 780 680 801 680))
(connect D52:1 D14:4
(points 8 287 0 580 0 580 360 800 360 800 640 780 640 780 690 801 690))
(connect D19:1 D17:0
(points 5 479 760 500 760 500 810 220 810 220 841))
(connect D25:5 D17:1
(points 6 269 770 290 770 290 800 160 800 160 870 182 870))
(connect D17:1 D18:1
(points 2 257 870 288 870))
(connect I2:1 D18:2
(points 6 -278 855 -300 855 -300 920 280 920 280 890 288 890))
(connect D25:5 D19:1
(points 2 269 770 340 770))
(connect D22:1 D20:1
(points 6 498 610 520 610 520 650 140 650 140 680 147 680))
(connect D23:1 D21:1
(points 4 354 610 360 610 360 570 366 570))
(connect D21:1 D22:0
(points 3 434 560 440 560 440 600))
(connect D23:1 D22:1
(points 2 354 610 382 610))
(connect D4:1 D23:1
(points 8 362 190 380 190 380 300 280 300 280 390 140 390 140 600 145 600))
(connect D24:1 D23:2
(points 2 116 620 145 620))
(connect D9:0 D24:0
(points 6 160 369 160 380 130 380 130 400 80 400 80 592))
(connect D20:1 D25:0
(points 5 232 670 250 670 250 710 170 710 170 720))
(connect I2:1 D25:1
(points 4 -278 855 -300 855 -300 750 71 750))
(connect D53:2 D26:0
(points 9 773 460 790 460 790 410 650 410 650 440 640 440 640 460 580 460 580
470))
(connect D12:1 D26:1
(points 4 391 460 410 460 410 480 558 480))
(connect D4:1 D27:1
(points 8 362 190 380 190 380 300 280 300 280 400 350 400 350 420 435 420))
(connect D12:1 D27:2
(points 4 391 460 410 460 410 440 435 440))
(connect D48:2 D28:0
(points 7 733 880 750 880 750 910 610 910 610 880 560 880 560 900))
(connect D18:1 D28:1
(points 4 331 880 350 880 350 910 538 910))
(connect D44:1 D29:1
(points 4 415 1150 430 1150 430 1320 437 1320))
(connect D33:1 D29:2
(points 4 393 1360 400 1360 400 1340 437 1340))
(connect D29:1 D30:0
(points 5 522 1320 530 1320 530 1300 490 1300 490 1380))
(connect D32:1 D30:1
(points 8 271 1380 280 1380 280 1370 270 1370 270 1330 450 1330 450 1390 468
1390))
(connect D36:5 D31:1
(points 2 199 1300 220 1300))
(connect D34:1 D32:1
(points 2 217 1370 228 1370))
(connect I2:1 D32:2
(points 6 -278 855 -300 855 -300 1330 210 1330 210 1390 228 1390))
(connect D32:1 D33:1
(points 8 271 1380 280 1380 280 1370 270 1370 270 1330 320 1330 320 1360 326
1360))
(connect D31:1 D34:0
(points 7 359 1290 370 1290 370 1270 210 1270 210 1320 180 1320 180 1341))
(connect D36:5 D34:1
(points 6 199 1300 170 1300 170 1320 130 1320 130 1370 142 1370))
(connect D46:1 D36:0
(points 9 292 1200 310 1200 310 1250 220 1250 220 1240 200 1240 200 1230 100
1230 100 1250))
(connect I2:1 D36:1
(points 4 -278 855 -300 855 -300 1280 1 1280))
(connect D38:1 D37:0
(points 3 404 940 410 940 410 980))
(connect D40:1 D37:1
(points 2 324 990 352 990))
(connect D40:1 D38:1
(points 4 324 990 330 990 330 950 336 950))
(connect D37:1 D39:1
(points 6 468 990 490 990 490 1030 220 1030 220 1080 240 1080))
(connect D4:1 D40:1
(points 10 362 190 380 190 380 300 280 300 280 390 20 390 20 800 110 800 110 980
115 980))
(connect D41:1 D40:2
(points 2 86 1000 115 1000))
(connect D24:0 D41:0
(points 4 80 648 80 670 50 670 50 972))
(connect D43:1 D42:0
(points 5 514 1100 520 1100 520 1130 500 1130 500 1140))
(connect D44:1 D42:1
(points 2 415 1150 442 1150))
(connect D44:1 D43:1
(points 4 415 1150 430 1150 430 1110 446 1110))
(connect D40:1 D44:1
(points 6 324 990 330 990 330 1040 160 1040 160 1140 165 1140))
(connect D45:1 D44:2
(points 2 126 1160 165 1160))
(connect D39:1 D45:0
(points 7 379 1070 400 1070 400 1120 220 1120 220 1110 90 1110 90 1132))
(connect D42:1 D46:1
(points 8 558 1150 570 1150 570 1170 560 1170 560 1190 200 1190 200 1210 207
1210))
(connect D50:2 D47:0
(points 5 -49 -10 -30 -10 -30 20 -80 20 -80 45))
(connect D49:1 D48:0
(points 3 595 830 680 830 680 855))
(connect D18:1 D48:1
(points 4 331 880 550 880 550 870 627 870))
(connect D23:1 D49:1
(points 6 354 610 360 610 360 660 320 660 320 830 405 830))
(connect D18:1 D49:2
(points 4 331 880 380 880 380 850 405 850))
(connect D50:1 D51:0
(points 3 -49 -30 100 -30 100 -11))
(connect I2:1 D51:1
(points 6 -278 855 -320 855 -320 30 -20 30 -20 0 11 0))
(connect D50:1 D52:1
(points 4 -49 -30 200 -30 200 -10 212 -10))
(connect D51:1 D52:2
(points 4 189 0 200 0 200 10 212 10))
(connect D27:1 D53:0
(points 3 625 420 720 420 720 435))
(connect D12:1 D53:1
(points 8 391 460 410 460 410 480 540 480 540 510 650 510 650 450 667 450))
(connect D10:1 O1:1
(points 8 941 660 950 660 950 650 930 650 930 640 820 640 820 665 879 665)))
(stackingOrder 3 2 7 6 9 10 11 17 23 22 21 24 13 12 18 25 37 38 41 44 42 43 20
36 34 32 33 46 0 1 4 5 8 19 31 45 39 26 28 29 30 47 16 15 35 27 49 14 51 50 52
48 53 40))))
(device 21 FORMULA
(properties
(name "from, to")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 EXITCONTEXT)
(device 23 CONTEXT
(properties
(name "Look at other options")
(trigMode deg)
(nextID 78)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "attackMoves")
(optional yes))
(input 2
(name "otherMoves")
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes)))
(deviceList
(device 43 IFTHENELSE
(properties
(name "any attack moves?")
(cases 1 "AnyElements(moves)"))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 44 IFTHENELSE
(properties
(name "any other moves?")
(cases 1 "AnyElements(moves)"))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 46 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 47 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 48 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 49 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 52 EXITCONTEXT)
(device 54 CONTEXT
(properties
(name "CanWeLearnAnythingFromAttacking")
(trigMode deg)
(nextID 38)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "attackMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "onlyBadThings")
(lock constraints)
(optional yes)))
(deviceList
(device 1 IFTHENELSE
(properties
(name "will we certainly die in this attack?")
(cases 1 "AttackMoves[i].lose==1.0"))
(interface
(input 1
(name "AttackMoves")
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "High or Med/Low-Ranking Piece?")
(cases 1 "weight<=3"))
(interface
(input 1
(name "weight")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "our piece weight of attack move")
(expr 1 "WeightOfPiece[KnownBoard[AttackMoves[i].from]-1000]"))
(interface
(input 1
(name "attackMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(am)"))
(interface
(input 1
(name "am")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 IFTHENELSE
(properties
(name "unknown movable target?")
(cases 1 "KnownBoard[move.to]==-2"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 FORMULA
(properties
(name "a move")
(expr 1 "attackMoves[i]"))
(interface
(input 1
(name "attackMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 13 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(input 4
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 15 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 19 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 20 IFTHENELSE
(properties
(name "High or Med/Low-Ranking Piece?")
(cases 1 "weight<=3"))
(interface
(input 1
(name "weight")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 21 FORMULA
(properties
(name "our piece weight of attack move")
(expr 1 "WeightOfPiece[KnownBoard[AttackMoves[i].from]-1000]"))
(interface
(input 1
(name "attackMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 IFTHENELSE
(properties
(name "will we certainly die in this attack?")
(cases 1 "AttackMoves[i].lose==1.0"))
(interface
(input 1
(name "AttackMoves")
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 23 FORMULA
(properties
(name "a move")
(expr 1 "attackMoves[i]"))
(interface
(input 1
(name "attackMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 25 IFTHENELSE
(properties
(name "unknown fixed target?")
(cases 1 "KnownBoard[move.to]==-1"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 30 IFTHENELSE
(properties
(name "unknown fixed target?")
(cases 1 "KnownBoard[move.to]==-1"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 31 IFTHENELSE
(properties
(name "unknown movable target (and we\'re not a miner)?")
(cases 1
"KnownBoard[move.to]==-2 AND  NOT (Knownboard[move.from]>=1022 AND KnownBoard[move.from]<=1026)"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 32 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 33 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 34 FORMULA
(properties
(name "unpack move")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 35 EXITCONTEXT)
(device 36 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 37 IFTHENELSE
(properties
(name "Should we risk it?")
(cases 1 "(move.bombed<0.1 ? 1 : (random(0, 1)<0.1))"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I1:1 D0:1)
(connect D3:1 D0:2)
(connect D2:1 D1:1)
(connect D0:2 D2:0)
(connect I1:1 D2:1)
(connect D3:1 D2:2)
(connect D4:1 D3:1)
(connect I1:1 D4:1)
(connect D1:1 D5:0)
(connect D6:1 D5:1)
(connect I1:1 D6:1)
(connect D3:1 D6:2)
(connect D5:1 D7:0)
(connect D6:1 D7:1)
(connect D7:1 D8:1)
(connect D9:1 D8:2)
(connect D19:1 D8:3)
(connect D18:1 D8:4)
(connect D15:1 D9:0)
(connect D6:1 D9:1)
(connect D3:0 D10:0)
(connect D4:1 D10:1)
(connect D12:1 D11:1)
(connect D13:2 D12:0)
(connect I1:1 D12:1)
(connect D10:1 D12:2)
(connect I1:1 D13:1)
(connect D10:1 D13:2)
(connect I1:1 D14:1)
(connect D10:1 D14:2)
(connect D1:2 D15:0)
(connect D6:1 D15:1)
(connect D11:1 D16:0)
(connect D14:1 D16:1)
(connect D11:2 D17:0)
(connect D14:1 D17:1)
(connect D17:1 D18:0)
(connect D14:1 D18:1)
(connect D23:1 D19:0)
(connect D14:1 D19:1)
(connect D8:1 D20:1)
(connect D20:0 D21:0)
(connect D10:0 D22:0)
(connect D16:1 D23:0)
(connect D14:1 D23:1)
(connect D20:1 O1:1)
(connect D20:2 O2:1)
(connect D22:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 1075 683)
(anchorPt 1 13)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 231 25))
(open
(extent 191 53))
(terminals on)
(pinCenter 390 50))
(devCarrierFor 2
(active icon)
(icon
(extent 229 34))
(open
(extent 175 62))
(terminals on)
(pinCenter 650 100))
(devCarrierFor 3
(active icon)
(icon
(extent 218 25))
(open
(extent 402 42))
(terminals on)
(pinCenter 390 100))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 170 100))
(devCarrierFor 5
(active icon)
(icon
(extent 58 16))
(open
(extent 105 32))
(terminals on)
(pinCenter 80 100))
(devCarrierFor 9
(active icon)
(icon
(extent 178 25))
(open
(extent 297 55))
(terminals on)
(pinCenter 800 150))
(devCarrierFor 11
(active icon)
(icon
(extent 50 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 350 160))
(devCarrierFor 12
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 960 190))
(devCarrierFor 13
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 1020 230))
(devCarrierFor 15
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 960 230))
(devCarrierFor 19
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 170 430))
(devCarrierFor 20
(active icon)
(icon
(extent 229 34))
(open
(extent 175 62))
(terminals on)
(pinCenter 630 440))
(devCarrierFor 21
(active icon)
(icon
(extent 218 25))
(open
(extent 402 42))
(terminals on)
(pinCenter 390 440))
(devCarrierFor 22
(active icon)
(icon
(extent 231 25))
(open
(extent 191 53))
(terminals on)
(pinCenter 390 390))
(devCarrierFor 23
(active icon)
(icon
(extent 50 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 330 500))
(devCarrierFor 25
(active icon)
(icon
(extent 151 25))
(open
(extent 199 55))
(terminals on)
(pinCenter 800 220))
(devCarrierFor 30
(active icon)
(icon
(extent 151 25))
(open
(extent 199 55))
(terminals on)
(pinCenter 670 520))
(devCarrierFor 31
(active icon)
(icon
(extent 343 25))
(open
(extent 721 55))
(terminals on)
(pinCenter 640 600))
(devCarrierFor 32
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 1000 520))
(devCarrierFor 33
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 1000 480))
(devCarrierFor 34
(active icon)
(icon
(extent 92 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 610 300))
(devCarrierFor 35
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 610 350))
(devCarrierFor 36
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 170 590))
(devCarrierFor 37
(active icon)
(icon
(extent 121 25))
(open
(extent 315 53))
(terminals on)
(pinCenter 830 540))
(connect I1:1 D0:1
(points 4 -1 328 230 328 230 40 272 40))
(connect D3:1 D0:2
(points 6 207 100 220 100 220 80 240 80 240 60 272 60))
(connect D2:1 D1:1
(points 2 501 100 533 100))
(connect D0:2 D2:0
(points 5 508 60 520 60 520 80 390 80 390 85))
(connect I1:1 D2:1
(points 4 -1 328 230 328 230 90 278 90))
(connect D3:1 D2:2
(points 4 207 100 220 100 220 110 278 110))
(connect D4:1 D3:1
(points 2 111 100 132 100))
(connect I1:1 D4:1
(points 4 -1 328 20 328 20 100 48 100))
(connect D1:1 D5:0
(points 3 767 90 800 90 800 135))
(connect D6:1 D5:1
(points 4 377 160 400 160 400 150 708 150))
(connect I1:1 D6:1
(points 4 -1 328 230 328 230 150 322 150))
(connect D3:1 D6:2
(points 6 207 100 220 100 220 110 260 110 260 170 322 170))
(connect D5:1 D7:0
(points 3 891 140 960 140 960 179))
(connect D6:1 D7:1
(points 8 377 160 400 160 400 220 700 220 700 260 920 260 920 190 940 190))
(connect D7:1 D8:1
(points 4 980 190 990 190 990 210 1003 210))
(connect D9:1 D8:2
(points 4 980 230 990 230 990 220 1003 220))
(connect D19:1 D8:3
(points 6 1020 480 1040 480 1040 450 990 450 990 230 1003 230))
(connect D18:1 D8:4
(points 8 1020 520 1050 520 1050 440 970 440 970 260 980 260 980 240 1003 240))
(connect D15:1 D9:0
(points 3 878 210 960 210 960 219))
(connect D6:1 D9:1
(points 8 377 160 400 160 400 220 700 220 700 260 920 260 920 230 940 230))
(connect D3:0 D10:0
(points 2 170 128 170 401))
(connect D4:1 D10:1
(points 4 111 100 120 100 120 430 132 430))
(connect D12:1 D11:1
(points 2 501 440 513 440))
(connect D13:2 D12:0
(points 5 508 400 520 400 520 420 390 420 390 425))
(connect I1:1 D12:1
(points 4 -1 328 230 328 230 430 278 430))
(connect D10:1 D12:2
(points 6 207 430 220 430 220 440 230 440 230 450 278 450))
(connect I1:1 D13:1
(points 4 -1 328 230 328 230 380 272 380))
(connect D10:1 D13:2
(points 6 207 430 220 430 220 440 240 440 240 400 272 400))
(connect I1:1 D14:1
(points 4 -1 328 110 328 110 490 302 490))
(connect D10:1 D14:2
(points 8 207 430 220 430 220 440 230 440 230 450 260 450 260 510 302 510))
(connect D1:2 D15:0
(points 5 767 110 910 110 910 190 800 190 800 205))
(connect D6:1 D15:1
(points 4 377 160 400 160 400 220 722 220))
(connect D11:1 D16:0
(points 5 747 430 770 430 770 480 670 480 670 505))
(connect D14:1 D16:1
(points 4 357 500 380 500 380 520 592 520))
(connect D11:2 D17:0
(points 9 747 450 760 450 760 470 660 470 660 480 560 480 560 580 640 580 640
585))
(connect D14:1 D17:1
(points 6 357 500 380 500 380 520 440 520 440 600 466 600))
(connect D17:1 D18:0
(points 5 814 590 910 590 910 500 1000 500 1000 509))
(connect D14:1 D18:1
(points 8 357 500 380 500 380 520 570 520 570 490 920 490 920 520 980 520))
(connect D23:1 D19:0
(points 5 893 530 900 530 900 460 1000 460 1000 469))
(connect D14:1 D19:1
(points 8 357 500 380 500 380 520 570 520 570 490 920 490 920 480 980 480))
(connect D8:1 D20:1
(points 8 1037 230 1060 230 1060 280 980 280 980 270 540 270 540 300 561 300))
(connect D20:0 D21:0
(points 2 610 315 610 339))
(connect D10:0 D22:0
(points 2 170 458 170 579))
(connect D16:1 D23:0
(points 3 748 510 830 510 830 525))
(connect D14:1 D23:1
(points 8 357 500 380 500 380 520 570 520 570 570 750 570 750 540 767 540))
(connect D20:1 O1:1
(points 6 658 290 1070 290 1070 220 1060 220 1060 98 1073 98))
(connect D20:2 O2:1
(points 4 658 310 690 310 690 328 1073 328))
(connect D22:1 O3:1
(points 6 184 590 200 590 200 650 920 650 920 558 1073 558)))
(stackingOrder 2 4 7 9 1 3 10 12 6 14 5 15 18 19 8 21 22 0 13 20 11 16 23 17))))
(device 55 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 57 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 58 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(locs)"))
(interface
(input 1
(name "locs")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 59 IFTHENELSE
(properties
(name "cyclic move?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 60 FORMULA
(properties
(name "a move")
(expr 1 "moves[n-i-1]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 3
(name "N")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 63 FORMULA
(properties
(name "unpack move")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 64 IFTHENELSE
(properties
(name "retreating move?")
(cases 1 "move.to==(move.from-10)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 65 FORMULA
(properties
(name "unpack move")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 66 IFTHENELSE
(properties
(name "cyclic move?")
(cases 1 "DoesMoveCauseCycle(move)"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 67 FORMULA
(properties
(name "a move")
(expr 1 "moves[n-i-1]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 3
(name "N")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 68 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 69 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 70 FORMULA
(properties
(name "piece, move.to")
(expr 1 "piece = KnownBoard[move.from], move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "piece")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 71 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 73 IFTHENELSE
(properties
(name "any other moves?")
(cases 1 "AnyElements(moves)"))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 74 FORMULA
(properties
(name "pick a move")
(expr 1 "moves[0]"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 75 FORMULA
(properties
(name "pick a move")
(expr 1 "moves[0]"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 76 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 77 FORMULA
(properties
(name "unpack move")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect D8:1 D1:0)
(connect I2:1 D1:1)
(connect D7:1 D2:1)
(connect D13:1 D2:2)
(connect D15:1 D2:3)
(connect D26:1 D2:4)
(connect D7:2 D3:1)
(connect D13:2 D3:2)
(connect D15:2 D3:3)
(connect D26:2 D3:4)
(connect D2:1 D4:1)
(connect D4:0 D5:0)
(connect D3:1 D5:1)
(connect D5:0 D6:0)
(connect D0:1 D7:0)
(connect I1:1 D7:1)
(connect D0:2 D8:1)
(connect D7:3 D8:2)
(connect D10:1 D9:1)
(connect D1:1 D10:0)
(connect I2:1 D10:1)
(connect D12:1 D11:1)
(connect D9:1 D12:1)
(connect I2:1 D12:2)
(connect D10:1 D12:3)
(connect D14:2 D13:0)
(connect D12:1 D13:1)
(connect D11:2 D14:0)
(connect D12:1 D14:1)
(connect D21:1 D15:0)
(connect D17:1 D15:1)
(connect D17:1 D16:1)
(connect D18:1 D17:1)
(connect I2:1 D17:2)
(connect D10:1 D17:3)
(connect D9:0 D18:0)
(connect D10:1 D18:1)
(connect D20:1 D19:1)
(connect D20:2 D19:2)
(connect D16:2 D20:0)
(connect D17:1 D20:1)
(connect D19:2 D21:1)
(connect D19:3 D21:2)
(connect D18:0 D22:0)
(connect I2:1 D22:1)
(connect D22:2 D23:0)
(connect I1:1 D23:1)
(connect D22:1 D24:0)
(connect I2:1 D24:1)
(connect D24:1 D25:1)
(connect D23:1 D25:2)
(connect D25:1 D26:1)
(connect D4:1 O1:1)
(connect D5:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 1073 771)
(anchorPt 53 30)
(configuration
(devCarrierFor 43
(active icon)
(icon
(extent 129 25))
(open
(extent 165 53))
(terminals on)
(pinCenter 80 120))
(devCarrierFor 44
(active icon)
(icon
(extent 124 25))
(open
(extent 165 53))
(terminals on)
(pinCenter 110 290))
(devCarrierFor 46
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 610 150))
(devCarrierFor 47
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 610 220))
(devCarrierFor 48
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 760 130))
(devCarrierFor 49
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 760 200))
(devCarrierFor 52
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 760 260))
(devCarrierFor 54
(active icon)
(icon
(extent 253 34))
(terminals on)
(pinCenter 310 110))
(devCarrierFor 55
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 160 190))
(devCarrierFor 57
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 330 320))
(devCarrierFor 58
(active icon)
(icon
(extent 58 16))
(open
(extent 111 32))
(terminals on)
(pinCenter 240 320))
(devCarrierFor 59
(active icon)
(icon
(extent 88 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 520 330))
(devCarrierFor 60
(active icon)
(icon
(extent 50 34))
(open
(extent 112 62))
(terminals on)
(pinCenter 420 340))
(devCarrierFor 63
(active icon)
(icon
(extent 92 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 710 410))
(devCarrierFor 64
(active icon)
(icon
(extent 117 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 620 370))
(devCarrierFor 65
(active icon)
(icon
(extent 92 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 770 590))
(devCarrierFor 66
(active icon)
(icon
(extent 88 25))
(open
(extent 219 53))
(terminals on)
(pinCenter 520 420))
(devCarrierFor 67
(active icon)
(icon
(extent 50 34))
(open
(extent 112 62))
(terminals on)
(pinCenter 420 430))
(devCarrierFor 68
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 330 410))
(devCarrierFor 69
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 610 510))
(devCarrierFor 70
(active icon)
(icon
(extent 101 25))
(open
(extent 296 42))
(terminals on)
(pinCenter 430 510))
(devCarrierFor 71
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 740 510))
(devCarrierFor 73
(active icon)
(icon
(extent 124 25))
(open
(extent 165 53))
(terminals on)
(pinCenter 330 580))
(devCarrierFor 74
(active icon)
(icon
(extent 82 34))
(open
(extent 112 62))
(terminals on)
(pinCenter 330 670))
(devCarrierFor 75
(active icon)
(icon
(extent 82 34))
(open
(extent 112 62))
(terminals on)
(pinCenter 480 610))
(devCarrierFor 76
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 570 650))
(devCarrierFor 77
(active icon)
(icon
(extent 92 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 650 650))
(connect I1:1 D0:1
(points 4 -53 155 -10 155 -10 120 13 120))
(connect D8:1 D1:0
(points 5 177 190 200 190 200 230 110 230 110 275))
(connect I2:1 D1:1
(points 4 -53 555 10 555 10 290 45 290))
(connect D7:1 D2:1
(points 4 439 100 480 100 480 130 593 130))
(connect D13:1 D2:2
(points 8 758 400 770 400 770 340 690 340 690 110 570 110 570 140 593 140))
(connect D15:1 D2:3
(points 8 818 580 830 580 830 570 820 570 820 310 560 310 560 150 593 150))
(connect D26:1 D2:4
(points 8 698 640 850 640 850 170 720 170 720 190 570 190 570 160 593 160))
(connect D7:2 D3:1
(points 4 439 110 460 110 460 200 593 200))
(connect D13:2 D3:2
(points 6 758 420 780 420 780 290 580 290 580 210 593 210))
(connect D15:2 D3:3
(points 8 818 600 840 600 840 560 830 560 830 300 570 300 570 220 593 220))
(connect D26:2 D3:4
(points 6 698 660 860 660 860 100 550 100 550 230 593 230))
(connect D2:1 D4:1
(points 4 627 150 650 150 650 130 740 130))
(connect D4:0 D5:0
(points 2 760 140 760 189))
(connect D3:1 D5:1
(points 4 627 220 650 220 650 200 740 200))
(connect D5:0 D6:0
(points 2 760 210 760 249))
(connect D0:1 D7:0
(points 5 147 110 160 110 160 70 310 70 310 90))
(connect I1:1 D7:1
(points 6 -53 155 -10 155 -10 90 170 90 170 110 181 110))
(connect D0:2 D8:1
(points 6 147 130 160 130 160 160 130 160 130 180 143 180))
(connect D7:3 D8:2
(points 6 439 120 450 120 450 150 120 150 120 200 143 200))
(connect D10:1 D9:1
(points 2 271 320 292 320))
(connect D1:1 D10:0
(points 3 174 280 240 280 240 309))
(connect I2:1 D10:1
(points 4 -53 555 190 555 190 320 208 320))
(connect D12:1 D11:1
(points 4 447 340 460 340 460 330 473 330))
(connect D9:1 D12:1
(points 4 367 320 380 320 380 330 392 330))
(connect I2:1 D12:2
(points 6 -53 555 190 555 190 270 380 270 380 340 392 340))
(connect D10:1 D12:3
(points 6 271 320 280 320 280 360 380 360 380 350 392 350))
(connect D14:2 D13:0
(points 3 681 380 710 380 710 395))
(connect D12:1 D13:1
(points 8 447 340 460 340 460 370 540 370 540 400 580 400 580 410 661 410))
(connect D11:2 D14:0
(points 3 566 340 620 340 620 355))
(connect D12:1 D14:1
(points 4 447 340 460 340 460 370 559 370))
(connect D21:1 D15:0
(points 5 757 510 780 510 780 550 770 550 770 575))
(connect D17:1 D15:1
(points 8 447 430 460 430 460 460 500 460 500 550 540 550 540 590 721 590))
(connect D17:1 D16:1
(points 4 447 430 460 430 460 420 473 420))
(connect D18:1 D17:1
(points 4 367 410 380 410 380 420 392 420))
(connect I2:1 D17:2
(points 6 -53 555 190 555 190 460 380 460 380 430 392 430))
(connect D10:1 D17:3
(points 8 271 320 280 320 280 370 270 370 270 450 370 450 370 440 392 440))
(connect D9:0 D18:0
(points 2 330 348 330 381))
(connect D10:1 D18:1
(points 6 271 320 280 320 280 370 270 370 270 410 292 410))
(connect D20:1 D19:1
(points 2 483 500 517 500))
(connect D20:2 D19:2
(points 2 483 520 517 520))
(connect D16:2 D20:0
(points 7 566 430 590 430 590 460 540 460 540 470 430 470 430 495))
(connect D17:1 D20:1
(points 8 447 430 460 430 460 460 420 460 420 470 360 470 360 510 377 510))
(connect D19:2 D21:1
(points 4 702 510 710 510 710 500 723 500))
(connect D19:3 D21:2
(points 2 702 520 723 520))
(connect D18:0 D22:0
(points 2 330 438 330 565))
(connect I2:1 D22:1
(points 4 -53 555 200 555 200 580 265 580))
(connect D22:2 D23:0
(points 5 394 590 410 590 410 620 330 620 330 650))
(connect I1:1 D23:1
(points 4 -53 155 -60 155 -60 670 286 670))
(connect D22:1 D24:0
(points 3 394 570 480 570 480 590))
(connect I2:1 D24:1
(points 4 -53 555 420 555 420 610 436 610))
(connect D24:1 D25:1
(points 4 523 610 540 610 540 640 553 640))
(connect D23:1 D25:2
(points 4 373 670 390 670 390 660 553 660))
(connect D25:1 D26:1
(points 2 587 650 601 650))
(connect D4:1 O1:1
(points 4 780 130 915 130 915 155 1019 155))
(connect D5:1 O2:1
(points 4 780 200 840 200 840 555 1019 555)))
(stackingOrder 4 5 6 1 0 8 9 10 14 13 17 18 7 20 19 21 22 24 23 25 15 26 2 3 16
12 11))))
(configuration
(connect D13:2 D0:1)
(connect D3:2 D0:2)
(connect D4:2 D0:3)
(connect D9:2 D0:4)
(connect D15:2 D0:5)
(connect D13:1 D1:1)
(connect D3:1 D1:2)
(connect D4:1 D1:3)
(connect D9:1 D1:4)
(connect D15:1 D1:5)
(connect D10:5 D2:1)
(connect D12:0 D3:0)
(connect D11:1 D3:1)
(connect D6:1 D4:0)
(connect D11:2 D4:1)
(connect D6:2 D5:0)
(connect D7:5 D6:1)
(connect D8:1 D7:0)
(connect D11:2 D7:1)
(connect D3:3 D8:1)
(connect D2:2 D8:2)
(connect D2:1 D9:0)
(connect D11:1 D9:1)
(connect D11:1 D10:1)
(connect D9:3 D12:0)
(connect D11:1 D12:1)
(connect D11:2 D12:2)
(connect D12:1 D13:1)
(connect D13:0 D14:0)
(connect D4:3 D15:0)
(connect D11:1 D15:1)
(connect D11:2 D15:2)
(connect D1:1 O1:1)
(connect D0:1 O2:1)
(connect D5:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 855 776)
(anchorPt -40 210)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 770 190))
(devCarrierFor 2
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 760 40))
(devCarrierFor 3
(active icon)
(icon
(extent 222 25))
(open
(extent 188 55))
(terminals on)
(pinCenter 580 -40))
(devCarrierFor 5
(active icon)
(icon
(extent 138 45))
(terminals on)
(pinCenter 470 200))
(devCarrierFor 6
(active icon)
(icon
(extent 128 45))
(terminals on)
(pinCenter 690 330))
(devCarrierFor 7
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 630 410))
(devCarrierFor 8
(active icon)
(icon
(extent 124 25))
(open
(extent 55 65))
(terminals on)
(pinCenter 530 290))
(devCarrierFor 9
(active icon)
(icon
(extent 142 56)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 380 270))
(devCarrierFor 10
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 270 240))
(devCarrierFor 11
(active icon)
(icon
(extent 180 34))
(open
(extent 196 53))
(terminals on)
(pinCenter 470 50))
(devCarrierFor 12
(active icon)
(icon
(extent 193 54)
(iconImage "unbuild.icn"))
(open
(extent 127 110))
(terminals on)
(pinCenter 340 -60))
(devCarrierFor 13
(active icon)
(icon
(extent 114 25))
(open
(extent 134 51))
(terminals on)
(pinCenter 120 -30))
(devCarrierFor 14
(active icon)
(icon
(extent 167 25))
(terminals on)
(pinCenter 480 120))
(devCarrierFor 21
(active icon)
(icon
(extent 52 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 660 120))
(devCarrierFor 22
(active icon)
(icon
(extent 119 15))
(open)
(terminals on)
(pinCenter 660 160))
(devCarrierFor 23
(active icon)
(icon
(extent 147 45))
(terminals on)
(pinCenter 330 430))
(connect D13:2 D0:1
(points 4 688 130 740 130 740 170 753 170))
(connect D3:2 D0:2
(points 4 541 200 570 200 570 180 753 180))
(connect D4:2 D0:3
(points 6 756 330 780 330 780 290 730 290 730 190 753 190))
(connect D9:2 D0:4
(points 4 562 50 600 50 600 200 753 200))
(connect D15:2 D0:5
(points 6 406 440 790 440 790 280 740 280 740 210 753 210))
(connect D13:1 D1:1
(points 4 688 110 710 110 710 20 743 20))
(connect D3:1 D1:2
(points 6 541 190 550 190 550 170 580 170 580 30 743 30))
(connect D4:1 D1:3
(points 6 756 320 770 320 770 300 720 300 720 40 743 40))
(connect D9:1 D1:4
(points 4 562 40 610 40 610 50 743 50))
(connect D15:1 D1:5
(points 6 406 420 460 420 460 260 620 260 620 60 743 60))
(connect D10:5 D2:1
(points 2 439 -40 466 -40))
(connect D12:0 D3:0
(points 4 480 135 480 150 470 150 470 175))
(connect D11:1 D3:1
(points 8 179 -40 200 -40 200 -60 220 -60 220 70 360 70 360 200 398 200))
(connect D6:1 D4:0
(points 3 594 280 690 280 690 305))
(connect D11:2 D4:1
(points 6 179 -20 210 -20 210 280 290 280 290 330 623 330))
(connect D6:2 D5:0
(points 5 594 300 600 300 600 380 630 380 630 399))
(connect D7:5 D6:1
(points 2 453 290 465 290))
(connect D8:1 D7:0
(points 5 287 240 300 240 300 220 380 220 380 239))
(connect D11:2 D7:1
(points 6 179 -20 210 -20 210 280 290 280 290 270 306 270))
(connect D3:3 D8:1
(points 6 541 210 560 210 560 160 240 160 240 230 253 230))
(connect D2:2 D8:2
(points 6 693 -30 700 -30 700 10 230 10 230 250 253 250))
(connect D2:1 D9:0
(points 5 693 -50 710 -50 710 0 470 0 470 30))
(connect D11:1 D9:1
(points 8 179 -40 200 -40 200 -60 220 -60 220 70 360 70 360 50 377 50))
(connect D11:1 D10:1
(points 4 179 -40 200 -40 200 -60 241 -60))
(connect D9:3 D12:0
(points 5 562 60 570 60 570 90 480 90 480 105))
(connect D11:1 D12:1
(points 8 179 -40 200 -40 200 -60 220 -60 220 70 360 70 360 110 394 110))
(connect D11:2 D12:2
(points 4 179 -20 210 -20 210 130 394 130))
(connect D12:1 D13:1
(points 2 566 120 631 120))
(connect D13:0 D14:0
(points 2 660 135 660 150))
(connect D4:3 D15:0
(points 7 756 340 780 340 780 380 640 380 640 390 330 390 330 405))
(connect D11:1 D15:1
(points 8 179 -40 200 -40 200 -60 220 -60 220 260 230 260 230 420 254 420))
(connect D11:2 D15:2
(points 6 179 -20 210 -20 210 280 220 280 220 440 254 440))
(connect D1:1 O1:1
(points 4 777 40 800 40 800 -83 894 -83))
(connect D0:1 O2:1
(points 4 787 190 810 190 810 177 894 177))
(connect D5:1 O3:1
(points 4 653 410 670 410 670 437 894 437)))
(stackingOrder 2 8 10 13 7 6 14 1 0 5 11 4 9 12 3 15))))
(context 107
(properties
(name "GetPieceCloser")
(trigMode deg)
(nextID 67)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Record")
(lock constraints)
(optional yes)))
(deviceList
(device 0 DECLVAR
(properties
(name "Declare Local \'currentLoc\'")
(scope con)
(globalName "currentLoc"))
(implementation
(value Int32
(data  0))))
(device 1 FORMULA
(properties
(name "set \'currentLoc\'")
(expr 1 "currentLoc = ourPieceLoc"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "destination = -1")
(expr 1 "destination = -1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORCOUNT
(properties
(name "For (7 MAX)")
(count 7))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "delta col, delta row")
(expr 1
"dc = (oppPieceLoc MOD 10)-(currentLoc MOD 10), (oppPieceLoc DIV 10)-(currentLoc DIV 10)"
))
(interface
(input 1
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dc")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 IFTHENELSE
(properties
(name "delta col != 0?")
(cases 1 "dc!=0"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 IFTHENELSE
(properties
(name "delta row != 0 ?")
(cases 1 "dr!=0"))
(interface
(input 1
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "delta col, delta row")
(expr 1
"dc = (oppPieceLoc MOD 10)-(currentLoc MOD 10), (oppPieceLoc DIV 10)-(currentLoc DIV 10)"
))
(interface
(input 1
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dc")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 FORCOUNT
(properties
(name "For (7 MAX)")
(count 7))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "set \'currentLoc\'")
(expr 1 "currentLoc = ourPieceLoc"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "delta row != 0 ?")
(cases 1 "dr!=0"))
(interface
(input 1
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 IFTHENELSE
(properties
(name "delta col != 0?")
(cases 1 "dc!=0"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 DECLVAR
(properties
(name "Declare Local \'destination\'")
(scope con)
(globalName "destination"))
(implementation
(value Int32
(data  0))))
(device 13 FORMULA
(properties
(name "destination = -1")
(expr 1 "destination = -1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORMULA
(properties
(name "currentLoc +/- 1")
(expr 1 "currentLoc = currentLoc+(dc>0 ? 1 : -1)"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 FORMULA
(properties
(name "currentLoc +/- 10")
(expr 1 "currentLoc = currentLoc+(dr>0 ? 10 : -10)"))
(interface
(input 1
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "currentLoc +/- 1")
(expr 1 "currentLoc = currentLoc+(dc>0 ? 1 : -1)"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 FORMULA
(properties
(name "currentLoc +/- 10")
(expr 1 "currentLoc = currentLoc+(dr>0 ? 10 : -10)"))
(interface
(input 1
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 19 IFTHENELSE
(properties
(name "legal location?")
(cases 1
"(l==oppLoc) OR ( NOT (l==42 OR l==43 OR l==52 OR l==53 OR l==46 OR l==47 OR l==56 OR l==57) AND KnownBoard[l]==0)"
))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 20 BREAK)
(device 21 BREAK)
(device 22 BREAK)
(device 23 BREAK)
(device 27 FORMULA
(properties
(name "set destination if unset")
(expr 1 "destination = (destination==-1 ? newLoc : destination)"))
(interface
(input 1
(name "newLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 28 FORMULA
(properties
(name "set destination if unset")
(expr 1 "destination = (destination==-1 ? newLoc : destination)"))
(interface
(input 1
(name "newLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 29 FORMULA
(properties
(name "set destination if unset")
(expr 1 "destination = (destination==-1 ? newLoc : destination)"))
(interface
(input 1
(name "newLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 30 FORMULA
(properties
(name "set destination if unset")
(expr 1 "destination = (destination==-1 ? newLoc : destination)"))
(interface
(input 1
(name "newLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 31 FORMULA
(properties
(name "destination")
(expr 1 "destination"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 32 EXITCONTEXT)
(device 33 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 34 IFTHENELSE
(properties
(name "In our neighborhood and contained?")
(cases 1 "(oppPieceLoc<=49) AND ((ourPieceLoc DIV 10)>(oppPieceLoc DIV 10))"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 35 FORMULA
(properties
(name "delta col, delta row")
(expr 1
"dc = (oppPieceLoc MOD 10)-(ourPieceLoc MOD 10), (oppPieceLoc DIV 10)-(ourPieceLoc DIV 10)"
))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dc")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 36 IFTHENELSE
(properties
(name "pin case?")
(cases 1 "((abs(dr)==2 AND abs(dc)==1) OR (abs(dc)==2 AND abs(dr)==1))"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 38 FORMULA
(properties
(name "pin direction square")
(expr 1 "(abs(dr)==2 ? ourPieceLoc-10 : ourPieceLoc+(dc/2))"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 39 IFTHENELSE
(properties
(name "open square?")
(cases 1 "KnownBoard[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 40 FORMULA
(properties
(name "set \'destination\'")
(expr 1 "destination = square"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 50 IFTHENELSE
(properties
(name "legal location?")
(cases 1
"(l==oppLoc) OR ( NOT (l==42 OR l==43 OR l==52 OR l==53 OR l==46 OR l==47 OR l==56 OR l==57) AND KnownBoard[l]==0)"
))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 51 IFTHENELSE
(properties
(name "legal location?")
(cases 1
"(l==oppLoc) OR ( NOT (l==42 OR l==43 OR l==52 OR l==53 OR l==46 OR l==47 OR l==56 OR l==57) AND KnownBoard[l]==0)"
))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 52 IFTHENELSE
(properties
(name "legal location?")
(cases 1
"(l==oppLoc) OR ( NOT (l==42 OR l==43 OR l==52 OR l==53 OR l==46 OR l==47 OR l==56 OR l==57) AND KnownBoard[l]==0)"
))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 53 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 54 FORMULA
(properties
(name "our piece")
(expr 1 "KnownBoard[ourPieceLoc]"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 55 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 56 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 57 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 58 FORMULA
(properties
(name "destination")
(expr 1 "destination"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 59 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 60 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 61 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 62 FORMULA
(properties
(name "destination")
(expr 1 "destination"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 64 BREAK)
(device 65 BREAK)
(configuration
(connect D2:0 D1:0)
(connect I1:1 D1:1)
(connect D43:1 D2:0)
(connect D1:0 D3:0)
(connect D3:1 D4:0)
(connect I2:1 D4:1)
(connect D4:1 D5:1)
(connect D5:2 D6:0)
(connect D4:2 D6:1)
(connect D8:1 D7:0)
(connect I2:1 D7:1)
(connect D9:0 D8:0)
(connect D13:0 D9:0)
(connect I1:1 D9:1)
(connect D7:2 D10:1)
(connect D10:2 D11:0)
(connect D7:1 D11:1)
(connect D3:0 D13:0)
(connect D5:1 D14:0)
(connect D4:1 D14:1)
(connect D6:1 D15:0)
(connect D4:2 D15:1)
(connect D11:1 D16:0)
(connect D7:1 D16:1)
(connect D10:1 D17:0)
(connect D7:2 D17:1)
(connect D46:1 D18:1)
(connect D47:1 D18:2)
(connect D36:1 D18:3)
(connect D14:1 D19:1)
(connect I2:1 D19:2)
(connect D39:2 D20:0)
(connect D38:2 D21:0)
(connect D37:2 D22:0)
(connect D19:2 D23:0)
(connect D14:1 D24:1)
(connect D16:1 D25:1)
(connect D17:1 D26:1)
(connect D15:1 D27:1)
(connect D18:1 D28:0)
(connect D30:0 D29:0)
(connect I1:1 D30:1)
(connect D28:1 D30:2)
(connect I1:1 D31:1)
(connect I2:1 D31:2)
(connect D31:1 D32:0)
(connect I1:1 D32:1)
(connect I2:1 D32:2)
(connect D32:1 D33:1)
(connect D32:2 D33:2)
(connect D33:1 D34:0)
(connect D32:1 D34:1)
(connect D32:2 D34:2)
(connect I1:1 D34:3)
(connect D34:1 D35:1)
(connect D42:1 D36:0)
(connect D34:1 D36:1)
(connect D15:1 D37:1)
(connect I2:1 D37:2)
(connect D17:1 D38:1)
(connect I2:1 D38:2)
(connect D16:1 D39:1)
(connect I2:1 D39:2)
(connect D35:1 D40:0)
(connect D41:1 D40:1)
(connect D34:1 D40:2)
(connect I1:1 D41:1)
(connect D40:3 D42:1)
(connect D40:2 D42:2)
(connect D31:2 D43:1)
(connect D33:2 D43:2)
(connect D41:1 D44:1)
(connect D45:1 D44:2)
(connect D6:2 D45:0)
(connect D44:2 D46:1)
(connect D44:3 D46:2)
(connect D48:2 D47:1)
(connect D48:3 D47:2)
(connect D41:1 D48:1)
(connect D49:1 D48:2)
(connect D11:2 D49:0)
(connect D44:1 D50:0)
(connect D48:1 D51:0)
(connect D30:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1155 757)
(anchorPt -29 78)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 181 16))
(open
(extent 281 107))
(pinCenter 150 10))
(devCarrierFor 1
(active icon)
(icon
(extent 106 16))
(open
(extent 251 35))
(terminals on)
(pinCenter 160 160))
(devCarrierFor 2
(active icon)
(icon
(extent 107 16))
(open
(extent 132 32))
(terminals on)
(pinCenter 160 120))
(devCarrierFor 3
(active icon)
(icon
(extent 83 52)
(iconImage "loop.icn"))
(open
(extent 119 32))
(pinCenter 160 210))
(devCarrierFor 4
(active icon)
(icon
(extent 129 25))
(open
(extent 627 40))
(terminals on)
(pinCenter 300 240))
(devCarrierFor 5
(active icon)
(icon
(extent 99 25))
(open
(extent 68 53))
(terminals on)
(pinCenter 440 140))
(devCarrierFor 6
(active icon)
(icon
(extent 107 25))
(open
(extent 73 53))
(terminals on)
(pinCenter 450 250))
(devCarrierFor 7
(active icon)
(icon
(extent 129 25))
(open
(extent 627 40))
(terminals on)
(pinCenter 310 480))
(devCarrierFor 8
(active icon)
(icon
(extent 83 52)
(iconImage "loop.icn"))
(open
(extent 119 32))
(pinCenter 160 450))
(devCarrierFor 9
(active icon)
(icon
(extent 106 16))
(open
(extent 251 35))
(terminals on)
(pinCenter 160 400))
(devCarrierFor 10
(active icon)
(icon
(extent 107 25))
(open
(extent 73 53))
(terminals on)
(pinCenter 440 390))
(devCarrierFor 11
(active icon)
(icon
(extent 99 25))
(open
(extent 68 53))
(terminals on)
(pinCenter 490 480))
(devCarrierFor 12
(active icon)
(icon
(extent 182 16))
(open
(extent 281 107))
(pinCenter 150 -20))
(devCarrierFor 13
(active icon)
(icon
(extent 107 16))
(open
(extent 132 32))
(terminals on)
(pinCenter 160 370))
(devCarrierFor 14
(active icon)
(icon
(extent 111 16))
(open
(extent 284 32))
(terminals on)
(pinCenter 580 160))
(devCarrierFor 15
(active icon)
(icon
(extent 119 16))
(open
(extent 300 32))
(terminals on)
(pinCenter 600 260))
(devCarrierFor 16
(active icon)
(icon
(extent 111 16))
(open
(extent 284 32))
(terminals on)
(pinCenter 620 510))
(devCarrierFor 17
(active icon)
(icon
(extent 119 16))
(open
(extent 300 32))
(terminals on)
(pinCenter 600 380))
(devCarrierFor 18
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 890 360))
(devCarrierFor 19
(active icon)
(icon
(extent 100 25))
(open
(extent 828 53))
(terminals on)
(pinCenter 760 190))
(devCarrierFor 20
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 830 580))
(devCarrierFor 21
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 810 450))
(devCarrierFor 22
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 800 330))
(devCarrierFor 23
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 850 220))
(devCarrierFor 27
(active icon)
(icon
(extent 156 16))
(open
(extent 372 32))
(terminals on)
(pinCenter 750 160))
(devCarrierFor 28
(active icon)
(icon
(extent 156 16))
(open
(extent 372 32))
(terminals on)
(pinCenter 780 510))
(devCarrierFor 29
(active icon)
(icon
(extent 156 16))
(open
(extent 372 32))
(terminals on)
(pinCenter 770 380))
(devCarrierFor 30
(active icon)
(icon
(extent 156 16))
(open
(extent 372 32))
(terminals on)
(pinCenter 750 240))
(devCarrierFor 31
(active icon)
(icon
(extent 75 16))
(open
(extent 103 32))
(terminals on)
(pinCenter 910 400))
(devCarrierFor 32
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 1020 450))
(devCarrierFor 33
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 1020 390))
(devCarrierFor 34
(active icon)
(icon
(extent 253 25))
(open
(extent 483 58))
(terminals on)
(pinCenter 190 60))
(devCarrierFor 35
(active icon)
(icon
(extent 129 25))
(open
(extent 649 42))
(terminals on)
(pinCenter 420 80))
(devCarrierFor 36
(active icon)
(icon
(extent 67 25))
(open
(extent 447 53))
(terminals on)
(pinCenter 550 80))
(devCarrierFor 38
(active icon)
(icon
(extent 137 34))
(open
(extent 366 65))
(terminals on)
(pinCenter 710 70))
(devCarrierFor 39
(active icon)
(icon
(extent 96 25))
(open
(extent 188 53))
(terminals on)
(pinCenter 850 70))
(devCarrierFor 40
(active icon)
(icon
(extent 107 16))
(open
(extent 163 32))
(terminals on)
(pinCenter 1060 160))
(devCarrierFor 50
(active icon)
(icon
(extent 100 25))
(open
(extent 828 53))
(terminals on)
(pinCenter 740 270))
(devCarrierFor 51
(active icon)
(icon
(extent 100 25))
(open
(extent 828 53))
(terminals on)
(pinCenter 740 420))
(devCarrierFor 52
(active icon)
(icon
(extent 100 25))
(open
(extent 828 53))
(terminals on)
(pinCenter 750 550))
(devCarrierFor 53
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 1030 60))
(devCarrierFor 54
(active icon)
(icon
(extent 64 16))
(open
(extent 208 39))
(terminals on)
(pinCenter 400 10))
(devCarrierFor 55
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 1000 110))
(devCarrierFor 56
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 280 130))
(devCarrierFor 57
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 620 340))
(devCarrierFor 58
(active icon)
(icon
(extent 75 16))
(open
(extent 103 32))
(terminals on)
(pinCenter 460 340))
(devCarrierFor 59
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 750 340))
(devCarrierFor 60
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 720 610))
(devCarrierFor 61
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 590 600))
(devCarrierFor 62
(active icon)
(icon
(extent 75 16))
(open
(extent 103 32))
(terminals on)
(pinCenter 430 600))
(devCarrierFor 64
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 750 310))
(devCarrierFor 65
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 770 590))
(connect D2:0 D1:0
(points 2 160 130 160 149))
(connect I1:1 D1:1
(points 4 29 110 40 110 40 160 104 160))
(connect D43:1 D2:0
(points 7 297 130 320 130 320 170 240 170 240 100 160 100 160 109))
(connect D1:0 D3:0
(points 2 160 170 160 181))
(connect D3:1 D4:0
(points 3 204 210 300 210 300 225))
(connect I2:1 D4:1
(points 6 29 490 40 490 40 340 210 340 210 240 233 240))
(connect D4:1 D5:1
(points 6 367 230 380 230 380 210 370 210 370 140 388 140))
(connect D5:2 D6:0
(points 5 492 150 500 150 500 180 450 180 450 235))
(connect D4:2 D6:1
(points 2 367 250 394 250))
(connect D8:1 D7:0
(points 3 204 450 310 450 310 465))
(connect I2:1 D7:1
(points 6 29 490 50 490 50 500 220 500 220 480 243 480))
(connect D9:0 D8:0
(points 2 160 410 160 421))
(connect D13:0 D9:0
(points 2 160 380 160 389))
(connect I1:1 D9:1
(points 6 29 110 40 110 40 160 70 160 70 400 104 400))
(connect D7:2 D10:1
(points 6 377 490 400 490 400 440 360 440 360 390 384 390))
(connect D10:2 D11:0
(points 5 496 400 510 400 510 430 490 430 490 465))
(connect D7:1 D11:1
(points 4 377 470 410 470 410 480 438 480))
(connect D3:0 D13:0
(points 2 160 238 160 359))
(connect D5:1 D14:0
(points 3 492 130 580 130 580 149))
(connect D4:1 D14:1
(points 8 367 230 380 230 380 210 370 210 370 190 510 190 510 160 522 160))
(connect D6:1 D15:0
(points 5 506 240 520 240 520 230 600 230 600 249))
(connect D4:2 D15:1
(points 6 367 250 380 250 380 290 530 290 530 260 538 260))
(connect D11:1 D16:0
(points 3 542 470 620 470 620 499))
(connect D7:1 D16:1
(points 4 377 470 410 470 410 510 562 510))
(connect D10:1 D17:0
(points 5 496 380 510 380 510 360 600 360 600 369))
(connect D7:2 D17:1
(points 6 377 490 400 490 400 450 520 450 520 380 538 380))
(connect D46:1 D18:1
(points 4 767 340 780 340 780 350 873 350))
(connect D47:1 D18:2
(points 8 737 610 880 610 880 480 850 480 850 420 840 420 840 360 873 360))
(connect D36:1 D18:3
(points 6 1116 160 1140 160 1140 250 860 250 860 370 873 370))
(connect D14:1 D19:1
(points 4 638 160 650 160 650 180 707 180))
(connect I2:1 D19:2
(points 8 29 490 40 490 40 340 210 340 210 240 220 240 220 200 707 200))
(connect D39:2 D20:0
(points 3 802 560 830 560 830 569))
(connect D38:2 D21:0
(points 3 792 430 810 430 810 439))
(connect D37:2 D22:0
(points 3 792 280 800 280 800 319))
(connect D19:2 D23:0
(points 3 812 200 850 200 850 209))
(connect D14:1 D24:1
(points 2 638 160 669 160))
(connect D16:1 D25:1
(points 2 678 510 699 510))
(connect D17:1 D26:1
(points 2 662 380 689 380))
(connect D15:1 D27:1
(points 4 662 260 650 260 650 240 669 240))
(connect D18:1 D28:0
(points 5 907 360 920 360 920 380 910 380 910 389))
(connect D30:0 D29:0
(points 2 1020 418 1020 439))
(connect I1:1 D30:1
(points 14 29 110 40 110 40 -50 340 -50 340 40 620 40 620 120 840 120 840 170
850 170 850 190 950 190 950 380 973 380))
(connect D28:1 D30:2
(points 2 950 400 973 400))
(connect I1:1 D31:1
(points 4 29 110 40 110 40 50 61 50))
(connect I2:1 D31:2
(points 6 29 490 40 490 40 340 50 340 50 70 61 70))
(connect D31:1 D32:0
(points 3 319 50 420 50 420 65))
(connect I1:1 D32:1
(points 6 29 110 40 110 40 -50 340 -50 340 70 353 70))
(connect I2:1 D32:2
(points 10 29 490 40 490 40 340 210 340 210 240 220 240 220 200 340 200 340 90
353 90))
(connect D32:1 D33:1
(points 2 487 70 514 70))
(connect D32:2 D33:2
(points 2 487 90 514 90))
(connect D33:1 D34:0
(points 5 586 70 600 70 600 30 710 30 710 50))
(connect D32:1 D34:1
(points 6 487 70 500 70 500 50 610 50 610 60 639 60))
(connect D32:2 D34:2
(points 6 487 90 500 90 500 120 610 120 610 70 639 70))
(connect I1:1 D34:3
(points 8 29 110 40 110 40 -50 340 -50 340 40 620 40 620 80 639 80))
(connect D34:1 D35:1
(points 2 781 70 799 70))
(connect D42:1 D36:0
(points 3 1017 110 1060 110 1060 149))
(connect D34:1 D36:1
(points 6 781 70 790 70 790 110 930 110 930 160 1004 160))
(connect D15:1 D37:1
(points 2 662 260 687 260))
(connect I2:1 D37:2
(points 10 29 490 40 490 40 340 210 340 210 310 530 310 530 300 670 300 670 280
687 280))
(connect D17:1 D38:1
(points 4 662 380 670 380 670 410 687 410))
(connect I2:1 D38:2
(points 10 29 490 50 490 50 500 220 500 220 520 550 520 550 490 560 490 560 430
687 430))
(connect D16:1 D39:1
(points 4 678 510 690 510 690 540 697 540))
(connect I2:1 D39:2
(points 8 29 490 50 490 50 500 220 500 220 520 540 520 540 560 697 560))
(connect D35:1 D40:0
(points 5 900 60 910 60 910 20 1030 20 1030 40))
(connect D41:1 D40:1
(points 4 434 10 920 10 920 50 937 50))
(connect D34:1 D40:2
(points 6 781 70 790 70 790 110 920 110 920 70 937 70))
(connect I1:1 D41:1
(points 6 29 110 40 110 40 -50 340 -50 340 10 365 10))
(connect D40:3 D42:1
(points 8 1122 70 1130 70 1130 100 1040 100 1040 90 970 90 970 100 983 100))
(connect D40:2 D42:2
(points 6 1122 60 1140 60 1140 140 970 140 970 120 983 120))
(connect D31:2 D43:1
(points 6 319 70 330 70 330 100 250 100 250 120 263 120))
(connect D33:2 D43:2
(points 10 586 90 600 90 600 110 490 110 490 120 360 120 360 180 250 180 250 140
263 140))
(connect D41:1 D44:1
(points 8 434 10 450 10 450 -60 30 -60 30 320 510 320 510 330 527 330))
(connect D45:1 D44:2
(points 4 500 340 510 340 510 350 527 350))
(connect D6:2 D45:0
(points 5 506 260 520 260 520 300 460 300 460 329))
(connect D44:2 D46:1
(points 4 712 340 720 340 720 330 733 330))
(connect D44:3 D46:2
(points 2 712 350 733 350))
(connect D48:2 D47:1
(points 2 682 600 703 600))
(connect D48:3 D47:2
(points 4 682 610 690 610 690 620 703 620))
(connect D41:1 D48:1
(points 14 434 10 450 10 450 -60 30 -60 30 320 350 320 350 450 390 450 390 500
400 500 400 540 480 540 480 590 497 590))
(connect D49:1 D48:2
(points 4 470 600 480 600 480 610 497 610))
(connect D11:2 D49:0
(points 7 542 490 550 490 550 500 530 500 530 530 430 530 430 589))
(connect D44:1 D50:0
(points 5 712 330 720 330 720 280 750 280 750 299))
(connect D48:1 D51:0
(points 7 682 590 690 590 690 580 760 580 760 570 770 570 770 579))
(connect D30:1 O1:1
(points 4 1067 390 1090 390 1090 300 1183 300)))
(stackingOrder 1 2 3 5 7 8 9 10 11 13 14 15 16 17 21 22 24 25 26 28 29 30 0 12 4
33 34 35 18 31 23 6 20 19 38 39 32 40 42 36 43 45 46 49 41 48 47 44 27 37 50 51))))
(context 101
(properties
(name "GetStrategyState")
(trigMode deg)
(nextID 5)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "state")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "Beginning, Middle, or End?")
(cases 2 "moveNumber<50"
"numMyMovablePiecesRemaining>13 AND NumOppMovablePiecesRemaining>13"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 1 LITERALCONSTANT
(properties
(name "\"Beginning\""))
(interface
(output 1
(name "Text")
(lock name constraints)))
(implementation
(value Text
(data  "Beginning"))
(initValue Text
(data  ""))))
(device 2 LITERALCONSTANT
(properties
(name "\"Middle\""))
(interface
(output 1
(name "Text")
(lock name constraints)))
(implementation
(value Text
(data  "Middle"))
(initValue Text
(data  ""))))
(device 3 LITERALCONSTANT
(properties
(name "\"End\""))
(interface
(output 1
(name "Text")
(lock name constraints)))
(implementation
(value Text
(data  "End"))
(initValue Text
(data  ""))))
(device 4 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(configuration
(connect D0:1 D1:0)
(connect D0:2 D2:0)
(connect D0:3 D3:0)
(connect D1:1 D4:1)
(connect D2:1 D4:2)
(connect D3:1 D4:3)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 650 363)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 187 34))
(open
(extent 540 62))
(terminals on)
(pinCenter 200 90))
(devCarrierFor 1
(active open)
(icon
(extent 80 0))
(open
(extent 194 30))
(pinCenter 450 90))
(devCarrierFor 2
(active open)
(icon
(extent 56 0))
(open
(extent 194 30))
(pinCenter 440 170))
(devCarrierFor 3
(active open)
(icon
(extent 39 0))
(open
(extent 194 30))
(pinCenter 430 250))
(devCarrierFor 4
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 590 170))
(connect D0:1 D1:0
(points 5 296 80 320 80 320 30 450 30 450 54))
(connect D0:2 D2:0
(points 5 296 90 330 90 330 120 440 120 440 134))
(connect D0:3 D3:0
(points 5 296 100 320 100 320 200 430 200 430 214))
(connect D1:1 D4:1
(points 6 549 90 570 90 570 130 560 130 560 160 573 160))
(connect D2:1 D4:2
(points 2 539 170 573 170))
(connect D3:1 D4:3
(points 4 529 250 560 250 560 180 573 180))
(connect D4:1 O1:1
(points 4 607 170 630 170 630 181 649 181)))
(stackingOrder 1 2 3 4 0))))
(context 119
(properties
(name "GoodSteppingStoneLocations")
(trigMode deg)
(nextID 9)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "GoodLocations")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CONSTANT
(properties
(name "Good Positions"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 18)
(data  [ 70 80 90 79 89 99 60 61 64 65 68 69 30 31 34 35 38 39 ]))
(initValue Int32
(data  0))))
(device 1 FORMULA
(properties
(name "# to check")
(expr 1 "totsize(positions)"))
(interface
(input 1
(name "positions")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "square open?")
(cases 1 "KnownBoard[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "a square")
(expr 1 "positions[i]"))
(interface
(input 1
(name "positions")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 7 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(configuration
(connect D0:1 D1:1)
(connect D1:1 D2:1)
(connect D4:1 D3:1)
(connect D0:1 D4:1)
(connect D2:1 D4:2)
(connect D3:1 D5:0)
(connect D4:1 D5:1)
(connect D5:1 D6:1)
(connect D2:0 D6:2)
(connect D6:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 811 351)
(anchorPt 42 59)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 105 16))
(open
(extent 130 234)
(showFormat int))
(pinCenter 50 90))
(devCarrierFor 1
(active icon)
(icon
(extent 71 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 180 90))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 280 90))
(devCarrierFor 3
(active icon)
(icon
(extent 96 25))
(open
(extent 188 53))
(terminals on)
(pinCenter 490 100))
(devCarrierFor 5
(active icon)
(icon
(extent 61 25))
(open
(extent 96 44))
(terminals on)
(pinCenter 380 100))
(devCarrierFor 6
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 580 130))
(devCarrierFor 7
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 660 140))
(connect D0:1 D1:1
(points 2 105 90 142 90))
(connect D1:1 D2:1
(points 2 218 90 242 90))
(connect D4:1 D3:1
(points 2 413 100 439 100))
(connect D0:1 D4:1
(points 6 105 90 120 90 120 40 340 40 340 90 347 90))
(connect D2:1 D4:2
(points 4 317 90 330 90 330 110 347 110))
(connect D3:1 D5:0
(points 3 540 90 580 90 580 119))
(connect D4:1 D5:1
(points 6 413 100 430 100 430 140 540 140 540 130 560 130))
(connect D5:1 D6:1
(points 2 600 130 627 130))
(connect D2:0 D6:2
(points 5 280 118 280 160 610 160 610 150 627 150))
(connect D6:1 O1:1
(points 4 693 140 710 140 710 116 768 116)))
(stackingOrder 2 1 4 3 5 6 0))))
(context 167
(properties
(name "HasBorderBomb")
(trigMode deg)
(nextID 7)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(name "For (0-3)")
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square of potential bomb")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "legal square?")
(cases 1 "(loc==-1 ? 0 : loc<=39)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "bomb there?")
(cases 1 "b[loc]>=35"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 5 EXITCONTEXT)
(device 6 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(configuration
(connect I1:1 D1:1)
(connect D0:1 D1:2)
(connect D1:1 D2:1)
(connect D2:1 D3:0)
(connect D1:1 D3:1)
(connect D3:1 D4:1)
(connect D4:0 D5:0)
(connect D0:0 D6:0)
(connect D4:1 O1:1)
(connect D6:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 747 298)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 100 110))
(devCarrierFor 1
(active icon)
(icon
(extent 223 25))
(open
(extent 217 41))
(terminals on)
(pinCenter 270 90))
(devCarrierFor 2
(active icon)
(icon
(extent 94 25))
(open
(extent 175 53))
(terminals on)
(pinCenter 460 90))
(devCarrierFor 3
(active icon)
(icon
(extent 88 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 550 140))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 670 90))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 670 140))
(devCarrierFor 6
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 100 170))
(connect I1:1 D1:1
(points 6 0 148 10 148 10 60 150 60 150 80 156 80))
(connect D0:1 D1:2
(points 4 136 110 150 110 150 100 156 100))
(connect D1:1 D2:1
(points 2 384 90 410 90))
(connect D2:1 D3:0
(points 3 509 80 550 80 550 125))
(connect D1:1 D3:1
(points 4 384 90 400 90 400 140 503 140))
(connect D3:1 D4:1
(points 4 596 130 610 130 610 90 650 90))
(connect D4:0 D5:0
(points 2 670 100 670 129))
(connect D0:0 D6:0
(points 2 100 138 100 159))
(connect D4:1 O1:1
(points 4 690 90 710 90 710 68 746 68))
(connect D6:1 O2:1
(points 4 114 170 130 170 130 228 746 228)))
(stackingOrder 0 1 2 5 4 6 3))))
(context 75
(properties
(name "HasNeighboringOpponent")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Bool")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[square, i]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "opponent neighbor?")
(cases 1 "(border>-1 ? (KnownBoard[border]!=0 AND KnownBoard[border]<1000) : 0)"
))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 4 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 5 EXITCONTEXT)
(device 6 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect I1:1 D1:1)
(connect D0:1 D1:2)
(connect D1:1 D2:1)
(connect D4:1 D3:1)
(connect D2:1 D4:1)
(connect D6:1 D4:2)
(connect D3:0 D5:0)
(connect D0:0 D6:0)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 722 252)
(anchorPt -95 -62)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 150))
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 193 42))
(terminals on)
(pinCenter 360 140))
(devCarrierFor 2
(active icon)
(icon
(extent 140 25))
(open
(extent 508 55))
(terminals on)
(pinCenter 520 140))
(devCarrierFor 3
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 720 210))
(devCarrierFor 4
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 670 170))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 720 270))
(devCarrierFor 6
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 220 230))
(connect I1:1 D1:1
(points 6 95 187 110 187 110 100 280 100 280 130 308 130))
(connect D0:1 D1:2
(points 2 257 150 308 150))
(connect D1:1 D2:1
(points 2 412 140 447 140))
(connect D4:1 D3:1
(points 6 687 170 700 170 700 190 690 190 690 210 700 210))
(connect D2:1 D4:1
(points 4 592 130 610 130 610 160 653 160))
(connect D6:1 D4:2
(points 4 234 230 280 230 280 180 653 180))
(connect D3:0 D5:0
(points 2 720 220 720 259))
(connect D0:0 D6:0
(points 2 220 178 220 219))
(connect D3:1 O1:1
(points 4 740 210 760 210 760 187 816 187)))
(stackingOrder 0 1 3 5 6 4 2))))
(context 78
(properties
(name "HasOpenSquareNeighbor")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Bool")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[square, i]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "open neighbor?")
(cases 1 "(border>-1 ? (KnownBoard[border]==0) : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 4 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 5 EXITCONTEXT)
(device 6 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect I1:1 D1:1)
(connect D0:1 D1:2)
(connect D1:1 D2:1)
(connect D4:1 D3:1)
(connect D2:1 D4:1)
(connect D6:1 D4:2)
(connect D3:0 D5:0)
(connect D0:0 D6:0)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 722 252)
(anchorPt -95 -62)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 150))
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 193 42))
(terminals on)
(pinCenter 360 140))
(devCarrierFor 2
(active icon)
(icon
(extent 110 25))
(open
(extent 301 55))
(terminals on)
(pinCenter 510 140))
(devCarrierFor 3
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 720 210))
(devCarrierFor 4
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 670 170))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 720 270))
(devCarrierFor 6
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 220 230))
(connect I1:1 D1:1
(points 6 95 187 110 187 110 100 280 100 280 130 308 130))
(connect D0:1 D1:2
(points 2 257 150 308 150))
(connect D1:1 D2:1
(points 2 412 140 452 140))
(connect D4:1 D3:1
(points 6 687 170 700 170 700 190 690 190 690 210 700 210))
(connect D2:1 D4:1
(points 4 567 130 590 130 590 160 653 160))
(connect D6:1 D4:2
(points 4 234 230 280 230 280 180 653 180))
(connect D3:0 D5:0
(points 2 720 220 720 259))
(connect D0:0 D6:0
(points 2 220 178 220 219))
(connect D3:1 O1:1
(points 4 740 210 760 210 760 187 816 187)))
(stackingOrder 0 1 3 5 6 4 2))))
(context 72
(properties
(name "HasUnknownFixedNeighbor")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Bool")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[square, i]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "unknown fixed neighbor?")
(cases 1 "(border>-1 ? (KnownBoard[border]==-1) : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 4 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 5 EXITCONTEXT)
(device 6 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect I1:1 D1:1)
(connect D0:1 D1:2)
(connect D1:1 D2:1)
(connect D4:1 D3:1)
(connect D2:1 D4:1)
(connect D6:1 D4:2)
(connect D3:0 D5:0)
(connect D0:0 D6:0)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 722 252)
(anchorPt -96 -62)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 150))
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 193 42))
(terminals on)
(pinCenter 360 140))
(devCarrierFor 2
(active icon)
(icon
(extent 172 25))
(open
(extent 306 55))
(terminals on)
(pinCenter 530 140))
(devCarrierFor 3
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 720 210))
(devCarrierFor 4
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 670 170))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 720 270))
(devCarrierFor 6
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 220 230))
(connect I1:1 D1:1
(points 6 96 187 110 187 110 100 280 100 280 130 308 130))
(connect D0:1 D1:2
(points 2 257 150 308 150))
(connect D1:1 D2:1
(points 2 412 140 441 140))
(connect D4:1 D3:1
(points 6 687 170 700 170 700 190 690 190 690 210 700 210))
(connect D2:1 D4:1
(points 4 618 130 640 130 640 160 653 160))
(connect D6:1 D4:2
(points 4 234 230 280 230 280 180 653 180))
(connect D3:0 D5:0
(points 2 720 220 720 259))
(connect D0:0 D6:0
(points 2 220 178 220 219))
(connect D3:1 O1:1
(points 4 740 210 760 210 760 187 817 187)))
(stackingOrder 0 2 3 5 6 4 1))))
(context 73
(properties
(name "HasUnknownMovableNeighbor")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Bool")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[square, i]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "unknown movable neighbor?")
(cases 1 "(border>-1 ? (KnownBoard[border]==-2) : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 4 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 5 EXITCONTEXT)
(device 6 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect I1:1 D1:1)
(connect D0:1 D1:2)
(connect D1:1 D2:1)
(connect D4:1 D3:1)
(connect D2:1 D4:1)
(connect D6:1 D4:2)
(connect D3:0 D5:0)
(connect D0:0 D6:0)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 722 252)
(anchorPt -96 -62)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 220 150))
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 193 42))
(terminals on)
(pinCenter 360 140))
(devCarrierFor 2
(active icon)
(icon
(extent 199 25))
(open
(extent 310 55))
(terminals on)
(pinCenter 530 140))
(devCarrierFor 3
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 720 210))
(devCarrierFor 4
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 670 170))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 720 270))
(devCarrierFor 6
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 220 230))
(connect I1:1 D1:1
(points 6 96 187 110 187 110 100 280 100 280 130 308 130))
(connect D0:1 D1:2
(points 2 257 150 308 150))
(connect D1:1 D2:1
(points 2 412 140 428 140))
(connect D4:1 D3:1
(points 6 687 170 700 170 700 190 690 190 690 210 700 210))
(connect D2:1 D4:1
(points 4 632 130 640 130 640 160 653 160))
(connect D6:1 D4:2
(points 4 234 230 280 230 280 180 653 180))
(connect D3:0 D5:0
(points 2 720 220 720 259))
(connect D0:0 D6:0
(points 2 220 178 220 219))
(connect D3:1 O1:1
(points 4 740 210 760 210 760 187 817 187)))
(stackingOrder 0 1 3 5 6 4 2))))
(context 51
(properties
(name "ImpendingDoomMove")
(trigMode deg)
(nextID 35)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "youreOK")
(lock constraints)
(optional yes)))
(deviceList
(device 0 NOTE
(properties
(name "Comment")
(text2 17 "This function determines if there is"
"imminent danger awaiting one of our" "pieces.  For example, an opponent\'s"
"General (2) is in attack position against"
"one of our Colonels (3) AND our opponent"
"KNOWS that he will kill our colonel.  " ""
"We cannot just allow a piece of this rank "
"to die without attempting to retreat.  "
"Eventually, this function must compute "
"some sort of retreat strategy (\'cause "
"we\'re gonna get chased in most cases)." ""
"Also, we don\'t always have to retreat (if "
"we have a high-ranking piece of our own "
"adjacent to us, that will take the piece " "we fear).")))
(device 14 CALL
(properties
(name "Call CheckDoomMoves")
(callFunc "CheckDoomMoves")
(parmMode rev30))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))
(output 3
(name "nada")
(lock name constraints)
(optional yes))))
(device 17 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 24 CALL
(properties
(name "Call DidOpponentMoveNextToOurPiece")
(callFunc "DidOpponentMoveNextToOurPiece")
(parmMode rev30))
(interface
(output 1
(name "from")
(lock name constraints)
(optional yes))
(output 2
(name "to")
(lock name constraints)
(optional yes))))
(device 27 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 28 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 29 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 30 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 31 EXITCONTEXT)
(device 33 CONTEXT
(properties
(name "Collect Doomers")
(trigMode deg)
(nextID 13)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "DoomMoves")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "move")
(expr 1 "to = move[i].to, from = move[i].from, move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "to")
(optional yes))
(output 2
(name "from")
(optional yes))
(output 3
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 CALL
(properties
(name "Call CanNeighborKillMe")
(callFunc "CanNeighborKillMe")
(parmMode rev30))
(interface
(input 1
(name "neighbor")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "me")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 4 IFTHENELSE
(properties
(name "Am I a known miner (8) ?")
(cases 1
"(KnownBoard[from]>=1022 AND KnownBoard[from]<=1026) AND OpponentsKnownBoard[from]>1000"
))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 FROMARRAY
(properties
(name "TotSize(ary)")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary")
(requires
(shape "Array 1D")))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 6 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data")
(requires
(datatype Record)))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 7 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 8 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 9 CALL
(properties
(name "Call IsPieceProtected")
(callFunc "IsPieceProtected")
(parmMode rev30))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "Unknown")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "any doom moves?")
(cases 1 "size>0"))
(interface
(input 1
(name "size")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D1:1 D2:1)
(connect I1:1 D2:2)
(connect D2:1 D3:1)
(connect D2:2 D3:2)
(connect D3:3 D4:0)
(connect D2:2 D4:1)
(connect D6:1 D5:1)
(connect D7:1 D6:1)
(connect D1:0 D6:2)
(connect D8:1 D7:0)
(connect D2:3 D7:1)
(connect D9:2 D8:1)
(connect D4:1 D8:2)
(connect D3:1 D9:0)
(connect D2:2 D9:1)
(connect D2:1 D9:2)
(connect D5:5 D10:1)
(connect D10:1 D11:0)
(connect D6:1 D11:1)
(connect D11:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1038 545)
(anchorPt 7 -97)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 90 210))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 190 210))
(devCarrierFor 2
(active icon)
(icon
(extent 38 34))
(open
(extent 395 73))
(terminals on)
(pinCenter 290 220))
(devCarrierFor 3
(active icon)
(icon
(extent 162 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 440 220))
(devCarrierFor 4
(active icon)
(icon
(extent 171 25))
(open
(extent 668 53))
(terminals on)
(pinCenter 560 280))
(devCarrierFor 5
(active icon)
(icon
(extent 84 54))
(open
(extent 111 110))
(terminals on)
(pinCenter 430 420))
(devCarrierFor 6
(active icon)
(icon
(extent 61 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 920 280))
(devCarrierFor 7
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 820 270))
(devCarrierFor 8
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 760 240))
(devCarrierFor 9
(active icon)
(icon
(extent 147 25))
(open
(extent 196 53))
(terminals on)
(pinCenter 650 220))
(devCarrierFor 10
(active icon)
(icon
(extent 126 25))
(open
(extent 82 53))
(terminals on)
(pinCenter 570 440))
(devCarrierFor 11
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 940 370))
(connect I1:1 D0:1
(points 4 -7 369 10 369 10 210 58 210))
(connect D0:1 D1:1
(points 2 121 210 152 210))
(connect D1:1 D2:1
(points 2 227 210 268 210))
(connect I1:1 D2:2
(points 6 -7 369 10 369 10 270 260 270 260 230 268 230))
(connect D2:1 D3:1
(points 2 311 210 356 210))
(connect D2:2 D3:2
(points 4 311 220 340 220 340 230 356 230))
(connect D3:3 D4:0
(points 5 523 230 540 230 540 250 560 250 560 265))
(connect D2:2 D4:1
(points 4 311 220 340 220 340 280 472 280))
(connect D6:1 D5:1
(points 8 953 280 970 280 970 320 900 320 900 330 370 330 370 420 385 420))
(connect D7:1 D6:1
(points 2 840 270 887 270))
(connect D1:0 D6:2
(points 5 190 238 190 320 860 320 860 290 887 290))
(connect D8:1 D7:0
(points 3 777 240 820 240 820 259))
(connect D2:3 D7:1
(points 8 311 230 330 230 330 260 610 260 610 310 790 310 790 270 800 270))
(connect D9:2 D8:1
(points 2 726 230 743 230))
(connect D4:1 D8:2
(points 4 648 270 720 270 720 250 743 250))
(connect D3:1 D9:0
(points 5 523 210 540 210 540 190 650 190 650 205))
(connect D2:2 D9:1
(points 6 311 220 330 220 330 180 550 180 550 210 574 210))
(connect D2:1 D9:2
(points 6 311 210 320 210 320 160 560 160 560 230 574 230))
(connect D5:5 D10:1
(points 2 474 440 504 440))
(connect D10:1 D11:0
(points 5 635 430 660 430 660 340 940 340 940 359))
(connect D6:1 D11:1
(points 6 953 280 970 280 970 320 900 320 900 370 920 370))
(connect D11:1 O1:1
(points 4 960 370 980 370 980 369 1030 369)))
(stackingOrder 0 1 7 9 5 10 11 2 3 4 6 8))))
(device 34 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect D9:1 D1:1)
(connect D10:1 D2:0)
(connect D3:2 D4:1)
(connect D1:2 D4:2)
(connect D1:1 D5:1)
(connect D3:1 D5:2)
(connect D5:1 D6:1)
(connect D6:0 D7:0)
(connect D4:1 D7:1)
(connect D7:0 D8:0)
(connect D3:0 D9:0)
(connect I1:1 D9:1)
(connect D1:3 D10:1)
(connect D9:0 D10:2)
(connect D6:1 O1:1)
(connect D7:1 O2:1)
(connect D2:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 835 542)
(anchorPt 66 340)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 343 294)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 160 -160))
(devCarrierFor 14
(active icon)
(icon
(extent 160 34))
(open
(extent 196 53))
(terminals on)
(pinCenter 290 90))
(devCarrierFor 17
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 540 160))
(devCarrierFor 24
(active icon)
(icon
(extent 273 25))
(open
(extent 226 53))
(terminals on)
(pinCenter 120 30))
(devCarrierFor 27
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 480 -170))
(devCarrierFor 28
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 470 -250))
(devCarrierFor 29
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 550 -250))
(devCarrierFor 30
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 550 -170))
(devCarrierFor 31
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 550 -90))
(devCarrierFor 33
(active icon)
(icon
(extent 114 34))
(terminals on)
(pinCenter 120 90))
(devCarrierFor 34
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 470 140))
(connect D9:1 D1:1
(points 2 179 90 207 90))
(connect D10:1 D2:0
(points 5 487 140 500 140 500 130 540 130 540 149))
(connect D3:2 D4:1
(points 4 259 40 360 40 360 -180 463 -180))
(connect D1:2 D4:2
(points 4 372 90 400 90 400 -160 463 -160))
(connect D1:1 D5:1
(points 4 372 80 390 80 390 -260 453 -260))
(connect D3:1 D5:2
(points 4 259 20 350 20 350 -240 453 -240))
(connect D5:1 D6:1
(points 2 487 -250 530 -250))
(connect D6:0 D7:0
(points 2 550 -240 550 -181))
(connect D4:1 D7:1
(points 2 497 -170 530 -170))
(connect D7:0 D8:0
(points 2 550 -160 550 -101))
(connect D3:0 D9:0
(points 2 120 45 120 70))
(connect I1:1 D9:1
(points 4 -66 -70 -60 -70 -60 90 60 90))
(connect D1:3 D10:1
(points 4 372 100 390 100 390 130 453 130))
(connect D9:0 D10:2
(points 3 120 109 120 150 453 150))
(connect D6:1 O1:1
(points 4 570 -250 669 -250 669 -250 768 -250))
(connect D7:1 O2:1
(points 4 570 -170 630 -170 630 -70 768 -70))
(connect D2:1 O3:1
(points 4 563 160 580 160 580 110 768 110)))
(stackingOrder 0 5 4 7 6 8 10 2 9 3 1))))
(context 50
(properties
(name "Initialize")
(trigMode deg)
(nextID 55)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(deviceList
(device 2 FORMULA
(properties
(name "set \'BombProtectorPieces\'")
(expr 1 "BombProtectorPieces = [-1]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 DECLVAR
(properties
(name "Declare Variable \'LastOpponentMove\'")
(scope lib)
(globalName "LastOpponentMove"))
(implementation
(value Record
(schema
(numFields 2)
(fieldName "from"
(type Int32))
(fieldName "to"
(type Int32)))
(data 
(record
("from" 0)
("to" 0))))))
(device 4 FORMULA
(properties
(name "set \'OpponentBombLocations\'")
(expr 1 "OpponentBombLocations = [-1, -1, -1, -1, -1, -1]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 DECLVAR
(properties
(name "Declare Variable \'OpponentBombLocations\'")
(scope lib)
(globalName "OpponentBombLocations"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 6 DECLVAR
(properties
(name "Declare Variable \'KamikazePiece\'")
(scope lib)
(globalName "KamikazePiece"))
(implementation
(value Int32
(data  0))))
(device 7 FORMULA
(properties
(name "NumOppMovablePiecesRemaining = 33")
(expr 1 "NumOppMovablePiecesRemaining = 33"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 FORMULA
(properties
(name "NumMyMovablePiecesRemaining = 33")
(expr 1 "NumMyMovablePiecesRemaining = 33"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 DECLVAR
(properties
(name "Declare Variable \'OurMinerBombKillCount\'")
(scope lib)
(globalName "OurMinerBombKillCount"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 10 DECLVAR
(properties
(name "Declare Variable \'KillCount\'")
(scope lib)
(globalName "KillCount"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 11 DECLVAR
(properties
(name "Declare \'BorderSquares\'")
(scope lib)
(globalName "BorderSquares"))
(implementation
(value Int32
(numDims 2)
(size 1 1)
(data  [ [ 0 ] ]))))
(device 13 DECLVAR
(properties
(name "Declare Variable \'KnownBoard\'")
(scope lib)
(globalName "KnownBoard"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 14 DECLVAR
(properties
(name "Declare Variable \'NumOppMovablePiecesRemaining\'")
(scope lib)
(globalName "NumOppMovablePiecesRemaining"))
(implementation
(value Int32
(data  0))))
(device 15 DECLVAR
(properties
(name "Declare Variable \'NumMyMovablePiecesRemaining\'")
(scope lib)
(globalName "NumMyMovablePiecesRemaining"))
(implementation
(value Int32
(data  0))))
(device 16 DECLVAR
(properties
(name "Declare Variable \'OurMoves\'")
(scope lib)
(globalName "OurMoves"))
(implementation
(value Record
(numDims 1)
(size 1)
(schema
(numFields 3)
(fieldName "from"
(type Int32))
(fieldName "to"
(type Int32))
(fieldName "piece"
(type Int32)))
(data 
(record
("from" 0)
("to" 0)
("piece" 0))))))
(device 17 DECLVAR
(properties
(name "Declare Variable \'PossibleOppFlagPositions\'")
(scope lib)
(globalName "PossibleOppFlagPositions"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 18 DECLVAR
(properties
(name "Declare Variable \'MoveNumber\'")
(scope lib)
(globalName "MoveNumber"))
(implementation
(value Int32
(data  0))))
(device 19 DECLVAR
(properties
(name "Declare Variable \'WeightedAttackMoves\'")
(scope lib)
(globalName "WeightedAttackMoves"))
(implementation
(value Record
(numDims 1)
(size 1)
(schema
(numFields 7)
(fieldName "type"
(type Text))
(fieldName "from"
(type Int32))
(fieldName "to"
(type Int32))
(fieldName "win"
(type Real))
(fieldName "tie"
(type Real))
(fieldName "lose"
(type Real))
(fieldName "bombed"
(type Real)))
(data 
(record
("type" "")
("from" 0)
("to" 0)
("win" 0)
("tie" 0)
("lose" 0)
("bombed" 0))))))
(device 20 DECLVAR
(properties
(name "Declare Variable \'OpponentsKnownBoard\'")
(scope lib)
(globalName "OpponentsKnownBoard"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 21 DECLVAR
(properties
(name "Declare \'BombProtectorPieces\'")
(scope lib)
(globalName "bombProtectorPieces"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 22 FORMULA
(properties
(name "NumPiecesTakenByKamikaze = 0")
(expr 1 "NumPiecesTakenByKamikaze = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 23 DECLVAR
(properties
(name "Declare Variable \'NumPiecesTakenByKamikaze\'")
(scope lib)
(globalName "NumPiecesTakenByKamikaze"))
(implementation
(value Int32
(data  0))))
(device 24 FORMULA
(properties
(name "set \'LastOpponentMove\'")
(expr 1 "LastOpponentMove = rec"))
(interface
(input 1
(name "rec")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 25 CONSTANT
(properties
(name "-1"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  -1))
(initValue Int32
(data  0))))
(device 26 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 27 FORMULA
(properties
(name "KamikazePiece = 0")
(expr 1 "KamikazePiece = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 28 ALLOCATEARRAY
(properties
(name "Alloc Integer Array \'0\'"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "5")
(type "Int32")
(initEnum "Init Value")
(initialValue
(data  0))
(from 1)
(thru 10)))
(device 29 FORMULA
(properties
(name "set \'OurMinerBombKillCount\'")
(expr 1 "OurMinerBombKillCount = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 30 CONSTANT
(properties
(name "-1"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  -1))
(initValue Int32
(data  0))))
(device 31 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 32 FORMULA
(properties
(name "set \'OurMoves\'")
(expr 1 "OurMoves = [rec]"))
(interface
(input 1
(name "rec")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 33 FORMULA
(properties
(name "set \'KillCount\'")
(expr 1 "KillCount = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 34 FORMULA
(properties
(name "MoveNumber = 0")
(expr 1 "MoveNumber = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 35 FORMULA
(properties
(name "set \'OpponentsKnownBoard\'")
(expr 1 "OpponentsKnownBoard = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 36 FORMULA
(properties
(name "set \'OpponentsKnownBoard\'")
(expr 1 "OpponentsKnownBoard[0:39] = ary1, OpponentsKnownBoard[60:*] = ary2"))
(interface
(input 1
(name "ary1")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "ary2")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 39 ALLOCATEARRAY
(properties
(name "Alloc Integer Array \'0\'"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "40")
(type "Int32")
(initEnum "Init Value")
(initialValue
(data  0))
(from 1)
(thru 10)))
(device 42 CALL
(properties
(name "Call InitProbabilityTables")
(callFunc "InitProbabilityTables")
(parmMode rev30)))
(device 43 CONTEXT
(properties
(name "InitPossFlagPositions")
(trigMode deg)
(nextID 19)
(popupTitleText "UserObject")
(popupMoveable 1))
(deviceList
(device 1 NOTE
(properties
(name "Comment")
(text2 11 "This function creates the initial array of possible"
"opponent flag positions. Initially it has all 40 opponent"
"squares (60-99).  This array is initially set-up to be"
"random squares (but back rows first).  Each time an opponent"
"square is vacated (or becomes known), that square is removed "
"from the list.  So towards the end of the game, this list "
"will be quite small.  The list is also sorted by \"higher\" "
"probability(i.e. squares bordering known bombs are more "
"likely to contain a flag)." "" "")))
(device 2 ALLOCATEARRAY
(properties
(name "90-99"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "10")
(type "Int32")
(initEnum "Lin Ramp")
(initialValue
(data  0))
(from 90)
(thru 99)))
(device 3 ALLOCATEARRAY
(properties
(name "60-69"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "10")
(type "Int32")
(initEnum "Lin Ramp")
(initialValue
(data  0))
(from 60)
(thru 69)))
(device 4 ALLOCATEARRAY
(properties
(name "70-79"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "10")
(type "Int32")
(initEnum "Lin Ramp")
(initialValue
(data  0))
(from 70)
(thru 79)))
(device 5 ALLOCATEARRAY
(properties
(name "80-89"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "10")
(type "Int32")
(initEnum "Lin Ramp")
(initialValue
(data  0))
(from 80)
(thru 89)))
(device 13 CALL
(properties
(name "Call RandomizeEm")
(callFunc "RandomizeEm")
(parmMode rev30))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "aryRand")
(lock name constraints)
(optional yes))))
(device 14 CALL
(properties
(name "Call RandomizeEm")
(callFunc "RandomizeEm")
(parmMode rev30))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "aryRand")
(lock name constraints)
(optional yes))))
(device 15 CALL
(properties
(name "Call RandomizeEm")
(callFunc "RandomizeEm")
(parmMode rev30))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "aryRand")
(lock name constraints)
(optional yes))))
(device 16 CALL
(properties
(name "Call RandomizeEm")
(callFunc "RandomizeEm")
(parmMode rev30))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "aryRand")
(lock name constraints)
(optional yes))))
(device 17 VECTORCONCATENATOR
(interface
(input 1
(name "A"))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Array")
(tag "Array"))))
(device 18 FORMULA
(properties
(name "set \'PossibleOppFlagPositions\'")
(expr 1 "PossibleOppFlagPositions = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D1:1 D5:1)
(connect D4:1 D6:1)
(connect D3:1 D7:1)
(connect D2:1 D8:1)
(connect D5:1 D9:1)
(connect D6:1 D9:2)
(connect D7:1 D9:3)
(connect D8:1 D9:4)
(connect D9:1 D10:1)))
(contextCarrier
(active detail)
(detail
(extent 766 401)
(anchorPt -2 -5)
(configuration
(devCarrierFor 1
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 470 173)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 290 120))
(devCarrierFor 2
(active icon)
(icon
(extent 41 16))
(open
(extent 208 117))
(terminals on)
(pinCenter 120 240))
(devCarrierFor 3
(active icon)
(icon
(extent 41 16))
(open
(extent 208 117))
(terminals on)
(pinCenter 120 350))
(devCarrierFor 4
(active icon)
(icon
(extent 41 16))
(open
(extent 208 117))
(terminals on)
(pinCenter 120 310))
(devCarrierFor 5
(active icon)
(icon
(extent 41 16))
(open
(extent 208 117))
(terminals on)
(pinCenter 120 280))
(devCarrierFor 13
(active icon)
(icon
(extent 129 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 250 250))
(devCarrierFor 14
(active icon)
(icon
(extent 129 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 250 280))
(devCarrierFor 15
(active icon)
(icon
(extent 129 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 250 310))
(devCarrierFor 16
(active icon)
(icon
(extent 129 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 260 340))
(devCarrierFor 17
(active icon)
(icon
(extent 94 45))
(open
(extent 60 82))
(terminals on)
(pinCenter 400 290))
(devCarrierFor 18
(active icon)
(icon
(extent 213 16))
(open
(extent 235 32))
(terminals on)
(pinCenter 620 300))
(connect D1:1 D5:1
(points 4 143 240 160 240 160 250 183 250))
(connect D4:1 D6:1
(points 2 143 280 183 280))
(connect D3:1 D7:1
(points 2 143 310 183 310))
(connect D2:1 D8:1
(points 4 143 350 160 350 160 340 193 340))
(connect D5:1 D9:1
(points 4 317 250 340 250 340 270 350 270))
(connect D6:1 D9:2
(points 2 317 280 350 280))
(connect D7:1 D9:3
(points 4 317 310 330 310 330 290 350 290))
(connect D8:1 D9:4
(points 4 327 340 340 340 340 300 350 300))
(connect D9:1 D10:1
(points 4 449 290 470 290 470 300 511 300)))
(stackingOrder 6 7 8 9 1 4 3 2 5 0 10))))
(device 44 ALLOCATEARRAY
(properties
(name "Alloc Integer Array \'9999\'"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "40")
(type "Int32")
(initEnum "Init Value")
(initialValue
(data  9999))
(from 1)
(thru 10)))
(device 45 ALLOCATEARRAY
(properties
(name "Alloc Integer Array \'0\'"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "100")
(type "Int32")
(initEnum "Init Value")
(initialValue
(data  0))
(from 1)
(thru 10)))
(device 46 ALLOCATEARRAY
(properties
(name "Alloc Integer Array \'-1\'"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "40")
(type "Int32")
(initEnum "Init Value")
(initialValue
(data  -1))
(from 1)
(thru 10)))
(device 48 CALL
(properties
(name "Call CreateBorderSquaresArray")
(callFunc "CreateBorderSquaresArray")
(parmMode rev30)))
(device 49 FORMULA
(properties
(name "NumPiecesKnownToBeMovable = 33")
(expr 1 "NumPiecesKnownToBeMovable = 33")))
(device 50 ALLOCATEARRAY
(properties
(name "Alloc Integer Array \'0\'"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "41")
(type "Int32")
(initEnum "Init Value")
(initialValue
(data  0))
(from 1)
(thru 10)))
(device 51 FORMULA
(properties
(name "IsAGuardPiece")
(expr 1 "IsAGuardPiece = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))))
(device 52 DECLVAR
(properties
(name "Declare Variable \'IsAGuardPiece\'")
(scope lib)
(globalName "IsAGuardPiece"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 53 FORMULA
(properties
(name "StrafingPiece = 0")
(expr 1 "StrafingPiece = 0")))
(device 54 DECLVAR
(properties
(name "Declare Variable \'StrafingPiece\'")
(scope lib)
(globalName "StrafingPiece"))
(implementation
(value Int32
(data  0))))
(configuration
(connect D24:0 D19:0)
(connect D23:1 D21:1)
(connect D31:0 D22:0)
(connect D22:1 D23:1)
(connect D22:1 D23:2)
(connect D25:0 D24:0)
(connect D27:0 D25:0)
(connect D25:1 D26:1)
(connect D22:0 D27:0)
(connect D27:1 D28:1)
(connect D27:1 D28:2)
(connect D27:1 D28:3)
(connect D28:1 D29:1)
(connect D34:1 D30:1)
(connect D35:0 D31:0)
(connect D38:1 D32:1)
(connect D39:1 D33:1)
(connect D37:1 D33:2)
(connect D37:0 D34:0)
(connect D36:0 D35:0)
(connect D34:0 D36:0)
(connect D39:0 D37:0)
(connect D38:0 D39:0)
(connect D19:0 D40:0)
(connect D42:1 D43:1)))
(contextCarrier
(active detail)
(detail
(extent 940 781)
(anchorPt -20 -62)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 181 16))
(open
(extent 207 32))
(terminals on)
(pinCenter 580 480))
(devCarrierFor 3
(active icon)
(icon
(extent 262 16))
(open
(extent 337 108))
(pinCenter 730 140))
(devCarrierFor 4
(active icon)
(icon
(extent 207 16))
(open
(extent 336 32))
(terminals on)
(pinCenter 710 200))
(devCarrierFor 5
(active icon)
(icon
(extent 302 16))
(open
(extent 338 109))
(pinCenter 750 170))
(devCarrierFor 6
(active icon)
(icon
(extent 231 16))
(open
(extent 267 107))
(pinCenter 660 110))
(devCarrierFor 7
(active icon)
(icon
(extent 273 16))
(open
(extent 283 32))
(terminals on)
(pinCenter 610 310))
(devCarrierFor 8
(active icon)
(icon
(extent 264 16))
(open
(extent 274 32))
(terminals on)
(pinCenter 600 280))
(devCarrierFor 9
(active icon)
(icon
(extent 292 16))
(open
(extent 328 107))
(pinCenter 580 240))
(devCarrierFor 10
(active icon)
(icon
(extent 188 16))
(open
(extent 260 107))
(pinCenter 420 110))
(devCarrierFor 11
(active icon)
(icon
(extent 170 16))
(open
(extent 250 107))
(pinCenter 490 200))
(devCarrierFor 13
(active icon)
(icon
(extent 214 16))
(open
(extent 250 107))
(pinCenter 450 170))
(devCarrierFor 14
(active icon)
(icon
(extent 365 16))
(open
(extent 401 107))
(pinCenter 270 290))
(devCarrierFor 15
(active icon)
(icon
(extent 355 16))
(open
(extent 391 107))
(pinCenter 260 260))
(devCarrierFor 16
(active icon)
(icon
(extent 198 16))
(open
(extent 316 136))
(pinCenter 210 100))
(devCarrierFor 17
(active icon)
(icon
(extent 308 16))
(open
(extent 344 106))
(pinCenter 250 230))
(devCarrierFor 18
(active icon)
(icon
(extent 217 16))
(open
(extent 253 107))
(pinCenter 200 170))
(devCarrierFor 19
(active icon)
(icon
(extent 280 16))
(open
(extent 391 240))
(pinCenter 230 140))
(devCarrierFor 20
(active icon)
(icon
(extent 291 16))
(open
(extent 315 107))
(pinCenter 230 200))
(devCarrierFor 21
(active icon)
(icon
(extent 214 16))
(open
(extent 287 107))
(pinCenter 650 360))
(devCarrierFor 22
(active icon)
(icon
(extent 231 16))
(open
(extent 244 32))
(terminals on)
(pinCenter 180 770))
(devCarrierFor 23
(active icon)
(icon
(extent 331 16))
(open
(extent 367 107))
(pinCenter 660 440))
(devCarrierFor 24
(active icon)
(icon
(extent 168 16))
(open
(extent 194 32))
(terminals on)
(pinCenter 580 580))
(devCarrierFor 25
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 330 580))
(devCarrierFor 26
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 420 580))
(devCarrierFor 27
(active icon)
(icon
(extent 130 16))
(open
(extent 153 32))
(terminals on)
(pinCenter 180 730))
(devCarrierFor 28
(active icon)
(icon
(extent 146 14))
(open
(extent 208 117))
(terminals on)
(pinCenter 180 700))
(devCarrierFor 29
(active icon)
(icon
(extent 198 16))
(open
(extent 221 32))
(terminals on)
(pinCenter 390 700))
(devCarrierFor 30
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 180 630))
(devCarrierFor 31
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 93 62))
(terminals on)
(pinCenter 290 640))
(devCarrierFor 32
(active icon)
(icon
(extent 103 16))
(open
(extent 155 32))
(terminals on)
(pinCenter 430 640))
(devCarrierFor 33
(active icon)
(icon
(extent 93 16))
(open
(extent 126 32))
(terminals on)
(pinCenter 360 460))
(devCarrierFor 34
(active icon)
(icon
(extent 117 16))
(open
(extent 141 32))
(terminals on)
(pinCenter 180 590))
(devCarrierFor 35
(active icon)
(icon
(extent 196 16))
(open
(extent 220 32))
(terminals on)
(pinCenter 380 340))
(devCarrierFor 36
(active icon)
(icon
(extent 196 25))
(open
(extent 579 90))
(terminals on)
(pinCenter 400 390))
(devCarrierFor 39
(active icon)
(icon
(extent 146 14))
(open
(extent 208 117))
(terminals on)
(pinCenter 180 460))
(devCarrierFor 42
(active icon)
(icon
(extent 201 15))
(open
(extent 216 51))
(terminals on)
(pinCenter 180 560))
(devCarrierFor 43
(active icon)
(icon
(extent 147 16))
(terminals on)
(pinCenter 180 520))
(devCarrierFor 44
(active icon)
(icon
(extent 173 16))
(open
(extent 208 117))
(terminals on)
(pinCenter 180 420))
(devCarrierFor 45
(active icon)
(icon
(extent 146 14))
(open
(extent 208 117))
(terminals on)
(pinCenter 180 340))
(devCarrierFor 46
(active icon)
(icon
(extent 152 16))
(open
(extent 208 117))
(terminals on)
(pinCenter 180 380))
(devCarrierFor 48
(active icon)
(icon
(extent 221 16))
(open
(extent 197 53))
(terminals on)
(pinCenter 180 820))
(devCarrierFor 49
(active icon)
(icon
(extent 254 16))
(open
(extent 265 32))
(terminals on)
(pinCenter 670 400))
(devCarrierFor 50
(active icon)
(icon
(extent 146 14))
(open
(extent 208 117))
(terminals on)
(pinCenter 560 530))
(devCarrierFor 51
(active icon)
(icon
(extent 103 16))
(open
(extent 164 32))
(terminals on)
(pinCenter 710 530))
(devCarrierFor 52
(active icon)
(icon
(extent 229 16))
(open
(extent 265 107))
(pinCenter 650 80))
(devCarrierFor 53
(active icon)
(icon
(extent 118 16))
(open
(extent 153 32))
(terminals on)
(pinCenter 600 650))
(devCarrierFor 54
(active icon)
(icon
(extent 218 16))
(open
(extent 267 107))
(pinCenter 620 610))
(connect D24:0 D19:0
(points 2 180 740 180 759))
(connect D23:1 D21:1
(points 2 467 580 493 580))
(connect D31:0 D22:0
(points 8 180 600 180 610 250 610 250 590 300 590 300 550 330 550 330 569))
(connect D22:1 D23:1
(points 4 344 580 360 580 360 570 373 570))
(connect D22:1 D23:2
(points 4 344 580 360 580 360 590 373 590))
(connect D25:0 D24:0
(points 2 180 709 180 719))
(connect D27:0 D25:0
(points 2 180 640 180 690))
(connect D25:1 D26:1
(points 2 255 700 288 700))
(connect D22:0 D27:0
(points 10 330 590 330 600 350 600 350 490 60 490 60 620 150 620 150 610 180 610
180 619))
(connect D27:1 D28:1
(points 2 194 630 243 630))
(connect D27:1 D28:2
(points 4 194 630 210 630 210 640 243 640))
(connect D27:1 D28:3
(points 4 194 630 210 630 210 650 243 650))
(connect D28:1 D29:1
(points 2 337 640 376 640))
(connect D34:1 D30:1
(points 2 255 460 311 460))
(connect D35:0 D31:0
(points 2 180 570 180 579))
(connect D38:1 D32:1
(points 2 255 340 279 340))
(connect D39:1 D33:1
(points 2 258 380 299 380))
(connect D37:1 D33:2
(points 4 269 420 280 420 280 400 299 400))
(connect D37:0 D34:0
(points 2 180 430 180 450))
(connect D36:0 D35:0
(points 2 180 530 180 550))
(connect D34:0 D36:0
(points 2 180 469 180 509))
(connect D39:0 D37:0
(points 2 180 390 180 409))
(connect D38:0 D39:0
(points 2 180 349 180 369))
(connect D19:0 D40:0
(points 2 180 780 180 809))
(connect D42:1 D43:1
(points 2 635 530 656 530)))
(stackingOrder 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 21 22 24 25 26 27
28 29 30 31 32 33 34 35 36 37 38 39 20 0 41 42 43 44 1 46 45 23 40))))
(context 57
(properties
(name "InitProbabilityTables")
(trigMode deg)
(nextID 9)
(popupTitleText "UserFunction")
(popupMoveable 1))
(deviceList
(device 0 ALLOCATEARRAY
(properties
(name "Alloc Integer Array \'0\'"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "12")
(type "Int32")
(initEnum "Init Value")
(initialValue
(data  0))
(from 1)
(thru 10)))
(device 1 DECLVAR
(properties
(name "Declare Variable \'OpponentPieceTable\'")
(scope lib)
(globalName "OpponentPieceTable"))
(implementation
(value Record
(numDims 1)
(size 1)
(schema
(numFields 5)
(fieldName "type"
(type Text))
(fieldName "initial_headcount"
(type Int32))
(fieldName "known_alive"
(type Int32))
(fieldName "known_dead"
(type Int32))
(fieldName "unknown_alive"
(type Int32)))
(data 
(record
("type" "")
("initial_headcount" 0)
("known_alive" 0)
("known_dead" 0)
("unknown_alive" 0))))))
(device 2 FORMULA
(properties
(name "initial head count")
(expr 1 "[1, 1, 1, 1, 2, 3, 4, 4, 4, 5, 8, 6]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 TORECORD
(properties
(name "Build Initial Record")
(outputType array))
(interface
(input 1
(name "type")
(requires
(datatype Text)
(shape "Array 1D"))
(optional yes))
(input 2
(name "initial_headcount")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 3
(name "known_alive")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 4
(name "known_dead")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 5
(name "unknown_alive")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Record"))))
(device 4 FORMULA
(properties
(name "set \'OpponentPieceTable\'")
(expr 1 "OpponentPieceTable = recArray"))
(interface
(input 1
(name "recArray")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 LITERALCONSTANT
(properties
(name "piece names")
(sizeFixed 1))
(interface
(output 1
(name "Text")
(lock name constraints)))
(implementation
(value Text
(numDims 1)
(size 12)
(data  [ "Flag" "Spy" "Marshal (1)" "General (2)" "Colonel (3)" "Major (4)"
"Captain (5)" "Lieutenant (6)" "Sergeant (7)" "Miner (8)" "Scout (9)" "Bomb" ]))
(initValue Text
(data  ""))))
(device 7 DECLVAR
(properties
(name "Declare Variable \'MyPieceTable\'")
(scope lib)
(globalName "MyPieceTable"))
(implementation
(value Record
(numDims 1)
(size 1)
(schema
(numFields 5)
(fieldName "type"
(type Text))
(fieldName "initial_headcount"
(type Int32))
(fieldName "known_alive"
(type Int32))
(fieldName "known_dead"
(type Int32))
(fieldName "unknown_alive"
(type Int32)))
(data 
(record
("type" "")
("initial_headcount" 0)
("known_alive" 0)
("known_dead" 0)
("unknown_alive" 0))))))
(device 8 FORMULA
(properties
(name "set \'MyPieceTable\'")
(expr 1 "MyPieceTable = recArray"))
(interface
(input 1
(name "recArray")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D5:1 D3:1)
(connect D2:1 D3:2)
(connect D0:1 D3:3)
(connect D0:1 D3:4)
(connect D2:1 D3:5)
(connect D3:1 D4:1)
(connect D3:1 D7:1)))
(contextCarrier
(active detail)
(detail
(extent 1107 385)
(anchorPt 13 145)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 147 16))
(open
(extent 208 117))
(terminals on)
(pinCenter 140 170))
(devCarrierFor 1
(active open)
(icon
(extent 273 16))
(open
(extent 447 202))
(pinCenter 270 -20))
(devCarrierFor 2
(active icon)
(icon
(extent 117 16))
(open
(extent 242 32))
(terminals on)
(pinCenter 170 140))
(devCarrierFor 3
(active icon)
(icon
(extent 128 54)
(iconImage "build.icn"))
(open
(extent 163 102))
(terminals on)
(pinCenter 330 140))
(devCarrierFor 4
(active icon)
(icon
(extent 179 16))
(open
(extent 238 32))
(terminals on)
(pinCenter 510 140))
(devCarrierFor 6
(active icon)
(icon
(extent 88 16))
(open
(extent 263 174))
(font "Arial" 11)
(pinCenter 160 110))
(devCarrierFor 7
(active open)
(icon
(extent 224 16))
(open
(extent 447 202))
(pinCenter 780 -10))
(devCarrierFor 8
(active icon)
(icon
(extent 129 16))
(open
(extent 238 32))
(terminals on)
(pinCenter 490 180))
(connect D5:1 D3:1
(points 4 206 110 240 110 240 120 263 120))
(connect D2:1 D3:2
(points 4 231 140 240 140 240 130 263 130))
(connect D0:1 D3:3
(points 6 216 170 230 170 230 150 250 150 250 140 263 140))
(connect D0:1 D3:4
(points 4 216 170 230 170 230 150 263 150))
(connect D2:1 D3:5
(points 4 231 140 240 140 240 160 263 160))
(connect D3:1 D4:1
(points 2 396 140 418 140))
(connect D3:1 D7:1
(points 4 396 140 410 140 410 180 423 180)))
(stackingOrder 0 3 2 6 4 7 5 1))))
(context 139
(properties
(name "IsABomb")
(trigMode deg)
(nextID 2)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "piece")
(expr 1 "KnownBoard[square]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORMULA
(properties
(name "bomb bool")
(expr 1 "piece>=35 AND piece<=40"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D1:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 250 339)
(anchorPt -1 -141)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 38 16))
(open
(extent 166 32))
(terminals on)
(pinCenter 60 310))
(devCarrierFor 1
(active icon)
(icon
(extent 72 16))
(open
(extent 182 32))
(terminals on)
(pinCenter 130 310))
(connect I1:1 D0:1
(points 4 1 310 10 310 10 310 38 310))
(connect D0:1 D1:1
(points 2 81 310 91 310))
(connect D1:1 O1:1
(points 4 168 310 190 310 190 310 250 310)))
(stackingOrder 0 1))))
(context 144
(properties
(name "IsABombProtector")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "pieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "bomb protector?")
(cases 1 "BombProtectorPieces[i]==KnownBoard[pieceLoc]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "pieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "# protectors")
(expr 1 "totSize(BombProtectorPieces)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 4 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 5 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 6 EXITCONTEXT)
(configuration
(connect D1:1 D0:1)
(connect I1:1 D0:2)
(connect D2:1 D1:1)
(connect D1:0 D3:0)
(connect D0:1 D4:1)
(connect D3:1 D4:2)
(connect D4:1 D5:1)
(connect D5:0 D6:0)
(connect D5:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 704 279)
(anchorPt -91 -52)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 114 25))
(open
(extent 340 61))
(terminals on)
(pinCenter 400 160))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 280 150))
(devCarrierFor 2
(active icon)
(icon
(extent 83 16))
(open
(extent 222 32))
(terminals on)
(pinCenter 180 150))
(devCarrierFor 3
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 280 230))
(devCarrierFor 4
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 600 180))
(devCarrierFor 5
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 660 180))
(devCarrierFor 6
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 660 230))
(connect D1:1 D0:1
(points 2 317 150 340 150))
(connect I1:1 D0:2
(points 6 91 191 100 191 100 200 330 200 330 170 340 170))
(connect D2:1 D1:1
(points 2 224 150 242 150))
(connect D1:0 D3:0
(points 2 280 178 280 219))
(connect D0:1 D4:1
(points 4 459 150 480 150 480 170 583 170))
(connect D3:1 D4:2
(points 4 294 230 480 230 480 190 583 190))
(connect D4:1 D5:1
(points 2 617 180 640 180))
(connect D5:0 D6:0
(points 2 660 190 660 219))
(connect D5:1 O1:1
(points 4 680 180 700 180 700 191 794 191)))
(stackingOrder 1 2 3 4 5 6 0))))
(context 97
(properties
(name "IsAnOrphan")
(trigMode deg)
(nextID 14)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Bool")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "Top Border Squares")
(expr 1
"[((loc MOD 10)==0 OR (loc<=9) ? -1 : loc-11), (loc>=10 ? loc-10 : -1), ((loc MOD 10)==9 OR loc<=9 ? -1 : loc-9)]"
))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORMULA
(properties
(name "Side Border Squares")
(expr 1 "[BorderSquares[loc, 2], BorderSquares[loc, 3]]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "Bottom Border Squares")
(expr 1
"[((loc MOD 10)==0 OR (loc>=91) ? -1 : loc+9), (loc<=80 ? loc+10 : -1), ((loc MOD 10)==9 OR loc>=90 ? -1 : loc+11)]"
))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 VECTORCONCATENATOR
(interface
(input 1
(name "A"))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Array")
(tag "Array"))))
(device 4 FORMULA
(properties
(name "set \'borders\'")
(expr 1 "borders = allBorders"))
(interface
(input 1
(name "allborders")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 DECLVAR
(properties
(name "Declare Local \'Borders\'")
(scope con)
(globalName "borders"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 6 FORCOUNT
(properties
(name "For Borders")
(count 8))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 7 IFTHENELSE
(properties
(name "open or our piece or opp bomb?")
(cases 1
"(borders[b]>-1 ? (KnownBoard[borders[b]]>1000 OR KnownBoard[borders[b]]==0 OR KnownBoard[borders[b]]==-3 OR (KnownBoard[borders[b]]>=35 AND KnownBoard[borders[b]]<=40)) : 1)"
))
(interface
(input 1
(name "b")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 9 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 10 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 12 EXITCONTEXT)
(device 13 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect I1:1 D0:1)
(connect D0:0 D1:0)
(connect I1:1 D1:1)
(connect D1:0 D2:0)
(connect I1:1 D2:1)
(connect D0:1 D3:1)
(connect D1:1 D3:2)
(connect D2:1 D3:3)
(connect D3:1 D4:1)
(connect D4:0 D6:0)
(connect D6:1 D7:1)
(connect D12:1 D8:1)
(connect D9:1 D8:2)
(connect D6:0 D9:0)
(connect D8:1 D10:1)
(connect D10:0 D11:0)
(connect D7:2 D12:0)
(connect D10:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 986 403)
(anchorPt 120 28)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 141 16))
(open
(extent 738 32))
(terminals on)
(pinCenter 200 70))
(devCarrierFor 1
(active icon)
(icon
(extent 145 16))
(open
(extent 326 32))
(terminals on)
(pinCenter 200 120))
(devCarrierFor 2
(active icon)
(icon
(extent 162 16))
(open
(extent 763 32))
(terminals on)
(pinCenter 200 170))
(devCarrierFor 3
(active icon)
(icon
(extent 94 34))
(open
(extent 60 62))
(terminals on)
(pinCenter 370 120))
(devCarrierFor 4
(active icon)
(icon
(extent 85 16))
(open
(extent 163 32))
(terminals on)
(pinCenter 490 120))
(devCarrierFor 5
(active icon)
(icon
(extent 161 16))
(open
(extent 215 107))
(pinCenter 190 30))
(devCarrierFor 6
(active icon)
(icon
(extent 83 52)
(iconImage "loop.icn"))
(open
(extent 119 32))
(pinCenter 190 250))
(devCarrierFor 7
(active icon)
(icon
(extent 224 25))
(open
(extent 1229 53))
(terminals on)
(pinCenter 370 250))
(devCarrierFor 8
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 630 210))
(devCarrierFor 9
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 190 310))
(devCarrierFor 10
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 690 210))
(devCarrierFor 12
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 690 260))
(devCarrierFor 13
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 470 290))
(connect I1:1 D0:1
(points 4 -120 173 -110 173 -110 70 127 70))
(connect D0:0 D1:0
(points 2 200 80 200 109))
(connect I1:1 D1:1
(points 6 -120 173 -110 173 -110 170 100 170 100 120 125 120))
(connect D1:0 D2:0
(points 2 200 130 200 159))
(connect I1:1 D2:1
(points 4 -120 173 -2 173 -2 170 116 170))
(connect D0:1 D3:1
(points 4 273 70 300 70 300 110 320 110))
(connect D1:1 D3:2
(points 2 275 120 320 120))
(connect D2:1 D3:3
(points 4 283 170 300 170 300 130 320 130))
(connect D3:1 D4:1
(points 2 419 120 445 120))
(connect D4:0 D6:0
(points 4 490 130 490 200 190 200 190 221))
(connect D6:1 D7:1
(points 2 234 250 255 250))
(connect D12:1 D8:1
(points 4 484 290 520 290 520 200 613 200))
(connect D9:1 D8:2
(points 6 208 310 230 310 230 320 530 320 530 220 613 220))
(connect D6:0 D9:0
(points 2 190 278 190 299))
(connect D8:1 D10:1
(points 2 647 210 670 210))
(connect D10:0 D11:0
(points 2 690 220 690 249))
(connect D7:2 D12:0
(points 5 484 260 490 260 490 270 470 270 470 279))
(connect D10:1 O1:1
(points 4 710 210 770 210 770 173 865 173)))
(stackingOrder 1 5 3 4 8 9 10 11 12 0 6 7 2))))
(context 149
(properties
(name "IsBungusLocation")
(trigMode deg)
(nextID 19)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "toSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "flagLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 2 IFTHENELSE
(properties
(name "both known bombs?")
(cases 1 "(loc1>=35 AND loc1<=40) AND (loc2>=35 AND loc2<=40)"))
(interface
(input 1
(name "loc1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "loc2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 4 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 5 EXITCONTEXT)
(device 7 NOTE
(properties
(name "Comment")
(text2 5 "This function determines if the destination"
"square \'toSquare\' is a poor location, relative"
"to \'flagLoc\'.  If there are diagonal bombs"
"in the way, then you cannot get to the flag" "location through this location.")
))
(device 9 IFTHENELSE
(properties
(name "diagonally adjacent?")
(cases 1
"(abs((flagLoc MOD 10)-(toSquare MOD 10))==1) AND (abs((flagLoc DIV 10)-(toSquare DIV 10))==1)"
))
(interface
(input 1
(name "toSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "flagLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 FORMULA
(properties
(name "hor bomb loc")
(expr 1 "(toSquare DIV 10)*10+(flagLoc MOD 10)"))
(interface
(input 1
(name "toSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "flagLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORMULA
(properties
(name "vert bomb loc")
(expr 1 "(flagLoc DIV 10)*10+(toSquare MOD 10)"))
(interface
(input 1
(name "toSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "flagLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 FORMULA
(properties
(name "contents")
(expr 1 "KnownBoard[loc]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 FORMULA
(properties
(name "contents")
(expr 1 "KnownBoard[loc]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D8:1 D0:1)
(connect D9:1 D0:2)
(connect D2:1 D1:1)
(connect D5:2 D2:1)
(connect D0:1 D2:2)
(connect D0:2 D2:3)
(connect D1:0 D3:0)
(connect I1:1 D5:1)
(connect I2:1 D5:2)
(connect D7:0 D6:0)
(connect I1:1 D6:1)
(connect I2:1 D6:2)
(connect D5:1 D7:0)
(connect I1:1 D7:1)
(connect I2:1 D7:2)
(connect D7:1 D8:1)
(connect D6:1 D9:1)
(connect D1:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 713 388)
(anchorPt 29 92)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 138 25))
(open
(extent 443 53))
(terminals on)
(pinCenter 340 190))
(devCarrierFor 3
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 540 150))
(devCarrierFor 4
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 480 150))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 540 220))
(devCarrierFor 7
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 358 105)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 460 50))
(devCarrierFor 9
(active icon)
(icon
(extent 143 25))
(open
(extent 686 71))
(terminals on)
(pinCenter 110 20))
(devCarrierFor 12
(active icon)
(icon
(extent 90 25))
(open
(extent 331 42))
(terminals on)
(pinCenter 100 210))
(devCarrierFor 14
(active icon)
(icon
(extent 93 25))
(open
(extent 331 42))
(terminals on)
(pinCenter 100 160))
(devCarrierFor 17
(active icon)
(icon
(extent 59 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 200 160))
(devCarrierFor 18
(active icon)
(icon
(extent 59 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 200 210))
(connect D8:1 D0:1
(points 4 232 160 250 160 250 180 268 180))
(connect D9:1 D0:2
(points 4 232 210 250 210 250 200 268 200))
(connect D2:1 D1:1
(points 2 497 150 520 150))
(connect D5:2 D2:1
(points 4 184 30 250 30 250 140 463 140))
(connect D0:1 D2:2
(points 4 411 180 430 180 430 150 463 150))
(connect D0:2 D2:3
(points 4 411 200 440 200 440 160 463 160))
(connect D1:0 D3:0
(points 2 540 160 540 209))
(connect I1:1 D5:1
(points 4 -29 1 -10 1 -10 10 36 10))
(connect I2:1 D5:2
(points 4 -29 201 -20 201 -20 30 36 30))
(connect D7:0 D6:0
(points 2 100 175 100 195))
(connect I1:1 D6:1
(points 4 -29 1 -10 1 -10 200 52 200))
(connect I2:1 D6:2
(points 4 -29 201 -20 201 -20 220 52 220))
(connect D5:1 D7:0
(points 5 184 10 200 10 200 60 100 60 100 145))
(connect I1:1 D7:1
(points 4 -29 1 -10 1 -10 150 51 150))
(connect I2:1 D7:2
(points 4 -29 201 -20 201 -20 170 51 170))
(connect D7:1 D8:1
(points 2 149 160 168 160))
(connect D6:1 D9:1
(points 2 147 210 168 210))
(connect D1:1 O1:1
(points 4 560 150 660 150 660 101 683 101)))
(stackingOrder 5 7 6 9 8 0 2 4 1 3))))
(context 136
(properties
(name "IsOpponentPinned")
(trigMode deg)
(nextID 6)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YES")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "NO")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "opponent pinned on end column?")
(cases 1 "(oppPieceLoc MOD 10)==0 OR (oppPieceLoc MOD 10)==9"))
(interface
(input 1
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 3 FORMULA
(properties
(name "pinned col, pinned row")
(expr 1 "c = (oppPieceLoc MOD 10)+dc, r = (oppPieceLoc DIV 10)+dr"))
(interface
(input 1
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "c")
(optional yes))
(output 2
(name "r")
(optional yes))))
(device 4 IFTHENELSE
(properties
(name "pinned via row?")
(cases 1 "(dr<0 OR dr>10 ? 1 : KnownBoard[dr])"))
(interface
(input 1
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 IFTHENELSE
(properties
(name "pinned via col?")
(cases 1 "(dc<0 OR dc>10 ? 1 : KnownBoard[dc])"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I3:1 D0:1)
(connect I1:1 D0:2)
(connect I2:1 D0:3)
(connect D0:1 D1:1)
(connect D3:1 D1:2)
(connect D4:1 D1:3)
(connect D0:2 D2:0)
(connect I3:1 D2:1)
(connect I2:1 D2:2)
(connect I1:1 D2:3)
(connect D2:2 D3:1)
(connect D3:2 D4:0)
(connect D2:1 D4:1)
(connect D1:1 O1:1)
(connect D4:2 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 1029 359)
(anchorPt 342 32)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 233 34))
(open
(extent 401 62))
(terminals on)
(pinCenter -130 80))
(devCarrierFor 2
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 280 140))
(devCarrierFor 3
(active icon)
(icon
(extent 156 34))
(open
(extent 416 62))
(terminals on)
(pinCenter -50 170))
(devCarrierFor 4
(active icon)
(icon
(extent 108 25))
(open
(extent 364 61))
(terminals on)
(pinCenter 140 160))
(devCarrierFor 5
(active icon)
(icon
(extent 104 25))
(open
(extent 361 61))
(terminals on)
(pinCenter 140 200))
(connect I3:1 D0:1
(points 6 -342 267 -330 267 -330 260 -350 260 -350 70 -249 70))
(connect I1:1 D0:2
(points 4 -342 27 -330 27 -330 80 -249 80))
(connect I2:1 D0:3
(points 4 -342 147 -330 147 -330 90 -249 90))
(connect D0:1 D1:1
(points 4 -11 70 10 70 10 130 263 130))
(connect D3:1 D1:2
(points 4 196 150 230 150 230 140 263 140))
(connect D4:1 D1:3
(points 4 194 190 240 190 240 150 263 150))
(connect D0:2 D2:0
(points 5 -11 90 0 90 0 120 -50 120 -50 150))
(connect I3:1 D2:1
(points 6 -342 267 -330 267 -330 260 -350 260 -350 160 -131 160))
(connect I2:1 D2:2
(points 4 -342 147 -320 147 -320 170 -131 170))
(connect I1:1 D2:3
(points 6 -342 27 -330 27 -330 60 -360 60 -360 180 -131 180))
(connect D2:2 D3:1
(points 4 30 180 60 180 60 160 83 160))
(connect D3:2 D4:0
(points 7 196 170 220 170 220 140 150 140 150 160 140 160 140 185))
(connect D2:1 D4:1
(points 4 30 160 50 160 50 200 85 200))
(connect D1:1 O1:1
(points 4 297 140 320 140 320 57 686 57))
(connect D4:2 O2:1
(points 4 194 210 210 210 210 237 686 237)))
(stackingOrder 0 2 3 4 1))))
(context 153
(properties
(name "IsOurFlagExposed")
(trigMode deg)
(nextID 28)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "go to location")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "NO")
(lock constraints)
(optional yes)))
(deviceList
(device 0 NOTE
(properties
(name "Comment")
(text2 7 "This function returns true if our flag is" "extremely vulnerable:" ""
"1) Surrounded by bombs with no \'helper\'" "   pieces adjacent." ""
"2) Has an open square adjacent to the flag.")))
(device 10 CONTEXT
(properties
(name "Flag surrounded by bombs?")
(trigMode deg)
(nextID 9)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "Flag Position")
(expr 1 "FlagPosition"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 2 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 3 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 IFTHENELSE
(properties
(name "our bomb?")
(cases 1 "(loc==-1 ? 1 : KnownBoard[loc]>=1035 AND KnownBoard[loc]<=1040)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 EXITCONTEXT)
(device 8 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(configuration
(connect D1:0 D2:0)
(connect D0:1 D3:1)
(connect D1:1 D3:2)
(connect D3:1 D4:1)
(connect D6:0 D5:0)
(connect D4:2 D6:0)
(connect D2:1 O1:1)
(connect D6:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 635 304)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 90 16))
(open
(extent 112 32))
(terminals on)
(pinCenter 110 70))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 130 140))
(devCarrierFor 2
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 130 220))
(devCarrierFor 3
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 250 130))
(devCarrierFor 4
(active icon)
(icon
(extent 74 25))
(open
(extent 469 53))
(terminals on)
(pinCenter 370 130))
(devCarrierFor 6
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 510 220))
(devCarrierFor 8
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 510 180))
(connect D1:0 D2:0
(points 2 130 168 130 209))
(connect D0:1 D3:1
(points 4 157 70 190 70 190 120 198 120))
(connect D1:1 D3:2
(points 2 167 140 198 140))
(connect D3:1 D4:1
(points 2 302 130 330 130))
(connect D6:0 D5:0
(points 2 510 190 510 209))
(connect D4:2 D6:0
(points 3 409 140 510 140 510 169))
(connect D2:1 O1:1
(points 4 148 220 440 220 440 71 634 71))
(connect D6:1 O2:1
(points 4 524 180 600 180 600 231 634 231)))
(stackingOrder 0 1 2 3 4 6 5))))
(device 11 CONTEXT
(properties
(name "Is there an unguarded open spot?")
(trigMode deg)
(nextID 20)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "open location")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "Flag Position")
(expr 1 "FlagPosition"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 IFTHENELSE
(properties
(name "open?")
(cases 1 "(loc==-1 ? 0 : KnownBoard[loc]==0)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 10 EXITCONTEXT)
(device 11 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 12 IFTHENELSE
(properties
(name "guard piece?")
(cases 1 "(loc==-1 ? 0 : (KnownBoard[loc]>=1003 AND KnownBoard[loc]<=1029))"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 13 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 15 IFTHENELSE
(properties
(name "bomb guarded?")
(cases 1 "guarded"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 16 BREAK)
(device 17 FORMULA
(properties
(name "guarded = YES")
(expr 1 "guarded = 1")))
(device 18 FORMULA
(properties
(name "guarded = NO")
(expr 1 "guarded = 0")))
(device 19 DECLVAR
(properties
(name "Declare Local \'guarded\'")
(scope con)
(globalName "guarded"))
(implementation
(value Int32
(data  0))))
(configuration
(connect D0:1 D2:1)
(connect D1:1 D2:2)
(connect D2:1 D3:1)
(connect D10:2 D4:0)
(connect D2:1 D4:1)
(connect D4:0 D5:0)
(connect D1:0 D6:0)
(connect D8:1 D7:1)
(connect D2:1 D8:1)
(connect D9:1 D8:2)
(connect D13:0 D9:0)
(connect D9:0 D10:0)
(connect D12:0 D11:0)
(connect D7:1 D12:0)
(connect D3:1 D13:0)
(connect D4:1 O1:1)
(connect D6:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 965 408)
(anchorPt 1 11)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 90 16))
(open
(extent 112 32))
(terminals on)
(pinCenter 110 70))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 130 140))
(devCarrierFor 3
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 250 130))
(devCarrierFor 4
(active icon)
(icon
(extent 44 25))
(open
(extent 255 53))
(terminals on)
(pinCenter 370 130))
(devCarrierFor 9
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 540 70))
(devCarrierFor 10
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 540 110))
(devCarrierFor 11
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 130 220))
(devCarrierFor 12
(active icon)
(icon
(extent 91 25))
(open
(extent 479 53))
(terminals on)
(pinCenter 710 190))
(devCarrierFor 13
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 590 190))
(devCarrierFor 14
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 470 200))
(devCarrierFor 15
(active icon)
(icon
(extent 110 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 470 260))
(devCarrierFor 16
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 840 240))
(devCarrierFor 17
(active icon)
(icon
(extent 105 16))
(open
(extent 111 32))
(terminals on)
(pinCenter 840 210))
(devCarrierFor 18
(active icon)
(icon
(extent 97 16))
(open
(extent 111 32))
(terminals on)
(pinCenter 470 150))
(devCarrierFor 19
(active icon)
(icon
(extent 165 16))
(open
(extent 215 107))
(pinCenter 120 40))
(connect D0:1 D2:1
(points 4 157 70 190 70 190 120 198 120))
(connect D1:1 D2:2
(points 2 167 140 198 140))
(connect D2:1 D3:1
(points 2 302 130 345 130))
(connect D10:2 D4:0
(points 5 527 270 650 270 650 40 540 40 540 59))
(connect D2:1 D4:1
(points 4 302 130 330 130 330 70 520 70))
(connect D4:0 D5:0
(points 2 540 80 540 99))
(connect D1:0 D6:0
(points 2 130 168 130 209))
(connect D8:1 D7:1
(points 2 642 190 662 190))
(connect D2:1 D8:1
(points 10 302 130 330 130 330 100 410 100 410 110 480 110 480 140 530 140 530
180 538 180))
(connect D9:1 D8:2
(points 2 507 200 538 200))
(connect D13:0 D9:0
(points 2 470 160 470 171))
(connect D9:0 D10:0
(points 2 470 228 470 245))
(connect D12:0 D11:0
(points 2 840 220 840 229))
(connect D7:1 D12:0
(points 3 758 180 840 180 840 199))
(connect D3:1 D13:0
(points 3 394 120 470 120 470 139))
(connect D4:1 O1:1
(points 4 560 70 596 70 596 92 963 92))
(connect D6:1 O2:1
(points 4 144 220 389 220 389 292 963 292)))
(stackingOrder 0 1 2 3 4 5 6 8 9 7 14 13 12 11 10))))
(device 14 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "C")
(optional yes))
(input 2
(name "A")
(optional yes))
(input 3
(name "B")
(optional yes))
(output 1
(name "Data"))))
(device 25 CONTEXT
(properties
(name "bombs guarded?")
(trigMode deg)
(nextID 22)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "location")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "Flag Position")
(expr 1 "FlagPosition"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 IFTHENELSE
(properties
(name "our bomb?")
(cases 1 "(loc==-1 ? 0 : KnownBoard[loc]>=1035 AND KnownBoard[loc]<=1040)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 11 IFTHENELSE
(properties
(name "our piece (1-7) guarding?")
(cases 1
"(loc==-1 ? 0 : (KnownBoard[loc]>=1003 AND KnownBoard[loc]<=1029) OR (KnownBoard[loc]==1001) OR (KnownBoard[loc]>=1035 AND KnownBoard[loc]<=1040))"
))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 DECLVAR
(properties
(name "Declare Local \'guarded\'")
(scope con)
(globalName "guarded"))
(implementation
(value Int32
(data  0))))
(device 13 FORMULA
(properties
(name "guarded = YES")
(expr 1 "guarded = 1")))
(device 14 FORMULA
(properties
(name "guarded = NO")
(expr 1 "guarded = 0")))
(device 15 BREAK)
(device 16 IFTHENELSE
(properties
(name "bomb guarded?")
(cases 1 "guarded"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 18 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 19 EXITCONTEXT)
(device 21 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(configuration
(connect D0:1 D2:1)
(connect D1:1 D2:2)
(connect D2:1 D3:1)
(connect D2:1 D4:1)
(connect D5:1 D4:2)
(connect D9:0 D5:0)
(connect D4:1 D6:1)
(connect D6:1 D8:0)
(connect D3:1 D9:0)
(connect D8:0 D10:0)
(connect D5:0 D11:0)
(connect D11:2 D12:0)
(connect D2:1 D12:1)
(connect D12:0 D13:0)
(connect D1:0 D14:0)
(connect D14:1 O1:1)
(connect D12:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 957 444)
(anchorPt -25 -20)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 90 16))
(open
(extent 112 32))
(terminals on)
(pinCenter 110 70))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 130 140))
(devCarrierFor 3
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 250 130))
(devCarrierFor 4
(active icon)
(icon
(extent 74 25))
(open
(extent 469 53))
(terminals on)
(pinCenter 370 130))
(devCarrierFor 9
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 580 210))
(devCarrierFor 10
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 460 220))
(devCarrierFor 11
(active icon)
(icon
(extent 178 25))
(open
(extent 1055 53))
(terminals on)
(pinCenter 740 210))
(devCarrierFor 12
(active icon)
(icon
(extent 165 16))
(open
(extent 215 107))
(pinCenter 130 40))
(devCarrierFor 13
(active icon)
(icon
(extent 105 16))
(open
(extent 111 32))
(terminals on)
(pinCenter 900 230))
(devCarrierFor 14
(active icon)
(icon
(extent 97 16))
(open
(extent 111 32))
(terminals on)
(pinCenter 460 160))
(devCarrierFor 15
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 900 260))
(devCarrierFor 16
(active icon)
(icon
(extent 110 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 460 280))
(devCarrierFor 18
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 600 310))
(devCarrierFor 19
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 600 360))
(devCarrierFor 21
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 130 200))
(connect D0:1 D2:1
(points 4 157 70 190 70 190 120 198 120))
(connect D1:1 D2:2
(points 2 167 140 198 140))
(connect D2:1 D3:1
(points 2 302 130 330 130))
(connect D2:1 D4:1
(points 8 302 130 320 130 320 100 530 100 530 180 520 180 520 200 528 200))
(connect D5:1 D4:2
(points 2 497 220 528 220))
(connect D9:0 D5:0
(points 2 460 170 460 191))
(connect D4:1 D6:1
(points 2 632 210 648 210))
(connect D6:1 D8:0
(points 3 831 200 900 200 900 219))
(connect D3:1 D9:0
(points 3 409 120 460 120 460 149))
(connect D8:0 D10:0
(points 2 900 240 900 249))
(connect D5:0 D11:0
(points 2 460 248 460 265))
(connect D11:2 D12:0
(points 5 517 290 540 290 540 280 600 280 600 299))
(connect D2:1 D12:1
(points 6 302 130 320 130 320 320 540 320 540 310 580 310))
(connect D12:0 D13:0
(points 2 600 320 600 349))
(connect D1:0 D14:0
(points 2 130 168 130 189))
(connect D14:1 O1:1
(points 6 148 200 310 200 310 90 540 90 540 131 981 131))
(connect D12:1 O2:1
(points 4 620 310 640 310 640 351 981 351)))
(stackingOrder 0 1 2 7 9 5 4 8 10 11 12 13 14 3 6))))
(device 26 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 27 IFTHENELSE
(properties
(name "flag in deceptive position?")
(cases 1 "deceptiveLayout OR (flagPosition>=30)"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D6:2 D1:0)
(connect D1:2 D2:0)
(connect D6:1 D3:1)
(connect D4:1 D3:2)
(connect D2:2 D3:3)
(connect D1:1 D4:0)
(connect D2:1 D5:1)
(connect D4:2 D5:2)
(connect D5:1 O1:1)
(connect D3:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 799 584)
(anchorPt 70 69)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 390 142)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 240 320))
(devCarrierFor 10
(active icon)
(icon
(extent 195 25))
(terminals on)
(pinCenter 130 80))
(devCarrierFor 11
(active icon)
(icon
(extent 236 25))
(terminals on)
(pinCenter 150 170))
(devCarrierFor 14
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 530 180))
(devCarrierFor 25
(active icon)
(icon
(extent 117 25))
(terminals on)
(pinCenter 330 100))
(devCarrierFor 26
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 530 90))
(devCarrierFor 27
(active icon)
(icon
(extent 180 25))
(open
(extent 280 53))
(terminals on)
(pinCenter 110 -10))
(connect D6:2 D1:0
(points 5 202 0 220 0 220 30 130 30 130 65))
(connect D1:2 D2:0
(points 5 230 90 250 90 250 120 150 120 150 155))
(connect D6:1 D3:1
(points 4 202 -20 440 -20 440 170 513 170))
(connect D4:1 D3:2
(points 4 391 90 420 90 420 180 513 180))
(connect D2:2 D3:3
(points 4 270 180 290 180 290 190 513 190))
(connect D1:1 D4:0
(points 3 230 70 330 70 330 85))
(connect D2:1 D5:1
(points 4 270 160 430 160 430 80 513 80))
(connect D4:2 D5:2
(points 4 391 110 410 110 410 100 513 100))
(connect D5:1 O1:1
(points 4 547 90 570 90 570 72 728 72))
(connect D3:1 O2:1
(points 4 547 180 570 180 570 372 728 372)))
(stackingOrder 1 5 0 2 4 6 3))))
(context 38
(properties
(name "IsPieceBuried")
(trigMode deg)
(nextID 9)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "boardLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 3 FORMULA
(properties
(name "border sq 4 open bool")
(expr 1 "b = BorderSquares[i, 3], (b==-1 ? 0 : KnownBoard[b]==0)"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "b")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORMULA
(properties
(name "border sq 3 open bool")
(expr 1 "b = BorderSquares[i, 2], (b==-1 ? 0 : KnownBoard[b]==0)"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "b")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "border sq 2 bool")
(expr 1 "b = BorderSquares[i, 1], (b==-1 ? 0 : KnownBoard[b]==0)"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "b")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "border sq 1 open bool")
(expr 1 "b = BorderSquares[i, 0], (b==-1 ? 0 : KnownBoard[b]==0)"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "b")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 FORMULA
(properties
(name "all closed bool")
(expr 1 " NOT open1 AND  NOT open2 AND  NOT open3 AND  NOT open4"))
(interface
(input 1
(name "open1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "open2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "open3")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "open4")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect I1:1 D1:1)
(connect I1:1 D2:1)
(connect I1:1 D3:1)
(connect D3:2 D4:1)
(connect D2:2 D4:2)
(connect D1:2 D4:3)
(connect D0:2 D4:4)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 756 502)
(anchorPt -115 -285)
(configuration
(devCarrierFor 3
(active icon)
(icon
(extent 154 25))
(open
(extent 557 42))
(terminals on)
(pinCenter 380 520))
(devCarrierFor 4
(active icon)
(icon
(extent 154 25))
(open
(extent 557 42))
(terminals on)
(pinCenter 370 460))
(devCarrierFor 5
(active icon)
(icon
(extent 114 25))
(open
(extent 557 42))
(terminals on)
(pinCenter 360 410))
(devCarrierFor 6
(active icon)
(icon
(extent 154 25))
(open
(extent 456 47))
(terminals on)
(pinCenter 410 370))
(devCarrierFor 8
(active icon)
(icon
(extent 99 45))
(open
(extent 430 82))
(terminals on)
(pinCenter 570 430))
(connect I1:1 D0:1
(points 4 115 535 260 535 260 520 300 520))
(connect I1:1 D1:1
(points 4 115 535 260 535 260 460 290 460))
(connect I1:1 D2:1
(points 4 115 535 150 535 150 410 300 410))
(connect I1:1 D3:1
(points 6 115 535 150 535 150 410 280 410 280 370 330 370))
(connect D3:2 D4:1
(points 4 489 380 510 380 510 410 518 410))
(connect D2:2 D4:2
(points 2 419 420 518 420))
(connect D1:2 D4:3
(points 4 449 470 470 470 470 430 518 430))
(connect D0:2 D4:4
(points 4 459 530 480 530 480 440 518 440))
(connect D4:1 O1:1
(points 4 622 430 640 430 640 535 870 535)))
(stackingOrder 4 3 2 1 0))))
(context 39
(properties
(name "IsPieceMovable")
(trigMode deg)
(nextID 3)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORMULA
(properties
(name "not bomb or flag bool and my piece")
(expr 1
"(piece>1000 AND piece<1041) AND piece!=1001 AND  NOT (piece>=1035 AND piece<=1040)"
))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "piece @ loc")
(expr 1 "KnownBoard[loc]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D1:1 D0:1)
(connect I1:1 D1:1)
(connect D0:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 793 474)
(anchorPt -161 -189)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 244 16))
(open
(extent 842 32))
(terminals on)
(pinCenter 430 330))
(devCarrierFor 2
(active icon)
(icon
(extent 81 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 240 330))
(connect D1:1 D0:1
(points 2 283 330 305 330))
(connect I1:1 D1:1
(points 4 161 425 170 425 170 330 197 330))
(connect D0:1 O1:1
(points 4 554 330 570 330 570 425 953 425)))
(stackingOrder 1 0))))
(context 131
(properties
(name "IsPieceProtected")
(trigMode deg)
(nextID 18)
(popupTitleText "UserFunction2")
(popupMoveable 1))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "Unknown")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "isVulnerable = YES")
(expr 1 "isVulnerable = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "can our adj piece take opponent?")
(cases 1
"((our>1000 AND our<=1035) ? WeightOfPiece[our-1000]<WeightOfPiece[opponent] : 0)"
))
(interface
(input 1
(name "our")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "opponent")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "our piece adj?")
(cases 1
"(border>-1 ? (KnownBoard[border]>1000 AND KnownBoard[border]<=1040) : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 6 DECLVAR
(properties
(name "Declare Local \'IsVulnerable\'")
(scope con)
(globalName "isVulnerable"))
(implementation
(value Int32
(data  0))))
(device 7 FORMULA
(properties
(name "isVulnerable = NO")
(expr 1 "isVulnerable = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 IFTHENELSE
(properties
(name "Opponent Known?")
(cases 1 "KnownBoard[oppPieceLoc]>0 AND KnownBoard[oppPieceLoc]<=34"))
(interface
(input 1
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 10 IFTHENELSE
(properties
(name "can our adj piece probably protect?")
(cases 1 "WeightOfPiece[our-1000]>=1 AND WeightOfPiece[our-1000]<=3"))
(interface
(input 1
(name "our")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 FORMULA
(properties
(name "isVulnerable = NO")
(expr 1 "isVulnerable = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 IFTHENELSE
(properties
(name "protected?")
(cases 1 " NOT IsVulnerable"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 15 FORMULA
(properties
(name "adj piece")
(expr 1 "KnownBoard[adj]"))
(interface
(input 1
(name "adj")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "opponent piece")
(expr 1 "KnownBoard[opp]"))
(interface
(input 1
(name "opp")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 FORMULA
(properties
(name "our piece")
(expr 1 "KnownBoard[our]"))
(interface
(input 1
(name "our")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D13:1 D1:1)
(connect D12:1 D1:2)
(connect D3:1 D2:1)
(connect I1:1 D3:1)
(connect D4:1 D3:2)
(connect D0:0 D4:0)
(connect D1:1 D6:0)
(connect D2:1 D7:0)
(connect I2:1 D7:1)
(connect D11:1 D8:1)
(connect D8:1 D9:0)
(connect D4:0 D10:0)
(connect D7:2 D11:0)
(connect D3:1 D11:1)
(connect D13:0 D12:0)
(connect I2:1 D12:1)
(connect D7:1 D13:0)
(connect D3:1 D13:1)
(connect D10:1 O1:1)
(connect D10:2 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 1028 519)
(anchorPt -82 -74)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 133 16))
(open
(extent 155 32))
(terminals on)
(pinCenter 210 170))
(devCarrierFor 2
(active icon)
(icon
(extent 233 25))
(open
(extent 584 53))
(terminals on)
(pinCenter 620 380))
(devCarrierFor 3
(active icon)
(icon
(extent 99 25))
(open
(extent 535 55))
(terminals on)
(pinCenter 500 230))
(devCarrierFor 4
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 350 230))
(devCarrierFor 5
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 210 240))
(devCarrierFor 6
(active icon)
(icon
(extent 192 16))
(open
(extent 259 111))
(pinCenter 220 120))
(devCarrierFor 7
(active icon)
(icon
(extent 125 16))
(open
(extent 155 32))
(terminals on)
(pinCenter 780 420))
(devCarrierFor 8
(active icon)
(icon
(extent 128 25))
(open
(extent 456 59))
(terminals on)
(pinCenter 590 300))
(devCarrierFor 10
(active icon)
(icon
(extent 246 25))
(open
(extent 584 53))
(terminals on)
(pinCenter 930 290))
(devCarrierFor 12
(active icon)
(icon
(extent 125 16))
(open
(extent 155 32))
(terminals on)
(pinCenter 1020 360))
(devCarrierFor 14
(active icon)
(icon
(extent 74 25))
(open
(extent 147 53))
(terminals on)
(pinCenter 210 380))
(devCarrierFor 15
(active icon)
(icon
(extent 86 18))
(open
(extent 143 32))
(terminals on)
(pinCenter 740 290))
(devCarrierFor 16
(active icon)
(icon
(extent 107 16))
(open
(extent 136 32))
(terminals on)
(pinCenter 420 400))
(devCarrierFor 17
(active icon)
(icon
(extent 64 16))
(open
(extent 153 32))
(terminals on)
(pinCenter 420 370))
(connect D13:1 D1:1
(points 2 454 370 501 370))
(connect D12:1 D1:2
(points 4 476 400 490 400 490 390 501 390))
(connect D3:1 D2:1
(points 2 402 230 448 230))
(connect I1:1 D3:1
(points 6 82 203 90 203 90 290 270 290 270 220 298 220))
(connect D4:1 D3:2
(points 2 247 240 298 240))
(connect D0:0 D4:0
(points 2 210 180 210 211))
(connect D1:1 D6:0
(points 3 739 370 780 370 780 409))
(connect D2:1 D7:0
(points 3 552 220 590 220 590 285))
(connect I2:1 D7:1
(points 4 82 463 90 463 90 300 523 300))
(connect D11:1 D8:1
(points 2 785 290 804 290))
(connect D8:1 D9:0
(points 5 1055 280 1080 280 1080 330 1020 330 1020 349))
(connect D4:0 D10:0
(points 2 210 268 210 365))
(connect D7:2 D11:0
(points 5 656 310 670 310 670 260 740 260 740 278))
(connect D3:1 D11:1
(points 6 402 230 430 230 430 200 680 200 680 290 694 290))
(connect D13:0 D12:0
(points 2 420 380 420 389))
(connect I2:1 D12:1
(points 6 82 463 90 463 90 420 290 420 290 400 364 400))
(connect D7:1 D13:0
(points 5 656 290 680 290 680 340 420 340 420 359))
(connect D3:1 D13:1
(points 6 402 230 420 230 420 270 370 270 370 370 385 370))
(connect D10:1 O1:1
(points 6 249 370 270 370 270 350 690 350 690 203 1109 203))
(connect D10:2 O2:1
(points 6 249 390 260 390 260 400 280 400 280 463 1109 463)))
(stackingOrder 0 4 3 5 6 7 10 2 1 12 13 9 8 11))))
(context 140
(properties
(name "IsProbablyABomb")
(trigMode deg)
(nextID 24)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "front row?")
(cases 1 "l<=69"))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "non-opponent region?")
(cases 1 "l<60"))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 3 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 5 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(input 5
(name "E")
(optional yes))
(output 1
(name "Data"))))
(device 6 CALL
(properties
(name "Call BorderDiagonals")
(callFunc "BorderDiagonals")
(parmMode rev30))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "diags")
(lock name constraints)
(optional yes))))
(device 8 IFTHENELSE
(properties
(name "any unknown bombs out there?")
(cases 1 "OpponentPieceTable[11].unknown_alive"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 10 FORMULA
(properties
(name "# diags")
(expr 1 "totsize(d)"))
(interface
(input 1
(name "d")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 12 IFTHENELSE
(properties
(name "open, bomb, unknown fixed, or other?")
(cases 3 "KnownBoard[diag]==0" "KnownBoard[diag]>=35 AND KnownBoard[diag]<=40"
"KnownBoard[diag]==-1"))
(interface
(input 1
(name "diag")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 13 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 14 EXITCONTEXT)
(device 15 IFTHENELSE
(properties
(name "was a bomb?")
(cases 1 "WasABomb(loc)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 16 FORMULA
(properties
(name "location")
(expr 1 "diags[i]"))
(interface
(input 1
(name "diags")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 19 FORMULA
(properties
(name "bomb probability")
(expr 1
"asReal64(OpponentPieceTable[11].unknown_alive)/asReal64(sum(OpponentPieceTable.unknown_alive))"
))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 21 IFTHENELSE
(properties
(name "greater than 70%?")
(cases 1 "bomb_probability>0.7"))
(interface
(input 1
(name "bomb_probability")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 22 IFTHENELSE
(properties
(name "front exposed?")
(cases 1 "l==60 OR l==61 OR l==64 OR l==65 OR l==68 OR l==69"))
(interface
(input 1
(name "l")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 23 CONTEXT
(properties
(name "PieceLookLikeABomb")
(trigMode deg)
(nextID 11)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Yes")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "No")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORRANGE
(properties
(name "For Range (1-3)")
(from 1)
(thru 3)
(step 1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "open or movable?")
(cases 1 "(s==-1 ? 1 : KnownBoard[s]>=0 OR KnownBoard[s]==-2)"))
(interface
(input 1
(name "s")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 EXITCONTEXT)
(device 7 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 8 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 9 IFTHENELSE
(properties
(name "piece unknown fixed?")
(cases 1 "KnownBoard[loc]==-1"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 10 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D1:1 D0:2)
(connect D6:1 D1:0)
(connect D0:1 D2:1)
(connect D4:0 D3:0)
(connect D7:1 D4:0)
(connect D1:0 D5:0)
(connect I1:1 D6:1)
(connect D2:2 D7:1)
(connect D6:2 D7:2)
(connect D5:1 O1:1)
(connect D4:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 833 415)
(anchorPt 2 72)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 270 150))
(devCarrierFor 2
(active icon)
(icon
(extent 113 52)
(iconImage "loop.icn"))
(open
(extent 149 82))
(pinCenter 120 160))
(devCarrierFor 3
(active icon)
(icon
(extent 125 25))
(open
(extent 386 53))
(terminals on)
(pinCenter 410 150))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 630 270))
(devCarrierFor 7
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 630 220))
(devCarrierFor 8
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 120 260))
(devCarrierFor 9
(active icon)
(icon
(extent 148 25))
(open
(extent 167 53))
(terminals on)
(pinCenter 120 20))
(devCarrierFor 10
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 570 170))
(connect I1:1 D0:1
(points 6 -2 135 20 135 20 110 200 110 200 140 218 140))
(connect D1:1 D0:2
(points 2 179 160 218 160))
(connect D6:1 D1:0
(points 7 196 10 220 10 220 50 190 50 190 60 120 60 120 131))
(connect D0:1 D2:1
(points 2 322 150 345 150))
(connect D4:0 D3:0
(points 2 630 230 630 259))
(connect D7:1 D4:0
(points 3 587 170 630 170 630 209))
(connect D1:0 D5:0
(points 2 120 188 120 249))
(connect I1:1 D6:1
(points 4 -2 135 20 135 20 20 43 20))
(connect D2:2 D7:1
(points 2 475 160 553 160))
(connect D6:2 D7:2
(points 4 196 30 500 30 500 180 553 180))
(connect D5:1 O1:1
(points 4 143 260 200 260 200 25 830 25))
(connect D4:1 O2:1
(points 4 653 220 710 220 710 245 830 245)))
(stackingOrder 1 0 2 3 4 5 6 7))))
(configuration
(connect D6:1 D0:0)
(connect I1:1 D0:1)
(connect I1:1 D1:1)
(connect D15:1 D2:0)
(connect D4:1 D3:0)
(connect D1:1 D4:1)
(connect D18:2 D4:2)
(connect D6:2 D4:3)
(connect D9:0 D4:4)
(connect D19:2 D4:5)
(connect D0:2 D5:0)
(connect I1:1 D5:1)
(connect D1:2 D6:0)
(connect D3:1 D7:1)
(connect D2:1 D7:2)
(connect D5:1 D8:1)
(connect D8:1 D9:1)
(connect D14:1 D10:1)
(connect D7:1 D11:1)
(connect D11:0 D12:0)
(connect D10:1 D13:0)
(connect D14:1 D13:1)
(connect D5:1 D14:1)
(connect D9:1 D14:2)
(connect D13:1 D15:1)
(connect D10:2 D15:2)
(connect D17:1 D15:3)
(connect D19:1 D15:4)
(connect D10:3 D16:0)
(connect D16:1 D17:1)
(connect D0:1 D18:0)
(connect I1:1 D18:1)
(connect D18:1 D19:0)
(connect I1:1 D19:1)
(connect D11:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1163 716)
(anchorPt 53 21)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 69 25))
(open
(extent 63 53))
(terminals on)
(pinCenter 130 230))
(devCarrierFor 1
(active icon)
(icon
(extent 155 25))
(open
(extent 121 53))
(terminals on)
(pinCenter 130 10))
(devCarrierFor 2
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 650 250))
(devCarrierFor 3
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 620 170))
(devCarrierFor 5
(active icon)
(icon
(extent 29 54))
(open
(extent 12 102))
(terminals on)
(pinCenter 560 170))
(devCarrierFor 6
(active icon)
(icon
(extent 147 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 140 290))
(devCarrierFor 8
(active icon)
(icon
(extent 217 25))
(open
(extent 287 53))
(terminals on)
(pinCenter 130 110))
(devCarrierFor 9
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 710 220))
(devCarrierFor 10
(active icon)
(icon
(extent 50 16))
(open
(extent 92 32))
(terminals on)
(pinCenter 270 290))
(devCarrierFor 11
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 190 350))
(devCarrierFor 12
(active icon)
(icon
(extent 261 45))
(open
(extent 362 82))
(terminals on)
(pinCenter 470 360))
(devCarrierFor 13
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 810 230))
(devCarrierFor 14
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 810 280))
(devCarrierFor 15
(active icon)
(icon
(extent 91 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 670 410))
(devCarrierFor 16
(active icon)
(icon
(extent 53 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 280 360))
(devCarrierFor 17
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 560 270))
(devCarrierFor 19
(active icon)
(icon
(extent 114 16))
(open
(extent 668 32))
(terminals on)
(pinCenter 810 390))
(devCarrierFor 21
(active icon)
(icon
(extent 129 25))
(open
(extent 268 53))
(terminals on)
(pinCenter 960 390))
(devCarrierFor 22
(active icon)
(icon
(extent 103 25))
(open
(extent 387 53))
(terminals on)
(pinCenter 260 230))
(devCarrierFor 23
(active icon)
(icon
(extent 150 25))
(terminals on)
(pinCenter 390 260))
(connect D6:1 D0:0
(points 5 241 100 270 100 270 150 130 150 130 215))
(connect I1:1 D0:1
(points 6 -53 336 -40 336 -40 290 50 290 50 230 93 230))
(connect I1:1 D1:1
(points 4 -53 336 -40 336 -40 10 50 10))
(connect D15:1 D2:0
(points 5 577 270 600 270 600 220 650 220 650 239))
(connect D4:1 D3:0
(points 5 577 170 590 170 590 150 620 150 620 159))
(connect D1:1 D4:1
(points 4 210 0 280 0 280 150 543 150))
(connect D18:2 D4:2
(points 4 314 240 320 240 320 160 543 160))
(connect D6:2 D4:3
(points 4 241 120 260 120 260 170 543 170))
(connect D9:0 D4:4
(points 5 190 378 190 410 40 410 40 180 543 180))
(connect D19:2 D4:5
(points 4 467 270 490 270 490 190 543 190))
(connect D0:2 D5:0
(points 5 167 240 180 240 180 260 140 260 140 279))
(connect I1:1 D5:1
(points 4 -53 336 -40 336 -40 290 64 290))
(connect D1:2 D6:0
(points 5 210 20 230 20 230 50 130 50 130 95))
(connect D3:1 D7:1
(points 4 634 170 650 170 650 210 693 210))
(connect D2:1 D7:2
(points 4 668 250 680 250 680 230 693 230))
(connect D5:1 D8:1
(points 2 216 290 242 290))
(connect D8:1 D9:1
(points 6 297 290 330 290 330 400 130 400 130 350 152 350))
(connect D14:1 D10:1
(points 2 309 360 337 360))
(connect D7:1 D11:1
(points 4 727 220 750 220 750 230 790 230))
(connect D11:0 D12:0
(points 2 810 240 810 269))
(connect D10:1 D13:0
(points 3 603 340 670 340 670 395))
(connect D14:1 D13:1
(points 4 309 360 320 360 320 410 622 410))
(connect D5:1 D14:1
(points 6 216 290 230 290 230 310 240 310 240 350 251 350))
(connect D9:1 D14:2
(points 4 227 350 240 350 240 370 251 370))
(connect D13:1 D15:1
(points 6 718 400 730 400 730 320 520 320 520 250 543 250))
(connect D10:2 D15:2
(points 6 603 350 620 350 620 310 530 310 530 260 543 260))
(connect D17:1 D15:3
(points 12 1027 380 1040 380 1040 360 740 360 740 300 610 300 610 230 520 230
520 240 510 240 510 270 543 270))
(connect D19:1 D15:4
(points 4 467 250 500 250 500 280 543 280))
(connect D10:3 D16:0
(points 5 603 360 620 360 620 370 810 370 810 379))
(connect D16:1 D17:1
(points 2 869 390 893 390))
(connect D0:1 D18:0
(points 5 167 220 190 220 190 200 260 200 260 215))
(connect I1:1 D18:1
(points 10 -53 336 -40 336 -40 290 50 290 50 230 70 230 70 200 180 200 180 230
206 230))
(connect D18:1 D19:0
(points 3 314 220 390 220 390 245))
(connect I1:1 D19:1
(points 12 -53 336 -40 336 -40 290 50 290 50 230 70 230 70 200 180 200 180 230
190 230 190 260 312 260))
(connect D11:1 O1:1
(points 4 830 230 890 230 890 336 1109 336)))
(stackingOrder 3 1 7 11 12 5 9 8 14 13 2 16 17 0 18 10 15 4 19 6))))
(context 129
(properties
(name "IsProtectorOrUnknownNearby")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "worriedAbout")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 1 IFTHENELSE
(properties
(name "Known opponent?")
(cases 1 "KnownBoard[loc]>0 AND KnownBoard[loc]<=34"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "opponent weight")
(expr 1 "WeightOfPiece[KnownBoard[loc]]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(configuration
(connect I2:1 D0:1)
(connect D0:1 D1:0)
(connect I2:1 D1:1)
(connect I1:1 D2:1)
(connect D3:1 D2:2)))
(contextCarrier
(active detail)
(detail
(extent 748 524)
(anchorPt 1 1)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 125 25))
(open
(extent 328 53))
(terminals on)
(pinCenter 120 70))
(devCarrierFor 2
(active icon)
(icon
(extent 114 16))
(open
(extent 242 32))
(terminals on)
(pinCenter 250 120))
(devCarrierFor 5
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 290 190))
(devCarrierFor 6
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 160 200))
(connect I2:1 D0:1
(points 4 -1 390 10 390 10 70 55 70))
(connect D0:1 D1:0
(points 3 185 60 250 60 250 109))
(connect I2:1 D1:1
(points 4 -1 390 10 390 10 120 190 120))
(connect I1:1 D2:1
(points 6 -1 130 20 130 20 150 220 150 220 180 238 180))
(connect D3:1 D2:2
(points 2 197 200 238 200)))
(stackingOrder 0 1 3 2))))
(context 163
(properties
(name "IsSquareCornered")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "my piece @ loc?")
(cases 1 "(border>-1 ? (KnownBoard[border]>1000) : 1)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[square, i]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 5 EXITCONTEXT)
(device 6 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(configuration
(connect D1:1 D0:1)
(connect I1:1 D1:1)
(connect D2:1 D1:2)
(connect D0:2 D3:1)
(connect D6:1 D3:2)
(connect D3:1 D4:1)
(connect D4:0 D5:0)
(connect D2:0 D6:0)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 861 256)
(anchorPt -23 -62)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 114 25))
(open
(extent 321 55))
(terminals on)
(pinCenter 440 150))
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 193 42))
(terminals on)
(pinCenter 300 150))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 160 160))
(devCarrierFor 3
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 580 170))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 640 170))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 640 220))
(devCarrierFor 6
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 160 240))
(connect D1:1 D0:1
(points 2 352 150 380 150))
(connect I1:1 D1:1
(points 6 23 189 30 189 30 110 220 110 220 140 248 140))
(connect D2:1 D1:2
(points 2 197 160 248 160))
(connect D0:2 D3:1
(points 2 499 160 563 160))
(connect D6:1 D3:2
(points 4 178 240 520 240 520 180 563 180))
(connect D3:1 D4:1
(points 2 597 170 620 170))
(connect D4:0 D5:0
(points 2 640 180 640 209))
(connect D2:0 D6:0
(points 2 160 188 160 229))
(connect D4:1 O1:1
(points 4 660 170 930 170 930 189 883 189)))
(stackingOrder 1 2 0 6 3 4 5))))
(context 147
(properties
(name "IsSurroundedByBombs")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "opp bomb?")
(cases 1 "(loc==-1 ? 1 : KnownBoard[loc]>=35 AND KnownBoard[loc]<=40)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 4 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 5 EXITCONTEXT)
(device 6 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(configuration
(connect I1:1 D0:1)
(connect D1:1 D0:2)
(connect D0:1 D2:1)
(connect D4:1 D3:1)
(connect D2:2 D4:1)
(connect D6:1 D4:2)
(connect D3:0 D5:0)
(connect D1:0 D6:0)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 575 290)
(anchorPt 2 1)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 200 110))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 80 120))
(devCarrierFor 2
(active icon)
(icon
(extent 78 25))
(open
(extent 453 53))
(terminals on)
(pinCenter 310 110))
(devCarrierFor 3
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 470 150))
(devCarrierFor 4
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 410 150))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 470 210))
(devCarrierFor 6
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 80 200))
(connect I1:1 D0:1
(points 6 -2 143 10 143 10 70 140 70 140 100 148 100))
(connect D1:1 D0:2
(points 2 117 120 148 120))
(connect D0:1 D2:1
(points 2 252 110 268 110))
(connect D4:1 D3:1
(points 2 427 150 450 150))
(connect D2:2 D4:1
(points 4 351 120 370 120 370 140 393 140))
(connect D6:1 D4:2
(points 4 98 200 140 200 140 160 393 160))
(connect D3:0 D5:0
(points 2 470 160 470 199))
(connect D1:0 D6:0
(points 2 80 148 80 189))
(connect D3:1 O1:1
(points 4 490 150 550 150 550 143 572 143)))
(stackingOrder 1 2 4 3 5 6 0))))
(context 151
(properties
(name "IsThereAClogAt")
(trigMode deg)
(nextID 3)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "spec\'d locations filled?")
(cases 1 "KnownBoard[loc]>1000 AND KnownBoard[loc+1]>1000"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "either rear filled?")
(cases 1 "KnownBoard[loc-10]>1000 OR KnownBoard[loc-9]>1000"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:0)
(connect I1:1 D1:1)
(connect D1:1 D2:1)
(connect D1:2 D2:2)
(connect D0:2 D2:3)
(connect D2:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 511 287)
(anchorPt -1 6)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 156 25))
(open
(extent 376 53))
(terminals on)
(pinCenter 120 120))
(devCarrierFor 1
(active icon)
(icon
(extent 117 25))
(open
(extent 394 53))
(terminals on)
(pinCenter 290 170))
(devCarrierFor 2
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 450 120))
(connect I1:1 D0:1
(points 4 1 137 10 137 10 120 39 120))
(connect D0:1 D1:0
(points 3 200 110 290 110 290 155))
(connect I1:1 D1:1
(points 4 1 137 20 137 20 170 229 170))
(connect D1:1 D2:1
(points 4 351 160 360 160 360 110 433 110))
(connect D1:2 D2:2
(points 4 351 180 370 180 370 120 433 120))
(connect D0:2 D2:3
(points 2 200 130 433 130))
(connect D2:1 O1:1
(points 4 467 120 490 120 490 137 511 137)))
(stackingOrder 0 1 2))))
(context 164
(properties
(name "IsThereAnAssaultInOurArea")
(trigMode deg)
(nextID 13)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "locations")
(lock constraints)
(optional yes)))
(deviceList
(device 6 CONTEXT
(properties
(name "Other Pieces Near")
(trigMode deg)
(nextID 15)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "locations")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CONSTANT
(properties
(name "Weave Delta Col"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 24)
(data  [ 0 1 1 1 0 -1 -1 -1 -1 0 1 2 2 2 2 2 1 0 -1 -2 -2 -2 -2 -2 ]))
(initValue Int32
(data  0))))
(device 1 CONSTANT
(properties
(name "Weave Delta Row"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(numDims 1)
(size 24)
(data  [ -1 -1 0 1 1 1 0 -1 -2 -2 -2 -2 -1 0 1 2 2 2 2 2 1 0 -1 -2 ]))
(initValue Int32
(data  0))))
(device 2 FORCOUNT
(properties
(count 24))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "dr, dc")
(expr 1 "dr = wr[i], wc[i]"))
(interface
(input 1
(name "wr")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "wc")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 3
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dr")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "location")
(expr 1
"col = (oppLoc MOD 10)+dc, row = (oppLoc DIV 10)+dr, ((row<0 OR row>9 OR col<0 OR col>9) ? -1 : oppLoc+dr*10+dc)"
))
(interface
(input 1
(name "oppLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "row")
(optional yes))
(output 2
(name "col")
(optional yes))
(output 3
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 IFTHENELSE
(properties
(name "opp piece at location?")
(cases 1
"(loc==-1 ? 0 : KnownBoard[loc]==-1 OR KnownBoard[loc]==-2 OR (KnownBoard[loc]>0 AND KnownBoard[loc]<=34))"
))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 10 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 11 IFTHENELSE
(properties
(name "any partners?")
(cases 1 "totsize(locs)>0"))
(interface
(input 1
(name "locs")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 VECTORCONCATENATOR
(interface
(input 1
(name "A"))
(input 2
(name "B")
(optional yes))
(output 1
(name "Array")
(tag "Array"))))
(device 13 FORMULA
(properties
(name "[location]")
(expr 1 "[location]"))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 CALL
(properties
(name "Call SortLocsByRank")
(callFunc "SortLocsByRank")
(parmMode rev30))
(interface
(input 1
(name "locs")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "sorted locs")
(lock name constraints)
(optional yes))))
(configuration
(connect D1:1 D3:1)
(connect D0:1 D3:2)
(connect D2:1 D3:3)
(connect I1:1 D4:1)
(connect D3:1 D4:2)
(connect D3:2 D4:3)
(connect D4:3 D5:1)
(connect D5:1 D6:0)
(connect D4:3 D6:1)
(connect D6:1 D7:1)
(connect D2:0 D7:2)
(connect D7:1 D8:1)
(connect D10:1 D9:1)
(connect D7:1 D9:2)
(connect D8:1 D10:0)
(connect I1:1 D10:1)
(connect D9:1 D11:1)
(connect D11:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1017 328)
(anchorPt 86 -15)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 116 16))
(open
(extent 202 593)
(showFormat int))
(font "Arial" 11)
(pinCenter 0 120))
(devCarrierFor 1
(active icon)
(icon
(extent 123 16))
(open
(extent 202 593)
(showFormat int))
(font "Arial" 11)
(pinCenter 20 80))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 120 180))
(devCarrierFor 3
(active icon)
(icon
(extent 40 34))
(open
(extent 123 62))
(terminals on)
(pinCenter 240 150))
(devCarrierFor 5
(active icon)
(icon
(extent 53 54))
(open
(extent 813 102))
(terminals on)
(pinCenter 320 140))
(devCarrierFor 6
(active icon)
(icon
(extent 152 25))
(open
(extent 759 53))
(terminals on)
(pinCenter 460 160))
(devCarrierFor 9
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 630 150))
(devCarrierFor 10
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 710 160))
(devCarrierFor 11
(active icon)
(icon
(extent 96 25))
(open
(extent 126 53))
(terminals on)
(pinCenter 810 160))
(devCarrierFor 12
(active icon)
(icon
(extent 94 25))
(open)
(terminals on)
(pinCenter 350 270))
(devCarrierFor 13
(active icon)
(icon
(extent 62 16))
(open
(extent 91 32))
(terminals on)
(pinCenter 240 260))
(devCarrierFor 14
(active icon)
(icon
(extent 146 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 510 270))
(connect D1:1 D3:1
(points 4 84 80 180 80 180 140 217 140))
(connect D0:1 D3:2
(points 4 60 120 170 120 170 150 217 150))
(connect D2:1 D3:3
(points 4 157 180 180 180 180 160 217 160))
(connect I1:1 D4:1
(points 6 -86 178 10 178 10 40 270 40 270 120 291 120))
(connect D3:1 D4:2
(points 2 262 140 291 140))
(connect D3:2 D4:3
(points 2 262 160 291 160))
(connect D4:3 D5:1
(points 2 349 160 381 160))
(connect D5:1 D6:0
(points 5 538 150 550 150 550 120 630 120 630 139))
(connect D4:3 D6:1
(points 6 349 160 370 160 370 130 560 130 560 150 610 150))
(connect D6:1 D7:1
(points 2 650 150 677 150))
(connect D2:0 D7:2
(points 5 120 208 120 230 660 230 660 170 677 170))
(connect D7:1 D8:1
(points 2 743 160 759 160))
(connect D10:1 D9:1
(points 2 273 260 300 260))
(connect D7:1 D9:2
(points 6 743 160 750 160 750 310 290 310 290 280 300 280))
(connect D8:1 D10:0
(points 5 860 150 880 150 880 240 240 240 240 249))
(connect I1:1 D10:1
(points 4 -86 178 20 178 20 260 206 260))
(connect D9:1 D11:1
(points 2 399 270 434 270))
(connect D11:1 O1:1
(points 4 585 270 890 270 890 178 930 178)))
(stackingOrder 3 4 6 7 5 10 9 11 8 0 1 2))))
(device 7 FORRANGE
(properties
(name "For (49-0)")
(from 39)
(thru 0)
(step -1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 8 IFTHENELSE
(properties
(name "opp piece at location?")
(cases 1
"KnownBoard[loc]==-1 OR KnownBoard[loc]==-2 OR (KnownBoard[loc]>0 AND KnownBoard[loc]<=34)"
))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 12 EXITCONTEXT)
(configuration
(connect D2:1 D0:0)
(connect D1:1 D0:1)
(connect D1:1 D2:1)
(connect D0:1 D3:1)
(connect D3:0 D4:0)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 788 301)
(anchorPt 1 -1)
(configuration
(devCarrierFor 6
(active icon)
(icon
(extent 127 25))
(terminals on)
(pinCenter 400 140))
(devCarrierFor 7
(active icon)
(icon
(extent 71 52)
(iconImage "loop.icn"))
(open
(extent 110 82))
(pinCenter 90 100))
(devCarrierFor 8
(active icon)
(icon
(extent 152 25))
(open
(extent 666 53))
(terminals on)
(pinCenter 240 100))
(devCarrierFor 11
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 550 140))
(devCarrierFor 12
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 550 200))
(connect D2:1 D0:0
(points 3 318 90 400 90 400 125))
(connect D1:1 D0:1
(points 4 128 100 150 100 150 140 334 140))
(connect D1:1 D2:1
(points 2 128 100 161 100))
(connect D0:1 D3:1
(points 2 466 140 530 140))
(connect D3:0 D4:0
(points 2 550 150 550 189))
(connect D3:1 O1:1
(points 4 570 140 590 140 590 151 786 151)))
(stackingOrder 1 2 4 3 0))))
(context 62
(properties
(name "IsThereANeighborhoodMenace")
(trigMode deg)
(nextID 9)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "MenacePiece")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "NoMenace")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(count 40))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "opponent piece?")
(cases 1 "KnownBoard[bi]>0 AND KnownBoard[bi]<=34"))
(interface
(input 1
(name "bi")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "# kills")
(expr 1 "KillCount[KnownBoard[i]-1]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 IFTHENELSE
(properties
(name "more than three?")
(cases 1 "numKills>3"))
(interface
(input 1
(name "numKills")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 6 FORMULA
(properties
(name "piece")
(expr 1 "KnownBoard[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 EXITCONTEXT)
(device 8 NOTE
(properties
(name "Comment")
(text2 6 "This function determines if there" "is an opponent piece on the prowl"
"in our territory.  We DO NOT condone" "this sort of activity in our backyard!"
"So if we detect one, then do something" "to get it OUT.  KILL IT !!!")))
(configuration
(connect D0:1 D1:1)
(connect D1:1 D2:0)
(connect D0:1 D2:1)
(connect D2:1 D3:1)
(connect D0:0 D4:0)
(connect D3:1 D5:0)
(connect D0:1 D5:1)
(connect D5:0 D6:0)
(connect D5:1 O1:1)
(connect D4:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 736 455)
(anchorPt 11 155)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 70 70))
(devCarrierFor 1
(active icon)
(icon
(extent 116 25))
(open
(extent 314 53))
(terminals on)
(pinCenter 190 70))
(devCarrierFor 3
(active icon)
(icon
(extent 62 16))
(open
(extent 202 32))
(terminals on)
(pinCenter 300 110))
(devCarrierFor 4
(active icon)
(icon
(extent 119 25))
(open
(extent 106 53))
(terminals on)
(pinCenter 420 110))
(devCarrierFor 5
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 70 220))
(devCarrierFor 6
(active icon)
(icon
(extent 38 16))
(open
(extent 125 32))
(terminals on)
(pinCenter 530 140))
(devCarrierFor 7
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 530 180))
(devCarrierFor 8
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 317 112)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 210 -60))
(connect D0:1 D1:1
(points 2 107 70 129 70))
(connect D1:1 D2:0
(points 3 250 60 300 60 300 99))
(connect D0:1 D2:1
(points 4 107 70 120 70 120 110 266 110))
(connect D2:1 D3:1
(points 2 333 110 358 110))
(connect D0:0 D4:0
(points 2 70 98 70 209))
(connect D3:1 D5:0
(points 3 482 100 530 100 530 129))
(connect D0:1 D5:1
(points 6 107 70 120 70 120 40 500 40 500 140 508 140))
(connect D5:0 D6:0
(points 2 530 150 530 169))
(connect D5:1 O1:1
(points 4 551 140 570 140 570 -48 724 -48))
(connect D4:1 O2:1
(points 4 93 220 110 220 110 192 724 192)))
(stackingOrder 0 2 1 3 5 6 4 7))))
(context 150
(properties
(name "IsWorthwhileSquare")
(trigMode deg)
(nextID 51)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "first nine rows?")
(cases 1 "square<90"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 2 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 3 EXITCONTEXT)
(device 4 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "# left squares")
(expr 1 "square MOD 10"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "# right squares")
(expr 1 "9-(square MOD 10)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 FORMULA
(properties
(name "left-most contents")
(expr 1 "KnownBoard[square-i-1]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 21 IFTHENELSE
(properties
(name "open, bomb, or other?")
(cases 2 "piece==0" "piece>=35 AND piece<=40"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 22 FORMULA
(properties
(name "right-most contents")
(expr 1 "KnownBoard[square+i+1]"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 23 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 24 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 27 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 29 IFTHENELSE
(properties
(name "open, bomb, or other?")
(cases 2 "piece==0" "piece>=35 AND piece<=40"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 30 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 31 FORMULA
(properties
(name "LeftMostLocIsABomb = \'val\'")
(expr 1 "LeftMostLocIsABomb = val"))
(interface
(input 1
(name "val")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 32 FORMULA
(properties
(name "RightMostLocIsABomb = \'val\'")
(expr 1 "RightMostLocIsABomb = val"))
(interface
(input 1
(name "val")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 35 DECLVAR
(properties
(name "Declare Local \' LeftMostLocIsABomb\'")
(scope con)
(globalName "leftMostLocIsABomb"))
(implementation
(value Int32
(data  0))))
(device 36 DECLVAR
(properties
(name "Declare Local \' RightMostLocIsABomb\'")
(scope con)
(globalName "RightMostLocIsABomb"))
(implementation
(value Int32
(data  0))))
(device 37 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 38 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 39 FORMULA
(properties
(name "okay bool")
(expr 1 "LeftMostLocIsABomb==0 OR RightMostLocIsABomb==0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 41 FORMULA
(properties
(name "LeftMostLocIsABomb = -1")
(expr 1 "LeftMostLocIsABomb = -1")))
(device 42 FORMULA
(properties
(name "RightMostLocIsABomb = -1")
(expr 1 "RightMostLocIsABomb = -1")))
(device 43 IFTHENELSE
(properties
(name "unset?")
(cases 1 "RightMostLocIsABomb==-1"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 44 IFTHENELSE
(properties
(name "unset?")
(cases 1 "LeftMostLocIsABomb==-1"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 45 BREAK)
(device 46 BREAK)
(device 49 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 50 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(configuration
(connect D23:0 D0:0)
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D22:1 D1:2)
(connect D1:1 D2:1)
(connect D2:0 D3:0)
(connect D5:1 D4:1)
(connect D6:0 D5:0)
(connect I1:1 D5:1)
(connect D0:2 D6:0)
(connect I1:1 D6:1)
(connect I1:1 D7:1)
(connect D4:1 D7:2)
(connect D14:2 D8:0)
(connect D10:1 D9:1)
(connect I1:1 D10:1)
(connect D11:1 D10:2)
(connect D6:1 D11:1)
(connect D9:2 D12:0)
(connect D9:3 D13:0)
(connect D7:1 D14:1)
(connect D14:3 D15:0)
(connect D21:1 D16:1)
(connect D20:1 D17:1)
(connect D13:1 D20:1)
(connect D12:1 D20:2)
(connect D29:1 D20:3)
(connect D15:1 D21:1)
(connect D8:1 D21:2)
(connect D30:1 D21:3)
(connect D5:0 D22:0)
(connect D24:0 D23:0)
(connect D11:0 D25:0)
(connect D4:0 D26:0)
(connect D17:0 D27:0)
(connect D16:0 D28:0)
(connect D25:1 D29:0)
(connect D26:1 D30:0)
(connect D2:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1148 617)
(anchorPt 18 107)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 104 25))
(open
(extent 104 61))
(terminals on)
(pinCenter 90 100))
(devCarrierFor 1
(active icon)
(icon
(extent 32 33))
(open
(extent 12 182))
(terminals on)
(pinCenter 880 390))
(devCarrierFor 2
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 940 390))
(devCarrierFor 3
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 940 440))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 300 300))
(devCarrierFor 5
(active icon)
(icon
(extent 94 16))
(open
(extent 143 36))
(terminals on)
(pinCenter 190 300))
(devCarrierFor 6
(active icon)
(icon
(extent 104 16))
(open
(extent 157 36))
(terminals on)
(pinCenter 200 140))
(devCarrierFor 7
(active icon)
(icon
(extent 123 25))
(open
(extent 262 44))
(terminals on)
(pinCenter 450 300))
(devCarrierFor 19
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 730 320))
(devCarrierFor 21
(active icon)
(icon
(extent 155 34))
(open
(extent 299 62))
(terminals on)
(pinCenter 630 150))
(devCarrierFor 22
(active icon)
(icon
(extent 133 25))
(open
(extent 262 44))
(terminals on)
(pinCenter 460 150))
(devCarrierFor 23
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 310 140))
(devCarrierFor 24
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 750 150))
(devCarrierFor 27
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 740 200))
(devCarrierFor 29
(active icon)
(icon
(extent 155 34))
(open
(extent 299 62))
(terminals on)
(pinCenter 620 300))
(devCarrierFor 30
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 740 350))
(devCarrierFor 31
(active icon)
(icon
(extent 189 16))
(open
(extent 200 32))
(terminals on)
(pinCenter 960 320))
(devCarrierFor 32
(active icon)
(icon
(extent 199 16))
(open
(extent 209 32))
(terminals on)
(pinCenter 950 160))
(devCarrierFor 35
(active icon)
(icon
(extent 256 16))
(open
(extent 292 109))
(pinCenter 150 -30))
(devCarrierFor 36
(active icon)
(icon
(extent 266 16))
(open
(extent 302 109))
(pinCenter 150 -60))
(devCarrierFor 37
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 810 160))
(devCarrierFor 38
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 820 320))
(devCarrierFor 39
(active icon)
(icon
(extent 67 16))
(open
(extent 384 32))
(terminals on)
(pinCenter 190 430))
(devCarrierFor 41
(active icon)
(icon
(extent 177 16))
(open
(extent 200 32))
(terminals on)
(pinCenter 90 50))
(devCarrierFor 42
(active icon)
(icon
(extent 187 16))
(open
(extent 209 32))
(terminals on)
(pinCenter 90 10))
(devCarrierFor 43
(active icon)
(icon
(extent 47 25))
(open
(extent 202 62))
(terminals on)
(pinCenter 310 200))
(devCarrierFor 44
(active icon)
(icon
(extent 47 25))
(open
(extent 202 62))
(terminals on)
(pinCenter 300 360))
(devCarrierFor 45
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 950 200))
(devCarrierFor 46
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 960 360))
(devCarrierFor 49
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 400 220))
(devCarrierFor 50
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 370 390))
(connect D23:0 D0:0
(points 2 90 60 90 85))
(connect I1:1 D0:1
(points 4 -18 201 -10 201 -10 100 35 100))
(connect D0:1 D1:1
(points 6 144 90 370 90 370 240 770 240 770 380 861 380))
(connect D22:1 D1:2
(points 4 226 430 410 430 410 400 861 400))
(connect D1:1 D2:1
(points 2 898 390 920 390))
(connect D2:0 D3:0
(points 2 940 400 940 429))
(connect D5:1 D4:1
(points 2 239 300 262 300))
(connect D6:0 D5:0
(points 4 200 150 200 170 190 170 190 289))
(connect I1:1 D5:1
(points 6 -18 201 0 201 0 240 110 240 110 300 140 300))
(connect D0:2 D6:0
(points 3 144 110 200 110 200 129))
(connect I1:1 D6:1
(points 4 -18 201 -10 201 -10 140 145 140))
(connect I1:1 D7:1
(points 6 -18 201 0 201 0 240 360 240 360 290 386 290))
(connect D4:1 D7:2
(points 4 337 300 360 300 360 310 386 310))
(connect D14:2 D8:0
(points 3 700 300 730 300 730 309))
(connect D10:1 D9:1
(points 2 529 150 550 150))
(connect I1:1 D10:1
(points 8 -18 201 0 201 0 240 360 240 360 190 380 190 380 140 391 140))
(connect D11:1 D10:2
(points 4 347 140 360 140 360 160 391 160))
(connect D6:1 D11:1
(points 2 254 140 272 140))
(connect D9:2 D12:0
(points 5 710 150 720 150 720 130 750 130 750 139))
(connect D9:3 D13:0
(points 5 710 160 730 160 730 170 740 170 740 189))
(connect D7:1 D14:1
(points 2 514 300 540 300))
(connect D14:3 D15:0
(points 5 700 310 710 310 710 290 740 290 740 339))
(connect D21:1 D16:1
(points 2 837 320 863 320))
(connect D20:1 D17:1
(points 2 827 160 848 160))
(connect D13:1 D20:1
(points 4 754 200 780 200 780 150 793 150))
(connect D12:1 D20:2
(points 4 768 150 780 150 780 160 793 160))
(connect D29:1 D20:3
(points 6 418 220 440 220 440 230 770 230 770 170 793 170))
(connect D15:1 D21:1
(points 4 754 350 760 350 760 310 803 310))
(connect D8:1 D21:2
(points 2 748 320 803 320))
(connect D30:1 D21:3
(points 4 388 390 790 390 790 330 803 330))
(connect D5:0 D22:0
(points 2 190 310 190 419))
(connect D24:0 D23:0
(points 2 90 20 90 39))
(connect D11:0 D25:0
(points 2 310 168 310 185))
(connect D4:0 D26:0
(points 2 300 328 300 345))
(connect D17:0 D27:0
(points 2 950 170 950 189))
(connect D16:0 D28:0
(points 2 960 330 960 349))
(connect D25:1 D29:0
(points 5 336 190 350 190 350 200 400 200 400 209))
(connect D26:1 D30:0
(points 3 326 350 370 350 370 379))
(connect D2:1 O1:1
(points 4 960 390 1080 390 1080 201 1129 201)))
(stackingOrder 5 4 7 14 19 18 1 2 3 6 11 24 23 0 25 26 21 16 10 9 20 17 27 28 13
12 29 30 15 8 22))))
(context 13
(properties
(name "LayoutPieces")
(trigMode deg)
(nextID 89)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "board")
(lock constraints)
(optional yes)))
(deviceList
(device 1 NOTE
(properties
(name "Comment")
(text2 18 "This function creates a 1D-array of 40 elements"
"that identifies the computer\'s initial piece "
"layout.  Each piece has a unique number from 1" "to 40 as follows:" ""
"1        = Flag" "2        = Spy" "3        = Marshal (Rank #1)"
"4        = General (Rank #2)" "5-6      = Colonel (Rank #3)"
"7-9      = Major (Rank #4)" "10-13    = Captain (Rank #5)"
"14-17    = Lieutenant (Rank #6)" "18-21    = Sergeant (Rank #7)"
"22-26    = Miner (Rank #8)" "27-34    = Scout (Rank #9)" "35-40    = Bomb" ""))
)
(device 7 DECLVAR
(properties
(name "Declare Variable \'b\'")
(scope lib)
(globalName "b"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 53 FORMULA
(properties
(name "b")
(expr 1 "b"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 54 FORMULA
(properties
(name "randomSeed(seed)")
(expr 1 "randomSeed(now()-62G)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 65 CALL
(properties
(name "Call PlaceFlagAndBombs")
(callFunc "PlaceFlagAndBombs")
(parmMode rev30))
(interface
(output 1
(name "Deceptive")
(lock name constraints)
(optional yes))))
(device 66 CALL
(properties
(name "Call PlaceSpyThruFours")
(callFunc "PlaceSpyThruFours")
(parmMode rev30))
(interface
(input 1
(name "Deceptive")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 68 TOGLOBAL
(properties
(name "Set \'b\'")
(globalName "b"))
(interface
(input 1
(name "Data")
(tag "Data"))))
(device 69 ALLOCATEARRAY
(properties
(name "Alloc Int Array 40 long \'0\'"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "40")
(type "Int32")
(initEnum "Init Value")
(initialValue
(data  0))
(from 1)
(thru 10)))
(device 71 CALL
(properties
(name "Call Place8And9s")
(callFunc "Place8And9s")
(parmMode rev30)))
(device 72 CALL
(properties
(name "Call Place5Thru7s")
(callFunc "Place5Thru7s")
(parmMode rev30)))
(device 73 DECLVAR
(properties
(name "Declare \'DeceptiveLayout\'")
(scope lib)
(globalName "DeceptiveLayout"))
(implementation
(value Int32
(data  0))))
(device 74 FORMULA
(properties
(name "DeceptiveLayout = FALSE")
(expr 1 "DeceptiveLayout = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 75 FORMULA
(properties
(name "DeceptiveLayout = TRUE")
(expr 1 "DeceptiveLayout = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 76 IFTHENELSE
(properties
(name "conservative or deceptive?")
(cases 1 " NOT DeceptiveLayout"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 77 CALL
(properties
(name "Call PlaceSpyThruFours")
(callFunc "PlaceSpyThruFours")
(parmMode rev30))
(interface
(input 1
(name "Deceptive")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 78 CALL
(properties
(name "Call Place5Thru7s")
(callFunc "Place5Thru7s")
(parmMode rev30)))
(device 79 FORMULA
(properties
(name "DeceptiveLayout bool")
(expr 1 "DeceptiveLayout"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 80 FORMULA
(properties
(name "DeceptiveLayout bool")
(expr 1 "DeceptiveLayout"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 81 REPEATUNTILBREAK
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 87 IFTHENELSE
(properties
(name "did we botch it up?")
(cases 1 "min(b)==0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 88 EXITCONTEXT)
(configuration
(connect D19:2 D2:0)
(connect D11:0 D3:0)
(connect D7:0 D4:0)
(connect D17:1 D5:1)
(connect D7:1 D6:1)
(connect D3:0 D7:0)
(connect D13:0 D8:0)
(connect D5:0 D9:0)
(connect D18:1 D11:0)
(connect D4:1 D12:0)
(connect D4:0 D13:0)
(connect D16:1 D14:1)
(connect D13:1 D15:0)
(connect D15:0 D16:0)
(connect D13:2 D17:0)
(connect D8:0 D19:0)
(connect D2:0 D20:0)
(connect D2:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 920 747)
(anchorPt -141 207)
(configuration
(devCarrierFor 1
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 371 292)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 850 -20))
(devCarrierFor 7
(active icon)
(icon
(extent 135 15))
(open
(extent 240 103))
(pinCenter 250 -140))
(devCarrierFor 53
(active icon)
(icon
(extent 24 16))
(open
(extent 80 31))
(terminals on)
(pinCenter 440 450))
(devCarrierFor 54
(active icon)
(icon
(extent 138 15))
(open
(extent 207 31))
(terminals on)
(pinCenter 350 20))
(devCarrierFor 65
(active icon)
(icon
(extent 174 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 350 110))
(devCarrierFor 66
(active icon)
(icon
(extent 169 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 760 300))
(devCarrierFor 68
(active icon)
(icon
(extent 43 15))
(open
(extent 90 51))
(terminals on)
(pinCenter 500 60))
(devCarrierFor 69
(active icon)
(icon
(extent 199 14))
(open
(extent 208 117))
(terminals on)
(pinCenter 350 60))
(devCarrierFor 71
(active icon)
(icon
(extent 122 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 350 360))
(devCarrierFor 72
(active icon)
(icon
(extent 127 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 760 350))
(devCarrierFor 73
(active icon)
(icon
(extent 181 16))
(open
(extent 259 107))
(pinCenter 270 -180))
(devCarrierFor 74
(active icon)
(icon
(extent 182 16))
(open
(extent 164 32))
(terminals on)
(pinCenter 350 -20))
(devCarrierFor 75
(active icon)
(icon
(extent 174 16))
(open
(extent 164 32))
(terminals on)
(pinCenter 540 140))
(devCarrierFor 76
(active icon)
(icon
(extent 189 25))
(open
(extent 175 53))
(terminals on)
(pinCenter 350 180))
(devCarrierFor 77
(active icon)
(icon
(extent 169 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 760 250))
(devCarrierFor 78
(active icon)
(icon
(extent 127 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 580 200))
(devCarrierFor 79
(active icon)
(icon
(extent 150 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 580 250))
(devCarrierFor 80
(active icon)
(icon
(extent 150 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 580 300))
(devCarrierFor 81
(active icon)
(icon
(extent 74 52)
(iconImage "loop.icn"))
(open)
(terminals on)
(pinCenter 240 -90))
(devCarrierFor 87
(active icon)
(icon
(extent 129 25))
(open
(extent 96 53))
(terminals on)
(pinCenter 350 400))
(devCarrierFor 88
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 440 490))
(connect D19:2 D2:0
(points 3 417 410 440 410 440 439))
(connect D11:0 D3:0
(points 2 350 -10 350 10))
(connect D7:0 D4:0
(points 2 350 69 350 99))
(connect D17:1 D5:1
(points 2 657 300 673 300))
(connect D7:1 D6:1
(points 2 452 60 476 60))
(connect D3:0 D7:0
(points 2 350 30 350 50))
(connect D13:0 D8:0
(points 2 350 195 350 349))
(connect D5:0 D9:0
(points 2 760 310 760 339))
(connect D18:1 D11:0
(points 3 279 -90 350 -90 350 -31))
(connect D4:1 D12:0
(points 3 439 110 540 110 540 129))
(connect D4:0 D13:0
(points 2 350 120 350 165))
(connect D16:1 D14:1
(points 2 657 250 673 250))
(connect D13:1 D15:0
(points 3 447 170 580 170 580 189))
(connect D15:0 D16:0
(points 2 580 210 580 239))
(connect D13:2 D17:0
(points 5 447 190 470 190 470 280 580 280 580 289))
(connect D8:0 D19:0
(points 2 350 370 350 385))
(connect D2:0 D20:0
(points 2 440 460 440 479))
(connect D2:1 O1:1
(points 4 454 450 870 450 870 166 1060 166)))
(stackingOrder 7 3 6 11 12 15 16 14 17 13 9 8 5 1 18 19 2 20 10 0 4))))
(context 9
(properties
(name "LegalMoves")
(trigMode deg)
(nextID 18)
(popupTitleText "UserFunction2")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "attackingMoves")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "otherMoves")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CALL
(properties
(name "Call GetMovablePieceBoardLocations")
(callFunc "GetMovablePieceBoardLocations")
(parmMode rev30))
(interface
(output 1
(name "Pieces")
(lock name constraints)
(optional yes))))
(device 1 TORECORD
(properties
(name "Build (from, to) Record")
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 2 NOTE
(properties
(name "Comment")
(text2 9 "This function returns two lists of legal moves (in"
"record format (from, to):"
"\'attackingMoves\' are those that attack an opponent\'s "
"                 piece (or retreat from an opponent\'s"
"                 piece)" "\'otherMoves\' are any other moves" ""
"It is possible that one or both of these lists"
"have no elements (no moves of this type).")))
(device 3 IFTHENELSE
(properties
(name "attack?")
(cases 1 "bool"))
(interface
(input 1
(name "bool")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "attacking bool")
(expr 1
"p = locs[i], m = BorderSquares[p, j], (m!=-1 ? (KnownBoard[m]!=0 AND KnownBoard[m]<1000) : 0)"
))
(interface
(input 1
(name "locs")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "j")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "m")
(optional yes))
(output 3
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 6 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "# movable pieces")
(expr 1 "totSize(locs)"))
(interface
(input 1
(name "locs")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data")
(requires
(datatype Record)
(shape "Scalar")))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 9 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data")
(requires
(datatype Record)
(shape "Scalar")))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 10 TORECORD
(properties
(name "Build (from, to) Record")
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 11 IFTHENELSE
(properties
(name "open?")
(cases 1 "bool"))
(interface
(input 1
(name "bool")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 FORMULA
(properties
(name "open bool")
(expr 1 "p = locs[i], m = BorderSquares[p, j], (m!=-1 ? (KnownBoard[m]==0) : 0)"
))
(interface
(input 1
(name "locs")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "j")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "m")
(optional yes))
(output 3
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 CALL
(properties
(name "Call ComputerWeightedAttackMoves")
(callFunc "ComputerWeightedAttackMoves")
(parmMode rev30))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(name "weightedMoves")
(lock name constraints)
(optional yes))))
(configuration
(connect D3:1 D1:0)
(connect D4:1 D1:1)
(connect D4:2 D1:2)
(connect D4:3 D3:1)
(connect D0:1 D4:1)
(connect D6:1 D4:2)
(connect D5:1 D4:3)
(connect D6:1 D5:0)
(connect D7:1 D6:1)
(connect D0:1 D7:1)
(connect D1:1 D8:1)
(connect D6:0 D8:2)
(connect D10:1 D9:1)
(connect D6:0 D9:2)
(connect D11:1 D10:0)
(connect D12:1 D10:1)
(connect D12:2 D10:2)
(connect D12:3 D11:1)
(connect D0:1 D12:1)
(connect D6:1 D12:2)
(connect D5:1 D12:3)
(connect D8:1 D13:1)
(connect D13:1 O1:1)
(connect D9:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 1133 597)
(anchorPt -5 36)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 261 16))
(open
(extent 263 55))
(terminals on)
(pinCenter 160 50))
(devCarrierFor 1
(active icon)
(icon
(extent 157 52)
(iconImage "build.icn"))
(open
(extent 102 68))
(terminals on)
(pinCenter 660 240))
(devCarrierFor 2
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 409 152)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 600 80))
(devCarrierFor 3
(active icon)
(icon
(extent 50 25))
(open
(extent 55 53))
(terminals on)
(pinCenter 510 230))
(devCarrierFor 4
(active icon)
(icon
(extent 96 34))
(open
(extent 739 62))
(terminals on)
(pinCenter 410 220))
(devCarrierFor 5
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 290 240))
(devCarrierFor 6
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 240 140))
(devCarrierFor 7
(active icon)
(icon
(extent 121 16))
(open
(extent 111 32))
(terminals on)
(pinCenter 110 140))
(devCarrierFor 8
(active icon)
(icon
(extent 61 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 800 250))
(devCarrierFor 9
(active icon)
(icon
(extent 61 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 780 420))
(devCarrierFor 10
(active icon)
(icon
(extent 157 52)
(iconImage "build.icn"))
(open
(extent 102 68))
(terminals on)
(pinCenter 620 420))
(devCarrierFor 11
(active icon)
(icon
(extent 44 25))
(open
(extent 55 53))
(terminals on)
(pinCenter 480 410))
(devCarrierFor 12
(active icon)
(icon
(extent 69 34))
(open
(extent 739 62))
(terminals on)
(pinCenter 390 390))
(devCarrierFor 13
(active icon)
(icon
(extent 218 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 970 250))
(connect D3:1 D1:0
(points 5 537 220 550 220 550 190 660 190 660 211))
(connect D4:1 D1:1
(points 6 460 210 480 210 480 180 570 180 570 230 579 230))
(connect D4:2 D1:2
(points 6 460 220 470 220 470 200 560 200 560 250 579 250))
(connect D4:3 D3:1
(points 2 460 230 482 230))
(connect D0:1 D4:1
(points 6 293 50 310 50 310 80 350 80 350 210 359 210))
(connect D6:1 D4:2
(points 4 277 140 340 140 340 220 359 220))
(connect D5:1 D4:3
(points 4 327 240 340 240 340 230 359 230))
(connect D6:1 D5:0
(points 5 277 140 300 140 300 190 290 190 290 211))
(connect D7:1 D6:1
(points 2 173 140 202 140))
(connect D0:1 D7:1
(points 8 293 50 310 50 310 80 180 80 180 110 30 110 30 140 47 140))
(connect D1:1 D8:1
(points 2 741 240 767 240))
(connect D6:0 D8:2
(points 7 240 168 240 190 230 190 230 290 760 290 760 260 767 260))
(connect D10:1 D9:1
(points 4 701 420 730 420 730 410 747 410))
(connect D6:0 D9:2
(points 7 240 168 240 190 230 190 230 290 720 290 720 430 747 430))
(connect D11:1 D10:0
(points 5 504 400 520 400 520 370 620 370 620 391))
(connect D12:1 D10:1
(points 4 427 380 510 380 510 410 539 410))
(connect D12:2 D10:2
(points 6 427 390 440 390 440 450 520 450 520 430 539 430))
(connect D12:3 D11:1
(points 4 427 400 450 400 450 410 455 410))
(connect D0:1 D12:1
(points 6 293 50 310 50 310 80 180 80 180 380 353 380))
(connect D6:1 D12:2
(points 8 277 140 340 140 340 220 350 220 350 300 330 300 330 390 353 390))
(connect D5:1 D12:3
(points 6 327 240 340 240 340 280 320 280 320 400 353 400))
(connect D8:1 D13:1
(points 2 833 250 858 250))
(connect D13:1 O1:1
(points 4 1081 250 1100 250 1100 112 1137 112))
(connect D9:1 O2:1
(points 4 813 420 830 420 830 412 1137 412)))
(stackingOrder 6 10 11 12 9 2 7 3 1 8 4 5 0 13))))
(context 40
(properties
(name "LocateNearestLevelOne")
(trigMode deg)
(nextID 40)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "SourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "move")
(lock constraints)
(optional yes)))
(deviceList
(device 33 CONTEXT
(properties
(name "Can Move Front Piece")
(trigMode deg)
(nextID 14)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Move")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "front piece index")
(expr 1 "BorderSquares[sourceLoc, 1]"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 IFTHENELSE
(properties
(name "is front piece movable?")
(cases 1 "(loc==-1 ? 0 : (IsPieceMovable(loc) AND  NOT IsPieceBuried(loc)))"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "left index")
(expr 1
"l = BorderSquares[sourceLoc, 2], (l==-1 ? -1 : (knownboard[l]==0 ? l : -1))"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "l")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "right index")
(expr 1
"l = BorderSquares[sourceLoc, 3], (l==-1 ? -1 : (knownboard[l]==0 ? l : -1))"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "l")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORMULA
(properties
(name "forward index")
(expr 1
"l = BorderSquares[sourceLoc, 1], (l==-1 ? -1 : (knownboard[l]==0 ? l : -1))"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "l")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 IFTHENELSE
(properties
(name "can go left/right, left only, right only, or neither?")
(cases 3 "left!=-1 AND right!=-1" "left!=-1 AND right==-1"
"right!=-1 AND left==-1"))
(interface
(input 1
(name "left")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "right")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 6 FORMULA
(properties
(name "pick randomly")
(expr 1 "(random(0, 1)>0.5 ? left : right)"))
(interface
(input 1
(name "left")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "right")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 8 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 9 TORECORD
(properties
(name "Build Rec (from, to)")
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 10 IFTHENELSE
(properties
(name "can go forward?")
(cases 1 "forward!=-1"))
(interface
(input 1
(name "forward")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 TORECORD
(properties
(name "Build Rec (from, to)")
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 12 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 13 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D1:1 D2:0)
(connect D0:1 D2:1)
(connect D2:0 D3:0)
(connect D0:1 D3:1)
(connect D5:4 D4:0)
(connect D0:1 D4:1)
(connect D2:2 D5:1)
(connect D3:2 D5:2)
(connect D5:1 D6:0)
(connect D2:2 D6:1)
(connect D3:2 D6:2)
(connect D5:2 D7:0)
(connect D2:2 D7:1)
(connect D5:3 D8:0)
(connect D3:2 D8:1)
(connect D0:1 D9:1)
(connect D13:1 D9:2)
(connect D4:2 D10:1)
(connect D10:1 D11:0)
(connect D0:1 D11:1)
(connect D4:2 D11:2)
(connect D9:1 D12:1)
(connect D11:1 D12:2)
(connect D6:1 D13:1)
(connect D7:1 D13:2)
(connect D8:1 D13:3)
(connect D12:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1039 466)
(anchorPt -123 27)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 114 25))
(open
(extent 243 50))
(terminals on)
(pinCenter 120 80))
(devCarrierFor 1
(active icon)
(icon
(extent 160 25))
(open
(extent 520 55))
(terminals on)
(pinCenter 280 80))
(devCarrierFor 2
(active icon)
(icon
(extent 61 25))
(open
(extent 549 50))
(terminals on)
(pinCenter 440 100))
(devCarrierFor 3
(active icon)
(icon
(extent 71 25))
(open
(extent 545 50))
(terminals on)
(pinCenter 430 160))
(devCarrierFor 4
(active icon)
(icon
(extent 92 25))
(open
(extent 545 50))
(terminals on)
(pinCenter 430 220))
(devCarrierFor 5
(active icon)
(icon
(extent 245 45))
(open
(extent 259 81))
(terminals on)
(titleFont "Arial" 11)
(pinCenter 620 140))
(devCarrierFor 6
(active icon)
(icon
(extent 95 25))
(open
(extent 219 42))
(terminals on)
(pinCenter 860 150))
(devCarrierFor 7
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 860 200))
(devCarrierFor 8
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 860 240))
(devCarrierFor 9
(active icon)
(icon
(extent 134 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 730 310))
(devCarrierFor 10
(active icon)
(icon
(extent 112 25))
(open
(extent 106 53))
(terminals on)
(pinCenter 560 230))
(devCarrierFor 11
(active icon)
(icon
(extent 134 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 730 380))
(devCarrierFor 12
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 860 320))
(devCarrierFor 13
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 950 190))
(connect I1:1 D0:1
(points 4 123 205 10 205 10 80 60 80))
(connect D0:1 D1:1
(points 2 179 80 197 80))
(connect D1:1 D2:0
(points 3 362 70 440 70 440 85))
(connect D0:1 D2:1
(points 6 179 80 190 80 190 120 380 120 380 100 407 100))
(connect D2:0 D3:0
(points 4 440 115 440 130 430 130 430 145))
(connect D0:1 D3:1
(points 6 179 80 190 80 190 120 360 120 360 160 392 160))
(connect D5:4 D4:0
(points 9 745 150 760 150 760 160 750 160 750 180 740 180 740 200 430 200 430
205))
(connect D0:1 D4:1
(points 6 179 80 190 80 190 120 360 120 360 220 381 220))
(connect D2:2 D5:1
(points 4 473 110 480 110 480 130 495 130))
(connect D3:2 D5:2
(points 4 468 170 480 170 480 150 495 150))
(connect D5:1 D6:0
(points 3 745 120 860 120 860 135))
(connect D2:2 D6:1
(points 6 473 110 480 110 480 100 780 100 780 140 810 140))
(connect D3:2 D6:2
(points 6 468 170 490 170 490 190 780 190 780 160 810 160))
(connect D5:2 D7:0
(points 7 745 130 770 130 770 170 810 170 810 180 860 180 860 189))
(connect D2:2 D7:1
(points 8 473 110 480 110 480 100 780 100 780 140 790 140 790 200 840 200))
(connect D5:3 D8:0
(points 5 745 140 760 140 760 220 860 220 860 229))
(connect D3:2 D8:1
(points 6 468 170 490 170 490 190 750 190 750 240 840 240))
(connect D0:1 D9:1
(points 6 179 80 190 80 190 370 630 370 630 300 660 300))
(connect D13:1 D9:2
(points 8 967 190 990 190 990 270 820 270 820 260 640 260 640 320 660 320))
(connect D4:2 D10:1
(points 2 478 230 501 230))
(connect D10:1 D11:0
(points 5 618 220 720 220 720 290 730 290 730 351))
(connect D0:1 D11:1
(points 4 179 80 190 80 190 370 660 370))
(connect D4:2 D11:2
(points 6 478 230 490 230 490 340 650 340 650 390 660 390))
(connect D9:1 D12:1
(points 2 799 310 843 310))
(connect D11:1 D12:2
(points 4 799 380 820 380 820 330 843 330))
(connect D6:1 D13:1
(points 4 910 150 920 150 920 180 933 180))
(connect D7:1 D13:2
(points 4 880 200 900 200 900 190 933 190))
(connect D8:1 D13:3
(points 6 880 240 900 240 900 210 910 210 910 200 933 200))
(connect D12:1 O1:1
(points 4 877 320 1010 320 1010 205 1161 205)))
(stackingOrder 6 7 8 10 11 12 13 0 1 5 4 3 2 9))))
(device 34 CONTEXT
(properties
(name "Can Move Left Piece")
(trigMode deg)
(nextID 27)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Move")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "left piece index")
(expr 1 "BorderSquares[sourceLoc, 2]"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 IFTHENELSE
(properties
(name "is left piece movable?")
(cases 1 "(loc==-1 ? 0 : (IsPieceMovable(loc) AND  NOT IsPieceBuried(loc)))"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 TORECORD
(properties
(name "Build Rec (from, to)")
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 15 IFTHENELSE
(properties
(name "backward, left, forward or nada?")
(cases 3 "backward!=-1" "left!=-1" "forward!=-1"))
(interface
(input 1
(name "backward")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "left")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "forward")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 16 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 17 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 18 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 19 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 23 FORMULA
(properties
(name "backward index")
(expr 1
"l = BorderSquares[sourceLoc, 0], (l==-1 ? -1 : (knownboard[l]==0 ? l : -1))"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "l")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 25 FORMULA
(properties
(name "forward index")
(expr 1
"l = BorderSquares[sourceLoc, 1], (l==-1 ? -1 : (knownboard[l]==0 ? l : -1))"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "l")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 26 FORMULA
(properties
(name "left index")
(expr 1
"l = BorderSquares[sourceLoc, 2], (l==-1 ? -1 : (knownboard[l]==0 ? l : -1))"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "l")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D0:1 D2:1)
(connect D5:1 D2:2)
(connect D8:2 D3:1)
(connect D10:2 D3:2)
(connect D9:2 D3:3)
(connect D3:1 D4:0)
(connect D8:2 D4:1)
(connect D4:1 D5:1)
(connect D6:1 D5:2)
(connect D7:1 D5:3)
(connect D3:2 D6:0)
(connect D10:2 D6:1)
(connect D3:3 D7:0)
(connect D9:2 D7:1)
(connect D1:1 D8:0)
(connect D0:1 D8:1)
(connect D10:0 D9:0)
(connect D0:1 D9:1)
(connect D8:0 D10:0)
(connect D0:1 D10:1)
(connect D2:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1039 466)
(anchorPt -77 78)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 103 25))
(open
(extent 243 50))
(terminals on)
(pinCenter 110 80))
(devCarrierFor 1
(active icon)
(icon
(extent 149 25))
(open
(extent 540 59))
(terminals on)
(pinCenter 280 80))
(devCarrierFor 9
(active icon)
(icon
(extent 134 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 730 310))
(devCarrierFor 15
(active icon)
(icon
(extent 223 45))
(open
(extent 149 82))
(terminals on)
(pinCenter 630 160))
(devCarrierFor 16
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 800 150))
(devCarrierFor 17
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 880 160))
(devCarrierFor 18
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 800 190))
(devCarrierFor 19
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 800 230))
(devCarrierFor 23
(active icon)
(icon
(extent 121 25))
(open
(extent 549 50))
(terminals on)
(pinCenter 450 110))
(devCarrierFor 25
(active icon)
(icon
(extent 92 25))
(open
(extent 545 50))
(terminals on)
(pinCenter 430 230))
(devCarrierFor 26
(active icon)
(icon
(extent 73 25))
(open
(extent 545 50))
(terminals on)
(pinCenter 430 160))
(connect I1:1 D0:1
(points 4 77 154 10 154 10 80 56 80))
(connect D0:1 D1:1
(points 2 164 80 203 80))
(connect D0:1 D2:1
(points 6 164 80 180 80 180 370 630 370 630 300 660 300))
(connect D5:1 D2:2
(points 6 897 160 920 160 920 260 640 260 640 320 660 320))
(connect D8:2 D3:1
(points 6 513 120 520 120 520 130 510 130 510 150 516 150))
(connect D10:2 D3:2
(points 4 469 170 490 170 490 160 516 160))
(connect D9:2 D3:3
(points 4 478 240 500 240 500 170 516 170))
(connect D3:1 D4:0
(points 5 744 140 750 140 750 120 800 120 800 139))
(connect D8:2 D4:1
(points 6 513 120 530 120 530 110 760 110 760 150 780 150))
(connect D4:1 D5:1
(points 2 820 150 863 150))
(connect D6:1 D5:2
(points 4 820 190 840 190 840 160 863 160))
(connect D7:1 D5:3
(points 4 820 230 850 230 850 170 863 170))
(connect D3:2 D6:0
(points 7 744 150 750 150 750 160 760 160 760 170 800 170 800 179))
(connect D10:2 D6:1
(points 6 469 170 490 170 490 210 760 210 760 190 780 190))
(connect D3:3 D7:0
(points 7 744 160 750 160 750 180 770 180 770 210 800 210 800 219))
(connect D9:2 D7:1
(points 4 478 240 500 240 500 230 780 230))
(connect D1:1 D8:0
(points 3 357 70 450 70 450 95))
(connect D0:1 D8:1
(points 6 164 80 180 80 180 120 370 120 370 110 387 110))
(connect D10:0 D9:0
(points 2 430 175 430 215))
(connect D0:1 D9:1
(points 8 164 80 180 80 180 120 340 120 340 160 350 160 350 230 381 230))
(connect D8:0 D10:0
(points 4 450 125 450 140 430 140 430 145))
(connect D0:1 D10:1
(points 6 164 80 180 80 180 120 340 120 340 160 391 160))
(connect D2:1 O1:1
(points 4 799 310 930 310 930 154 1115 154)))
(stackingOrder 0 3 4 5 6 7 1 9 10 2 8))))
(device 35 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 36 EXITCONTEXT)
(device 37 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 38 CONTEXT
(properties
(name "Can Move Right Piece")
(trigMode deg)
(nextID 26)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Move")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "right piece index")
(expr 1 "BorderSquares[sourceLoc, 3]"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 IFTHENELSE
(properties
(name "is right piece movable?")
(cases 1 "(loc==-1 ? 0 : (IsPieceMovable(loc) AND  NOT IsPieceBuried(loc)))"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 9 TORECORD
(properties
(name "Build Rec (from, to)")
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 15 IFTHENELSE
(properties
(name "backward, right, forward or nada?")
(cases 3 "backward!=-1" "right!=-1" "forward!=-1"))
(interface
(input 1
(name "backward")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "right")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "forward")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else")
(lock name constraints))))
(device 16 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 17 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 18 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 19 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 23 FORMULA
(properties
(name "backward index")
(expr 1
"l = BorderSquares[sourceLoc, 0], (l==-1 ? -1 : (knownboard[l]==0 ? l : -1))"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "l")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 24 FORMULA
(properties
(name "forward index")
(expr 1
"l = BorderSquares[sourceLoc, 1], (l==-1 ? -1 : (knownboard[l]==0 ? l : -1))"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "l")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 25 FORMULA
(properties
(name "right index")
(expr 1
"l = BorderSquares[sourceLoc, 3], (l==-1 ? -1 : (knownboard[l]==0 ? l : -1))"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "l")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D0:1 D2:1)
(connect D5:1 D2:2)
(connect D8:2 D3:1)
(connect D10:2 D3:2)
(connect D9:2 D3:3)
(connect D3:1 D4:0)
(connect D8:2 D4:1)
(connect D4:1 D5:1)
(connect D6:1 D5:2)
(connect D7:1 D5:3)
(connect D3:2 D6:0)
(connect D10:2 D6:1)
(connect D3:3 D7:0)
(connect D9:2 D7:1)
(connect D1:1 D8:0)
(connect D0:1 D8:1)
(connect D10:0 D9:0)
(connect D0:1 D9:1)
(connect D8:0 D10:0)
(connect D0:1 D10:1)
(connect D2:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1039 466)
(anchorPt -99 66)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 113 25))
(open
(extent 243 50))
(terminals on)
(pinCenter 110 80))
(devCarrierFor 1
(active icon)
(icon
(extent 159 25))
(open
(extent 540 59))
(terminals on)
(pinCenter 280 80))
(devCarrierFor 9
(active icon)
(icon
(extent 134 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 730 310))
(devCarrierFor 15
(active icon)
(icon
(extent 233 45))
(open
(extent 149 82))
(terminals on)
(pinCenter 640 160))
(devCarrierFor 16
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 800 150))
(devCarrierFor 17
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 880 160))
(devCarrierFor 18
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 800 190))
(devCarrierFor 19
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 800 230))
(devCarrierFor 23
(active icon)
(icon
(extent 121 25))
(open
(extent 549 50))
(terminals on)
(pinCenter 430 110))
(devCarrierFor 24
(active icon)
(icon
(extent 92 25))
(open
(extent 545 50))
(terminals on)
(pinCenter 430 220))
(devCarrierFor 25
(active icon)
(icon
(extent 83 25))
(open
(extent 545 50))
(terminals on)
(pinCenter 420 160))
(connect I1:1 D0:1
(points 4 99 166 20 166 20 80 51 80))
(connect D0:1 D1:1
(points 2 169 80 198 80))
(connect D0:1 D2:1
(points 4 169 80 180 80 180 300 660 300))
(connect D5:1 D2:2
(points 6 897 160 920 160 920 260 640 260 640 320 660 320))
(connect D8:2 D3:1
(points 4 493 120 500 120 500 150 521 150))
(connect D10:2 D3:2
(points 4 464 170 480 170 480 160 521 160))
(connect D9:2 D3:3
(points 4 478 230 500 230 500 170 521 170))
(connect D3:1 D4:0
(points 5 759 140 780 140 780 130 800 130 800 139))
(connect D8:2 D4:1
(points 6 493 120 760 120 760 130 770 130 770 150 780 150))
(connect D4:1 D5:1
(points 2 820 150 863 150))
(connect D6:1 D5:2
(points 4 820 190 840 190 840 160 863 160))
(connect D7:1 D5:3
(points 4 820 230 850 230 850 170 863 170))
(connect D3:2 D6:0
(points 7 759 150 770 150 770 120 830 120 830 170 800 170 800 179))
(connect D10:2 D6:1
(points 8 464 170 490 170 490 190 510 190 510 210 760 210 760 190 780 190))
(connect D3:3 D7:0
(points 5 759 160 770 160 770 210 800 210 800 219))
(connect D9:2 D7:1
(points 2 478 230 780 230))
(connect D1:1 D8:0
(points 3 362 70 430 70 430 95))
(connect D0:1 D8:1
(points 6 169 80 180 80 180 120 350 120 350 110 367 110))
(connect D10:0 D9:0
(points 4 420 175 420 190 430 190 430 205))
(connect D0:1 D9:1
(points 6 169 80 180 80 180 120 350 120 350 220 381 220))
(connect D8:0 D10:0
(points 4 430 125 430 140 420 140 420 145))
(connect D0:1 D10:1
(points 6 169 80 180 80 180 120 350 120 350 160 376 160))
(connect D2:1 O1:1
(points 4 799 310 930 310 930 166 1137 166)))
(stackingOrder 2 4 5 6 7 3 0 1 9 10 8))))
(device 39 NOTE
(properties
(name "Comment")
(text2 18 "This function computes a " "\"level one\" move that allows"
"a trapped piece at board location" "\'SourceLoc\' to get out eventually."
"The algorithm is as follows:" "" "If the piece directly in front"
"of \'SourceLoc\' can be moved" "left, right, or forward choose" "that move." ""
"If the left or right-most piece" "of \'SourceLoc\' can be moved"
"backward, left, or right then" "choose that move." ""
"Currently, we do NOT check the" "rear-piece (it is a bit tricky).")))
(configuration
(connect I1:1 D0:1)
(connect D0:0 D1:0)
(connect I1:1 D1:1)
(connect D4:1 D2:1)
(connect D2:0 D3:0)
(connect D0:1 D4:1)
(connect D1:1 D4:2)
(connect D5:1 D4:3)
(connect D1:0 D5:0)
(connect I1:1 D5:1)
(connect D2:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 815 383)
(anchorPt 8 -175)
(configuration
(devCarrierFor 33
(active icon)
(icon
(extent 155 16))
(terminals on)
(pinCenter 170 280))
(devCarrierFor 34
(active icon)
(icon
(extent 144 16))
(terminals on)
(pinCenter 170 340))
(devCarrierFor 35
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 400 340))
(devCarrierFor 36
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 400 400))
(devCarrierFor 37
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 320 340))
(devCarrierFor 38
(active icon)
(icon
(extent 154 16))
(terminals on)
(pinCenter 170 400))
(devCarrierFor 39
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 287 293)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 620 370))
(connect I1:1 D0:1
(points 4 -8 366 0 366 0 280 90 280))
(connect D0:0 D1:0
(points 2 170 290 170 329))
(connect I1:1 D1:1
(points 4 -8 366 0 366 0 340 95 340))
(connect D4:1 D2:1
(points 2 337 340 380 340))
(connect D2:0 D3:0
(points 2 400 350 400 389))
(connect D0:1 D4:1
(points 4 250 280 270 280 270 330 303 330))
(connect D1:1 D4:2
(points 2 244 340 303 340))
(connect D5:1 D4:3
(points 4 249 400 270 400 270 350 303 350))
(connect D1:0 D5:0
(points 2 170 350 170 389))
(connect I1:1 D5:1
(points 4 -8 366 0 366 0 400 90 400))
(connect D2:1 O1:1
(points 6 420 340 440 340 440 180 790 180 790 366 806 366)))
(stackingOrder 4 2 3 6 5 1 0))))
(context 41
(properties
(name "LocateNearestLevelTwo")
(trigMode deg)
(nextID 58)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "SourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "move")
(lock constraints)
(optional yes)))
(deviceList
(device 39 NOTE
(properties
(name "Comment")
(text2 11 "This function computes a " "\"level two\" move that allows"
"a trapped piece at board location" "\'SourceLoc\' to get out later."
"This is called only for DEEPLY" "buried pieces (if level one fails)." ""
"The algorithm is as follows:" "" "For now, just check the front-front"
"piece.  If we can\'t move it, bail")))
(device 55 CONTEXT
(properties
(name "2nd Front Piece Movable")
(trigMode deg)
(nextID 17)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Move")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "front front piece")
(expr 1 "BorderSquares[loc, 1]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORMULA
(properties
(name "front left piece index")
(expr 1 "BorderSquares[sourceLoc, 2]"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 CALL
(properties
(name "Call LocateNearestLevelOne")
(callFunc "LocateNearestLevelOne")
(parmMode rev30))
(interface
(input 1
(name "SourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 3 IFTHENELSE
(properties
(name "is front piece movable?")
(cases 1 "(loc==-1 ? 0 : (IsPieceMovable(loc) AND  NOT IsPieceBuried(loc)))"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 IFTHENELSE
(properties
(name "is left piece movable?")
(cases 1 "(loc==-1 ? 0 : (IsPieceMovable(loc) AND  NOT IsPieceBuried(loc)))"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 CALL
(properties
(name "Call LocateNearestLevelOne")
(callFunc "LocateNearestLevelOne")
(parmMode rev30))
(interface
(input 1
(name "SourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 6 IFTHENELSE
(properties
(name "is right piece movable?")
(cases 1 "(loc==-1 ? 0 : (IsPieceMovable(loc) AND  NOT IsPieceBuried(loc)))"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "front right piece index")
(expr 1 "BorderSquares[sourceLoc, 3]"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 9 EXITCONTEXT)
(device 10 CALL
(properties
(name "Call LocateNearestLevelOne")
(callFunc "LocateNearestLevelOne")
(parmMode rev30))
(interface
(input 1
(name "SourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "move")
(lock name constraints)
(optional yes))))
(device 11 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 15 FORMULA
(properties
(name "front piece")
(expr 1 "BorderSquares[loc, 1]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 IFTHENELSE
(properties
(name "is there a front piece?")
(cases 1 "loc!=-1"))
(interface
(input 1
(name "loc")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D13:1 D0:0)
(connect D12:1 D0:1)
(connect D3:0 D1:0)
(connect D12:1 D1:1)
(connect D3:1 D2:0)
(connect D0:1 D2:1)
(connect D0:1 D3:1)
(connect D1:1 D4:1)
(connect D4:1 D5:0)
(connect D1:1 D5:1)
(connect D7:1 D6:1)
(connect D4:0 D7:0)
(connect D12:1 D7:1)
(connect D2:1 D8:1)
(connect D5:1 D8:2)
(connect D10:1 D8:3)
(connect D11:0 D9:0)
(connect D6:1 D10:0)
(connect D7:1 D10:1)
(connect D8:1 D11:1)
(connect I1:1 D12:1)
(connect D12:1 D13:1)
(connect D11:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1057 447)
(anchorPt 296 3)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 110 16))
(open
(extent 172 32))
(terminals on)
(pinCenter 90 80))
(devCarrierFor 1
(active icon)
(icon
(extent 139 25))
(open
(extent 243 50))
(terminals on)
(pinCenter 100 200))
(devCarrierFor 2
(active icon)
(icon
(extent 199 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 360 140))
(devCarrierFor 3
(active icon)
(icon
(extent 160 25))
(open
(extent 540 59))
(terminals on)
(pinCenter 260 80))
(devCarrierFor 4
(active icon)
(icon
(extent 149 25))
(open
(extent 540 59))
(terminals on)
(pinCenter 270 200))
(devCarrierFor 5
(active icon)
(icon
(extent 199 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 360 260))
(devCarrierFor 6
(active icon)
(icon
(extent 159 25))
(open
(extent 540 59))
(terminals on)
(pinCenter 290 320))
(devCarrierFor 7
(active icon)
(icon
(extent 149 25))
(open
(extent 243 50))
(terminals on)
(pinCenter 100 320))
(devCarrierFor 8
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 540 240))
(devCarrierFor 9
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 620 300))
(devCarrierFor 10
(active icon)
(icon
(extent 199 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 370 380))
(devCarrierFor 11
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 620 240))
(devCarrierFor 15
(active icon)
(icon
(extent 73 16))
(open
(extent 172 32))
(terminals on)
(pinCenter -200 210))
(devCarrierFor 16
(active icon)
(icon
(extent 151 25))
(open
(extent 76 53))
(terminals on)
(pinCenter -100 110))
(connect D13:1 D0:0
(points 5 -22 100 -10 100 -10 50 90 50 90 69))
(connect D12:1 D0:1
(points 6 -161 210 -140 210 -140 200 0 200 0 80 32 80))
(connect D3:0 D1:0
(points 4 260 95 260 120 100 120 100 185))
(connect D12:1 D1:1
(points 4 -161 210 -140 210 -140 200 28 200))
(connect D3:1 D2:0
(points 3 342 70 360 70 360 129))
(connect D0:1 D2:1
(points 4 147 80 160 80 160 140 258 140))
(connect D0:1 D3:1
(points 2 147 80 177 80))
(connect D1:1 D4:1
(points 2 172 200 193 200))
(connect D4:1 D5:0
(points 5 347 190 370 190 370 230 360 230 360 249))
(connect D1:1 D5:1
(points 4 172 200 180 200 180 260 258 260))
(connect D7:1 D6:1
(points 2 177 320 208 320))
(connect D4:0 D7:0
(points 4 270 215 270 240 100 240 100 305))
(connect D12:1 D7:1
(points 4 -161 210 -140 210 -140 320 23 320))
(connect D2:1 D8:1
(points 4 462 140 480 140 480 230 523 230))
(connect D5:1 D8:2
(points 4 462 260 480 260 480 240 523 240))
(connect D10:1 D8:3
(points 4 472 380 490 380 490 250 523 250))
(connect D11:0 D9:0
(points 2 620 250 620 289))
(connect D6:1 D10:0
(points 5 372 310 390 310 390 350 370 350 370 369))
(connect D7:1 D10:1
(points 4 177 320 200 320 200 380 268 380))
(connect D8:1 D11:1
(points 2 557 240 600 240))
(connect I1:1 D12:1
(points 4 -296 220 -290 220 -290 210 -239 210))
(connect D12:1 D13:1
(points 6 -161 210 -140 210 -140 180 -200 180 -200 110 -178 110))
(connect D11:1 O1:1
(points 4 640 240 660 240 660 220 760 220)))
(stackingOrder 2 5 8 9 10 11 4 6 1 7 12 0 3 13))))
(device 56 EXITCONTEXT)
(device 57 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(configuration
(connect I1:1 D1:1)
(connect D3:0 D2:0)
(connect D1:1 D3:1)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 950 611)
(anchorPt -248 -227)
(configuration
(devCarrierFor 39
(active open)
(icon
(extent 68 52)
(iconImage "notepad.icn"))
(open
(extent 283 207)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 750 330))
(devCarrierFor 55
(active icon)
(icon
(extent 173 16))
(terminals on)
(pinCenter 480 530))
(devCarrierFor 56
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 830 650))
(devCarrierFor 57
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 830 590))
(connect I1:1 D1:1
(points 4 248 532 220 532 220 530 391 530))
(connect D3:0 D2:0
(points 2 830 600 830 639))
(connect D1:1 D3:1
(points 4 569 530 590 530 590 590 810 590))
(connect D3:1 O1:1
(points 4 850 590 920 590 920 532 1197 532)))
(stackingOrder 2 3 0 1))))
(context 16
(properties
(name "MoveOccurred")
(trigMode deg)
(nextID 39)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "deadPiece1")
(optional yes))
(input 2
(name "deadPiece2")
(optional yes))
(input 3
(name "fromSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "newFromSquarePiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 5
(name "toSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 6
(name "newToSquarePiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 2 NOTE
(properties
(name "Comment")
(text2 15 "This function is called after any"
"move is made (opponent or our own)." "A move consists of the previous"
"square (and new contents) and the" "new Square (and its new contents)." ""
"\'prevSquarePiece\' is the new value" "assigned to prevSquare, and "
"\'newSquarePiece\' is the new value" "assigned to newSquare." ""
"It is up to this function to note" "any relevant information from this" "move."
"")))
(device 10 FORMULA
(properties
(name "mark \'OpponentsKnownBoard\'")
(expr 1 "OpponentsKnownBoard[prevSquare] = prevSquarePiece"))
(interface
(input 1
(name "prevSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "prevSquarePiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 FORMULA
(properties
(name "set KnownBoard")
(expr 1
"KnownBoard[newSquare] = (newSquarePiece<0 ? (KnownBoard[prevSquare]==-1 ? -2 : KnownBoard[prevSquare]) : newSquarePiece), KnownBoard[prevSquare] = prevSquarePiece"
))
(interface
(input 1
(name "prevSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "prevSquarePiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "newSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "newSquarePiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORMULA
(properties
(name "mark \'OpponentsKnownBoard\'")
(expr 1
"OpponentsKnownBoard[newSquare] = (newSquarePiece==-2 ? 9999 : (newSquarePiece<1000 ? newSquarePiece : (opponentsKnownBoard[newSquare]==0 ? (opponentsKnownBoard[fromSquare]==-1 ? (MultiMove(fromSquare, newSquare) ? newSquarePiece : -2) : opponentsKnownBoard[fromSquare]) : newSquarePiece)))"
))
(interface
(input 1
(name "fromSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "newSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "newSquarePiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 IFTHENELSE
(properties
(name "opponent square vacated?")
(cases 1 "fromSquare>=60 AND newFromSqPiece==0"))
(interface
(input 1
(name "fromSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "newFromSqPiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 16 CALL
(properties
(name "Call RemoveFromPossibleFlagPos")
(callFunc "RemoveFromPossibleFlagPos")
(parmMode rev30))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 17 IFTHENELSE
(properties
(name "toSquare opponent\'s?")
(cases 1 "toSquare>=60"))
(interface
(input 1
(name "toSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 18 CALL
(properties
(name "Call RemoveFromPossibleFlagPos")
(callFunc "RemoveFromPossibleFlagPos")
(parmMode rev30))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 20 IFTHENELSE
(properties
(name "if bomb change priorities")
(cases 1
"(newp>=35 AND newp<=40) OR (deadPiece1>=35 AND deadPiece1<=40) OR (deadPiece2>=35 AND deadPiece2<=40)"
))
(interface
(input 1
(name "deadPiece1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "deadPiece2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "newp")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 21 CALL
(properties
(name "Call UpdatePossibleFlagPosForBomb")
(callFunc "UpdatePossibleFlagPosForBomb")
(parmMode rev30))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 23 CALL
(properties
(name "Call RemoveOppDeadPiece")
(callFunc "RemoveOppDeadPiece")
(parmMode rev30))
(interface
(input 1
(name "fromSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "deadPiece1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "deadPiece2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 24 FORMULA
(properties
(name "moveNumber++")
(expr 1 "moveNumber = moveNumber+1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 25 CALL
(properties
(name "Call UpdateProbabilityTables")
(callFunc "UpdateProbabilityTables")
(parmMode rev30)))
(device 27 CALL
(properties
(name "Call UpdateMyKnownPieceCount")
(callFunc "UpdateMyKnownPieceCount")
(parmMode rev30)))
(device 28 CALL
(properties
(name "Call UpdateKillCount")
(callFunc "UpdateKillCount")
(parmMode rev30))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "dp1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "dp2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 29 FORMULA
(properties
(name "add our move to list of moves")
(expr 1 "AppendToOurMoves(from, to, KnownBoard[from])"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 30 IFTHENELSE
(properties
(name "computer\'s move?")
(cases 1 "KnownBoard[from]>1000"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 32 CALL
(properties
(name "Call UpdateOppBombLocations")
(callFunc "UpdateOppBombLocations")
(parmMode rev30))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 34 FORMULA
(properties
(name "set \'LastOpponentMove\'")
(expr 1 "LastOpponentMove.from = fromSquare, lastOpponentMove.to = toSquare"))
(interface
(input 1
(name "fromSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "toSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 36 CALL
(properties
(name "Call ClearProtectorIfNecessary")
(callFunc "ClearProtectorIfNecessary")
(parmMode rev30))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 37 CALL
(properties
(name "Call ClearProtectorIfNecessary")
(callFunc "ClearProtectorIfNecessary")
(parmMode rev30))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 38 CALL
(properties
(name "Call ClearProtectorIfNecessary")
(callFunc "ClearProtectorIfNecessary")
(parmMode rev30))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(configuration
(connect D3:0 D1:0)
(connect I3:1 D1:1)
(connect I4:1 D1:2)
(connect D1:0 D2:0)
(connect I3:1 D2:1)
(connect I4:1 D2:2)
(connect I5:1 D2:3)
(connect I6:1 D2:4)
(connect D6:0 D3:0)
(connect I3:1 D3:1)
(connect I5:1 D3:2)
(connect I6:1 D3:3)
(connect D10:0 D4:0)
(connect I3:1 D4:1)
(connect I4:1 D4:2)
(connect D4:1 D5:0)
(connect I3:1 D5:1)
(connect D4:0 D6:0)
(connect I5:1 D6:1)
(connect D6:1 D7:0)
(connect I5:1 D7:1)
(connect D7:0 D8:0)
(connect I1:1 D8:1)
(connect I2:1 D8:2)
(connect I6:1 D8:3)
(connect D8:1 D9:0)
(connect I5:1 D9:1)
(connect D11:0 D10:0)
(connect I3:1 D10:1)
(connect I1:1 D10:2)
(connect I2:1 D10:3)
(connect D16:0 D11:0)
(connect D14:0 D12:0)
(connect D12:0 D13:0)
(connect D2:0 D14:0)
(connect I3:1 D14:1)
(connect I5:1 D14:2)
(connect I1:1 D14:3)
(connect I2:1 D14:4)
(connect D16:1 D15:0)
(connect I3:1 D15:1)
(connect I5:1 D15:2)
(connect I3:1 D16:1)
(connect D9:0 D17:0)
(connect I5:1 D17:1)
(connect D16:2 D18:0)
(connect I3:1 D18:1)
(connect I5:1 D18:2)
(connect D15:0 D19:0)
(connect I3:1 D19:1)
(connect D16:2 D20:0)
(connect I5:1 D20:1)
(connect I6:1 D21:1)))
(contextCarrier
(active detail)
(detail
(extent 935 832)
(anchorPt 2 226)
(configuration
(devCarrierFor 2
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 301 252)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 740 430))
(devCarrierFor 10
(active icon)
(icon
(extent 210 25))
(open
(extent 391 42))
(terminals on)
(pinCenter 160 290))
(devCarrierFor 12
(active icon)
(icon
(extent 113 45))
(open
(extent 1274 73))
(terminals on)
(pinCenter 170 360))
(devCarrierFor 14
(active icon)
(icon
(extent 210 34))
(open
(extent 2080 62))
(terminals on)
(pinCenter 160 210))
(devCarrierFor 15
(active icon)
(icon
(extent 187 25))
(open
(extent 405 72))
(terminals on)
(pinCenter 160 -50))
(devCarrierFor 16
(active icon)
(icon
(extent 239 16))
(open
(extent 295 56))
(terminals on)
(pinCenter 410 0))
(devCarrierFor 17
(active icon)
(icon
(extent 154 25))
(open
(extent 118 53))
(terminals on)
(pinCenter 160 50))
(devCarrierFor 18
(active icon)
(icon
(extent 239 16))
(open
(extent 295 56))
(terminals on)
(pinCenter 420 80))
(devCarrierFor 20
(active icon)
(icon
(extent 194 34))
(open
(extent 786 62))
(terminals on)
(pinCenter 420 130))
(devCarrierFor 21
(active icon)
(icon
(extent 279 16))
(open
(extent 295 56))
(terminals on)
(pinCenter 560 180))
(devCarrierFor 23
(active icon)
(icon
(extent 193 34))
(open
(extent 196 53))
(terminals on)
(pinCenter 160 -100))
(devCarrierFor 24
(active icon)
(icon
(extent 108 16))
(open
(extent 232 32))
(terminals on)
(pinCenter 160 -140))
(devCarrierFor 25
(active icon)
(icon
(extent 200 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 160 470))
(devCarrierFor 27
(active icon)
(icon
(extent 226 16))
(open
(extent 202 53))
(terminals on)
(pinCenter 160 530))
(devCarrierFor 28
(active icon)
(icon
(extent 141 45))
(open
(extent 196 82))
(terminals on)
(pinCenter 170 420))
(devCarrierFor 29
(active icon)
(icon
(extent 203 25))
(open
(extent 347 62))
(terminals on)
(pinCenter 520 -150))
(devCarrierFor 30
(active icon)
(icon
(extent 126 25))
(open
(extent 178 53))
(terminals on)
(pinCenter 160 -180))
(devCarrierFor 32
(active icon)
(icon
(extent 216 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 560 220))
(devCarrierFor 34
(active icon)
(icon
(extent 168 25))
(open
(extent 497 46))
(terminals on)
(pinCenter 390 -100))
(devCarrierFor 36
(active icon)
(icon
(extent 212 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 520 -60))
(devCarrierFor 37
(active icon)
(icon
(extent 212 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 540 -30))
(devCarrierFor 38
(active icon)
(icon
(extent 212 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 160 570))
(connect D3:0 D1:0
(points 2 160 229 160 275))
(connect I3:1 D1:1
(points 4 -2 119 10 119 10 280 52 280))
(connect I4:1 D1:2
(points 4 -2 259 -20 259 -20 300 52 300))
(connect D1:0 D2:0
(points 4 160 305 160 320 170 320 170 335))
(connect I3:1 D2:1
(points 4 -2 119 10 119 10 340 111 340))
(connect I4:1 D2:2
(points 8 -2 259 -20 259 -20 300 30 300 30 330 80 330 80 350 111 350))
(connect I5:1 D2:3
(points 4 -2 399 55 399 55 360 111 360))
(connect I6:1 D2:4
(points 4 -2 539 20 539 20 370 111 370))
(connect D6:0 D3:0
(points 2 160 65 160 190))
(connect I3:1 D3:1
(points 4 -2 119 10 119 10 200 52 200))
(connect I5:1 D3:2
(points 8 -2 399 10 399 10 350 0 350 0 270 30 270 30 210 52 210))
(connect I6:1 D3:3
(points 6 -2 539 20 539 20 290 40 290 40 220 52 220))
(connect D10:0 D4:0
(points 2 160 -81 160 -65))
(connect I3:1 D4:1
(points 4 -2 119 10 119 10 -60 64 -60))
(connect I4:1 D4:2
(points 4 -2 259 20 259 20 -40 64 -40))
(connect D4:1 D5:0
(points 3 256 -60 410 -60 410 -11))
(connect I3:1 D5:1
(points 4 -2 119 10 119 10 0 288 0))
(connect D4:0 D6:0
(points 2 160 -35 160 35))
(connect I5:1 D6:1
(points 8 -2 399 10 399 10 350 0 350 0 270 30 270 30 50 80 50))
(connect D6:1 D7:0
(points 3 239 40 420 40 420 69))
(connect I5:1 D7:1
(points 10 -2 399 10 399 10 350 0 350 0 270 30 270 30 90 260 90 260 80 298 80))
(connect D7:0 D8:0
(points 2 420 90 420 110))
(connect I1:1 D8:1
(points 6 -2 -161 10 -161 10 -150 -10 -150 -10 120 320 120))
(connect I2:1 D8:2
(points 6 -2 -21 30 -21 30 -20 40 -20 40 130 320 130))
(connect I6:1 D8:3
(points 6 -2 539 20 539 20 500 290 500 290 140 320 140))
(connect D8:1 D9:0
(points 3 519 120 560 120 560 169))
(connect I5:1 D9:1
(points 10 -2 399 10 399 10 350 0 350 0 270 30 270 30 170 300 170 300 180 418
180))
(connect D11:0 D10:0
(points 2 160 -130 160 -120))
(connect I3:1 D10:1
(points 6 -2 119 10 119 10 -60 30 -60 30 -110 61 -110))
(connect I1:1 D10:2
(points 6 -2 -161 10 -161 10 -150 20 -150 20 -100 61 -100))
(connect I2:1 D10:3
(points 4 -2 -21 40 -21 40 -90 61 -90))
(connect D16:0 D11:0
(points 2 160 -165 160 -151))
(connect D14:0 D12:0
(points 2 170 445 160 459))
(connect D12:0 D13:0
(points 2 160 480 160 519))
(connect D2:0 D14:0
(points 2 170 385 170 395))
(connect I3:1 D14:1
(points 6 -2 119 10 119 10 340 70 340 70 400 97 400))
(connect I5:1 D14:2
(points 4 -2 399 10 399 10 410 97 410))
(connect I1:1 D14:3
(points 6 -2 -161 10 -161 10 -150 -10 -150 -10 420 97 420))
(connect I2:1 D14:4
(points 6 -2 -21 30 -21 30 -20 -30 -20 -30 430 97 430))
(connect D16:1 D15:0
(points 3 225 -190 520 -190 520 -165))
(connect I3:1 D15:1
(points 6 -2 119 10 119 10 0 280 0 280 -160 416 -160))
(connect I5:1 D15:2
(points 14 -2 399 10 399 10 350 0 350 0 270 30 270 30 90 260 90 260 80 270 80
270 -30 290 -30 290 -140 416 -140))
(connect I3:1 D16:1
(points 6 -2 119 10 119 10 -60 30 -60 30 -180 94 -180))
(connect D9:0 D17:0
(points 2 560 190 560 209))
(connect I5:1 D17:1
(points 12 -2 399 10 399 10 350 0 350 0 270 30 270 30 170 300 170 300 180 400
180 400 220 449 220))
(connect D16:2 D18:0
(points 5 225 -170 250 -170 250 -180 390 -180 390 -115))
(connect I3:1 D18:1
(points 6 -2 119 10 119 10 0 280 0 280 -110 303 -110))
(connect I5:1 D18:2
(points 14 -2 399 10 399 10 350 0 350 0 270 30 270 30 90 260 90 260 80 270 80
270 -30 290 -30 290 -90 303 -90))
(connect D15:0 D19:0
(points 2 520 -135 520 -71))
(connect I3:1 D19:1
(points 10 -2 119 10 119 10 0 280 0 280 -20 300 -20 300 -50 400 -50 400 -60 411
-60))
(connect D16:2 D20:0
(points 9 225 -170 250 -170 250 -180 390 -180 390 -120 490 -120 490 -110 540
-110 540 -41))
(connect I5:1 D20:1
(points 12 -2 399 10 399 10 350 0 350 0 270 30 270 30 90 260 90 260 80 270 80
270 -30 431 -30))
(connect I6:1 D21:1
(points 4 -2 539 20 539 20 570 51 570)))
(stackingOrder 6 4 12 5 7 9 13 16 2 3 14 1 17 8 18 15 11 10 19 20 0 21))))
(context 120
(properties
(name "MultiMove")
(trigMode deg)
(nextID 2)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Bool")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORMULA
(properties
(name "moved multiple squares bool")
(expr 1 " NOT (abs(from-to)==10 OR abs(from-to)==1)"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect I2:1 D0:2)
(connect D0:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 284 220)
(anchorPt 0 -2)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 198 25))
(open
(extent 322 42))
(terminals on)
(pinCenter 150 110))
(connect I1:1 D0:1
(points 4 0 51 20 51 20 100 48 100))
(connect I2:1 D0:2
(points 4 0 171 10 171 10 120 48 120))
(connect D0:1 O1:1
(points 4 251 110 267 110 267 111 283 111))))))
(context 111
(properties
(name "MyGoodPieces")
(trigMode deg)
(nextID 24)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "invincible")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "strong")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(name "For Entire Board")
(count 100))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "My Piece?")
(cases 1 "KnownBoard[i]>=1003 AND KnownBoard[i]<=1021"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "Marshal?")
(cases 1 "pieceWeight==1"))
(interface
(input 1
(name "pieceWeight")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "piece weight")
(expr 1 "WeightOfPiece[KnownBoard[i]-1000]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 IFTHENELSE
(properties
(name "Opponent Spy Dead?")
(cases 1 "OpponentPieceTable[1].known_alive==0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 6 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 8 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 9 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 10 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 11 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 14 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 15 FORMULA
(properties
(name "# superiors")
(expr 1 "pieceWeight-1"))
(interface
(input 1
(name "pieceWeight")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 IFTHENELSE
(properties
(name "opponent have superior?")
(cases 1 "OpponentPieceTable[i+2].known_alive>0"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 17 BREAK)
(device 18 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 19 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 20 DECLVAR
(properties
(name "Declare Local \'invincible\'")
(scope con)
(globalName "invincible"))
(implementation
(value Int32
(data  0))))
(device 21 FORMULA
(properties
(name "invincible = YES")
(expr 1 "invincible = 1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 FORMULA
(properties
(name "invincible = NO")
(expr 1 "invincible = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 23 IFTHENELSE
(properties
(name "Invincible?")
(cases 1 "invincible"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D0:1 D1:1)
(connect D3:1 D2:1)
(connect D1:1 D3:0)
(connect D0:1 D3:1)
(connect D2:1 D4:0)
(connect D9:1 D5:1)
(connect D0:0 D5:2)
(connect D4:1 D6:0)
(connect D0:1 D6:1)
(connect D4:2 D7:0)
(connect D0:1 D7:1)
(connect D10:1 D8:1)
(connect D0:0 D8:2)
(connect D6:1 D9:1)
(connect D16:1 D9:2)
(connect D7:1 D10:1)
(connect D15:1 D10:2)
(connect D12:1 D11:1)
(connect D18:0 D12:0)
(connect D3:1 D12:1)
(connect D11:1 D13:1)
(connect D19:0 D14:0)
(connect D13:1 D15:0)
(connect D0:1 D15:1)
(connect D20:1 D16:0)
(connect D0:1 D16:1)
(connect D2:2 D18:0)
(connect D15:0 D19:0)
(connect D11:0 D20:0)
(connect D5:1 O1:1)
(connect D8:1 O2:1)))
(contextCarrier
(active detail)
(detail
(extent 948 632)
(anchorPt 22 44)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 115 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 80 60))
(devCarrierFor 1
(active icon)
(icon
(extent 71 25))
(open
(extent 346 53))
(terminals on)
(pinCenter 210 60))
(devCarrierFor 2
(active icon)
(icon
(extent 63 25))
(open
(extent 205 71))
(terminals on)
(pinCenter 430 70))
(devCarrierFor 3
(active icon)
(icon
(extent 85 16))
(open
(extent 264 32))
(terminals on)
(pinCenter 320 70))
(devCarrierFor 4
(active icon)
(icon
(extent 150 25))
(open
(extent 287 71))
(terminals on)
(pinCenter 560 110))
(devCarrierFor 5
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 870 150))
(devCarrierFor 6
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 690 120))
(devCarrierFor 8
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 690 210))
(devCarrierFor 9
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 850 470))
(devCarrierFor 10
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 790 130))
(devCarrierFor 11
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 770 450))
(devCarrierFor 14
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 300 290))
(devCarrierFor 15
(active icon)
(icon
(extent 78 16))
(open
(extent 125 38))
(terminals on)
(pinCenter 210 290))
(devCarrierFor 16
(active icon)
(icon
(extent 174 25))
(open
(extent 290 53))
(terminals on)
(pinCenter 440 290))
(devCarrierFor 17
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 590 350))
(devCarrierFor 18
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 590 290))
(devCarrierFor 19
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 590 390))
(devCarrierFor 20
(active icon)
(icon
(extent 170 16))
(open
(extent 215 107))
(pinCenter 100 -10))
(devCarrierFor 21
(active icon)
(icon
(extent 111 16))
(open
(extent 116 32))
(terminals on)
(pinCenter 210 240))
(devCarrierFor 22
(active icon)
(icon
(extent 103 16))
(open
(extent 116 32))
(terminals on)
(pinCenter 590 320))
(devCarrierFor 23
(active icon)
(icon
(extent 72 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 300 370))
(connect D0:1 D1:1
(points 2 140 60 172 60))
(connect D3:1 D2:1
(points 2 365 70 396 70))
(connect D1:1 D3:0
(points 5 248 50 260 50 260 40 320 40 320 59))
(connect D0:1 D3:1
(points 6 140 60 150 60 150 30 270 30 270 70 275 70))
(connect D2:1 D4:0
(points 3 464 60 560 60 560 95))
(connect D9:1 D5:1
(points 4 807 130 820 130 820 140 837 140))
(connect D0:0 D5:2
(points 5 80 88 80 170 820 170 820 160 837 160))
(connect D4:1 D6:0
(points 5 637 100 650 100 650 90 690 90 690 109))
(connect D0:1 D6:1
(points 6 140 60 150 60 150 30 660 30 660 120 670 120))
(connect D4:2 D7:0
(points 5 637 120 650 120 650 150 690 150 690 199))
(connect D0:1 D7:1
(points 8 140 60 150 60 150 30 390 30 390 150 560 150 560 210 670 210))
(connect D10:1 D8:1
(points 4 787 450 800 450 800 460 817 460))
(connect D0:0 D8:2
(points 5 80 88 80 170 810 170 810 480 817 480))
(connect D6:1 D9:1
(points 2 710 120 773 120))
(connect D16:1 D9:2
(points 4 610 390 740 390 740 140 773 140))
(connect D7:1 D10:1
(points 4 710 210 730 210 730 440 753 440))
(connect D15:1 D10:2
(points 4 610 290 660 290 660 460 753 460))
(connect D12:1 D11:1
(points 2 251 290 262 290))
(connect D18:0 D12:0
(points 2 210 250 210 279))
(connect D3:1 D12:1
(points 6 365 70 380 70 380 110 130 110 130 290 168 290))
(connect D11:1 D13:1
(points 2 337 290 350 290))
(connect D19:0 D14:0
(points 2 590 330 590 339))
(connect D13:1 D15:0
(points 5 529 280 550 280 550 260 590 260 590 279))
(connect D0:1 D15:1
(points 8 140 60 150 60 150 30 390 30 390 150 560 150 560 290 570 290))
(connect D20:1 D16:0
(points 5 338 360 360 360 360 370 590 370 590 379))
(connect D0:1 D16:1
(points 10 140 60 150 60 150 30 390 30 390 150 560 150 560 290 550 290 550 390
570 390))
(connect D2:2 D18:0
(points 7 464 80 470 80 470 100 460 100 460 120 210 120 210 229))
(connect D15:0 D19:0
(points 2 590 300 590 309))
(connect D11:0 D20:0
(points 2 300 318 300 355))
(connect D5:1 O1:1
(points 4 903 150 910 150 910 111 925 111))
(connect D8:1 O2:1
(points 4 883 470 900 470 900 431 925 431)))
(stackingOrder 0 3 2 5 9 8 10 1 6 7 11 4 13 15 16 18 14 19 20 12 17))))
(context 42
(properties
(name "MyPieceLocationsThatBeatPiece")
(trigMode deg)
(nextID 9)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "w")
(optional yes))
(output 1
(type data)
(name "ary")
(lock constraints)
(optional yes)))
(deviceList
(device 0 NOTE
(properties
(name "Comment")
(text2 4 "Eventually we\'ll just use" "our own pieceTable."
"ASSUMES input is a known " "piece, is its weight.")))
(device 1 FORCOUNT
(properties
(count 40))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"))
(interface
(input 1
(name "p")
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORMULA
(properties
(name "kb[i]")
(expr 1 "knownboard[i]"))
(interface
(input 1
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 IFTHENELSE
(properties
(name "kb > 1000")
(cases 1 "kb>1000 AND kb<1035"))
(interface
(input 1
(name "kb")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 IFTHENELSE
(properties
(name "a can kill def?")
(cases 1 "(a>0 AND a<b) OR (a==0 AND b==1)"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 8 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(configuration
(connect D4:1 D2:0)
(connect D3:1 D2:1)
(connect D1:1 D3:1)
(connect D3:1 D4:1)
(connect D2:2 D5:1)
(connect I1:1 D5:2)
(connect D7:1 D6:1)
(connect D1:0 D6:2)
(connect D5:1 D7:0)
(connect D1:1 D7:1)
(connect D6:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 766 377)
(anchorPt 59 -39)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 282 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 500 160))
(devCarrierFor 1
(active open)
(icon
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 30 150))
(devCarrierFor 3
(active icon)
(icon
(extent 126 25))
(open
(extent 360 48))
(terminals on)
(pinCenter 260 230))
(devCarrierFor 4
(active icon)
(icon
(extent 36 15))
(open
(extent 137 31))
(terminals on)
(pinCenter 160 150))
(devCarrierFor 5
(active icon)
(icon
(extent 77 25))
(open
(extent 198 51))
(terminals on)
(pinCenter 270 150))
(devCarrierFor 6
(active icon)
(icon
(extent 107 25))
(open
(extent 286 51))
(terminals on)
(pinCenter 240 300))
(devCarrierFor 7
(active icon)
(icon
(extent 74 25))
(open)
(terminals on)
(pinCenter 460 340))
(devCarrierFor 8
(active icon)
(icon
(extent 38 15))
(open)
(terminals on)
(pinCenter 360 330))
(connect D4:1 D2:0
(points 5 311 140 330 140 330 190 260 190 260 215))
(connect D3:1 D2:1
(points 6 180 150 190 150 190 180 170 180 170 230 194 230))
(connect D1:1 D3:1
(points 2 89 150 139 150))
(connect D3:1 D4:1
(points 2 180 150 229 150))
(connect D2:2 D5:1
(points 6 325 240 350 240 350 270 170 270 170 290 184 290))
(connect I1:1 D5:2
(points 4 -59 227 -50 227 -50 310 184 310))
(connect D7:1 D6:1
(points 2 381 330 420 330))
(connect D1:0 D6:2
(points 5 30 168 30 370 400 370 400 350 420 350))
(connect D5:1 D7:0
(points 3 296 290 360 290 360 320))
(connect D1:1 D7:1
(points 6 89 150 120 150 120 360 320 360 320 330 338 330))
(connect D6:1 O1:1
(points 4 499 340 520 340 520 227 706 227)))
(stackingOrder 3 1 7 6 2 5 4 0))))
(context 114
(properties
(name "MyScoutLocations")
(trigMode deg)
(nextID 26)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "scouts")
(lock constraints)
(optional yes)))
(deviceList
(device 1 IFTHENELSE
(properties
(name "My Scout?")
(cases 1 "KnownBoard[i]>=1027 AND KnownBoard[i]<=1034"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 6 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 25 FORRANGE
(properties
(name "For (99-0)")
(from 99)
(thru 0)
(step 1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(configuration
(connect D3:1 D0:1)
(connect D2:1 D1:1)
(connect D3:0 D1:2)
(connect D0:1 D2:0)
(connect D3:1 D2:1)
(connect D1:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 653 305)
(anchorPt 22 44)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 72 25))
(open
(extent 346 53))
(terminals on)
(pinCenter 210 60))
(devCarrierFor 5
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 450 90))
(devCarrierFor 6
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 330 80))
(devCarrierFor 25
(active icon)
(icon
(extent 71 52)
(iconImage "loop.icn"))
(open
(extent 110 82))
(pinCenter 90 60))
(connect D3:1 D0:1
(points 2 128 60 171 60))
(connect D2:1 D1:1
(points 2 350 80 417 80))
(connect D3:0 D1:2
(points 5 90 88 90 110 370 110 370 100 417 100))
(connect D0:1 D2:0
(points 3 248 50 330 50 330 69))
(connect D3:1 D2:1
(points 6 128 60 150 60 150 100 270 100 270 80 310 80))
(connect D1:1 O1:1
(points 4 483 90 500 90 500 108 630 108)))
(stackingOrder 0 2 1 3))))
(context 138
(properties
(name "NeighboringOpponentBomb")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "known bomb?")
(cases 1 "(border>-1 ? KnownBoard[border]>=35 AND KnownBoard[border]<=40 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 5 EXITCONTEXT)
(device 6 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect D1:1 D0:1)
(connect I1:1 D1:1)
(connect D2:1 D1:2)
(connect D0:1 D3:1)
(connect D6:1 D3:2)
(connect D3:1 D4:1)
(connect D4:0 D5:0)
(connect D2:0 D6:0)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 694 263)
(anchorPt -156 -132)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 95 25))
(open
(extent 673 55))
(terminals on)
(pinCenter 480 220))
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 360 220))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 230 230))
(devCarrierFor 3
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 580 220))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 640 220))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 640 280))
(devCarrierFor 6
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 230 300))
(connect D1:1 D0:1
(points 2 412 220 430 220))
(connect I1:1 D1:1
(points 6 156 263 170 263 170 180 290 180 290 210 308 210))
(connect D2:1 D1:2
(points 2 267 230 308 230))
(connect D0:1 D3:1
(points 2 530 210 563 210))
(connect D6:1 D3:2
(points 4 244 300 550 300 550 230 563 230))
(connect D3:1 D4:1
(points 2 597 220 620 220))
(connect D4:0 D5:0
(points 2 640 230 640 269))
(connect D2:0 D6:0
(points 2 230 258 230 289))
(connect D4:1 O1:1
(points 4 660 220 730 220 730 263 849 263)))
(stackingOrder 2 1 3 4 6 5 0))))
(context 67
(properties
(name "NonLifeThreateningMoves")
(trigMode deg)
(nextID 16)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(optional yes))
(output 1
(type data)
(name "otherMoves")
(lock constraints)
(optional yes)))
(deviceList
(device 1 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 2 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data")
(requires
(datatype Record)
(shape "Scalar")))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 3 FORMULA
(properties
(name "move")
(expr 1 "move[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 5 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 6 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "Any Elements?")
(cases 1 "AnyElements(Array)"))
(interface
(input 1
(name "Array")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "destination square")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORMULA
(properties
(name "my piece")
(expr 1 "KnownBoard[move.from]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 12 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(configuration
(connect D1:1 D0:1)
(connect D3:1 D0:2)
(connect D11:1 D1:1)
(connect D4:0 D1:2)
(connect D4:1 D2:1)
(connect I1:1 D2:2)
(connect D6:2 D3:0)
(connect I1:1 D3:1)
(connect D5:1 D4:1)
(connect D6:1 D5:0)
(connect I1:1 D5:1)
(connect I1:1 D6:1)
(connect D9:1 D7:1)
(connect D8:1 D7:2)
(connect D2:1 D8:1)
(connect D2:1 D9:1)
(connect D7:2 D10:1)
(connect D7:3 D10:2)
(connect D10:1 D11:0)
(connect D2:1 D11:1)
(connect D0:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 928 473)
(anchorPt -24 -226)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 610 550))
(devCarrierFor 2
(active icon)
(icon
(extent 61 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 520 540))
(devCarrierFor 3
(active icon)
(icon
(extent 38 25))
(open
(extent 79 42))
(terminals on)
(pinCenter 400 380))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 240 580))
(devCarrierFor 5
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 290 370))
(devCarrierFor 6
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 190 370))
(devCarrierFor 7
(active icon)
(icon
(extent 103 25))
(open
(extent 158 53))
(terminals on)
(pinCenter 160 310))
(devCarrierFor 8
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 700 350))
(devCarrierFor 9
(active icon)
(icon
(extent 128 16))
(open
(extent 84 32))
(terminals on)
(pinCenter 510 380))
(devCarrierFor 10
(active icon)
(icon
(extent 61 16))
(open
(extent 168 32))
(terminals on)
(pinCenter 480 340))
(devCarrierFor 11
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 830 350))
(devCarrierFor 12
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 850 410))
(connect D1:1 D0:1
(points 2 553 540 593 540))
(connect D3:1 D0:2
(points 4 260 580 570 580 570 560 593 560))
(connect D11:1 D1:1
(points 6 870 410 890 410 890 440 480 440 480 530 487 530))
(connect D4:0 D1:2
(points 3 290 398 290 550 487 550))
(connect D4:1 D2:1
(points 2 327 370 378 370))
(connect I1:1 D2:2
(points 6 24 462 90 462 90 420 350 420 350 390 378 390))
(connect D6:2 D3:0
(points 5 214 320 230 320 230 430 240 430 240 569))
(connect I1:1 D3:1
(points 4 24 462 100 462 100 580 220 580))
(connect D5:1 D4:1
(points 2 221 370 252 370))
(connect D6:1 D5:0
(points 5 214 300 220 300 220 340 190 340 190 359))
(connect I1:1 D5:1
(points 4 24 462 90 462 90 370 158 370))
(connect I1:1 D6:1
(points 4 24 462 90 462 90 310 106 310))
(connect D9:1 D7:1
(points 2 513 340 607 340))
(connect D8:1 D7:2
(points 4 576 380 590 380 590 360 607 360))
(connect D2:1 D8:1
(points 2 421 380 443 380))
(connect D2:1 D9:1
(points 4 421 380 430 380 430 340 447 340))
(connect D7:2 D10:1
(points 4 792 350 800 350 800 340 813 340))
(connect D7:3 D10:2
(points 2 792 360 813 360))
(connect D10:1 D11:0
(points 5 847 350 870 350 870 380 850 380 850 399))
(connect D2:1 D11:1
(points 4 421 380 430 380 430 410 830 410))
(connect D0:1 O1:1
(points 4 627 550 650 550 650 462 951 462)))
(stackingOrder 4 5 2 8 9 10 1 11 0 3 7 6))))
(context 125
(properties
(name "OKToMoveMarshal")
(trigMode deg)
(nextID 12)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "targetSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 1 IFTHENELSE
(properties
(name "opp unknown movable?")
(cases 1 "(border>-1 ? KnownBoard[border]==-2 : 0)"))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[to, i]"))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 4 IFTHENELSE
(properties
(name "Is opponent spy location known?")
(cases 1
"(OpponentPieceTable[1].known_alive==1) OR (OpponentPieceTable[1].known_dead==1)"
))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 5 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 6 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 7 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 9 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 10 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 11 EXITCONTEXT)
(configuration
(connect D1:1 D0:1)
(connect I1:1 D1:1)
(connect D2:1 D1:2)
(connect D3:2 D2:0)
(connect D2:0 D4:0)
(connect D0:1 D5:0)
(connect D3:1 D6:0)
(connect D6:1 D7:1)
(connect D5:1 D7:2)
(connect D4:1 D7:3)
(connect D7:1 D8:1)
(connect D8:0 D9:0)
(connect D8:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 1042 341)
(anchorPt -16 -81)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 163 25))
(open
(extent 300 55))
(terminals on)
(pinCenter 590 300))
(devCarrierFor 2
(active icon)
(icon
(extent 99 25))
(open
(extent 177 42))
(terminals on)
(pinCenter 440 300))
(devCarrierFor 3
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 320 310))
(devCarrierFor 4
(active icon)
(icon
(extent 225 25))
(open
(extent 594 53))
(terminals on)
(pinCenter 180 200))
(devCarrierFor 5
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 320 390))
(devCarrierFor 6
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 720 310))
(devCarrierFor 7
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 520 200))
(devCarrierFor 9
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 810 270))
(devCarrierFor 10
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 880 270))
(devCarrierFor 11
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 870 350))
(connect D1:1 D0:1
(points 2 492 300 506 300))
(connect I1:1 D1:1
(points 4 16 251 380 251 380 290 388 290))
(connect D2:1 D1:2
(points 2 357 310 388 310))
(connect D3:2 D2:0
(points 3 295 210 320 210 320 281))
(connect D2:0 D4:0
(points 2 320 338 320 379))
(connect D0:1 D5:0
(points 5 674 290 690 290 690 280 720 280 720 299))
(connect D3:1 D6:0
(points 5 295 190 320 190 320 170 520 170 520 189))
(connect D6:1 D7:1
(points 4 538 200 560 200 560 260 793 260))
(connect D5:1 D7:2
(points 4 734 310 750 310 750 270 793 270))
(connect D4:1 D7:3
(points 4 338 390 760 390 760 280 793 280))
(connect D7:1 D8:1
(points 2 827 270 860 270))
(connect D8:0 D9:0
(points 4 880 280 880 300 870 300 870 339))
(connect D8:1 O1:1
(points 4 900 270 920 270 920 251 1057 251)))
(stackingOrder 2 1 0 4 6 5 8 9 7 3))))
(context 47
(properties
(name "OpenGameInfo")
(trigMode deg)
(nextID 32)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(input 1
(name "FileName")
(requires
(datatype Text)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 0 FROMFILE
(properties
(transactions 1 "READ TEXT KnownBoard INT32 ARRAY:100"))
(interface
(input 1
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes))
(output 1
(name "KnownBoard")
(optional yes)))
(implementation
(attr iopath file read "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 1 FROMFILE
(properties
(transactions 1 "READ TEXT possFlagPos INT32 ARRAY:*"))
(interface
(input 1
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes))
(output 1
(name "possFlagPos")
(optional yes)))
(implementation
(attr iopath file read "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 5 FORMULA
(properties
(name "set \'KnownBoard\'")
(expr 1 "KnownBoard = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))))
(device 7 FORMULA
(properties
(name "set \'PossibleOppFlagPositions\'")
(expr 1 "PossibleOppFlagPositions = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))))
(device 8 FORMULA
(properties
(name "set \'MoveNumber\'")
(expr 1 "MoveNumber = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 9 FROMFILE
(properties
(name "From File (Scalars)")
(transactions 12 "READ TEXT MoveNumber INT32"
"READ TEXT NumOppMovablePiecesRemaining INT32"
"READ TEXT NumMyMovablePiecesRemaining INT32"
"READ TEXT NumPiecesKnownToBeMovable INT32"
"READ TEXT NumPiecesTakenByKamikaze INT32" "READ CONTAINER LastOpponentMove"
"READ TEXT KillCount INT32 ARRAY:40" "READ TEXT DeceptiveLayout INT32"
"READ TEXT FlagPosition INT32" "READ TEXT KamikazePiece INT32"
"READ TEXT OurMinerBombKillCount INT32 ARRAY:5"
"READ TEXT OpponentBombLocations INT32 ARRAY:6"))
(interface
(input 1
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes))
(output 1
(name "MoveNumber")
(optional yes))
(output 2
(name "NumOppMovablePiecesRemaining")
(optional yes))
(output 3
(name "NumMyMovablePiecesRemaining")
(optional yes))
(output 4
(name "NumPiecesKnownToBeMovable")
(optional yes))
(output 5
(name "NumPiecesTakenByKamikaze")
(optional yes))
(output 6
(name "LastOpponentMove")
(optional yes))
(output 7
(name "KillCount")
(optional yes))
(output 8
(name "DeceptiveLayout")
(optional yes))
(output 9
(name "FlagPosition")
(optional yes))
(output 10
(name "KamikazePiece")
(optional yes))
(output 11
(name "OurMinerBombKillCount")
(optional yes))
(output 12
(name "OpponentBombLocations")
(optional yes)))
(implementation
(attr iopath file read "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 10 NOTE
(properties
(name "Comment")
(text2 4 "This function reads all information from"
"the specified file, that is needed to" "recreate a previous game state (as the"
"computer strategy knew it at the time).")))
(device 11 FORMULA
(properties
(name "OpponentPieceTable")
(expr 1 "OpponentPieceTable = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))))
(device 12 FORMULA
(properties
(name "set \'OpponentsKnownBoard\'")
(expr 1 "OpponentsKnownBoard = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))))
(device 13 FROMFILE
(properties
(transactions 1 "READ TEXT oppKnownBoard INT32 ARRAY:100"))
(interface
(input 1
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes))
(output 1
(name "oppKnownBoard")
(optional yes)))
(implementation
(attr iopath file read "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 14 FROMFILE
(properties
(transactions 1 "READ CONTAINER oppPieceTable"))
(interface
(input 1
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes))
(output 1
(name "oppPieceTable")
(optional yes)))
(implementation
(attr iopath file read "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 17 FORMULA
(properties
(name "set \'NumOppMovablePiecesRemaining\'")
(expr 1 "NumOppMovablePiecesRemaining = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 18 FORMULA
(properties
(name "set \'NumPiecesTakenByKamikaze\'")
(expr 1 "NumPiecesTakenByKamikaze = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 19 FORMULA
(properties
(name "set \'KillCount\'")
(expr 1 "KillCount = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))))
(device 20 FORMULA
(properties
(name "set \'DeceptiveLayout\'")
(expr 1 "DeceptiveLayout = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 21 FORMULA
(properties
(name "set \'FlagPosition\'")
(expr 1 "FlagPosition = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 22 FORMULA
(properties
(name "set \'LastOpponentMove\'")
(expr 1 "LastOpponentMove = n"))
(interface
(input 1
(name "n")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))))
(device 23 FORMULA
(properties
(name "set \'NumPiecesKnownToBeMovable\'")
(expr 1 "NumPiecesKnownToBeMovable = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 24 FORMULA
(properties
(name "set \'NumMyMovablePiecesRemaining\'")
(expr 1 "NumMyMovablePiecesRemaining = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 25 FORMULA
(properties
(name "set \'KamikazePiece\'")
(expr 1 "KamikazePiece = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 26 FORMULA
(properties
(name "set \'OurMinerBombKillCount\'")
(expr 1 "OurMinerBombKillCount = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))))
(device 27 FORMULA
(properties
(name "set \'OpponentBombLocations\'")
(expr 1 "OpponentBombLocations = n"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))))
(device 28 FORMULA
(properties
(name "MyPieceTable")
(expr 1 "MyPieceTable = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))))
(device 29 FROMFILE
(properties
(transactions 1 "READ CONTAINER myPieceTable"))
(interface
(input 1
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes))
(output 1
(name "myPieceTable")
(optional yes)))
(implementation
(attr iopath file read "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 30 FROMFILE
(properties
(transactions 1 "READ CONTAINER ourMoves"))
(interface
(input 1
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes))
(output 1
(name "ourMoves")
(optional yes)))
(implementation
(attr iopath file read "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 31 FORMULA
(properties
(name "set \'OurMoves\'")
(expr 1 "OurMoves = n"))
(interface
(input 1
(name "n")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))))
(configuration
(connect D5:0 D0:0)
(connect I1:1 D0:1)
(connect D24:0 D1:0)
(connect I1:1 D1:1)
(connect D0:1 D2:1)
(connect D1:1 D3:1)
(connect D5:1 D4:1)
(connect I1:1 D5:1)
(connect D10:1 D7:1)
(connect D9:1 D8:1)
(connect D0:0 D9:0)
(connect I1:1 D9:1)
(connect D9:0 D10:0)
(connect I1:1 D10:1)
(connect D5:2 D11:1)
(connect D5:5 D12:1)
(connect D5:7 D13:1)
(connect D5:8 D14:1)
(connect D5:9 D15:1)
(connect D5:6 D16:1)
(connect D5:4 D17:1)
(connect D5:3 D18:1)
(connect D5:10 D19:1)
(connect D5:11 D20:1)
(connect D5:12 D21:1)
(connect D23:1 D22:1)
(connect D10:0 D23:0)
(connect I1:1 D23:1)
(connect D23:0 D24:0)
(connect I1:1 D24:1)
(connect D24:1 D25:1)))
(contextCarrier
(active detail)
(detail
(extent 939 723)
(anchorPt 205 209)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 66 16))
(open
(extent 196 113))
(terminals on)
(pinCenter -40 260))
(devCarrierFor 1
(active icon)
(icon
(extent 66 16))
(open
(extent 272 121))
(terminals on)
(pinCenter -40 490))
(devCarrierFor 5
(active icon)
(icon
(extent 119 16))
(open
(extent 150 32))
(terminals on)
(pinCenter 80 260))
(devCarrierFor 7
(active icon)
(icon
(extent 213 16))
(open
(extent 235 32))
(terminals on)
(pinCenter 150 490))
(devCarrierFor 8
(active icon)
(icon
(extent 123 16))
(open
(extent 141 32))
(terminals on)
(pinCenter 210 -160))
(devCarrierFor 9
(active icon)
(icon
(extent 142 359))
(open
(extent 446 310))
(terminals on)
(pinCenter -10 10))
(devCarrierFor 10
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 354 85)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 520 70))
(devCarrierFor 11
(active icon)
(icon
(extent 147 16))
(open
(extent 204 32))
(terminals on)
(pinCenter 90 350))
(devCarrierFor 12
(active icon)
(icon
(extent 196 16))
(open
(extent 220 32))
(terminals on)
(pinCenter 120 300))
(devCarrierFor 13
(active icon)
(icon
(extent 66 16))
(open
(extent 176 113))
(terminals on)
(pinCenter -40 300))
(devCarrierFor 14
(active icon)
(icon
(extent 66 16))
(open
(extent 186 113))
(terminals on)
(pinCenter -40 350))
(devCarrierFor 17
(active icon)
(icon
(extent 270 16))
(open
(extent 275 32))
(terminals on)
(pinCenter 280 -130))
(devCarrierFor 18
(active icon)
(icon
(extent 236 16))
(open
(extent 244 32))
(terminals on)
(pinCenter 250 -30))
(devCarrierFor 19
(active icon)
(icon
(extent 93 16))
(open
(extent 141 32))
(terminals on)
(pinCenter 180 30))
(devCarrierFor 20
(active icon)
(icon
(extent 148 16))
(open
(extent 164 32))
(terminals on)
(pinCenter 190 60))
(devCarrierFor 21
(active icon)
(icon
(extent 117 16))
(open
(extent 141 32))
(terminals on)
(pinCenter 180 100))
(devCarrierFor 22
(active icon)
(icon
(extent 168 16))
(open
(extent 182 32))
(terminals on)
(pinCenter 210 0))
(devCarrierFor 23
(active icon)
(icon
(extent 250 16))
(open
(extent 257 32))
(terminals on)
(pinCenter 260 -70))
(devCarrierFor 24
(active icon)
(icon
(extent 260 16))
(open
(extent 275 32))
(terminals on)
(pinCenter 270 -100))
(devCarrierFor 25
(active icon)
(icon
(extent 136 16))
(open
(extent 153 32))
(terminals on)
(pinCenter 190 140))
(devCarrierFor 26
(active icon)
(icon
(extent 198 16))
(open
(extent 209 32))
(terminals on)
(pinCenter 220 170))
(devCarrierFor 27
(active icon)
(icon
(extent 207 16))
(open
(extent 218 32))
(terminals on)
(pinCenter 230 200))
(devCarrierFor 28
(active icon)
(icon
(extent 97 16))
(open
(extent 204 32))
(terminals on)
(pinCenter 70 400))
(devCarrierFor 29
(active icon)
(icon
(extent 66 16))
(open
(extent 186 113))
(terminals on)
(pinCenter -40 400))
(devCarrierFor 30
(active icon)
(icon
(extent 66 25))
(open
(extent 282 121))
(terminals on)
(pinCenter -40 440))
(devCarrierFor 31
(active icon)
(icon
(extent 103 16))
(open
(extent 123 32))
(terminals on)
(pinCenter 80 440))
(connect D5:0 D0:0
(points 4 -10 192 -10 210 -40 210 -40 249))
(connect I1:1 D0:1
(points 4 -205 152 -115 152 -115 260 -76 260))
(connect D24:0 D1:0
(points 2 -40 455 -40 479))
(connect I1:1 D1:1
(points 8 -205 152 -130 152 -130 300 -120 300 -120 440 -110 440 -110 490 -76 490))
(connect D0:1 D2:1
(points 2 -5 260 18 260))
(connect D1:1 D3:1
(points 2 -5 490 41 490))
(connect D5:1 D4:1
(points 2 63 -160 146 -160))
(connect I1:1 D5:1
(points 4 -205 152 -110 152 -110 10 -84 10))
(connect D10:1 D7:1
(points 2 -5 350 14 350))
(connect D9:1 D8:1
(points 2 -5 300 19 300))
(connect D0:0 D9:0
(points 2 -40 270 -40 289))
(connect I1:1 D9:1
(points 4 -205 152 -130 152 -130 300 -76 300))
(connect D9:0 D10:0
(points 2 -40 310 -40 339))
(connect I1:1 D10:1
(points 6 -205 152 -130 152 -130 300 -120 300 -120 350 -76 350))
(connect D5:2 D11:1
(points 2 63 -130 142 -130))
(connect D5:5 D12:1
(points 4 63 -40 80 -40 80 -30 129 -30))
(connect D5:7 D13:1
(points 4 63 20 80 20 80 30 131 30))
(connect D5:8 D14:1
(points 4 63 50 80 50 80 60 113 60))
(connect D5:9 D15:1
(points 4 63 80 80 80 80 100 119 100))
(connect D5:6 D16:1
(points 4 63 -10 80 -10 80 0 123 0))
(connect D5:4 D17:1
(points 2 63 -70 132 -70))
(connect D5:3 D18:1
(points 2 63 -100 137 -100))
(connect D5:10 D19:1
(points 4 63 110 100 110 100 140 119 140))
(connect D5:11 D20:1
(points 4 63 140 90 140 90 170 118 170))
(connect D5:12 D21:1
(points 4 63 170 80 170 80 200 124 200))
(connect D23:1 D22:1
(points 2 -5 400 19 400))
(connect D10:0 D23:0
(points 2 -40 360 -40 389))
(connect I1:1 D23:1
(points 6 -205 152 -130 152 -130 300 -120 300 -120 400 -76 400))
(connect D23:0 D24:0
(points 2 -40 410 -40 425))
(connect I1:1 D24:1
(points 6 -205 152 -130 152 -130 300 -120 300 -120 440 -76 440))
(connect D24:1 D25:1
(points 2 -5 440 26 440)))
(stackingOrder 3 4 11 18 12 16 13 14 15 19 20 21 0 2 8 9 10 7 23 22 1 5 25 24 6
17))))
(context 14
(properties
(name "OpponentKnownBoard")
(trigMode deg)
(nextID 1)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "board")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "OpponentsKnownBoard")
(expr 1 "OpponentsKnownBoard"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D0:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 341 171)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 165 0))
(open
(extent 184 32))
(terminals on)
(pinCenter 150 70))
(connect D0:1 O1:1
(points 4 294 70 310 70 310 85 340 85))))))
(context 58
(properties
(name "OppProbOfCapturingMyUnknownMovable")
(trigMode deg)
(nextID 15)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "oppPiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "win")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "tie")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "lose")
(lock constraints)
(optional yes)))
(deviceList
(device 0 NOTE
(properties
(name "Comment")
(text2 5 "This function returns the probability of an"
"opponent\'s piece (that is known to us) taking"
"an arbitrary movable piece of ours (that is " "unknown to the opponent)." "")))
(device 1 FORMULA
(properties
(name "round to .xx")
(expr 1 "floor((prob*100)+0.5)/100"))
(interface
(input 1
(name "prob")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORMULA
(properties
(name "for convenience")
(expr 1 "floor((1.0-win-tie)*100+0.5)/100"))
(interface
(input 1
(name "win")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(input 2
(name "tie")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 4 FORMULA
(properties
(name "prob of spy")
(expr 1 "MyPieceTable[0].unknown_alive/NumUnknownMovablePieces"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "tie probability")
(expr 1
"floor((100*MyPieceTable[piece].unknown_alive/NumUnknownMovablePieces)+0.5)/100"
))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "winning probability")
(expr 1
"s = sum(MyPieceTable[piece+1:piece+numWinners].unknown_alive)+MyPieceTable[0].unknown_alive, s/NumUnknownMovablePieces"
))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "numWinners")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "s")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "any winners?")
(cases 1 "numWinners>0"))
(interface
(input 1
(name "numWinners")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 FORMULA
(properties
(name "# unknown marshals prob")
(expr 1 "MyPieceTable[1].unknown_alive/NumUnknownMovablePieces"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "# winners")
(expr 1 "10-p"))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "am I a spy?")
(cases 1 "p==0"))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 FORMULA
(properties
(name "attack piece type")
(expr 1 "TypeOfPiece[piece-1]"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 FORMULA
(properties
(name "set # unknown movable pieces")
(expr 1 "NumUnknownMovablePieces = sum(MyPieceTable[1:10].unknown_alive)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 DECLVAR
(properties
(name "Declare Local \'NumUnknownMovablePieces\'")
(scope con)
(globalName "NumUnknownMovablePieces"))
(implementation
(value Real
(data  0))))
(configuration
(connect D3:1 D1:1)
(connect D1:1 D2:1)
(connect D5:1 D2:2)
(connect D8:1 D3:1)
(connect D6:2 D3:2)
(connect D4:1 D3:3)
(connect D7:2 D4:0)
(connect D9:0 D5:0)
(connect D11:1 D5:1)
(connect D7:1 D6:0)
(connect D11:1 D6:1)
(connect D9:1 D6:2)
(connect D9:1 D7:1)
(connect D10:1 D8:0)
(connect D10:2 D9:0)
(connect D11:1 D9:1)
(connect D11:1 D10:1)
(connect D12:0 D11:0)
(connect I1:1 D11:1)
(connect D1:1 O1:1)
(connect D5:1 O2:1)
(connect D2:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 898 511)
(anchorPt 5 60)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 392 94)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 620 20))
(devCarrierFor 1
(active icon)
(icon
(extent 80 16))
(open
(extent 196 32))
(terminals on)
(pinCenter 690 120))
(devCarrierFor 2
(active icon)
(icon
(extent 111 25))
(open
(extent 232 42))
(terminals on)
(pinCenter 580 400))
(devCarrierFor 3
(active icon)
(icon
(extent 29 34))
(open)
(terminals on)
(pinCenter 610 120))
(devCarrierFor 4
(active icon)
(icon
(extent 78 16))
(open
(extent 465 32))
(terminals on)
(pinCenter 430 240))
(devCarrierFor 5
(active icon)
(icon
(extent 92 25))
(open
(extent 624 42))
(terminals on)
(pinCenter 440 330))
(devCarrierFor 6
(active icon)
(icon
(extent 127 25))
(open
(extent 974 42))
(terminals on)
(pinCenter 460 280))
(devCarrierFor 7
(active icon)
(icon
(extent 91 25))
(open
(extent 127 53))
(terminals on)
(pinCenter 340 210))
(devCarrierFor 8
(active icon)
(icon
(extent 178 16))
(open
(extent 465 32))
(terminals on)
(pinCenter 420 160))
(devCarrierFor 9
(active icon)
(icon
(extent 66 16))
(open
(extent 72 32))
(terminals on)
(pinCenter 230 210))
(devCarrierFor 10
(active icon)
(icon
(extent 79 25))
(open
(extent 60 53))
(terminals on)
(pinCenter 250 140))
(devCarrierFor 12
(active icon)
(icon
(extent 117 16))
(open
(extent 171 32))
(terminals on)
(pinCenter 120 140))
(devCarrierFor 13
(active icon)
(icon
(extent 212 16))
(open
(extent 533 32))
(terminals on)
(pinCenter 170 100))
(devCarrierFor 14
(active icon)
(icon
(extent 304 16))
(open
(extent 340 114))
(pinCenter 210 60))
(connect D3:1 D1:1
(points 2 627 120 647 120))
(connect D1:1 D2:1
(points 8 732 120 750 120 750 320 520 320 520 380 510 380 510 390 522 390))
(connect D5:1 D2:2
(points 6 488 330 510 330 510 370 500 370 500 410 522 410))
(connect D8:1 D3:1
(points 4 511 160 520 160 520 110 593 110))
(connect D6:2 D3:2
(points 4 526 290 550 290 550 120 593 120))
(connect D4:1 D3:3
(points 4 471 240 530 240 530 130 593 130))
(connect D7:2 D4:0
(points 3 388 220 430 220 430 229))
(connect D9:0 D5:0
(points 4 230 220 230 310 440 310 440 315))
(connect D11:1 D5:1
(points 6 181 140 190 140 190 170 170 170 170 330 391 330))
(connect D7:1 D6:0
(points 5 388 200 490 200 490 260 460 260 460 265))
(connect D11:1 D6:1
(points 6 181 140 190 140 190 170 170 170 170 270 394 270))
(connect D9:1 D6:2
(points 4 265 210 280 210 280 290 394 290))
(connect D9:1 D7:1
(points 2 265 210 292 210))
(connect D10:1 D8:0
(points 3 292 130 420 130 420 149))
(connect D10:2 D9:0
(points 5 292 150 310 150 310 180 230 180 230 199))
(connect D11:1 D9:1
(points 6 181 140 190 140 190 170 170 170 170 210 194 210))
(connect D11:1 D10:1
(points 2 181 140 208 140))
(connect D12:0 D11:0
(points 4 170 110 170 120 120 120 120 129))
(connect I1:1 D11:1
(points 4 -5 195 10 195 10 140 59 140))
(connect D1:1 O1:1
(points 4 732 120 840 120 840 25 892 25))
(connect D5:1 O2:1
(points 4 488 330 760 330 760 195 892 195))
(connect D2:1 O3:1
(points 4 638 400 660 400 660 365 892 365)))
(stackingOrder 3 13 12 11 10 8 1 9 7 4 6 5 2 0))))
(context 59
(properties
(name "OppProbOfKillingPiece")
(trigMode deg)
(nextID 17)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "deathProb")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CALL
(properties
(name "Call OppProbOfCapturingMyUnknownMovable")
(callFunc "OppProbOfCapturingMyUnknownMovable")
(parmMode rev30))
(interface
(input 1
(name "oppPiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "win")
(lock name constraints)
(optional yes))
(output 2
(name "tie")
(lock name constraints)
(optional yes))
(output 3
(name "lose")
(lock name constraints)
(optional yes))))
(device 7 FORMULA
(properties
(name "border piece")
(expr 1 "b = BorderSquares[sourceLoc, i], (b==-1 ? 0 : KnownBoard[b])"))
(interface
(input 1
(name "sourceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "b")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 10 IFTHENELSE
(properties
(name "known opp-mov piece?")
(cases 1 "piece>0 AND piece<=35"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 12 DECLVAR
(properties
(name "Declare Local \'DeathProbability\'")
(scope con)
(globalName "deathProbability"))
(implementation
(value Real
(data  0))))
(device 13 FORMULA
(properties
(name "DeathProbability = 0")
(expr 1 "DeathProbability = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 FORMULA
(properties
(name "set maximum death prob")
(expr 1 "DeathProbability = (prob>deathProbability ? prob : DeathProbability)"))
(interface
(input 1
(name "prob")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 FORMULA
(properties
(name "DeathProbability")
(expr 1 "DeathProbability"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 NOTE
(properties
(name "Comment")
(text2 23 "This function computes the probability (as our opponent knows it) "
"of his highest-ranking known piece adjacent to the square \'to\', "
"killing an arbitrary movable piece of ours, that our opponent knows "
"is movable (but not known)." ""
"This is called when we want to evaluate the possibility of moving"
"one of our pieces to square \'to\'.  There may be an opponent piece"
"neighboring this square.  If there is a neighboring opponent piece (AND "
"IT IS KNOWN TO US), then the process of moving a piece next to it invites"
"conflict.  Depending on the opponent piece, we may or may not wish to"
"move next to him.  For example, we would rarely want to move a #2"
"next to a #1.  But moving our unknown #5 next to our oppponent\'s known #4 "
"is probably OK, since the opponent will probably have more respect for"
"our piece (since his is not particularly high).  However, alot of this"
"depends on what pieces are on the board.  That\'s why we have this function."
"" "If this function returns a very high number (greater than 0.8), then we "
"should probably avoid going into this square.  If it is rather low (less "
"than 0.3), then we probably WANT to move into this square. If it\'s in-"
"between (0.3 and 0.8), then we probably want to determine the TRUE "
"probability (since we know all our pieces and his particular piece) of a "
"specified piece of ours getting killed." "")))
(configuration
(connect D3:1 D0:0)
(connect D1:2 D0:1)
(connect I1:1 D1:1)
(connect D2:1 D1:2)
(connect D5:0 D2:0)
(connect D1:2 D3:1)
(connect D0:1 D6:1)
(connect D2:0 D7:0)
(connect D7:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 922 678)
(anchorPt 233 -123)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 319 34))
(open
(extent 245 62))
(terminals on)
(pinCenter 320 330))
(devCarrierFor 7
(active icon)
(icon
(extent 88 25))
(open
(extent 426 50))
(terminals on)
(pinCenter 70 270))
(devCarrierFor 9
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter -70 280))
(devCarrierFor 10
(active icon)
(icon
(extent 159 25))
(open
(extent 184 53))
(terminals on)
(pinCenter 220 280))
(devCarrierFor 12
(active icon)
(icon
(extent 221 16))
(open
(extent 257 107))
(pinCenter -60 160))
(devCarrierFor 13
(active icon)
(icon
(extent 140 16))
(open
(extent 162 32))
(terminals on)
(pinCenter -70 210))
(devCarrierFor 14
(active icon)
(icon
(extent 169 16))
(open
(extent 464 32))
(terminals on)
(pinCenter 590 320))
(devCarrierFor 15
(active icon)
(icon
(extent 114 16))
(open
(extent 162 32))
(terminals on)
(pinCenter -70 370))
(devCarrierFor 16
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 564 343)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 100 590))
(connect D3:1 D0:0
(points 3 302 270 320 270 320 310))
(connect D1:2 D0:1
(points 4 116 280 130 280 130 330 158 330))
(connect I1:1 D1:1
(points 6 -233 461 -220 461 -220 330 -10 330 -10 260 23 260))
(connect D2:1 D1:2
(points 2 -33 280 23 280))
(connect D5:0 D2:0
(points 2 -70 220 -70 251))
(connect D1:2 D3:1
(points 2 116 280 138 280))
(connect D0:1 D6:1
(points 2 482 320 503 320))
(connect D2:0 D7:0
(points 2 -70 308 -70 359))
(connect D7:1 O1:1
(points 4 -11 370 430 370 430 461 688 461)))
(stackingOrder 2 1 3 4 5 0 6 7 8))))
(context 96
(properties
(name "OrphanedOpponentPieces")
(trigMode deg)
(nextID 13)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "orphanedPieceLocations")
(lock constraints)
(optional yes)))
(deviceList
(device 1 IFTHENELSE
(properties
(name "opponent piece (spy-miner)?")
(cases 1 "(KnownBoard[bi]>0 AND KnownBoard[bi]<=26)"))
(interface
(input 1
(name "bi")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORCOUNT
(properties
(count 100))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 7 IFTHENELSE
(properties
(name "orphan?")
(cases 1 "IsAnOrphan(loc)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 9 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data")
(requires
(datatype Int32)
(shape "Scalar")))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 10 FROMARRAY
(properties
(name "# elements")
(expr 1 "Ary"))
(interface
(input 1
(name "Ary")
(tag "Ary"))
(output 1
(name "SubAry")
(tag "Result"))
(output 2
(name "Type")
(tag "Type"))
(output 3
(name "NumDims")
(tag "NumDims"))
(output 4
(name "DimSizes")
(tag "DimSizes"))
(output 5
(name "TotSize")
(tag "TotSize"))))
(device 11 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 12 IFTHENELSE
(properties
(name "any orphans?")
(cases 1 "numElements>0"))
(interface
(input 1
(name "numElements")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D1:1 D0:1)
(connect D0:1 D2:0)
(connect D1:1 D2:1)
(connect D2:1 D3:0)
(connect D1:1 D3:1)
(connect D3:1 D4:1)
(connect D1:0 D4:2)
(connect D4:1 D5:1)
(connect D7:1 D6:0)
(connect D4:1 D6:1)
(connect D5:5 D7:1)
(connect D6:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 978 265)
(anchorPt -25 -54)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 200 25))
(open
(extent 320 55))
(terminals on)
(pinCenter 280 110))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 110 120))
(devCarrierFor 7
(active icon)
(icon
(extent 58 25))
(open
(extent 136 53))
(terminals on)
(pinCenter 380 160))
(devCarrierFor 8
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 470 180))
(devCarrierFor 9
(active icon)
(icon
(extent 61 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 600 200))
(devCarrierFor 10
(active icon)
(icon
(extent 75 54)
(iconImage "unbuild.icn"))
(open
(extent 111 110))
(terminals on)
(pinCenter 690 140))
(devCarrierFor 11
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 870 230))
(devCarrierFor 12
(active icon)
(icon
(extent 95 25))
(open
(extent 133 53))
(terminals on)
(pinCenter 810 180))
(connect D1:1 D0:1
(points 4 147 120 170 120 170 110 177 110))
(connect D0:1 D2:0
(points 5 382 100 400 100 400 140 380 140 380 145))
(connect D1:1 D2:1
(points 4 147 120 170 120 170 160 348 160))
(connect D2:1 D3:0
(points 3 411 150 470 150 470 169))
(connect D1:1 D3:1
(points 6 147 120 170 120 170 200 430 200 430 180 450 180))
(connect D3:1 D4:1
(points 4 490 180 510 180 510 190 567 190))
(connect D1:0 D4:2
(points 3 110 148 110 210 567 210))
(connect D4:1 D5:1
(points 6 633 200 650 200 650 180 630 180 630 140 650 140))
(connect D7:1 D6:0
(points 3 860 170 870 170 870 219))
(connect D4:1 D6:1
(points 4 633 200 660 200 660 230 850 230))
(connect D5:5 D7:1
(points 4 730 160 740 160 740 180 760 180))
(connect D6:1 O1:1
(points 4 890 230 910 230 910 186 1002 186)))
(stackingOrder 3 4 7 6 5 1 0 2))))
(context 134
(properties
(name "OurPieceNextToOurKnownBomb")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "known bomb?")
(cases 1
"(border>-1 ? OpponentsKnownBoard[border]>=1035 AND OpponentsKnownBoard[border]<=1040 : 0)"
))
(interface
(input 1
(name "border")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "border square")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 5 EXITCONTEXT)
(device 6 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(configuration
(connect D1:1 D0:1)
(connect I1:1 D1:1)
(connect D2:1 D1:2)
(connect D0:1 D3:1)
(connect D6:1 D3:2)
(connect D3:1 D4:1)
(connect D4:0 D5:0)
(connect D2:0 D6:0)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 694 263)
(anchorPt -156 -132)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 95 25))
(open
(extent 673 55))
(terminals on)
(pinCenter 480 220))
(devCarrierFor 1
(active icon)
(icon
(extent 99 25))
(open
(extent 167 42))
(terminals on)
(pinCenter 360 220))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 230 230))
(devCarrierFor 3
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 580 220))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 640 220))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 640 280))
(devCarrierFor 6
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 230 300))
(connect D1:1 D0:1
(points 2 412 220 430 220))
(connect I1:1 D1:1
(points 6 156 263 170 263 170 180 290 180 290 210 308 210))
(connect D2:1 D1:2
(points 2 267 230 308 230))
(connect D0:1 D3:1
(points 2 530 210 563 210))
(connect D6:1 D3:2
(points 4 244 300 550 300 550 230 563 230))
(connect D3:1 D4:1
(points 2 597 220 620 220))
(connect D4:0 D5:0
(points 2 640 230 640 269))
(connect D2:0 D6:0
(points 2 230 258 230 289))
(connect D4:1 O1:1
(points 4 660 220 730 220 730 263 849 263)))
(stackingOrder 2 1 0 3 4 6 5))))
(context 106
(properties
(name "PinPieceDown")
(trigMode deg)
(nextID 24)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "shouldNotPin")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "pinned")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "move")
(lock constraints)
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "In our neighborhood?")
(cases 1 "oppPieceLoc<=39"))
(interface
(input 1
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "Is opponent diagonal?")
(cases 1 "abs(dc)==1"))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "delta col, delta row")
(expr 1
"dc = (oppPieceLoc MOD 10)-(ourPieceLoc MOD 10), (oppPieceLoc DIV 10)-(ourPieceLoc DIV 10)"
))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "dc")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 IFTHENELSE
(properties
(name "Is opponent contained?")
(cases 1 "(oppPieceLoc DIV 10)<(ourPieceLoc DIV 10)"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "push direction")
(expr 1 "ourPieceLoc+dc"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 IFTHENELSE
(properties
(name "open square?")
(cases 1 "KnownBoard[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 10 FORMULA
(properties
(name "toward direction")
(expr 1 "ourPieceLoc+dr"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 IFTHENELSE
(properties
(name "open square?")
(cases 1 "KnownBoard[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 13 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 14 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 15 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 16 IFTHENELSE
(properties
(name "Can I move toward?")
(cases 1 "KnownBoard[toward]==0"))
(interface
(input 1
(name "toward")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 17 FORMULA
(properties
(name "toward direction")
(expr 1 "ourPieceLoc+(dr>0 ? dr/2 : dc/2)"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 19 IFTHENELSE
(properties
(name "Can I at least contain player?")
(cases 1 "(dr==0) AND (KnownBoard[ourPieceLoc+10]==0)"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 20 FORMULA
(properties
(name "ourPieceLoc+10")
(expr 1 "ourPieceLoc+10"))
(interface
(input 1
(name "ourPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 21 CALL
(properties
(name "Call IsOpponentPinned")
(callFunc "IsOpponentPinned")
(parmMode rev30))
(interface
(input 1
(name "dc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "dr")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "oppPieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "YES")
(lock name constraints)
(optional yes))
(output 2
(name "NO")
(lock name constraints)
(optional yes))))
(configuration
(connect I2:1 D0:1)
(connect D2:1 D1:1)
(connect D0:1 D2:0)
(connect I1:1 D2:1)
(connect I2:1 D2:2)
(connect D1:1 D3:0)
(connect I1:1 D3:1)
(connect I2:1 D3:2)
(connect D17:2 D4:0)
(connect I1:1 D4:1)
(connect D2:1 D4:2)
(connect D4:1 D5:1)
(connect I1:1 D6:1)
(connect D10:1 D6:2)
(connect D5:2 D7:0)
(connect I1:1 D7:1)
(connect D2:2 D7:2)
(connect D7:1 D8:1)
(connect D5:1 D9:0)
(connect D4:1 D9:1)
(connect D9:1 D10:1)
(connect D11:1 D10:2)
(connect D14:1 D10:3)
(connect D16:1 D10:4)
(connect D8:1 D11:0)
(connect D7:1 D11:1)
(connect D13:1 D12:1)
(connect D1:2 D13:0)
(connect I1:1 D13:1)
(connect D2:1 D13:2)
(connect D2:2 D13:3)
(connect D12:1 D14:0)
(connect D13:1 D14:1)
(connect D12:2 D15:0)
(connect I1:1 D15:1)
(connect D2:2 D15:2)
(connect D15:1 D16:0)
(connect I1:1 D16:1)
(connect D3:1 D17:0)
(connect D2:1 D17:1)
(connect D2:2 D17:2)
(connect I1:1 D17:3)
(connect D0:2 O1:1)
(connect D17:1 O2:1)
(connect D6:1 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 1044 540)
(anchorPt -5 -5)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 149 25))
(open
(extent 193 58))
(terminals on)
(pinCenter 120 70))
(devCarrierFor 1
(active icon)
(icon
(extent 154 25))
(open
(extent 104 53))
(terminals on)
(pinCenter 380 110))
(devCarrierFor 2
(active icon)
(icon
(extent 129 25))
(open
(extent 649 42))
(terminals on)
(pinCenter 200 120))
(devCarrierFor 3
(active icon)
(icon
(extent 162 25))
(open
(extent 313 65))
(terminals on)
(pinCenter 480 160))
(devCarrierFor 4
(active icon)
(icon
(extent 97 25))
(open
(extent 162 52))
(terminals on)
(pinCenter 720 220))
(devCarrierFor 5
(active icon)
(icon
(extent 96 25))
(open
(extent 188 53))
(terminals on)
(pinCenter 840 220))
(devCarrierFor 8
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 990 110))
(devCarrierFor 10
(active icon)
(icon
(extent 110 25))
(open
(extent 162 52))
(terminals on)
(pinCenter 790 310))
(devCarrierFor 11
(active icon)
(icon
(extent 96 25))
(open
(extent 188 53))
(terminals on)
(pinCenter 920 310))
(devCarrierFor 13
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 950 270))
(devCarrierFor 14
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 890 140))
(devCarrierFor 15
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 970 370))
(devCarrierFor 16
(active icon)
(icon
(extent 137 25))
(open
(extent 277 65))
(terminals on)
(pinCenter 390 350))
(devCarrierFor 17
(active icon)
(icon
(extent 110 34))
(open
(extent 240 62))
(terminals on)
(pinCenter 220 350))
(devCarrierFor 18
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 520 360))
(devCarrierFor 19
(active icon)
(icon
(extent 202 25))
(open
(extent 340 65))
(terminals on)
(pinCenter 510 430))
(devCarrierFor 20
(active icon)
(icon
(extent 113 16))
(open
(extent 137 32))
(terminals on)
(pinCenter 660 470))
(devCarrierFor 21
(active icon)
(icon
(extent 159 45))
(open
(extent 196 53))
(terminals on)
(pinCenter 670 150))
(connect I2:1 D0:1
(points 6 5 414 30 414 30 120 20 120 20 70 43 70))
(connect D2:1 D1:1
(points 2 267 110 300 110))
(connect D0:1 D2:0
(points 5 197 60 220 60 220 100 200 100 200 105))
(connect I1:1 D2:1
(points 4 5 134 0 134 0 110 133 110))
(connect I2:1 D2:2
(points 4 5 414 30 414 30 130 133 130))
(connect D1:1 D3:0
(points 3 459 100 480 100 480 145))
(connect I1:1 D3:1
(points 6 5 134 20 134 20 160 310 160 310 150 396 150))
(connect I2:1 D3:2
(points 4 5 414 30 414 30 170 396 170))
(connect D17:2 D4:0
(points 5 752 160 770 160 770 190 720 190 720 205))
(connect I1:1 D4:1
(points 8 5 134 20 134 20 160 310 160 310 150 380 150 380 210 669 210))
(connect D2:1 D4:2
(points 6 267 110 290 110 290 140 320 140 320 230 669 230))
(connect D4:1 D5:1
(points 2 771 220 789 220))
(connect I1:1 D6:1
(points 10 5 134 20 134 20 160 310 160 310 150 380 150 380 210 570 210 570 100
943 100))
(connect D10:1 D6:2
(points 4 907 140 920 140 920 120 943 120))
(connect D5:2 D7:0
(points 5 890 230 910 230 910 260 790 260 790 295))
(connect I1:1 D7:1
(points 6 5 134 20 134 20 160 310 160 310 300 732 300))
(connect D2:2 D7:2
(points 6 267 130 280 130 280 150 300 150 300 320 732 320))
(connect D7:1 D8:1
(points 2 847 310 869 310))
(connect D5:1 D9:0
(points 3 890 210 950 210 950 259))
(connect D4:1 D9:1
(points 4 771 220 780 220 780 270 930 270))
(connect D9:1 D10:1
(points 6 970 270 990 270 990 200 840 200 840 120 873 120))
(connect D11:1 D10:2
(points 6 990 370 1010 370 1010 190 850 190 850 130 873 130))
(connect D14:1 D10:3
(points 8 540 360 560 360 560 400 1020 400 1020 180 860 180 860 140 873 140))
(connect D16:1 D10:4
(points 6 719 470 1060 470 1060 60 830 60 830 150 873 150))
(connect D8:1 D11:0
(points 5 970 300 990 300 990 340 970 340 970 359))
(connect D7:1 D11:1
(points 4 847 310 860 310 860 370 950 370))
(connect D13:1 D12:1
(points 2 277 350 319 350))
(connect D1:2 D13:0
(points 7 459 120 470 120 470 140 370 140 370 180 220 180 220 330))
(connect I1:1 D13:1
(points 4 5 134 20 134 20 340 162 340))
(connect D2:1 D13:2
(points 8 267 110 290 110 290 140 320 140 320 230 140 230 140 350 162 350))
(connect D2:2 D13:3
(points 8 267 130 280 130 280 150 300 150 300 390 140 390 140 360 162 360))
(connect D12:1 D14:0
(points 5 461 340 480 340 480 330 520 330 520 349))
(connect D13:1 D14:1
(points 6 277 350 310 350 310 390 480 390 480 360 500 360))
(connect D12:2 D15:0
(points 5 461 360 470 360 470 400 510 400 510 415))
(connect I1:1 D15:1
(points 4 5 134 20 134 20 420 406 420))
(connect D2:2 D15:2
(points 6 267 130 280 130 280 150 300 150 300 440 406 440))
(connect D15:1 D16:0
(points 3 613 420 660 420 660 459))
(connect I1:1 D16:1
(points 6 5 134 20 134 20 420 290 420 290 470 601 470))
(connect D3:1 D17:0
(points 5 563 150 580 150 580 110 670 110 670 125))
(connect D2:1 D17:1
(points 6 267 110 290 110 290 80 560 80 560 140 588 140))
(connect D2:2 D17:2
(points 8 267 130 280 130 280 150 300 150 300 220 580 220 580 150 588 150))
(connect I1:1 D17:3
(points 10 5 134 20 134 20 160 310 160 310 150 380 150 380 210 570 210 570 160
588 160))
(connect D0:2 O1:1
(points 6 197 80 230 80 230 40 1040 40 1040 94 1048 94))
(connect D17:1 O2:1
(points 6 752 140 770 140 770 50 1080 50 1080 274 1048 274))
(connect D6:1 O3:1
(points 4 1037 110 1070 110 1070 454 1048 454)))
(stackingOrder 4 5 9 8 11 7 13 12 15 14 16 10 3 2 1 0 17 6))))
(context 104
(properties
(name "Place4s")
(trigMode deg)
(nextID 8)
(popupTitleText "UserFunction")
(popupMoveable 1))
(deviceList
(device 0 REPEATUNTILBREAK
(properties
(name "place 4\'s"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "next4=7")
(expr 1 "next = 7"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "all placed")
(cases 1 "next==10"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 BREAK)
(device 4 FORMULA
(properties
(name "random # (preferably in the middle)")
(expr 1 "asInt32(((random(0, 1)<0.3) ? random(0, 39) : random(10, 29)))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 FORMULA
(properties
(name "set piece in b; next++")
(expr 1 "b[square] = next, next = next+1"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 DECLVAR
(properties
(name "Declare Local \'next\'")
(scope con)
(globalName "next"))
(implementation
(value Int32
(data  0))))
(configuration
(connect D1:0 D0:0)
(connect D0:1 D2:0)
(connect D2:1 D3:0)
(connect D2:2 D4:0)
(connect D4:1 D5:1)
(connect D5:1 D6:0)
(connect D4:1 D6:1)))
(contextCarrier
(active detail)
(detail
(extent 725 323)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 66 30))
(terminals on)
(pinCenter 100 130))
(devCarrierFor 1
(active icon)
(icon
(extent 55 15))
(open
(extent 84 31))
(terminals on)
(pinCenter 100 70))
(devCarrierFor 2
(active icon)
(icon
(extent 75 25))
(open
(extent 90 51))
(terminals on)
(pinCenter 210 160))
(devCarrierFor 3
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 320 180))
(devCarrierFor 4
(active icon)
(icon
(extent 244 15))
(open
(extent 436 31))
(terminals on)
(pinCenter 270 210))
(devCarrierFor 5
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 470 210))
(devCarrierFor 6
(active icon)
(icon
(extent 147 15))
(open
(extent 333 38))
(terminals on)
(pinCenter 580 250))
(devCarrierFor 7
(active icon)
(icon
(extent 135 15))
(open
(extent 240 103))
(pinCenter 120 30))
(connect D1:0 D0:0
(points 2 100 80 100 102))
(connect D0:1 D2:0
(points 3 136 130 210 130 210 145))
(connect D2:1 D3:0
(points 3 250 150 320 150 320 170))
(connect D2:2 D4:0
(points 3 250 170 270 170 270 200))
(connect D4:1 D5:1
(points 2 394 210 421 210))
(connect D5:1 D6:0
(points 3 519 200 580 200 580 240))
(connect D4:1 D6:1
(points 4 394 210 400 210 400 250 504 250)))
(stackingOrder 0 1 2 3 4 5 6 7))))
(context 93
(properties
(name "Place5Thru7s")
(trigMode deg)
(nextID 33)
(popupTitleText "UserFunction")
(popupMoveable 1))
(deviceList
(device 7 CALL
(properties
(name "Call GetBombAdjacencyLocations")
(callFunc "GetBombAdjacencyLocations")
(parmMode rev30))
(interface
(output 1
(name "adjLocs")
(lock name constraints)
(optional yes))))
(device 9 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 10 FORMULA
(properties
(name "set piece in b")
(expr 1 "b[square] = Random5Thru7s[i+NumPrimeLocations]"))
(interface
(input 1
(name "i")
(optional yes))
(input 2
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 FORMULA
(properties
(name "random 0-39")
(expr 1 "asInt32(random(0, 39))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 DECLVAR
(properties
(name "Declare Local \'primeLocations\'")
(scope con)
(globalName "primeLocations"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 15 FORMULA
(properties
(name "set \'primeLocations\'")
(expr 1 "primeLocations = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "compute \'numPrimeLocations\'")
(expr 1 "numPrimeLocations = totSize(primeLocations)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 DECLVAR
(properties
(name "Declare Local \'NumPrimeLocations\'")
(scope con)
(globalName "NumPrimeLocations"))
(implementation
(value Int32
(data  0))))
(device 18 FORMULA
(properties
(name "create \'Random5Thru7s\'")
(expr 1
"Random5Thru7s = RandomizeArray([10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21])"
))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 23 DECLVAR
(properties
(name "Declare Local \'Random5Thru7s\'")
(scope con)
(globalName "Random5Thru7s"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 24 FORCOUNT
(properties
(name "place in prime")
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 25 FORMULA
(properties
(name "# prime locations")
(expr 1 "NumPrimeLocations"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 26 FORMULA
(properties
(name "set prime location with random 5-7")
(expr 1 "b[primeLocations[i]] = Random5Thru7s[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 27 FORCOUNT
(properties
(name "place remaining 5-7s")
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 28 FORMULA
(properties
(name "# remaining 5\'s & 7\'s")
(expr 1 "12-NumPrimeLocations"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 30 REPEATUNTILBREAK
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 32 BREAK)
(configuration
(connect D3:1 D1:1)
(connect D1:1 D2:0)
(connect D13:1 D2:1)
(connect D3:1 D2:2)
(connect D15:1 D3:0)
(connect D0:1 D5:1)
(connect D5:0 D6:0)
(connect D6:0 D8:0)
(connect D11:1 D10:1)
(connect D0:0 D11:0)
(connect D10:1 D12:1)
(connect D14:1 D13:1)
(connect D10:0 D14:0)
(connect D13:1 D15:0)
(connect D2:0 D16:0)))
(contextCarrier
(active detail)
(detail
(extent 992 614)
(anchorPt 33 113)
(configuration
(devCarrierFor 7
(active icon)
(icon
(extent 234 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 140 30))
(devCarrierFor 9
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 690 350))
(devCarrierFor 10
(active icon)
(icon
(extent 92 25))
(open
(extent 360 42))
(terminals on)
(pinCenter 780 400))
(devCarrierFor 12
(active icon)
(icon
(extent 103 15))
(open
(extent 276 31))
(terminals on)
(pinCenter 560 350))
(devCarrierFor 14
(active icon)
(icon
(extent 212 16))
(open
(extent 248 107))
(pinCenter 140 -10))
(devCarrierFor 15
(active icon)
(icon
(extent 137 16))
(open
(extent 166 32))
(terminals on)
(pinCenter 350 30))
(devCarrierFor 16
(active icon)
(icon
(extent 206 16))
(open
(extent 322 32))
(terminals on)
(pinCenter 350 70))
(devCarrierFor 17
(active icon)
(icon
(extent 244 16))
(open
(extent 280 107))
(pinCenter 140 -40))
(devCarrierFor 18
(active icon)
(icon
(extent 171 16))
(open
(extent 558 32))
(terminals on)
(pinCenter 350 110))
(devCarrierFor 23
(active icon)
(icon
(extent 223 16))
(open
(extent 259 107))
(pinCenter 140 -70))
(devCarrierFor 24
(active icon)
(icon
(extent 96 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 270 170))
(devCarrierFor 25
(active icon)
(icon
(extent 117 16))
(open
(extent 159 32))
(terminals on)
(pinCenter 140 170))
(devCarrierFor 26
(active icon)
(icon
(extent 237 16))
(open
(extent 290 32))
(terminals on)
(pinCenter 460 170))
(devCarrierFor 27
(active icon)
(icon
(extent 145 52)
(iconImage "loop.icn"))
(open
(extent 181 32))
(pinCenter 270 290))
(devCarrierFor 28
(active icon)
(icon
(extent 144 16))
(open
(extent 180 32))
(terminals on)
(pinCenter 100 290))
(devCarrierFor 30
(active icon)
(icon
(extent 74 52)
(iconImage "loop.icn"))
(open)
(terminals on)
(pinCenter 460 280))
(devCarrierFor 32
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 780 450))
(connect D3:1 D1:1
(points 2 614 350 641 350))
(connect D1:1 D2:0
(points 3 739 340 780 340 780 385))
(connect D13:1 D2:1
(points 4 345 290 390 290 390 390 731 390))
(connect D3:1 D2:2
(points 4 614 350 620 350 620 410 731 410))
(connect D15:1 D3:0
(points 3 499 280 560 280 560 340))
(connect D0:1 D5:1
(points 2 259 30 279 30))
(connect D5:0 D6:0
(points 2 350 40 350 59))
(connect D6:0 D8:0
(points 2 350 80 350 99))
(connect D11:1 D10:1
(points 2 201 170 219 170))
(connect D0:0 D11:0
(points 2 140 40 140 159))
(connect D10:1 D12:1
(points 2 320 170 339 170))
(connect D14:1 D13:1
(points 2 174 290 195 290))
(connect D10:0 D14:0
(points 4 270 198 270 220 100 220 100 279))
(connect D13:1 D15:0
(points 5 345 290 380 290 380 230 460 230 460 251))
(connect D2:0 D16:0
(points 2 780 415 780 439)))
(stackingOrder 4 5 7 6 9 11 10 12 13 8 3 14 1 15 16 2 0))))
(context 92
(properties
(name "Place8And9s")
(trigMode deg)
(nextID 23)
(popupTitleText "UserFunction")
(popupMoveable 1))
(deviceList
(device 0 REPEATUNTILBREAK
(properties
(name "place 9\'s"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "next9=27")
(expr 1 "next = 27"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 REPEATUNTILBREAK
(properties
(name "place 8\'s"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "next8=22")
(expr 1 "next = 22"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 BREAK)
(device 6 FORMULA
(properties
(name "random #")
(expr 1 "asInt32((random(0, 1)<0.3 ? random(0, 39) : random(0, 19)))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 IFTHENELSE
(properties
(name "all 9\'s placed")
(cases 1 "next==35"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 8 FORMULA
(properties
(name "set 8 in b; next++")
(expr 1 "b[square] = next, next = next+1"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 BREAK)
(device 10 FORMULA
(properties
(name "random #")
(expr 1 "asInt32((random(0, 1)<0.2 ? random(0, 39) : random(0, 29)))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 IFTHENELSE
(properties
(name "all 8\'s placed")
(cases 1 "next==27"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 17 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 18 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 19 FORMULA
(properties
(name "set 9 in b; next++")
(expr 1 "b[square] = next, next = next+1"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 20 DECLVAR
(properties
(name "Declare Local \'next\'")
(scope con)
(globalName "next"))
(implementation
(value Int32
(data  0))))
(configuration
(connect D1:0 D0:0)
(connect D2:0 D1:0)
(connect D3:0 D2:0)
(connect D6:1 D4:0)
(connect D6:2 D5:0)
(connect D0:1 D6:0)
(connect D11:1 D7:0)
(connect D9:1 D7:1)
(connect D10:1 D8:0)
(connect D10:2 D9:0)
(connect D2:1 D10:0)
(connect D9:1 D11:1)
(connect D5:1 D12:1)
(connect D12:1 D13:0)
(connect D5:1 D13:1)))
(contextCarrier
(active detail)
(detail
(extent 636 535)
(anchorPt -20 36)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 66 30))
(terminals on)
(pinCenter 120 360))
(devCarrierFor 1
(active icon)
(icon
(extent 73 15))
(open
(extent 140 31))
(terminals on)
(pinCenter 120 310))
(devCarrierFor 2
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 66 30))
(terminals on)
(pinCenter 120 170))
(devCarrierFor 3
(active icon)
(icon
(extent 73 15))
(open
(extent 140 31))
(terminals on)
(pinCenter 120 120))
(devCarrierFor 5
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 360 350))
(devCarrierFor 6
(active icon)
(icon
(extent 66 15))
(open
(extent 426 31))
(terminals on)
(pinCenter 270 410))
(devCarrierFor 7
(active icon)
(icon
(extent 100 25))
(open
(extent 150 51))
(terminals on)
(pinCenter 240 370))
(devCarrierFor 8
(active icon)
(icon
(extent 118 15))
(open
(extent 333 38))
(terminals on)
(pinCenter 400 250))
(devCarrierFor 9
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 320 170))
(devCarrierFor 10
(active icon)
(icon
(extent 66 15))
(open
(extent 418 31))
(terminals on)
(pinCenter 280 240))
(devCarrierFor 11
(active icon)
(icon
(extent 100 25))
(open
(extent 150 51))
(terminals on)
(pinCenter 230 190))
(devCarrierFor 17
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 400 210))
(devCarrierFor 18
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 410 400))
(devCarrierFor 19
(active icon)
(icon
(extent 118 15))
(open
(extent 333 38))
(terminals on)
(pinCenter 430 440))
(devCarrierFor 20
(active icon)
(icon
(extent 135 15))
(open
(extent 240 103))
(pinCenter 130 20))
(connect D1:0 D0:0
(points 2 120 320 120 332))
(connect D2:0 D1:0
(points 2 120 198 120 300))
(connect D3:0 D2:0
(points 2 120 130 120 142))
(connect D6:1 D4:0
(points 5 292 360 310 360 310 320 360 320 360 340))
(connect D6:2 D5:0
(points 5 292 380 300 380 300 390 270 390 270 400))
(connect D0:1 D6:0
(points 5 156 360 170 360 170 340 240 340 240 355))
(connect D11:1 D7:0
(points 7 449 200 460 200 460 180 410 180 410 210 400 210 400 240))
(connect D9:1 D7:1
(points 4 315 240 330 240 330 250 338 250))
(connect D10:1 D8:0
(points 5 282 180 290 180 290 140 320 140 320 160))
(connect D10:2 D9:0
(points 5 282 200 290 200 290 220 280 220 280 230))
(connect D2:1 D10:0
(points 5 156 170 170 170 170 160 230 160 230 175))
(connect D9:1 D11:1
(points 4 315 240 330 240 330 210 351 210))
(connect D5:1 D12:1
(points 4 305 410 330 410 330 400 361 400))
(connect D12:1 D13:0
(points 5 459 390 470 390 470 370 430 370 430 430))
(connect D5:1 D13:1
(points 4 305 410 330 410 330 440 368 440)))
(stackingOrder 0 1 2 3 4 8 11 12 14 13 7 6 10 9 5))))
(context 105
(properties
(name "PlaceColonelNearFlag")
(trigMode deg)
(nextID 23)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "ColonelPos")
(lock constraints)
(optional yes)))
(deviceList
(device 1 IFTHENELSE
(properties
(name "flag == 32/36 or 33/37?")
(cases 1 "flagPosition==32 OR flagPosition==36"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "pos = flagPosition-1, b[pos] = 5, pos"))
(interface
(output 1
(name "pos")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 IFTHENELSE
(properties
(name "left side, rear-left side, or back open?")
(cases 4 "b[flagPosition-1]==0" "b[flagPosition-11]==0" "b[flagPosition-10]==0"
"b[flagPosition]+1==0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "pos = flagPosition-11, b[pos] = 5, pos"))
(interface
(output 1
(name "pos")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 6 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "pos = flagPosition-10, b[pos] = 5, pos"))
(interface
(output 1
(name "pos")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "pos = flagPosition+1, b[pos] = 5, pos"))
(interface
(output 1
(name "pos")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "b[square] = 5"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 FORMULA
(properties
(name "random # (preferably up front)")
(expr 1 "asInt32(((random(0, 1)<0.2) ? random(0, 39) : random(20, 39)))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 REPEATUNTILBREAK
(properties
(name "place 1st Colonel (3)"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 13 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 14 EXITCONTEXT)
(device 15 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(device 16 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "pos = flagPosition-1, b[pos] = 5, pos"))
(interface
(output 1
(name "pos")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Data"))))
(device 18 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "pos = flagPosition+1, b[pos] = 5, pos"))
(interface
(output 1
(name "pos")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "pos = flagPosition-10, b[pos] = 5, pos"))
(interface
(output 1
(name "pos")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 20 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "pos = flagPosition-11, b[pos] = 5, pos"))
(interface
(output 1
(name "pos")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 21 IFTHENELSE
(properties
(name "right side, rear-right side, or back open?")
(cases 4 "b[flagPosition+1]==0" "b[flagPosition-9]==0" "b[flagPosition-10]==0"
"b[flagPosition]-1==0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else")
(lock name constraints))))
(device 22 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect D2:1 D1:0)
(connect D0:1 D2:0)
(connect D2:2 D3:0)
(connect D1:2 D4:1)
(connect D3:2 D4:2)
(connect D5:2 D4:3)
(connect D6:2 D4:4)
(connect D2:3 D5:0)
(connect D2:4 D6:0)
(connect D8:1 D7:0)
(connect D9:1 D7:1)
(connect D9:1 D8:1)
(connect D10:1 D9:0)
(connect D20:1 D10:0)
(connect D7:0 D11:0)
(connect D9:1 D11:1)
(connect D11:0 D12:0)
(connect D4:1 D13:1)
(connect D15:1 D13:2)
(connect D11:1 D13:3)
(connect D19:1 D14:0)
(connect D14:2 D15:1)
(connect D18:2 D15:2)
(connect D17:2 D15:3)
(connect D16:2 D15:4)
(connect D19:4 D16:0)
(connect D19:3 D17:0)
(connect D19:2 D18:0)
(connect D0:2 D19:0)
(connect D2:5 D20:1)
(connect D19:5 D20:2)
(connect D13:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 903 644)
(anchorPt -15 -94)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 162 45))
(open
(extent 273 82))
(terminals on)
(pinCenter 130 170))
(devCarrierFor 2
(active icon)
(icon
(extent 103 25))
(open
(extent 261 42))
(terminals on)
(pinCenter 610 180))
(devCarrierFor 3
(active icon)
(icon
(extent 259 54))
(open
(extent 215 102))
(terminals on)
(pinCenter 390 220))
(devCarrierFor 4
(active icon)
(icon
(extent 103 25))
(open
(extent 269 42))
(terminals on)
(pinCenter 610 220))
(devCarrierFor 5
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 710 240))
(devCarrierFor 6
(active icon)
(icon
(extent 103 25))
(open
(extent 269 42))
(terminals on)
(pinCenter 610 260))
(devCarrierFor 7
(active icon)
(icon
(extent 103 25))
(open
(extent 269 42))
(terminals on)
(pinCenter 610 300))
(devCarrierFor 9
(active icon)
(icon
(extent 103 15))
(open
(extent 118 38))
(terminals on)
(pinCenter 570 630))
(devCarrierFor 10
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 430 610))
(devCarrierFor 11
(active icon)
(icon
(extent 210 15))
(open
(extent 436 31))
(terminals on)
(pinCenter 240 610))
(devCarrierFor 12
(active icon)
(icon
(extent 144 51)
(iconImage "loop.icn"))
(open
(extent 103 30))
(terminals on)
(pinCenter 120 560))
(devCarrierFor 13
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 570 670))
(devCarrierFor 14
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 570 720))
(devCarrierFor 15
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 840 320))
(devCarrierFor 16
(active icon)
(icon
(extent 103 25))
(open
(extent 261 42))
(terminals on)
(pinCenter 620 370))
(devCarrierFor 17
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 750 450))
(devCarrierFor 18
(active icon)
(icon
(extent 103 25))
(open
(extent 269 42))
(terminals on)
(pinCenter 620 490))
(devCarrierFor 19
(active icon)
(icon
(extent 103 25))
(open
(extent 269 42))
(terminals on)
(pinCenter 620 450))
(devCarrierFor 20
(active icon)
(icon
(extent 103 25))
(open
(extent 269 42))
(terminals on)
(pinCenter 620 410))
(devCarrierFor 21
(active icon)
(icon
(extent 279 54))
(open
(extent 235 102))
(terminals on)
(pinCenter 370 410))
(devCarrierFor 22
(active icon)
(icon
(extent 29 45))
(open
(extent 12 82))
(terminals on)
(pinCenter 100 480))
(connect D2:1 D1:0
(points 5 522 200 540 200 540 150 610 150 610 165))
(connect D0:1 D2:0
(points 3 213 160 390 160 390 190))
(connect D2:2 D3:0
(points 5 522 210 550 210 550 200 610 200 610 205))
(connect D1:2 D4:1
(points 4 664 190 680 190 680 220 693 220))
(connect D3:2 D4:2
(points 2 664 230 693 230))
(connect D5:2 D4:3
(points 4 664 270 670 270 670 240 693 240))
(connect D6:2 D4:4
(points 4 664 310 680 310 680 250 693 250))
(connect D2:3 D5:0
(points 5 522 220 540 220 540 230 610 230 610 245))
(connect D2:4 D6:0
(points 7 522 230 530 230 530 240 540 240 540 270 610 270 610 285))
(connect D8:1 D7:0
(points 3 479 600 570 600 570 620))
(connect D9:1 D7:1
(points 6 347 610 360 610 360 670 500 670 500 630 516 630))
(connect D9:1 D8:1
(points 2 347 610 381 610))
(connect D10:1 D9:0
(points 3 194 560 240 560 240 600))
(connect D20:1 D10:0
(points 5 117 480 140 480 140 520 120 520 120 532))
(connect D7:0 D11:0
(points 2 570 640 570 659))
(connect D9:1 D11:1
(points 4 347 610 360 610 360 670 550 670))
(connect D11:0 D12:0
(points 2 570 680 570 709))
(connect D4:1 D13:1
(points 4 727 240 750 240 750 310 823 310))
(connect D15:1 D13:2
(points 4 767 450 780 450 780 320 823 320))
(connect D11:1 D13:3
(points 4 590 670 790 670 790 330 823 330))
(connect D19:1 D14:0
(points 5 512 390 520 390 520 330 620 330 620 355))
(connect D14:2 D15:1
(points 4 674 380 700 380 700 430 733 430))
(connect D18:2 D15:2
(points 4 674 420 690 420 690 440 733 440))
(connect D17:2 D15:3
(points 4 674 460 690 460 690 450 733 450))
(connect D16:2 D15:4
(points 4 674 500 700 500 700 460 733 460))
(connect D19:4 D16:0
(points 5 512 420 530 420 530 460 620 460 620 475))
(connect D19:3 D17:0
(points 5 512 410 540 410 540 420 620 420 620 435))
(connect D19:2 D18:0
(points 7 512 400 530 400 530 340 610 340 610 370 620 370 620 395))
(connect D0:2 D19:0
(points 5 213 180 230 180 230 270 370 270 370 380))
(connect D2:5 D20:1
(points 6 522 240 530 240 530 280 50 280 50 470 83 470))
(connect D19:5 D20:2
(points 8 512 430 520 430 520 460 210 460 210 440 60 440 60 490 83 490))
(connect D13:1 O1:1
(points 4 857 320 880 320 880 415 917 415)))
(stackingOrder 1 2 8 9 10 7 11 12 14 15 3 5 6 4 18 17 16 19 0 20 13))))
(context 90
(properties
(name "PlaceFlagAndBombs")
(trigMode deg)
(nextID 27)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "Deceptive")
(lock constraints)
(optional yes)))
(deviceList
(device 21 CALL
(properties
(name "Call DeceptiveBombAndFlagLayout")
(callFunc "DeceptiveBombAndFlagLayout")
(parmMode rev30)))
(device 22 IFTHENELSE
(properties
(name "70% cons / 30% risky")
(cases 1 "(random(0, 1)<0.7)"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 23 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 24 DECLVAR
(properties
(name "Declare \'FlagPosition\'")
(scope lib)
(globalName "FlagPosition"))
(implementation
(value Int32
(data  0))))
(device 26 CALL
(properties
(name "Call ConservativeBombAndFlagLayout")
(callFunc "ConservativeBombAndFlagLayout")
(parmMode rev30)))
(configuration
(connect D1:2 D0:0)
(connect D0:0 D2:0)
(connect D1:1 D4:0)
(connect D2:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 667 255)
(anchorPt 23 95)
(configuration
(devCarrierFor 21
(active icon)
(icon
(extent 245 16))
(open
(extent 221 53))
(terminals on)
(pinCenter 390 60))
(devCarrierFor 22
(active icon)
(icon
(extent 148 25))
(open
(extent 152 53))
(terminals on)
(pinCenter 140 -20))
(devCarrierFor 23
(active icon)
(icon
(extent 41 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 390 100))
(devCarrierFor 24
(active icon)
(icon
(extent 150 16))
(open
(extent 215 107))
(pinCenter 370 -60))
(devCarrierFor 26
(active icon)
(icon
(extent 267 16))
(open
(extent 243 53))
(terminals on)
(pinCenter 390 0))
(connect D1:2 D0:0
(points 5 216 -10 230 -10 230 30 390 30 390 49))
(connect D0:0 D2:0
(points 2 390 70 390 89))
(connect D1:1 D4:0
(points 3 216 -30 390 -30 390 -11))
(connect D2:1 O1:1
(points 4 413 100 540 100 540 32 643 32)))
(stackingOrder 2 3 1 4 0))))
(context 91
(properties
(name "PlaceSpyThruFours")
(trigMode deg)
(nextID 51)
(popupTitleText "UserFunction")
(popupMoveable 1))
(interface
(input 1
(name "Deceptive")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 7 DECLVAR
(properties
(name "Declare Local \'next\'")
(scope con)
(globalName "next"))
(implementation
(value Int32
(data  0))))
(device 8 FORMULA
(properties
(name "set marshal")
(expr 1 "b[square] = 3, MarshalPosition = square"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 IFTHENELSE
(properties
(name "can set marshal here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 10 FORMULA
(properties
(name "random # (preferably up front)")
(expr 1 "asInt32(((random(0, 1)<0.2) ? random(10, 39) : random(20, 39)))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 FORMULA
(properties
(name "set general")
(expr 1 "b[square] = 4, GeneralPosition = square"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 13 FORMULA
(properties
(name "random # (preferably up front)")
(expr 1 "asInt32(((random(0, 1)<0.2) ? random(10, 39) : random(20, 39)))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 REPEATUNTILBREAK
(properties
(name "place Marshal (1)"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 15 BREAK)
(device 16 REPEATUNTILBREAK
(properties
(name "place General (2)"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 17 IFTHENELSE
(properties
(name "Is it distant from the marshal?")
(cases 1 "TravelDistance(square, MarshalPosition)>4"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 18 DECLVAR
(properties
(name "Declare Local \'MarshalPosition\'")
(scope con)
(globalName "MarshalPosition"))
(implementation
(value Int32
(data  0))))
(device 19 BREAK)
(device 20 REPEATUNTILBREAK
(properties
(name "place Spy (Near General)"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 21 IFTHENELSE
(properties
(name "Is it near the general?")
(cases 1 "(TravelDistance(square, GeneralPosition)<=2) OR (futilityCount>30)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 22 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 23 FORMULA
(properties
(name "random # (preferably not in front)")
(expr 1 "asInt32(((random(0, 1)<0.2) ? random(0, 19) : random(0, 29)))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 24 DECLVAR
(properties
(name "Declare Local \'GeneralPosition\'")
(scope con)
(globalName "GeneralPosition"))
(implementation
(value Int32
(data  0))))
(device 25 FORMULA
(properties
(name "set spy")
(expr 1 "b[square] = 2"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 26 BREAK)
(device 27 REPEATUNTILBREAK
(properties
(name "place 1st Colonel (3)"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 28 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 29 FORMULA
(properties
(name "random # (preferably up front)")
(expr 1 "asInt32(((random(0, 1)<0.2) ? random(0, 39) : random(20, 39)))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 30 BREAK)
(device 31 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "b[square] = 5, FirstColonel = square"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 32 DECLVAR
(properties
(name "Declare Local \'FirstColonel\'")
(scope con)
(globalName "FirstColonel"))
(implementation
(value Int32
(data  0))))
(device 33 REPEATUNTILBREAK
(properties
(name "place 2nd Colonel (3)"))
(interface
(output 1
(name "Continuous")
(lock name constraints))))
(device 34 IFTHENELSE
(properties
(name "can set here")
(cases 1 "b[square]==0"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 35 FORMULA
(properties
(name "random # (preferably up front)")
(expr 1 "asInt32(((random(0, 1)<0.2) ? random(0, 39) : random(20, 39)))"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 36 IFTHENELSE
(properties
(name "Is it distant from the 1st colonel?")
(cases 1 "(TravelDistance(square, FirstColonel)>4) OR (futilityCount>30)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 37 FORMULA
(properties
(name "set 2nd Colonel")
(expr 1 "b[square] = 6"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 38 BREAK)
(device 39 DECLVAR
(properties
(name "Declare Local \'futilityCount\'")
(scope con)
(globalName "futilityCount"))
(implementation
(value Int32
(data  0))))
(device 40 FORMULA
(properties
(name "futilityCount = 0")
(expr 1 "futilityCount = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 41 FORMULA
(properties
(name "futilityCount++")
(expr 1 "futilityCount = futilityCount+1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 42 FORMULA
(properties
(name "futilityCount = 0")
(expr 1 "futilityCount = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 43 FORMULA
(properties
(name "futilityCount++")
(expr 1 "futilityCount = futilityCount+1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 44 DECLVAR
(properties
(name "Declare Local \'deceptive\'")
(scope con)
(globalName "deceptive"))
(implementation
(value Int32
(data  0))))
(device 45 FORMULA
(properties
(name "set \'deceptive\' bool")
(expr 1 "deceptive = dec"))
(interface
(input 1
(name "dec")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 46 IFTHENELSE
(properties
(name "flag vulnerable?")
(cases 1
"(flagPosition==32 OR flagPosition==33 OR flagPosition==36 OR flagPosition==37) AND deceptive"
))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 47 CALL
(properties
(name "Call Place4s")
(callFunc "Place4s")
(parmMode rev30)))
(device 49 CALL
(properties
(name "Call PlaceColonelNearFlag")
(callFunc "PlaceColonelNearFlag")
(parmMode rev30))
(interface
(output 1
(name "ColonelPos")
(lock name constraints)
(optional yes))))
(device 50 FORMULA
(properties
(name "set 1st Colonel")
(expr 1 "FirstColonel = square"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D2:1 D1:0)
(connect D3:1 D1:1)
(connect D3:1 D2:1)
(connect D7:1 D3:0)
(connect D10:1 D4:0)
(connect D6:1 D4:1)
(connect D6:1 D5:1)
(connect D9:1 D6:0)
(connect D38:0 D7:0)
(connect D1:0 D8:0)
(connect D7:0 D9:0)
(connect D5:1 D10:0)
(connect D6:1 D10:1)
(connect D4:0 D12:0)
(connect D33:0 D13:0)
(connect D15:1 D14:0)
(connect D16:1 D14:1)
(connect D16:1 D15:1)
(connect D13:1 D16:0)
(connect D14:1 D18:0)
(connect D16:1 D18:1)
(connect D18:0 D19:0)
(connect D39:2 D20:0)
(connect D22:1 D21:1)
(connect D20:1 D22:0)
(connect D24:0 D23:0)
(connect D21:1 D24:0)
(connect D22:1 D24:1)
(connect D35:0 D26:0)
(connect D28:1 D27:1)
(connect D26:1 D28:0)
(connect D27:1 D29:0)
(connect D28:1 D29:1)
(connect D29:1 D30:0)
(connect D28:1 D30:1)
(connect D30:0 D31:0)
(connect D9:0 D33:0)
(connect D14:2 D34:0)
(connect D39:0 D35:0)
(connect D27:2 D36:0)
(connect I1:1 D38:1)
(connect D13:0 D39:0)
(connect D26:0 D40:0)
(connect D39:1 D41:0)
(connect D41:1 D42:1)))
(contextCarrier
(active detail)
(detail
(extent 980 772)
(anchorPt -9 191)
(configuration
(devCarrierFor 7
(active icon)
(icon
(extent 135 15))
(open
(extent 240 103))
(pinCenter 730 -110))
(devCarrierFor 8
(active icon)
(icon
(extent 80 15))
(open
(extent 286 38))
(terminals on)
(pinCenter 650 -20))
(devCarrierFor 9
(active icon)
(icon
(extent 146 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 550 -60))
(devCarrierFor 10
(active icon)
(icon
(extent 210 15))
(open
(extent 444 31))
(terminals on)
(pinCenter 340 -60))
(devCarrierFor 11
(active icon)
(icon
(extent 78 15))
(open
(extent 287 38))
(terminals on)
(pinCenter 830 110))
(devCarrierFor 12
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 520 40))
(devCarrierFor 13
(active icon)
(icon
(extent 210 15))
(open
(extent 444 31))
(terminals on)
(pinCenter 340 40))
(devCarrierFor 14
(active icon)
(icon
(extent 121 51)
(iconImage "loop.icn"))
(open
(extent 66 30))
(terminals on)
(pinCenter 150 -100))
(devCarrierFor 15
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 650 10))
(devCarrierFor 16
(active icon)
(icon
(extent 122 51)
(iconImage "loop.icn"))
(open
(extent 66 30))
(terminals on)
(pinCenter 150 0))
(devCarrierFor 17
(active icon)
(icon
(extent 203 25))
(open
(extent 305 51))
(terminals on)
(pinCenter 710 60))
(devCarrierFor 18
(active icon)
(icon
(extent 216 16))
(open
(extent 252 107))
(pinCenter 520 -170))
(devCarrierFor 19
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 830 140))
(devCarrierFor 20
(active icon)
(icon
(extent 177 51)
(iconImage "loop.icn"))
(open
(extent 103 30))
(terminals on)
(pinCenter 150 120))
(devCarrierFor 21
(active icon)
(icon
(extent 151 25))
(open
(extent 461 51))
(terminals on)
(pinCenter 680 170))
(devCarrierFor 22
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 540 150))
(devCarrierFor 23
(active icon)
(icon
(extent 231 15))
(open
(extent 444 31))
(terminals on)
(pinCenter 350 170))
(devCarrierFor 24
(active icon)
(icon
(extent 217 16))
(open
(extent 253 107))
(pinCenter 520 -140))
(devCarrierFor 25
(active icon)
(icon
(extent 49 15))
(open
(extent 118 38))
(terminals on)
(pinCenter 860 200))
(devCarrierFor 26
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 860 230))
(devCarrierFor 27
(active icon)
(icon
(extent 144 51)
(iconImage "loop.icn"))
(open
(extent 103 30))
(terminals on)
(pinCenter 240 270))
(devCarrierFor 28
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 550 320))
(devCarrierFor 29
(active icon)
(icon
(extent 210 15))
(open
(extent 436 31))
(terminals on)
(pinCenter 360 320))
(devCarrierFor 30
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 760 370))
(devCarrierFor 31
(active icon)
(icon
(extent 103 15))
(open
(extent 262 38))
(terminals on)
(pinCenter 760 340))
(devCarrierFor 32
(active icon)
(icon
(extent 190 16))
(open
(extent 253 107))
(pinCenter 510 -110))
(devCarrierFor 33
(active icon)
(icon
(extent 149 51)
(iconImage "loop.icn"))
(open
(extent 103 30))
(terminals on)
(pinCenter 150 420))
(devCarrierFor 34
(active icon)
(icon
(extent 93 25))
(open
(extent 120 51))
(terminals on)
(pinCenter 550 450))
(devCarrierFor 35
(active icon)
(icon
(extent 210 15))
(open
(extent 436 31))
(terminals on)
(pinCenter 360 450))
(devCarrierFor 36
(active icon)
(icon
(extent 223 25))
(open
(extent 428 51))
(terminals on)
(pinCenter 780 470))
(devCarrierFor 37
(active icon)
(icon
(extent 108 15))
(open
(extent 118 38))
(terminals on)
(pinCenter 910 520))
(devCarrierFor 38
(active icon)
(icon
(extent 41 16))
(open)
(terminals on)
(pinCenter 910 560))
(devCarrierFor 39
(active icon)
(icon
(extent 188 16))
(open
(extent 224 107))
(pinCenter 750 -170))
(devCarrierFor 40
(active icon)
(icon
(extent 107 16))
(open
(extent 132 32))
(terminals on)
(pinCenter 150 70))
(devCarrierFor 41
(active icon)
(icon
(extent 99 16))
(open
(extent 214 32))
(terminals on)
(pinCenter 770 230))
(devCarrierFor 42
(active icon)
(icon
(extent 107 16))
(open
(extent 132 32))
(terminals on)
(pinCenter 150 370))
(devCarrierFor 43
(active icon)
(icon
(extent 99 16))
(open
(extent 214 32))
(terminals on)
(pinCenter 640 510))
(devCarrierFor 44
(active icon)
(icon
(extent 173 15))
(open
(extent 240 103))
(pinCenter 750 -140))
(devCarrierFor 45
(active icon)
(icon
(extent 133 16))
(open
(extent 124 32))
(terminals on)
(pinCenter 150 -160))
(devCarrierFor 46
(active icon)
(icon
(extent 111 25))
(open
(extent 646 53))
(terminals on)
(pinCenter 150 210))
(devCarrierFor 47
(active icon)
(icon
(extent 85 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 150 480))
(devCarrierFor 49
(active icon)
(icon
(extent 185 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 460 250))
(devCarrierFor 50
(active icon)
(icon
(extent 103 15))
(open
(extent 262 38))
(terminals on)
(pinCenter 630 250))
(connect D2:1 D1:0
(points 3 625 -70 650 -70 650 -30))
(connect D3:1 D1:1
(points 4 447 -60 460 -60 460 -20 607 -20))
(connect D3:1 D2:1
(points 2 447 -60 474 -60))
(connect D7:1 D3:0
(points 3 213 -100 340 -100 340 -70))
(connect D10:1 D4:0
(points 3 814 50 830 50 830 100))
(connect D6:1 D4:1
(points 4 447 40 460 40 460 110 788 110))
(connect D6:1 D5:1
(points 2 447 40 471 40))
(connect D9:1 D6:0
(points 3 213 0 340 0 340 30))
(connect D38:0 D7:0
(points 2 150 -150 150 -128))
(connect D1:0 D8:0
(points 2 650 -10 650 -1))
(connect D7:0 D9:0
(points 2 150 -72 150 -28))
(connect D5:1 D10:0
(points 3 569 30 710 30 710 45))
(connect D6:1 D10:1
(points 6 447 40 460 40 460 80 590 80 590 60 606 60))
(connect D4:0 D12:0
(points 2 830 120 830 129))
(connect D33:0 D13:0
(points 2 150 80 150 92))
(connect D15:1 D14:0
(points 5 589 140 600 140 600 150 680 150 680 155))
(connect D16:1 D14:1
(points 6 468 170 480 170 480 190 590 190 590 170 602 170))
(connect D16:1 D15:1
(points 4 468 170 480 170 480 150 491 150))
(connect D13:1 D16:0
(points 3 241 120 350 120 350 160))
(connect D14:1 D18:0
(points 5 758 160 790 160 790 170 860 170 860 190))
(connect D16:1 D18:1
(points 8 468 170 480 170 480 120 610 120 610 140 780 140 780 200 833 200))
(connect D18:0 D19:0
(points 2 860 210 860 219))
(connect D39:2 D20:0
(points 3 208 220 240 220 240 242))
(connect D22:1 D21:1
(points 2 467 320 501 320))
(connect D20:1 D22:0
(points 5 314 270 330 270 330 280 360 280 360 310))
(connect D24:0 D23:0
(points 2 760 350 760 359))
(connect D21:1 D24:0
(points 3 599 310 760 310 760 330))
(connect D22:1 D24:1
(points 6 467 320 480 320 480 360 620 360 620 340 706 340))
(connect D35:0 D26:0
(points 2 150 380 150 392))
(connect D28:1 D27:1
(points 2 467 450 501 450))
(connect D26:1 D28:0
(points 3 227 420 360 420 360 440))
(connect D27:1 D29:0
(points 3 599 440 780 440 780 455))
(connect D28:1 D29:1
(points 6 467 450 480 450 480 490 620 490 620 470 666 470))
(connect D29:1 D30:0
(points 3 894 460 910 460 910 510))
(connect D28:1 D30:1
(points 8 467 450 480 450 480 490 570 490 570 540 710 540 710 520 853 520))
(connect D30:0 D31:0
(points 2 910 530 910 549))
(connect D9:0 D33:0
(points 2 150 28 150 59))
(connect D14:2 D34:0
(points 3 758 180 770 180 770 219))
(connect D39:0 D35:0
(points 2 150 225 150 359))
(connect D27:2 D36:0
(points 3 599 460 640 460 640 499))
(connect I1:1 D38:1
(points 4 9 194 20 194 20 -160 81 -160))
(connect D13:0 D39:0
(points 2 150 148 150 195))
(connect D26:0 D40:0
(points 2 150 448 150 469))
(connect D39:1 D41:0
(points 3 208 200 460 200 460 239))
(connect D41:1 D42:1
(points 2 555 250 576 250)))
(stackingOrder 2 7 9 1 5 11 17 4 21 25 26 8 12 18 19 27 30 23 31 28 6 22 32 13
33 34 14 16 15 35 29 36 37 38 0 3 40 20 41 24 42 39 10))))
(context 31
(properties
(name "PossibleOpponentFlagPositions")
(trigMode deg)
(nextID 2)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "board")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "pos")
(expr 1 "PossibleOppFlagPositions"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 NOTE
(properties
(name "Comment")
(text2 1 "Called from Main")))
(configuration
(connect D0:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 395 176)
(anchorPt 32 53)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 27 0))
(open
(extent 213 32))
(terminals on)
(pinCenter 150 70))
(devCarrierFor 1
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 239 42)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 120 0))
(connect D0:1 O1:1
(points 4 309 70 330 70 330 34 362 34)))
(stackingOrder 1 0))))
(context 77
(properties
(name "PotentialFlagPos")
(trigMode deg)
(nextID 8)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "Pos")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORMULA
(properties
(name "# poss")
(expr 1 "totSize(PossibleOppFlagPositions)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "found square?")
(cases 1 "PossibleOppFlagPositions[i]==square"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 5 EXITCONTEXT)
(device 6 CONSTANT
(properties
(name "100"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  100))
(initValue Int32
(data  0))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect D0:1 D1:1)
(connect D1:1 D2:1)
(connect I1:1 D2:2)
(connect D2:1 D3:0)
(connect D1:1 D3:1)
(connect D3:0 D4:0)
(connect D1:0 D5:0)
(connect D3:1 D6:1)
(connect D5:1 D6:2)
(connect D6:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 780 300)
(anchorPt 3 1)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 46 16))
(open
(extent 251 32))
(terminals on)
(pinCenter 60 100))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 140 100))
(devCarrierFor 3
(active icon)
(icon
(extent 101 25))
(open
(extent 278 61))
(terminals on)
(pinCenter 280 110))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 460 160))
(devCarrierFor 5
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 460 210))
(devCarrierFor 6
(active icon)
(icon
(extent 28 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 140 220))
(devCarrierFor 7
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 560 170))
(connect D0:1 D1:1
(points 2 85 100 102 100))
(connect D1:1 D2:1
(points 2 177 100 227 100))
(connect I1:1 D2:2
(points 4 -3 148 200 148 200 120 227 120))
(connect D2:1 D3:0
(points 3 333 100 460 100 460 149))
(connect D1:1 D3:1
(points 4 177 100 210 100 210 160 440 160))
(connect D3:0 D4:0
(points 2 460 170 460 199))
(connect D1:0 D5:0
(points 2 140 128 140 209))
(connect D3:1 D6:1
(points 2 480 160 543 160))
(connect D5:1 D6:2
(points 6 156 220 180 220 180 240 530 240 530 180 543 180))
(connect D6:1 O1:1
(points 4 577 170 600 170 600 148 776 148)))
(stackingOrder 1 2 3 4 6 5 0))))
(context 95
(properties
(name "RandomizeArray")
(trigMode deg)
(nextID 7)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "array")
(optional yes))
(output 1
(type data)
(name "array")
(lock constraints)
(optional yes)))
(deviceList
(device 0 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "data")
(optional yes))
(input 2
(name "rnd")
(optional yes))
(output 1
(name "Record"))))
(device 1 FORCOUNT
(properties
(count 12))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "# elements")
(expr 1 "totsize(ary)"))
(interface
(input 1
(name "ary")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "data element")
(expr 1 "array[i]"))
(interface
(input 1
(name "array")
(optional yes))
(input 2
(name "i")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORMULA
(properties
(name "random #")
(expr 1 "random(0, 1)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 6 FORMULA
(properties
(name "sort em")
(expr 1 "x = sort(ary, \"rnd\", 1), x.data"))
(interface
(input 1
(name "ary")
(optional yes))
(output 1
(name "x")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D3:1 D0:1)
(connect D4:1 D0:2)
(connect D2:1 D1:1)
(connect I1:1 D2:1)
(connect I1:1 D3:1)
(connect D1:1 D3:2)
(connect D3:0 D4:0)
(connect D0:1 D5:1)
(connect D1:0 D5:2)
(connect D5:1 D6:1)
(connect D6:2 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 788 212)
(anchorPt 0 1)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 103 56))
(terminals on)
(pinCenter 450 100))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 190 90))
(devCarrierFor 2
(active icon)
(icon
(extent 75 16))
(open
(extent 104 32))
(terminals on)
(pinCenter 90 90))
(devCarrierFor 3
(active icon)
(icon
(extent 90 25))
(open
(extent 68 42))
(terminals on)
(pinCenter 310 80))
(devCarrierFor 4
(active icon)
(icon
(extent 66 25))
(open
(extent 116 42))
(terminals on)
(pinCenter 310 130))
(devCarrierFor 5
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 570 110))
(devCarrierFor 6
(active icon)
(icon
(extent 51 25))
(open
(extent 211 42))
(terminals on)
(pinCenter 670 110))
(connect D3:1 D0:1
(points 4 357 80 380 80 380 90 403 90))
(connect D4:1 D0:2
(points 4 345 130 380 130 380 110 403 110))
(connect D2:1 D1:1
(points 2 130 90 152 90))
(connect I1:1 D2:1
(points 4 0 104 10 104 10 90 50 90))
(connect I1:1 D3:1
(points 8 0 104 10 104 10 90 30 90 30 40 250 40 250 70 262 70))
(connect D1:1 D3:2
(points 2 227 90 262 90))
(connect D3:0 D4:0
(points 2 310 95 310 115))
(connect D0:1 D5:1
(points 2 497 100 537 100))
(connect D1:0 D5:2
(points 5 190 118 190 170 520 170 520 120 537 120))
(connect D5:1 D6:1
(points 2 603 110 642 110))
(connect D6:2 O1:1
(points 4 698 120 720 120 720 104 787 104)))
(stackingOrder 2 1 3 4 0 5 6))))
(context 19
(properties
(name "RandomizeEm")
(trigMode deg)
(nextID 4)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "aryRand")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "random array")
(expr 1 "x = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], randomize(x, 0, 1)"))
(interface
(output 1
(name "x")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 TORECORD
(properties
(outputType array))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "random")
(optional yes))
(output 1
(name "Record"))))
(device 2 FORMULA
(properties
(name "sort")
(expr 1 "sort(rec, 1, \"random\")"))
(interface
(input 1
(name "rec")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "extract")
(expr 1 "rec.square"))
(interface
(input 1
(name "rec")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect I1:1 D1:1)
(connect D0:2 D1:2)
(connect D1:1 D2:1)
(connect D2:1 D3:1)
(connect D3:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 604 221)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 93 25))
(open
(extent 337 42))
(terminals on)
(pinCenter 110 130))
(devCarrierFor 1
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 112 55))
(terminals on)
(pinCenter 230 90))
(devCarrierFor 2
(active icon)
(icon
(extent 44 23))
(open
(extent 207 37))
(terminals on)
(pinCenter 340 90))
(devCarrierFor 3
(active icon)
(icon
(extent 46 23))
(open
(extent 102 37))
(terminals on)
(pinCenter 410 90))
(connect I1:1 D1:1
(points 4 0 110 10 110 10 80 183 80))
(connect D0:2 D1:2
(points 4 159 140 170 140 170 100 183 100))
(connect D1:1 D2:1
(points 2 277 90 315 90))
(connect D2:1 D3:1
(points 2 364 90 384 90))
(connect D3:1 O1:1
(points 4 435 90 460 90 460 110 603 110)))
(stackingOrder 2 3 0 1))))
(context 17
(properties
(name "RemoveFromPossibleFlagPos")
(trigMode deg)
(nextID 8)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "# in list")
(expr 1 "totSize(PossibleOppFlagPositions)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "square in list?")
(cases 1 "PossibleOppFlagPositions[i]==square"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "remove square from front")
(expr 1 "PossibleOppFlagPositions = PossibleOppFlagPositions[1:*]"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 IFTHENELSE
(properties
(name "i == 0, i==last, i==middle?")
(cases 2 "i==0" "i==(numPoss-1)"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "numPoss")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "remove square from middle")
(expr 1
"PossibleOppFlagPositions = conCat(PossibleOppFlagPositions[0:i-1], PossibleOppFlagPositions[i+1:*])"
))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "remove square from end")
(expr 1 "PossibleOppFlagPositions = PossibleOppFlagPositions[0:numSquares-2]"))
(interface
(input 1
(name "numSquares")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 EXITCONTEXT)
(configuration
(connect D0:1 D1:1)
(connect D1:1 D2:1)
(connect I1:1 D2:2)
(connect D4:1 D3:0)
(connect D2:1 D4:0)
(connect D1:1 D4:1)
(connect D0:1 D4:2)
(connect D4:3 D5:0)
(connect D1:1 D5:1)
(connect D4:2 D6:0)
(connect D0:1 D6:1)
(connect D4:0 D7:0)))
(contextCarrier
(active detail)
(detail
(extent 916 373)
(anchorPt 31 -24)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 48 16))
(open
(extent 251 32))
(terminals on)
(pinCenter 70 90))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 150 90))
(devCarrierFor 2
(active icon)
(icon
(extent 96 25))
(open
(extent 268 53))
(terminals on)
(pinCenter 290 100))
(devCarrierFor 3
(active icon)
(icon
(extent 176 25))
(open
(extent 462 43))
(terminals on)
(pinCenter 530 240))
(devCarrierFor 4
(active icon)
(icon
(extent 176 34))
(open
(extent 132 62))
(terminals on)
(pinCenter 450 140))
(devCarrierFor 5
(active icon)
(icon
(extent 189 25))
(open
(extent 729 46))
(terminals on)
(pinCenter 760 330))
(devCarrierFor 6
(active icon)
(icon
(extent 170 34))
(open
(extent 588 56))
(terminals on)
(pinCenter 630 280))
(devCarrierFor 7
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 450 190))
(connect D0:1 D1:1
(points 2 96 90 112 90))
(connect D1:1 D2:1
(points 2 187 90 239 90))
(connect I1:1 D2:2
(points 4 -31 210 220 210 220 110 239 110))
(connect D4:1 D3:0
(points 5 540 130 560 130 560 180 530 180 530 225))
(connect D2:1 D4:0
(points 3 340 90 450 90 450 120))
(connect D1:1 D4:1
(points 6 187 90 220 90 220 70 350 70 350 130 359 130))
(connect D0:1 D4:2
(points 4 96 90 90 90 90 150 359 150))
(connect D4:3 D5:0
(points 3 540 150 760 150 760 315))
(connect D1:1 D5:1
(points 12 187 90 220 90 220 70 350 70 350 130 340 130 340 240 410 240 410 280
520 280 520 330 663 330))
(connect D4:2 D6:0
(points 3 540 140 630 140 630 260))
(connect D0:1 D6:1
(points 8 96 90 90 90 90 150 330 150 330 290 530 290 530 280 542 280))
(connect D4:0 D7:0
(points 2 450 159 450 179)))
(stackingOrder 1 7 4 0 2 5 6 3))))
(context 154
(properties
(name "RemoveGuardPieceMoves")
(trigMode deg)
(nextID 6)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "unguardedMoves")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "move")
(expr 1 "moves[i]"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "# moves")
(expr 1 "totSize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 IFTHENELSE
(properties
(name "guard piece?")
(cases 1 "IsAGuardPiece[KnownBoard[move.from]-1000]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 5 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(configuration
(connect I1:1 D0:1)
(connect D1:1 D0:2)
(connect D2:1 D1:1)
(connect I1:1 D2:1)
(connect D0:1 D3:1)
(connect D3:2 D4:0)
(connect D0:1 D4:1)
(connect D4:1 D5:1)
(connect D1:0 D5:2)
(connect D5:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 585 290)
(anchorPt -4 -100)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 38 45))
(open
(extent 86 85))
(terminals on)
(pinCenter 280 240))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 190 240))
(devCarrierFor 2
(active icon)
(icon
(extent 58 16))
(open
(extent 127 32))
(terminals on)
(pinCenter 100 240))
(devCarrierFor 3
(active icon)
(icon
(extent 91 25))
(open
(extent 325 53))
(terminals on)
(pinCenter 370 240))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 450 280))
(devCarrierFor 5
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 530 290))
(connect I1:1 D0:1
(points 8 4 244 10 244 10 240 50 240 50 190 250 190 250 230 258 230))
(connect D1:1 D0:2
(points 4 227 240 240 240 240 250 258 250))
(connect D2:1 D1:1
(points 2 131 240 152 240))
(connect I1:1 D2:1
(points 4 4 244 10 244 10 240 68 240))
(connect D0:1 D3:1
(points 2 301 240 322 240))
(connect D3:2 D4:0
(points 3 418 250 450 250 450 269))
(connect D0:1 D4:1
(points 4 301 240 310 240 310 280 430 280))
(connect D4:1 D5:1
(points 2 470 280 497 280))
(connect D1:0 D5:2
(points 5 190 268 190 310 480 310 480 300 497 300))
(connect D5:1 O1:1
(points 4 563 290 580 290 580 244 588 244)))
(stackingOrder 1 2 4 0 3 5))))
(context 60
(properties
(name "RemoveOppDeadPiece")
(trigMode deg)
(nextID 34)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "fromSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "deadPiece1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "deadPiece2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 2 FORMULA
(properties
(name "num dead ++")
(expr 1
"OpponentPieceTable[TypeOfPiece[p-1]].known_dead = OpponentPieceTable[TypeOfPiece[p-1]].known_dead+1, NumOppMovablePiecesRemaining = NumOppMovablePiecesRemaining-((p>=35 AND p<=40) ? 0 : 1)"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 IFTHENELSE
(properties
(name "opponent or my dead piece?")
(cases 2 "piece>0 AND piece<1000" "piece>1000"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 12 IFTHENELSE
(properties
(name "opponent or my dead piece?")
(cases 2 "piece>0 AND piece<1000" "piece>1000"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 15 FORMULA
(properties
(name "num dead ++")
(expr 1
"OpponentPieceTable[TypeOfPiece[p-1]].known_dead = OpponentPieceTable[TypeOfPiece[p-1]].known_dead+1, NumOppMovablePiecesRemaining = NumOppMovablePiecesRemaining-((p>=35 AND p<=40) ? 0 : 1)"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 16 FORMULA
(properties
(name "num dead ++")
(expr 1
"MyPieceTable[TypeOfPiece[p-1001]].known_dead = MyPieceTable[TypeOfPiece[p-1001]].known_dead+1, NumMyMovablePiecesRemaining = NumMyMovablePiecesRemaining-((p>=1035 AND p<=1040) ? 0 : 1)"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 17 FORMULA
(properties
(name "num dead ++")
(expr 1
"MyPieceTable[TypeOfPiece[p-1001]].known_dead = MyPieceTable[TypeOfPiece[p-1001]].known_dead+1, NumMyMovablePiecesRemaining = NumMyMovablePiecesRemaining-((p>=1035 AND p<=1040) ? 0 : 1)"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 IFTHENELSE
(properties
(name "Did opponent lose a bomb?")
(cases 1 "piece>=35 AND piece<=40"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 19 IFTHENELSE
(properties
(name "Did opponent lose a bomb?")
(cases 1 "piece>=35 AND piece<=40"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 20 FORMULA
(properties
(name "miner #")
(expr 1 "KnownBoard[fromSquare]-1022"))
(interface
(input 1
(name "fromSquare")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 FORMULA
(properties
(name "OurMinerBombKillCount++")
(expr 1 "OurMinerBombKillCount[i] = OurMinerBombKillCount[i]+1"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 23 FORMULA
(properties
(name "OurMinerBombKillCount++")
(expr 1 "OurMinerBombKillCount[i] = OurMinerBombKillCount[i]+1"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 26 IFTHENELSE
(properties
(name "Kamikaze piece?")
(cases 1 "piece1==KamikazePiece OR piece2==KamikazePiece"))
(interface
(input 1
(name "piece1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "piece2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 27 FORMULA
(properties
(name "KamikazePiece = 0")
(expr 1 "KamikazePiece = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 29 CALL
(properties
(name "Call RemoveProtectorPiece")
(callFunc "RemoveProtectorPiece")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 30 CALL
(properties
(name "Call RemoveProtectorPiece")
(callFunc "RemoveProtectorPiece")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(device 31 IFTHENELSE
(properties
(name "Strafing piece?")
(cases 1 "piece1==StrafingPiece OR piece2==StrafingPiece"))
(interface
(input 1
(name "piece1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "piece2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 33 FORMULA
(properties
(name "StrafingPiece = 0")
(expr 1 "StrafingPiece = 0")))
(configuration
(connect D1:1 D0:0)
(connect I2:1 D0:1)
(connect I2:1 D1:1)
(connect I3:1 D2:1)
(connect D2:1 D3:0)
(connect I3:1 D3:1)
(connect D1:2 D4:0)
(connect I2:1 D4:1)
(connect D2:2 D5:0)
(connect I3:1 D5:1)
(connect D0:0 D6:0)
(connect I2:1 D6:1)
(connect D3:0 D7:0)
(connect I3:1 D7:1)
(connect I1:1 D8:1)
(connect D6:1 D9:0)
(connect D8:1 D9:1)
(connect D7:1 D10:0)
(connect D8:1 D10:1)
(connect I2:1 D11:1)
(connect I3:1 D11:2)
(connect D11:1 D12:0)
(connect I2:1 D13:1)
(connect I3:1 D14:1)
(connect D11:0 D15:0)
(connect I2:1 D15:1)
(connect I3:1 D15:2)
(connect D15:1 D16:0)))
(contextCarrier
(active detail)
(detail
(extent 953 639)
(anchorPt -92 50)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 91 16))
(open
(extent 1415 32))
(terminals on)
(pinCenter 600 100))
(devCarrierFor 11
(active icon)
(icon
(extent 199 34))
(open
(extent 194 62))
(terminals on)
(pinCenter 300 60))
(devCarrierFor 12
(active icon)
(icon
(extent 199 34))
(open
(extent 194 62))
(terminals on)
(pinCenter 350 280))
(devCarrierFor 15
(active icon)
(icon
(extent 91 16))
(open
(extent 1383 32))
(terminals on)
(pinCenter 590 260))
(devCarrierFor 16
(active icon)
(icon
(extent 91 16))
(open
(extent 1355 32))
(terminals on)
(pinCenter 430 180))
(devCarrierFor 17
(active icon)
(icon
(extent 91 16))
(open
(extent 1355 32))
(terminals on)
(pinCenter 530 360))
(devCarrierFor 18
(active icon)
(icon
(extent 191 25))
(open
(extent 200 53))
(terminals on)
(pinCenter 600 150))
(devCarrierFor 19
(active icon)
(icon
(extent 191 25))
(open
(extent 200 53))
(terminals on)
(pinCenter 590 310))
(devCarrierFor 20
(active icon)
(icon
(extent 51 16))
(open
(extent 233 32))
(terminals on)
(pinCenter 240 0))
(devCarrierFor 22
(active icon)
(icon
(extent 183 16))
(open
(extent 390 32))
(terminals on)
(pinCenter 820 190))
(devCarrierFor 23
(active icon)
(icon
(extent 183 16))
(open
(extent 390 32))
(terminals on)
(pinCenter 830 340))
(devCarrierFor 26
(active icon)
(icon
(extent 116 25))
(open
(extent 367 53))
(terminals on)
(pinCenter 260 410))
(devCarrierFor 27
(active icon)
(icon
(extent 130 16))
(open
(extent 153 32))
(terminals on)
(pinCenter 370 460))
(devCarrierFor 29
(active icon)
(icon
(extent 190 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 580 410))
(devCarrierFor 30
(active icon)
(icon
(extent 190 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 580 450))
(devCarrierFor 31
(active icon)
(icon
(extent 104 25))
(open
(extent 367 53))
(terminals on)
(pinCenter 250 490))
(devCarrierFor 33
(active icon)
(icon
(extent 118 16))
(open
(extent 142 32))
(terminals on)
(pinCenter 390 510))
(connect D1:1 D0:0
(points 3 402 50 600 50 600 89))
(connect I2:1 D0:1
(points 8 92 269 160 269 160 140 420 140 420 110 490 110 490 100 552 100))
(connect I2:1 D1:1
(points 4 92 269 160 269 160 60 198 60))
(connect I3:1 D2:1
(points 4 92 479 160 479 160 280 248 280))
(connect D2:1 D3:0
(points 5 452 270 470 270 470 230 590 230 590 249))
(connect I3:1 D3:1
(points 8 92 479 160 479 160 290 430 290 430 270 460 270 460 260 542 260))
(connect D1:2 D4:0
(points 3 402 60 430 60 430 169))
(connect I2:1 D4:1
(points 6 92 269 160 269 160 140 350 140 350 180 382 180))
(connect D2:2 D5:0
(points 5 452 280 470 280 470 340 530 340 530 349))
(connect I3:1 D5:1
(points 4 92 479 160 479 160 360 482 360))
(connect D0:0 D6:0
(points 2 600 110 600 135))
(connect I2:1 D6:1
(points 8 92 269 160 269 160 140 420 140 420 110 490 110 490 150 502 150))
(connect D3:0 D7:0
(points 2 590 270 590 295))
(connect I3:1 D7:1
(points 8 92 479 160 479 160 290 430 290 430 270 460 270 460 310 492 310))
(connect I1:1 D8:1
(points 4 92 59 148 59 148 0 212 0))
(connect D6:1 D9:0
(points 3 698 140 820 140 820 179))
(connect D8:1 D9:1
(points 4 268 0 710 0 710 190 726 190))
(connect D7:1 D10:0
(points 3 688 300 830 300 830 329))
(connect D8:1 D10:1
(points 4 268 0 710 0 710 340 736 340))
(connect I2:1 D11:1
(points 4 92 269 150 269 150 400 199 400))
(connect I3:1 D11:2
(points 4 92 479 141 479 141 420 199 420))
(connect D11:1 D12:0
(points 3 320 400 370 400 370 449))
(connect I2:1 D13:1
(points 8 92 269 150 269 150 400 180 400 180 380 380 380 380 410 482 410))
(connect I3:1 D14:1
(points 6 92 479 180 479 180 490 460 490 460 450 482 450))
(connect D11:0 D15:0
(points 4 260 425 260 450 250 450 250 475))
(connect I2:1 D15:1
(points 4 92 269 70 269 70 480 195 480))
(connect I3:1 D15:2
(points 4 92 479 180 479 180 500 195 500))
(connect D15:1 D16:0
(points 3 304 480 390 480 390 499)))
(stackingOrder 6 7 9 10 4 0 3 1 5 2 11 12 13 14 15 16 8))))
(context 145
(properties
(name "RemoveProtectorPiece")
(trigMode deg)
(nextID 11)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 2 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "# protectors")
(expr 1 "totSize(BombProtectorPieces)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 IFTHENELSE
(properties
(name "protector?")
(cases 1 "BombProtectorPieces[i]==piece"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 EXITCONTEXT)
(device 10 FORMULA
(properties
(name "set piece = -1 (for now)")
(expr 1 "BombProtectorPieces[i] = -1"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(configuration
(connect D1:1 D0:1)
(connect D0:1 D2:1)
(connect I1:1 D2:2)
(connect D4:0 D3:0)
(connect D2:1 D4:0)
(connect D0:1 D4:1)))
(contextCarrier
(active detail)
(detail
(extent 752 270)
(anchorPt 1 -24)
(configuration
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 210 130))
(devCarrierFor 4
(active icon)
(icon
(extent 83 16))
(open
(extent 222 32))
(terminals on)
(pinCenter 110 130))
(devCarrierFor 5
(active icon)
(icon
(extent 71 25))
(open
(extent 226 54))
(terminals on)
(pinCenter 340 140))
(devCarrierFor 6
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 480 190))
(devCarrierFor 10
(active icon)
(icon
(extent 160 16))
(open
(extent 231 42))
(terminals on)
(pinCenter 480 150))
(connect D1:1 D0:1
(points 2 154 130 172 130))
(connect D0:1 D2:1
(points 2 247 130 302 130))
(connect I1:1 D2:2
(points 6 -1 158 10 158 10 180 270 180 270 150 302 150))
(connect D4:0 D3:0
(points 2 480 160 480 179))
(connect D2:1 D4:0
(points 5 378 130 400 130 400 120 480 120 480 139))
(connect D0:1 D4:1
(points 6 247 130 280 130 280 110 390 110 390 150 397 150)))
(stackingOrder 1 0 3 2 4))))
(context 46
(properties
(name "SaveGameInfo")
(trigMode deg)
(nextID 31)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "FileName")
(requires
(datatype Text)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "KnownBoard")
(expr 1 "KnownBoard"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORMULA
(properties
(name "possibleOppFlagPositions")
(expr 1 "computer.possibleOppFlagPositions()"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 TOFILE
(properties
(transactions 1 "WRITE TEXT knownBoard EOL"))
(interface
(input 1
(name "knownBoard")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes)))
(implementation
(attr iopath file append "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 3 TOFILE
(properties
(transactions 1 "WRITE TEXT possFlagPos EOL"))
(interface
(input 1
(name "possFlagPos")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes)))
(implementation
(attr iopath file append "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 4 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 5 NOTE
(properties
(name "Comment")
(text2 13 "This function writes all information to"
"the specified file, that is needed to"
"recreate the current game state (as the"
"computer strategy knows it).  The current" "file format is:" ""
"A bunch of scalars (mostly bools)" "KnownBoard (Int32 Array 100 elmts)"
"OpponentsKnownBoard (Int32 Array 100 elmts)"
"OpponentPieceTable (Record Array 12 elmts)"
"MyPieceTAble (Record Array 12 elmts)"
"PossibleOppFlagPositions (Int32 Array < 40 elmts)" "")))
(device 7 TOFILE
(properties
(name "To File (Scalars)")
(transactions 12 "WRITE TEXT MoveNumber EOL"
"WRITE TEXT NumOppMovablePiecesRemaining EOL"
"WRITE TEXT NumMyMovablePiecesRemaining EOL"
"WRITE TEXT NumPiecesKnownToBeMovable EOL"
"WRITE TEXT NumPiecesTakenByKamikaze EOL" "WRITE CONTAINER LastOpponentMove"
"WRITE TEXT KillCount EOL" "WRITE TEXT DeceptiveLayout EOL"
"WRITE TEXT FlagPosition EOL" "WRITE TEXT KamikazePiece EOL"
"WRITE TEXT OurMinerBombKillCount EOL" "WRITE TEXT OpponentBombLocations EOL"))
(interface
(input 1
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes)))
(implementation
(attr iopath file append "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 8 TOFILE
(properties
(transactions 1 "WRITE TEXT oppKnownBoard EOL"))
(interface
(input 1
(name "oppKnownBoard")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes)))
(implementation
(attr iopath file append "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 9 FORMULA
(properties
(name "OpponentsKnownBoard")
(expr 1 "OpponentsKnownBoard"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORMULA
(properties
(name "OpponentPieceTable")
(expr 1 "OpponentPieceTable"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 TOFILE
(properties
(transactions 1 "WRITE CONTAINER oppPieceTable"))
(interface
(input 1
(name "oppPieceTable")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 2
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes)))
(implementation
(attr iopath file append "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 13 FORMULA
(properties
(name "MyPieceTable")
(expr 1 "MyPieceTable"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 25 FORMULA
(properties
(name "OurMoves")
(expr 1 "OurMoves"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 26 TOFILE
(properties
(transactions 1 "WRITE CONTAINER myPieceTable"))
(interface
(input 1
(name "myPieceTable")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 2
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes)))
(implementation
(attr iopath file append "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 27 TOFILE
(properties
(transactions 1 "WRITE CONTAINER ourMoves"))
(interface
(input 1
(name "ourMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 2
(type control)
(name "File Name")
(requires
(datatype Text)
(shape "Scalar"))
(lock name constraints)
(optional yes)))
(implementation
(attr iopath file append "D:\\tmp\\boof.str"
(readTerm "\n")
(fs "\r\n")
(eol "\r\n")
(multiField fullSyntax)
(arrayFormat block))))
(device 30 DO
(interface
(output 1
(name "Do"))))
(configuration
(connect D4:0 D0:0)
(connect D12:0 D1:0)
(connect D0:1 D2:1)
(connect D4:1 D2:2)
(connect D1:1 D3:1)
(connect D4:1 D3:2)
(connect I1:1 D4:1)
(connect D15:0 D6:0)
(connect D4:1 D6:1)
(connect D8:1 D7:1)
(connect D4:1 D7:2)
(connect D0:0 D8:0)
(connect D8:0 D9:0)
(connect D9:1 D10:1)
(connect D4:1 D10:2)
(connect D9:0 D11:0)
(connect D11:0 D12:0)
(connect D11:1 D13:1)
(connect D4:1 D13:2)
(connect D12:1 D14:1)
(connect D4:1 D14:2)
(connect D4:1 D15:0)))
(contextCarrier
(active detail)
(detail
(extent 918 706)
(anchorPt -3 43)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 88 16))
(open
(extent 114 32))
(terminals on)
(pinCenter 140 210))
(devCarrierFor 1
(active icon)
(icon
(extent 180 16))
(open
(extent 271 32))
(terminals on)
(pinCenter 140 480))
(devCarrierFor 2
(active icon)
(icon
(extent 48 25))
(open
(extent 236 133))
(terminals on)
(pinCenter 310 180))
(devCarrierFor 3
(active icon)
(icon
(extent 48 25))
(open
(extent 236 133))
(terminals on)
(pinCenter 300 490))
(devCarrierFor 4
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 140 20))
(devCarrierFor 5
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 385 196)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 690 130))
(devCarrierFor 7
(active icon)
(icon
(extent 115 25))
(open
(extent 422 325))
(terminals on)
(pinCenter 270 50))
(devCarrierFor 8
(active icon)
(icon
(extent 48 25))
(open
(extent 216 133))
(terminals on)
(pinCenter 310 240))
(devCarrierFor 9
(active icon)
(icon
(extent 165 16))
(open
(extent 187 32))
(terminals on)
(pinCenter 140 270))
(devCarrierFor 10
(active icon)
(icon
(extent 147 16))
(open
(extent 168 32))
(terminals on)
(pinCenter 140 330))
(devCarrierFor 11
(active icon)
(icon
(extent 48 25))
(open
(extent 226 133))
(terminals on)
(pinCenter 310 320))
(devCarrierFor 13
(active icon)
(icon
(extent 97 16))
(open
(extent 168 32))
(terminals on)
(pinCenter 140 370))
(devCarrierFor 25
(active icon)
(icon
(extent 71 16))
(open
(extent 99 32))
(terminals on)
(pinCenter 140 420))
(devCarrierFor 26
(active icon)
(icon
(extent 48 25))
(open
(extent 226 133))
(terminals on)
(pinCenter 310 370))
(devCarrierFor 27
(active icon)
(icon
(extent 48 25))
(open
(extent 324 139))
(terminals on)
(pinCenter 310 430))
(devCarrierFor 30
(active icon)
(icon
(extent 24 16))
(open)
(terminals on)
(pinCenter 270 0))
(connect D4:0 D0:0
(points 2 140 30 140 199))
(connect D12:0 D1:0
(points 2 140 430 140 469))
(connect D0:1 D2:1
(points 4 186 210 220 210 220 170 283 170))
(connect D4:1 D2:2
(points 8 160 20 180 20 180 50 190 50 190 90 250 90 250 190 283 190))
(connect D1:1 D3:1
(points 2 232 480 273 480))
(connect D4:1 D3:2
(points 10 160 20 180 20 180 50 40 50 40 450 200 450 200 440 250 440 250 500 273
500))
(connect I1:1 D4:1
(points 4 3 309 10 309 10 20 120 20))
(connect D15:0 D6:0
(points 2 270 10 270 35))
(connect D4:1 D6:1
(points 4 160 20 180 20 180 50 210 50))
(connect D8:1 D7:1
(points 4 225 270 260 270 260 230 283 230))
(connect D4:1 D7:2
(points 8 160 20 180 20 180 50 190 50 190 90 250 90 250 250 283 250))
(connect D0:0 D8:0
(points 2 140 220 140 259))
(connect D8:0 D9:0
(points 2 140 280 140 319))
(connect D9:1 D10:1
(points 4 216 330 240 330 240 310 283 310))
(connect D4:1 D10:2
(points 10 160 20 180 20 180 50 40 50 40 450 200 450 200 440 250 440 250 330 283
330))
(connect D9:0 D11:0
(points 2 140 340 140 359))
(connect D11:0 D12:0
(points 2 140 380 140 409))
(connect D11:1 D13:1
(points 4 191 370 210 370 210 360 283 360))
(connect D4:1 D13:2
(points 10 160 20 180 20 180 50 40 50 40 450 200 450 200 440 250 440 250 380 283
380))
(connect D12:1 D14:1
(points 2 178 420 283 420))
(connect D4:1 D14:2
(points 8 160 20 180 20 180 50 40 50 40 450 200 450 200 440 283 440))
(connect D4:1 D15:0
(points 5 160 20 180 20 180 -30 270 -30 270 -11)))
(stackingOrder 9 8 11 2 7 10 13 1 5 3 12 14 15 6 0 4))))
(context 18
(properties
(name "SetUpBoard")
(trigMode deg)
(nextID 74)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "color")
(requires
(datatype Text)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "CompBoard")
(lock constraints)
(optional yes)))
(deviceList
(device 8 FORMULA
(properties
(name "set \'InitialBoard\'")
(expr 1 "InitialBoard = board"))
(interface
(input 1
(name "board")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 NOTE
(properties
(name "Comment -- Known Board")
(text2 32 "The \'KnownBoard\' library global is a 100-element array "
"which expresses the Game Board as the computer \'knows\' it.  "
"The values any square can contain are as follows:" ""
"-1           = Unknown opponent piece"
"-2           = Unknown opponent piece (non-bomb/flag)"
"-10          = Can\'t move here (lakes)"
"0            = Open square (no game piece)" "1            = Opponent Flag"
"2            = Opponent Spy" "3            = Opponent Marshall (Rank #1)"
"4            = Opponent General (Rank #2)"
"5-6          = Opponent Colonel (Rank #3)"
"7-9          = Opponent Major (Rank #4)"
"10-13        = Opponent Captain (Rank #5)"
"14-17        = Opponent Lieutenant (Rank #6)"
"18-21        = Opponent Sergeant (Rank #7)"
"22-26        = Opponent Miner (Rank #8)"
"27-34        = Opponent Scout (Rank #9)" "35-40        = Opponent Bomb"
"1001         = Computer Flag" "1002         = Computer Spy"
"1003         = Computer Marshal (Rank #1)"
"1004         = Computer General (Rank #2)"
"1005-1006    = Computer Colonel (Rank #3)"
"1007-1009    = Computer Major (Rank #4)"
"1010-1013    = Computer Captain (Rank #5)"
"1014-1017    = Computer Lieutenant (Rank #6)"
"1018-1021    = Computer Sergeant (Rank #7)"
"1022-1026    = Computer Miner (Rank #8)"
"1027-1034    = Computer Scout (Rank #9)" "1035-1040    = Computer Bomb")))
(device 23 CALL
(properties
(name "Call LayoutPieces")
(callFunc "LayoutPieces")
(parmMode rev30))
(interface
(output 1
(name "board")
(lock name constraints)
(optional yes))))
(device 66 FORMULA
(properties
(name "init \'KnownBoard\'")
(expr 1 "KnownBoard = ary"))
(interface
(input 1
(name "ary")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 67 ALLOCATEARRAY
(properties
(name "Alloc Integer Array \'0\'"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "100")
(type "Int32")
(initEnum "Init Value")
(initialValue
(data  0))
(from 1)
(thru 10)))
(device 68 DECLVAR
(properties
(name "Declare Local \'InitialBoard\'")
(scope con)
(globalName "InitialBoard"))
(implementation
(value Int32
(numDims 1)
(size 1)
(data  [ 0 ]))))
(device 69 FORMULA
(properties
(name "set \'KnownBoard\'")
(expr 1
"KnownBoard[0:39] = (InitialBoard[0:*]+1000), KnownBoard[60:99] = unknown"))
(interface
(input 1
(name "unknown")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 70 ALLOCATEARRAY
(properties
(name "Alloc Integer Array \'-1\'"))
(interface
(output 1
(name "Array")
(tag "Array")))
(implementation
(numDims 1)
(dimSizes "40")
(type "Int32")
(initEnum "Init Value")
(initialValue
(data  -1))
(from 1)
(thru 10)))
(device 71 FORMULA
(properties
(name "set \'KnownBoard\' lakes")
(expr 1
"KnownBoard[42:43] = [-3, -3], knownboard[52:53] = [-3, -3], knownboard[46:47] = [-3, -3], knownboard[56:57] = [-3, -3]"
)))
(device 73 CONTEXT
(properties
(name "Initialize Bomb Protectors")
(trigMode deg)
(nextID 20)
(popupTitleText "UserObject")
(popupMoveable 1))
(deviceList
(device 1 FORRANGE
(properties
(name "For (0-29)")
(from 0)
(thru 29)
(step 1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "bomb?")
(cases 1 "KnownBoard[loc]>=1035"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORMULA
(properties
(name "border square of bomb")
(expr 1 "BorderSquares[from, i]"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORCOUNT
(properties
(name "For (0-3)")
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 6 IFTHENELSE
(properties
(name "legal square?")
(cases 1 "loc!=-1"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 13 CONTEXT
(properties
(name "Add If applicable")
(trigMode deg)
(nextID 4)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "pieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "Is already a bomb prot?")
(cases 1 "IsABombProtector(pieceLoc)"))
(interface
(input 1
(name "pieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "piece @ loc")
(expr 1 "KnownBoard[loc]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "legal bomb protector?")
(cases 1 "piece>=1007 AND piece<=1021"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 CALL
(properties
(name "Call AddProtectorPiece")
(callFunc "AddProtectorPiece")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect D0:2 D1:0)
(connect I1:1 D1:1)
(connect D1:1 D2:1)
(connect D2:1 D3:0)
(connect D1:1 D3:1)))
(contextCarrier
(active detail)
(detail
(extent 628 238)
(anchorPt 0 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 163 25))
(open
(extent 217 56))
(terminals on)
(pinCenter 140 80))
(devCarrierFor 1
(active icon)
(icon
(extent 81 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 240 120))
(devCarrierFor 2
(active icon)
(icon
(extent 151 25))
(open
(extent 221 59))
(terminals on)
(pinCenter 380 120))
(devCarrierFor 3
(active icon)
(icon
(extent 160 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 470 170))
(connect I1:1 D0:1
(points 4 0 118 10 118 10 80 56 80))
(connect D0:2 D1:0
(points 3 224 90 240 90 240 109))
(connect I1:1 D1:1
(points 4 0 118 98 118 98 120 197 120))
(connect D1:1 D2:1
(points 2 283 120 302 120))
(connect D2:1 D3:0
(points 3 458 110 470 110 470 159))
(connect D1:1 D3:1
(points 4 283 120 290 120 290 170 387 170)))
(stackingOrder 0 1 2 3))))
(device 15 CONTEXT
(properties
(name "Add If applicable (clone)")
(trigMode deg)
(nextID 4)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(input 1
(name "pieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "Is already a bomb prot?")
(cases 1 "IsABombProtector(pieceLoc)"))
(interface
(input 1
(name "pieceLoc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "piece @ loc")
(expr 1 "KnownBoard[loc]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "legal bomb protector?")
(cases 1 "piece>=1007 AND piece<=1021"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 CALL
(properties
(name "Call AddProtectorPiece")
(callFunc "AddProtectorPiece")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(configuration
(connect I1:1 D0:1)
(connect D0:2 D1:0)
(connect I1:1 D1:1)
(connect D1:1 D2:1)
(connect D2:1 D3:0)
(connect D1:1 D3:1)))
(contextCarrier
(active detail)
(detail
(extent 628 238)
(anchorPt -1 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 163 25))
(open
(extent 217 56))
(terminals on)
(pinCenter 140 80))
(devCarrierFor 1
(active icon)
(icon
(extent 81 16))
(open
(extent 140 32))
(terminals on)
(pinCenter 240 120))
(devCarrierFor 2
(active icon)
(icon
(extent 151 25))
(open
(extent 221 59))
(terminals on)
(pinCenter 380 120))
(devCarrierFor 3
(active icon)
(icon
(extent 160 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 470 170))
(connect I1:1 D0:1
(points 4 1 118 10 118 10 80 56 80))
(connect D0:2 D1:0
(points 3 224 90 240 90 240 109))
(connect I1:1 D1:1
(points 4 1 118 98 118 98 120 197 120))
(connect D1:1 D2:1
(points 2 283 120 302 120))
(connect D2:1 D3:0
(points 3 458 110 470 110 470 159))
(connect D1:1 D3:1
(points 4 283 120 290 120 290 170 387 170)))
(stackingOrder 0 1 2 3))))
(device 16 FORRANGE
(properties
(name "For (30-39)")
(from 30)
(thru 39)
(step 1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 17 IFTHENELSE
(properties
(name "bomb?")
(cases 1 "KnownBoard[loc]>=1035"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 19 FORMULA
(properties
(name "behind square of bomb")
(expr 1 "from-10"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D0:1 D1:1)
(connect D0:1 D2:1)
(connect D3:1 D2:2)
(connect D1:1 D3:0)
(connect D2:1 D4:1)
(connect D4:1 D5:0)
(connect D2:1 D5:1)
(connect D9:1 D6:1)
(connect D0:0 D7:0)
(connect D7:1 D8:1)
(connect D8:1 D9:0)
(connect D7:1 D9:1)))
(contextCarrier
(active detail)
(detail
(extent 819 442)
(anchorPt 2 0)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 71 52)
(iconImage "loop.icn"))
(open
(extent 110 82))
(pinCenter 80 120))
(devCarrierFor 2
(active icon)
(icon
(extent 47 25))
(open
(extent 186 53))
(terminals on)
(pinCenter 170 120))
(devCarrierFor 4
(active icon)
(icon
(extent 159 25))
(open
(extent 217 41))
(terminals on)
(pinCenter 360 160))
(devCarrierFor 5
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 210 180))
(devCarrierFor 6
(active icon)
(icon
(extent 94 25))
(open
(extent 72 53))
(terminals on)
(pinCenter 540 150))
(devCarrierFor 13
(active icon)
(icon
(extent 114 16))
(terminals on)
(pinCenter 630 200))
(devCarrierFor 15
(active icon)
(icon
(extent 167 16))
(terminals on)
(pinCenter 520 280))
(devCarrierFor 16
(active icon)
(icon
(extent 80 52)
(iconImage "loop.icn"))
(open
(extent 116 82))
(pinCenter 80 260))
(devCarrierFor 17
(active icon)
(icon
(extent 47 25))
(open
(extent 186 53))
(terminals on)
(pinCenter 180 260))
(devCarrierFor 19
(active icon)
(icon
(extent 160 25))
(open
(extent 106 41))
(terminals on)
(pinCenter 320 280))
(connect D0:1 D1:1
(points 2 118 120 144 120))
(connect D0:1 D2:1
(points 6 118 120 130 120 130 90 270 90 270 150 278 150))
(connect D3:1 D2:2
(points 4 246 180 260 180 260 170 278 170))
(connect D1:1 D3:0
(points 3 196 110 210 110 210 152))
(connect D2:1 D4:1
(points 4 442 160 460 160 460 150 490 150))
(connect D4:1 D5:0
(points 3 589 140 630 140 630 189))
(connect D2:1 D5:1
(points 4 442 160 460 160 460 200 570 200))
(connect D9:1 D6:1
(points 2 402 280 434 280))
(connect D0:0 D7:0
(points 2 80 148 80 231))
(connect D7:1 D8:1
(points 2 122 260 154 260))
(connect D8:1 D9:0
(points 3 206 250 320 250 320 265))
(connect D7:1 D9:1
(points 6 122 260 140 260 140 230 230 230 230 280 237 280)))
(stackingOrder 1 4 5 0 7 3 8 2 9 6))))
(configuration
(connect D2:1 D0:1)
(connect I1:1 D2:0)
(connect D4:1 D3:1)
(connect D2:0 D4:0)
(connect D7:1 D6:1)
(connect D4:0 D7:0)
(connect D7:0 D8:0)
(connect D8:0 D9:0)
(connect D0:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 813 827)
(anchorPt 136 -73)
(configuration
(devCarrierFor 8
(active icon)
(icon
(extent 108 16))
(open
(extent 199 32))
(terminals on)
(pinCenter 150 120))
(devCarrierFor 15
(active open)
(icon
(extent 178 52)
(iconImage "notepad.icn"))
(open
(extent 511 590)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 150 600))
(devCarrierFor 23
(active icon)
(icon
(extent 124 16))
(open
(extent 196 53))
(terminals on)
(pinCenter -10 120))
(devCarrierFor 66
(active icon)
(icon
(extent 118 16))
(open
(extent 150 32))
(terminals on)
(pinCenter 150 160))
(devCarrierFor 67
(active icon)
(icon
(extent 146 14))
(open
(extent 208 117))
(terminals on)
(pinCenter -10 160))
(devCarrierFor 68
(active icon)
(icon
(extent 183 16))
(open
(extent 250 107))
(pinCenter 330 170))
(devCarrierFor 69
(active icon)
(icon
(extent 119 16))
(open
(extent 692 113))
(terminals on)
(pinCenter 150 190))
(devCarrierFor 70
(active icon)
(icon
(extent 152 16))
(open
(extent 208 117))
(terminals on)
(pinCenter -10 190))
(devCarrierFor 71
(active icon)
(icon
(extent 173 16))
(open
(extent 884 113))
(terminals on)
(pinCenter -10 230))
(devCarrierFor 73
(active icon)
(icon
(extent 173 16))
(terminals on)
(pinCenter -10 270))
(connect D2:1 D0:1
(points 2 54 120 93 120))
(connect I1:1 D2:0
(points 5 -136 486 -140 486 -140 90 -10 90 -10 109))
(connect D4:1 D3:1
(points 2 65 160 88 160))
(connect D2:0 D4:0
(points 2 -10 130 -10 150))
(connect D7:1 D6:1
(points 2 68 190 88 190))
(connect D4:0 D7:0
(points 2 -10 169 -10 179))
(connect D7:0 D8:0
(points 2 -10 200 -10 219))
(connect D8:0 D9:0
(points 2 -10 240 -10 259))
(connect D0:1 O1:1
(points 4 206 120 440 120 440 486 676 486)))
(stackingOrder 0 4 7 3 6 5 8 1 9 2))))
(context 165
(properties
(name "ShouldInterceptOppAssault")
(trigMode deg)
(nextID 9)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "move")
(lock constraints)
(optional yes)))
(deviceList
(device 0 CALL
(properties
(name "Call IsThereAnAssaultInOurArea")
(callFunc "IsThereAnAssaultInOurArea")
(parmMode rev30))
(interface
(output 1
(name "locations")
(lock name constraints)
(optional yes))))
(device 1 CALL
(properties
(name "Call ClosestPieceThatBeatsMove")
(callFunc "ClosestPieceThatBeatsMove")
(parmMode rev30))
(interface
(input 1
(name "opponentPieceLocation")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Move")
(lock name constraints)
(optional yes))))
(device 5 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 6 EXITCONTEXT)
(device 8 FORMULA
(properties
(name "highest ranking piece")
(expr 1 "locs[0]"))
(interface
(input 1
(name "locs")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D4:1 D1:1)
(connect D1:1 D2:1)
(connect D2:0 D3:0)
(connect D0:1 D4:1)
(connect D2:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 867 237)
(anchorPt -16 -20)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 224 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 160 130))
(devCarrierFor 1
(active icon)
(icon
(extent 229 16))
(open
(extent 227 57))
(terminals on)
(pinCenter 610 130))
(devCarrierFor 5
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 780 130))
(devCarrierFor 6
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 780 180))
(devCarrierFor 8
(active icon)
(icon
(extent 148 16))
(open
(extent 75 32))
(terminals on)
(pinCenter 380 130))
(connect D4:1 D1:1
(points 2 456 130 493 130))
(connect D1:1 D2:1
(points 2 727 130 760 130))
(connect D2:0 D3:0
(points 2 780 140 780 169))
(connect D0:1 D4:1
(points 2 274 130 303 130))
(connect D2:1 O1:1
(points 4 800 130 820 130 820 138 882 138)))
(stackingOrder 2 3 0 4 1))))
(context 122
(properties
(name "ShouldWeKamikaze")
(trigMode deg)
(nextID 30)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "attackMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes)))
(deviceList
(device 0 IFTHENELSE
(properties
(name "Is there a kamikazee piece?")
(cases 1 "kamikazePiece>0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "50% chance (beginning), 30% chance (middle), 40% (end)")
(cases 1
"(MoveNumber<=50 ? (random(0, 1)<=0.50) : (numMyMovablePiecesRemaining<13 OR numOppMovablePiecesRemaining<13 ? (numMyMovablePiecesRemaining<4 ? 0 : random(0, 1)<=0.40) : (random(0, 1)<=0.30)))"
))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "# attack moves")
(expr 1 "totSize(pieceLocs)"))
(interface
(input 1
(name "pieceLocs")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 IFTHENELSE
(properties
(name "what to do?")
(cases 2 "w>=3 AND w<=9" "w==1 OR w==2"))
(interface
(input 1
(name "w")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 10 FORMULA
(properties
(name "piece")
(expr 1 "KnownBoard[attackMoves[i].from]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "attackMoves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 FORMULA
(properties
(name "set \'KamikazePiece\'")
(expr 1 "KamiKazePiece = piece"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 13 FORMULA
(properties
(name "move.to")
(expr 1 "moves[i].to"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 16 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 17 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 18 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 19 FORMULA
(properties
(name "# possible")
(expr 1 "totSize(possPieces)"))
(interface
(input 1
(name "possPieces")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 20 IFTHENELSE
(properties
(name "any potential kamikaze\'s?")
(cases 1 "n>0"))
(interface
(input 1
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 21 FORMULA
(properties
(name "random kamikazee")
(expr 1 "kamikazees[floor(random(0, n-0.1))]"))
(interface
(input 1
(name "kamikazees")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "n")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 FORMULA
(properties
(name "NumPiecesTakenByKamikaze = 0")
(expr 1 "NumPiecesTakenByKamikaze = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 24 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 27 FORMULA
(properties
(name "piece weight")
(expr 1 "WeightOfPiece[piece-1000]"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 28 CALL
(properties
(name "Call AttackProbabilityOfUnknownFixed")
(callFunc "AttackProbabilityOfUnknownFixed")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Win")
(lock name constraints)
(optional yes))
(output 2
(name "Tie")
(lock name constraints)
(optional yes))
(output 3
(name "Lose")
(lock name constraints)
(optional yes))
(output 4
(name "Bombed")
(lock name constraints)
(optional yes))))
(device 29 IFTHENELSE
(properties
(name "less than 30% death chance?")
(cases 1 "bombed<=0.3"))
(interface
(input 1
(name "bombed")
(requires
(datatype Real)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D0:2 D1:0)
(connect D1:1 D2:0)
(connect D3:1 D2:1)
(connect I1:1 D3:1)
(connect D17:1 D4:1)
(connect D2:1 D5:1)
(connect I1:1 D5:2)
(connect D14:1 D6:1)
(connect D16:1 D7:0)
(connect D2:1 D7:1)
(connect I1:1 D7:2)
(connect D5:1 D8:1)
(connect D7:1 D8:2)
(connect D8:2 D9:1)
(connect D8:3 D9:2)
(connect D11:1 D10:1)
(connect D2:0 D10:2)
(connect D9:1 D11:0)
(connect D5:1 D11:1)
(connect D10:1 D12:1)
(connect D12:1 D13:1)
(connect D13:1 D14:0)
(connect D10:1 D14:1)
(connect D12:1 D14:2)
(connect D14:0 D15:0)
(connect D4:1 D16:1)
(connect D19:1 D16:2)
(connect D5:1 D17:1)
(connect D4:2 D18:0)
(connect D5:1 D18:1)
(connect D18:4 D19:1)))
(contextCarrier
(active detail)
(detail
(extent 1273 480)
(anchorPt 66 -17)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 192 25))
(open
(extent 141 53))
(terminals on)
(pinCenter 120 60))
(devCarrierFor 2
(active icon)
(icon
(extent 405 25))
(open
(extent 1390 53))
(terminals on)
(pinCenter 240 110))
(devCarrierFor 6
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 120 230))
(devCarrierFor 7
(active icon)
(icon
(extent 104 16))
(open
(extent 150 38))
(terminals on)
(pinCenter 10 230))
(devCarrierFor 9
(active icon)
(icon
(extent 80 34))
(open
(extent 134 62))
(terminals on)
(pinCenter 470 210))
(devCarrierFor 10
(active icon)
(icon
(extent 38 25))
(open
(extent 194 42))
(terminals on)
(pinCenter 220 240))
(devCarrierFor 11
(active icon)
(icon
(extent 136 16))
(open
(extent 191 37))
(terminals on)
(pinCenter 980 370))
(devCarrierFor 13
(active icon)
(icon
(extent 55 25))
(open
(extent 102 42))
(terminals on)
(pinCenter 170 370))
(devCarrierFor 15
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 310 350))
(devCarrierFor 16
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 440 360))
(devCarrierFor 17
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 530 320))
(devCarrierFor 18
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 450 300))
(devCarrierFor 19
(active icon)
(icon
(extent 70 16))
(open
(extent 158 35))
(terminals on)
(pinCenter 620 320))
(devCarrierFor 20
(active icon)
(icon
(extent 177 25))
(open
(extent 55 53))
(terminals on)
(pinCenter 760 320))
(devCarrierFor 21
(active icon)
(icon
(extent 129 25))
(open
(extent 260 50))
(terminals on)
(pinCenter 820 370))
(devCarrierFor 22
(active icon)
(icon
(extent 231 16))
(open
(extent 274 32))
(terminals on)
(pinCenter 820 430))
(devCarrierFor 24
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 800 100))
(devCarrierFor 27
(active icon)
(icon
(extent 85 16))
(open
(extent 248 34))
(terminals on)
(pinCenter 340 220))
(devCarrierFor 28
(active icon)
(icon
(extent 262 45))
(open
(extent 291 83))
(terminals on)
(pinCenter 750 260))
(devCarrierFor 29
(active icon)
(icon
(extent 205 25))
(open
(extent 141 53))
(terminals on)
(pinCenter 1000 270))
(connect D0:2 D1:0
(points 3 218 70 240 70 240 95))
(connect D1:1 D2:0
(points 5 445 100 470 100 470 150 120 150 120 201))
(connect D3:1 D2:1
(points 2 64 230 82 230))
(connect I1:1 D3:1
(points 4 -66 256 -60 256 -60 230 -45 230))
(connect D17:1 D4:1
(points 4 385 220 410 220 410 210 427 210))
(connect D2:1 D5:1
(points 2 157 230 198 230))
(connect I1:1 D5:2
(points 8 -66 256 -60 256 -60 290 110 290 110 280 180 280 180 250 198 250))
(connect D14:1 D6:1
(points 2 887 370 909 370))
(connect D16:1 D7:0
(points 7 817 100 840 100 840 160 260 160 260 300 170 300 170 355))
(connect D2:1 D7:1
(points 6 157 230 170 230 170 290 130 290 130 360 140 360))
(connect I1:1 D7:2
(points 6 -66 256 -60 256 -60 290 110 290 110 380 140 380))
(connect D5:1 D8:1
(points 6 241 240 250 240 250 280 200 280 200 340 217 340))
(connect D7:1 D8:2
(points 4 200 370 210 370 210 360 217 360))
(connect D8:2 D9:1
(points 2 402 350 423 350))
(connect D8:3 D9:2
(points 4 402 360 410 360 410 370 423 370))
(connect D11:1 D10:1
(points 4 470 300 480 300 480 310 497 310))
(connect D2:0 D10:2
(points 5 120 258 120 310 410 310 410 330 497 330))
(connect D9:1 D11:0
(points 5 457 360 490 360 490 270 450 270 450 289))
(connect D5:1 D11:1
(points 6 241 240 250 240 250 280 390 280 390 300 430 300))
(connect D10:1 D12:1
(points 2 563 320 582 320))
(connect D12:1 D13:1
(points 2 657 320 669 320))
(connect D13:1 D14:0
(points 5 851 310 870 310 870 350 820 350 820 355))
(connect D10:1 D14:1
(points 4 563 320 570 320 570 360 753 360))
(connect D12:1 D14:2
(points 4 657 320 650 320 650 380 753 380))
(connect D14:0 D15:0
(points 2 820 385 820 419))
(connect D4:1 D16:1
(points 4 512 200 530 200 530 90 783 90))
(connect D19:1 D16:2
(points 6 1105 260 1120 260 1120 220 760 220 760 110 783 110))
(connect D5:1 D17:1
(points 4 241 240 270 240 270 220 295 220))
(connect D4:2 D18:0
(points 3 512 210 750 210 750 235))
(connect D5:1 D18:1
(points 8 241 240 350 240 350 250 510 250 510 280 600 280 600 260 616 260))
(connect D18:4 D19:1
(points 2 883 270 895 270)))
(stackingOrder 0 2 8 9 5 3 7 11 10 12 13 14 6 15 18 19 17 4 16 1))))
(context 159
(properties
(name "ShouldWeStrafe")
(trigMode deg)
(nextID 40)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(deviceList
(device 0 IFTHENELSE
(properties
(name "Is there a strafing piece?")
(cases 1 "StrafingPiece>0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "90% chance (beginning), 75% chance (middle), 40% (end)")
(cases 1
"(MoveNumber<=50 ? (random(0, 1)<=0.90) : (numMyMovablePiecesRemaining<13 OR numOppMovablePiecesRemaining<13 ? (random(0, 1)<=0.40) : (random(0, 1)<=0.75)))"
))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 33 CONTEXT
(properties
(name "GetStrafers")
(trigMode deg)
(nextID 8)
(popupTitleText "UserObject")
(popupMoveable 1))
(interface
(output 1
(type data)
(name "strafers")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORRANGE
(properties
(name "For 79-0")
(from 79)
(thru 0)
(step -1))
(interface
(output 1
(name "Data")
(lock name constraints))))
(device 1 FORMULA
(properties
(name "piece @ loc")
(expr 1 "KnownBoard[i]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "potential strafer?")
(cases 1 "w>=3 AND w<=7"))
(interface
(input 1
(name "w")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "piece weight")
(expr 1 "(piece>1000 ? WeightOfPiece[piece-1000] : -1)"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data")
(requires
(datatype Int32)
(shape "Scalar")))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 5 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 6 IFTHENELSE
(properties
(name "can piece hit something?")
(cases 1 "CanPieceGetToUnknown(location)"))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D0:1 D1:1)
(connect D3:1 D2:1)
(connect D1:1 D3:1)
(connect D5:1 D4:1)
(connect D0:0 D4:2)
(connect D6:1 D5:0)
(connect D0:1 D5:1)
(connect D2:1 D6:0)
(connect D0:1 D6:1)
(connect D4:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 888 260)
(anchorPt 1 0)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 68 52)
(iconImage "loop.icn"))
(open
(extent 110 82))
(pinCenter 100 90))
(devCarrierFor 1
(active icon)
(icon
(extent 81 25))
(open
(extent 194 42))
(terminals on)
(pinCenter 200 90))
(devCarrierFor 2
(active icon)
(icon
(extent 117 34))
(open
(extent 136 82))
(terminals on)
(pinCenter 440 90))
(devCarrierFor 3
(active icon)
(icon
(extent 85 16))
(open
(extent 332 34))
(terminals on)
(pinCenter 310 90))
(devCarrierFor 4
(active icon)
(icon
(extent 61 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 640 150))
(devCarrierFor 5
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 570 140))
(devCarrierFor 6
(active icon)
(icon
(extent 172 25))
(open
(extent 249 59))
(terminals on)
(pinCenter 630 90))
(connect D0:1 D1:1
(points 2 136 90 157 90))
(connect D3:1 D2:1
(points 2 355 90 379 90))
(connect D1:1 D3:1
(points 2 243 90 265 90))
(connect D5:1 D4:1
(points 2 590 140 607 140))
(connect D0:0 D4:2
(points 5 100 118 100 170 590 170 590 160 607 160))
(connect D6:1 D5:0
(points 5 718 80 740 80 740 120 570 120 570 129))
(connect D0:1 D5:1
(points 4 136 90 150 90 150 140 550 140))
(connect D2:1 D6:0
(points 5 501 80 520 80 520 60 630 60 630 75))
(connect D0:1 D6:1
(points 6 136 90 150 90 150 140 520 140 520 90 541 90))
(connect D4:1 O1:1
(points 4 673 150 690 150 690 129 886 129)))
(stackingOrder 0 1 3 5 4 2 6))))
(device 36 FORMULA
(properties
(name "# strafers")
(expr 1 "totsize(strafers)"))
(interface
(input 1
(name "strafers")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 37 IFTHENELSE
(properties
(name "any strafers?")
(cases 1 "s>0"))
(interface
(input 1
(name "s")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 38 FORMULA
(properties
(name "pick one")
(expr 1 "KnownBoard[strafers[floor(random(0, numStrafers))]]"))
(interface
(input 1
(name "numStrafers")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "strafers")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 39 FORMULA
(properties
(name "set \'strafingPiece\'")
(expr 1 "strafingPiece = s"))
(interface
(input 1
(name "s")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))))
(configuration
(connect D0:2 D1:0)
(connect D1:1 D2:0)
(connect D2:1 D3:1)
(connect D3:1 D4:1)
(connect D4:1 D5:0)
(connect D3:1 D5:1)
(connect D2:1 D5:2)
(connect D5:1 D6:1)))
(contextCarrier
(active detail)
(detail
(extent 906 318)
(anchorPt 54 6)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 171 25))
(open
(extent 141 53))
(terminals on)
(pinCenter 110 60))
(devCarrierFor 2
(active icon)
(icon
(extent 405 25))
(open
(extent 1390 53))
(terminals on)
(pinCenter 260 100))
(devCarrierFor 33
(active icon)
(icon
(extent 80 16))
(terminals on)
(pinCenter 120 200))
(devCarrierFor 36
(active icon)
(icon
(extent 66 16))
(open
(extent 132 35))
(terminals on)
(pinCenter 220 200))
(devCarrierFor 37
(active icon)
(icon
(extent 91 25))
(open
(extent 55 53))
(terminals on)
(pinCenter 320 200))
(devCarrierFor 38
(active icon)
(icon
(extent 58 25))
(open
(extent 367 42))
(terminals on)
(pinCenter 450 230))
(devCarrierFor 39
(active icon)
(icon
(extent 122 16))
(open
(extent 139 32))
(terminals on)
(pinCenter 560 230))
(connect D0:2 D1:0
(points 3 198 70 260 70 260 85))
(connect D1:1 D2:0
(points 5 465 90 490 90 490 140 120 140 120 189))
(connect D2:1 D3:1
(points 2 162 200 184 200))
(connect D3:1 D4:1
(points 2 255 200 272 200))
(connect D4:1 D5:0
(points 3 368 190 450 190 450 215))
(connect D3:1 D5:1
(points 6 255 200 280 200 280 170 390 170 390 220 418 220))
(connect D2:1 D5:2
(points 4 162 200 170 200 170 240 418 240))
(connect D5:1 D6:1
(points 2 481 230 496 230)))
(stackingOrder 0 3 4 5 6 2 1))))
(context 12
(properties
(name "SimpleAttackConsequences")
(trigMode deg)
(nextID 51)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "attackMove")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "WinFully")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "WinLose")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "WinTie")
(lock constraints)
(optional yes))
(output 4
(type data)
(name "Tie")
(lock constraints)
(optional yes))
(output 5
(type data)
(name "Lose")
(lock constraints)
(optional yes))
(output 6
(type data)
(name "Other")
(lock constraints)
(optional yes)))
(deviceList
(device 0 NOTE
(properties
(name "Comment")
(text2 19 "This function determines the consequences of a computer attack."
"These are the possible outcomes:" ""
"WinFully:   You can take your opponent\'s piece and not get hammered "
"            on your opponent\'s next move." ""
"WinLose:    You will win your opponent\'s piece, but get killed on a"
"            subsequent move. (Sometimes this is OK)." ""
"WinTie:     You will win your opponent\'s piece, but there is an"
"            adjacent piece that ties you (you could get killed)." ""
"Tie:        You and your opponent will get killed.  (Sometimes this"
"            is OK)." "" "Lose:       You will lose the attack." ""
"Other:      This is a tricky situation (requiring more than simple"
"            analysis).")))
(device 2 IFTHENELSE
(properties
(name "?? defender, tie, win game/kill spy, die on bomb, suicide spy")
(cases 5 "defender==-1 OR defender==-2" "attacker==defender"
"defender==10 OR defender==0" "defender==-100 AND attacker!=8"
"attacker==0 AND defender!=1"))
(interface
(input 1
(name "attacker")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "defender")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else If")
(lock name constraints))
(output 4
(name "Else If")
(lock name constraints))
(output 5
(name "Else If")
(lock name constraints))
(output 6
(name "Else")
(lock name constraints))))
(device 3 FORMULA
(properties
(name "defender piece weight")
(expr 1
"op = KnownBoard[moveTo], op = (op>=1000 ? op-1000 : op), (op<0 ? op : WeightOfPiece[op])"
))
(interface
(input 1
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "op")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORMULA
(properties
(name "attacker piece weight")
(expr 1
"pp = KnownBoard[move.from], pp = (pp>=1000 ? pp-1000 : pp), (pp<0 ? pp : WeightOfPiece[pp])"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "pp")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 18 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 28 NOTE
(properties
(name "Weights of pieces")
(text2 11 "10 Flag" "0 Spy" "1 Marshall" "2 General" "..." "8 Miner" "9 Scout"
"-100 Bomb" "- above from doug -" "-1 unknown" "-2 unknown non-bomb/flag")))
(device 29 IFTHENELSE
(properties
(name "defender kills me, else I can take him out but what\'s the risk?")
(cases 1 "defender!=-100 AND defender<attacker"))
(interface
(input 1
(name "attacker")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "defender")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 30 JUNCTION
(properties
(name "JCT Lose"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "D")
(optional yes))
(input 3
(name "B")
(optional yes))
(output 1
(name "Data"))))
(device 31 FORMULA
(properties
(name "move.to")
(expr 1 "move.to"))
(interface
(input 1
(name "move")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 43 CALL
(properties
(name "Call CanMyPieceGetKilled")
(callFunc "CanMyPieceGetKilled")
(parmMode rev30))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "moveTo")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Yes")
(lock name constraints)
(optional yes))
(output 2
(name "No")
(lock name constraints)
(optional yes))
(output 3
(name "Maybe")
(lock name constraints)
(optional yes))))
(device 44 FORMULA
(properties
(name "our piece")
(expr 1 "KnownBoard[move.from]"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 45 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 46 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 47 CONSTANT
(properties
(name "TRUE"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 48 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 49 IFTHENELSE
(properties
(name "Not Implemented")
(cases 1 "0"))
(interface
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect D3:2 D1:1)
(connect D2:2 D1:2)
(connect D9:1 D2:1)
(connect I1:1 D3:1)
(connect D1:3 D4:1)
(connect D10:2 D4:2)
(connect D10:1 D5:0)
(connect D1:6 D7:0)
(connect D3:2 D7:1)
(connect D2:2 D7:2)
(connect D1:4 D8:1)
(connect D1:5 D8:2)
(connect D7:1 D8:3)
(connect I1:1 D9:1)
(connect D7:2 D10:0)
(connect D11:1 D10:1)
(connect D9:1 D10:2)
(connect I1:1 D11:1)
(connect D4:1 D12:0)
(connect D8:1 D13:0)
(connect D15:1 D14:0)
(connect D1:1 D15:1)
(connect D10:3 D15:2)
(connect D12:1 O1:1)
(connect D5:1 O2:1)
(connect D16:1 O3:1)
(connect D1:2 O4:1)
(connect D13:1 O5:1)
(connect D14:1 O6:1)))
(contextCarrier
(active detail)
(detail
(extent 1077 741)
(anchorPt 86 132)
(configuration
(devCarrierFor 0
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 519 303)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 190 50))
(devCarrierFor 2
(active icon)
(icon
(extent 407 65))
(open
(extent 323 122))
(terminals on)
(titleFont "lucida" 12)
(pinCenter 430 280))
(devCarrierFor 3
(active icon)
(icon
(extent 152 25))
(open
(extent 818 42))
(terminals on)
(pinCenter 120 320))
(devCarrierFor 4
(active icon)
(icon
(extent 146 25))
(open
(extent 686 40))
(terminals on)
(pinCenter 110 270))
(devCarrierFor 6
(active icon)
(icon
(extent 29 25))
(open
(extent 57 50))
(terminals on)
(pinCenter 770 -10))
(devCarrierFor 18
(active icon)
(icon
(extent 41 16))
(open
(extent 146 30)
(showFormat int))
(pinCenter 790 90))
(devCarrierFor 28
(active open)
(icon
(extent 123 52)
(iconImage "notepad.icn"))
(open
(extent 236 190)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 590 0))
(devCarrierFor 29
(active icon)
(icon
(extent 383 48))
(open
(extent 317 76))
(terminals on)
(titleFont "lucida" 12)
(pinCenter 620 370))
(devCarrierFor 30
(active icon)
(icon
(extent 64 45))
(open
(extent 30 82))
(terminals on)
(pinCenter 840 440))
(devCarrierFor 31
(active icon)
(icon
(extent 62 15))
(open
(extent 73 31))
(terminals on)
(pinCenter -10 350))
(devCarrierFor 43
(active icon)
(icon
(extent 180 34))
(open
(extent 196 62))
(terminals on)
(pinCenter 290 460))
(devCarrierFor 44
(active icon)
(icon
(extent 64 16))
(open
(extent 183 34))
(terminals on)
(pinCenter 100 450))
(devCarrierFor 45
(active icon)
(icon
(extent 41 16))
(open
(extent 146 30)
(showFormat int))
(pinCenter 820 20))
(devCarrierFor 46
(active icon)
(icon
(extent 41 16))
(open
(extent 146 30)
(showFormat int))
(pinCenter 920 470))
(devCarrierFor 47
(active icon)
(icon
(extent 41 16))
(open
(extent 146 30)
(showFormat int))
(pinCenter 890 570))
(devCarrierFor 48
(active icon)
(icon
(extent 29 25))
(open
(extent 57 50))
(terminals on)
(pinCenter 850 530))
(devCarrierFor 49
(active icon)
(icon
(extent 115 25))
(open
(extent 55 53))
(terminals on)
(pinCenter 810 210))
(connect D3:2 D1:1
(points 4 185 280 210 280 210 260 224 260))
(connect D2:2 D1:2
(points 4 198 330 190 330 190 300 224 300))
(connect D9:1 D2:1
(points 4 23 350 30 350 30 320 41 320))
(connect I1:1 D3:1
(points 4 -86 238 -70 238 -70 270 34 270))
(connect D1:3 D4:1
(points 6 636 270 720 270 720 -10 730 -10 730 -20 753 -20))
(connect D10:2 D4:2
(points 8 382 460 820 460 820 370 830 370 830 320 730 320 730 0 753 0))
(connect D10:1 D5:0
(points 9 382 450 880 450 880 270 810 270 810 190 830 190 830 60 790 60 790 79))
(connect D1:6 D7:0
(points 5 636 300 650 300 650 330 620 330 620 343))
(connect D3:2 D7:1
(points 6 185 280 210 280 210 320 230 320 230 360 426 360))
(connect D2:2 D7:2
(points 4 198 330 220 330 220 380 426 380))
(connect D1:4 D8:1
(points 4 636 280 670 280 670 430 805 430))
(connect D1:5 D8:2
(points 4 636 290 660 290 660 440 805 440))
(connect D7:1 D8:3
(points 6 814 360 840 360 840 410 800 410 800 450 805 450))
(connect I1:1 D9:1
(points 4 -86 238 -80 238 -80 350 -44 350))
(connect D7:2 D10:0
(points 5 814 380 830 380 830 420 290 420 290 440))
(connect D11:1 D10:1
(points 2 134 450 197 450))
(connect D9:1 D10:2
(points 6 23 350 30 350 30 360 150 360 150 470 197 470))
(connect I1:1 D11:1
(points 4 -86 238 -80 238 -80 450 65 450))
(connect D4:1 D12:0
(points 3 787 -10 820 -10 820 9))
(connect D8:1 D13:0
(points 3 874 440 920 440 920 459))
(connect D15:1 D14:0
(points 3 867 530 890 530 890 559))
(connect D1:1 D15:1
(points 6 636 250 890 250 890 490 820 490 820 520 833 520))
(connect D10:3 D15:2
(points 4 382 470 400 470 400 540 833 540))
(connect D12:1 O1:1
(points 4 843 20 860 20 860 -62 990 -62))
(connect D5:1 O2:1
(points 4 813 90 930 90 930 58 990 58))
(connect D16:1 O3:1
(points 4 870 200 890 200 890 178 990 178))
(connect D1:2 O4:1
(points 4 636 260 870 260 870 298 990 298))
(connect D13:1 O5:1
(points 4 943 470 960 470 960 418 990 418))
(connect D14:1 O6:1
(points 4 913 570 930 570 930 538 990 538)))
(stackingOrder 3 9 2 11 10 1 7 4 12 5 16 8 13 15 14 0 6))))
(context 133
(properties
(name "SortByProximity")
(trigMode deg)
(nextID 10)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "sorted moves")
(lock constraints)
(optional yes)))
(deviceList
(device 1 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "distance")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 2 FORMULA
(properties
(name "distance")
(expr 1 "travelDistance(move.to, square)"))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "# moves")
(expr 1 "totsize(moves)"))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 FORMULA
(properties
(name "move")
(expr 1
"from = moves[i].from, to = moves[i].to, targetSquare = moves[i].targetSquare, moves[i]"
))
(interface
(input 1
(name "moves")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))
(output 2
(name "from")
(optional yes))
(output 3
(name "to")
(optional yes))
(output 4
(name "targetSquare")
(optional yes))))
(device 7 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 8 FORMULA
(properties
(name "sort by distance")
(expr 1 "sort(proximities, 1, \"distance\")"))
(interface
(input 1
(name "proximities")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D4:2 D0:1)
(connect D4:3 D0:2)
(connect D1:1 D0:3)
(connect D4:4 D1:1)
(connect D4:1 D1:2)
(connect D3:1 D2:1)
(connect I1:1 D3:1)
(connect I1:1 D4:1)
(connect D2:1 D4:2)
(connect D0:1 D5:1)
(connect D2:0 D5:2)
(connect D5:1 D6:1)
(connect D6:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 945 356)
(anchorPt 5 -171)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 99 82))
(terminals on)
(pinCenter 520 350))
(devCarrierFor 2
(active icon)
(icon
(extent 58 25))
(open
(extent 236 57))
(terminals on)
(pinCenter 380 370))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 180 350))
(devCarrierFor 5
(active icon)
(icon
(extent 58 16))
(open
(extent 125 42))
(terminals on)
(pinCenter 90 350))
(devCarrierFor 6
(active icon)
(icon
(extent 38 45))
(open
(extent 572 85))
(terminals on)
(pinCenter 300 360))
(devCarrierFor 7
(active icon)
(icon
(extent 61 25))
(open)
(terminals on)
(pinCenter 620 360))
(devCarrierFor 8
(active icon)
(icon
(extent 110 16))
(open
(extent 221 37))
(terminals on)
(pinCenter 740 360))
(connect D4:2 D0:1
(points 6 321 350 340 350 340 330 440 330 440 340 473 340))
(connect D4:3 D0:2
(points 6 321 360 330 360 330 340 430 340 430 350 473 350))
(connect D1:1 D0:3
(points 4 411 370 430 370 430 360 473 360))
(connect D4:4 D1:1
(points 4 321 370 330 370 330 360 348 360))
(connect D4:1 D1:2
(points 8 321 340 330 340 330 320 260 320 260 410 340 410 340 380 348 380))
(connect D3:1 D2:1
(points 2 121 350 142 350))
(connect I1:1 D3:1
(points 4 -5 348 20 348 20 350 58 350))
(connect I1:1 D4:1
(points 6 -5 348 30 348 30 300 250 300 250 350 278 350))
(connect D2:1 D4:2
(points 4 217 350 240 350 240 370 278 370))
(connect D0:1 D5:1
(points 2 567 350 587 350))
(connect D2:0 D5:2
(points 5 180 378 180 430 580 430 580 370 587 370))
(connect D5:1 D6:1
(points 2 653 360 682 360))
(connect D6:1 O1:1
(points 4 797 360 820 360 820 348 939 348)))
(stackingOrder 5 3 2 6 0 4 1))))
(context 166
(properties
(name "SortLocsByRank")
(trigMode deg)
(nextID 13)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "locs")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(type data)
(name "sorted locs")
(lock constraints)
(optional yes)))
(deviceList
(device 1 TORECORD
(properties
(outputType scalar))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "rank")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Record"))))
(device 4 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 5 FORMULA
(properties
(name "# locs")
(expr 1 "totsize(locs)"))
(interface
(input 1
(name "locs")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 7 COLLECTOR
(properties
(output1D 0))
(interface
(input 1
(name "Data")
(tag "Data"))
(input 2
(type trigger)
(name "XEQ")
(lock name constraints))
(output 1
(name "Array")
(tag "Array"))))
(device 8 FORMULA
(properties
(name "sort by rank")
(expr 1 "sort(locs, 1, \"rank\")"))
(interface
(input 1
(name "locs")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 FORMULA
(properties
(name "opponent weight")
(expr 1 "p = KnownBoard[loc], (p>0 ? WeightOfPiece[p] : -1)"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 11 FORMULA
(properties
(name "location")
(expr 1 "locs[i]"))
(interface
(input 1
(name "locs")
(requires
(datatype Int32)
(shape "Array 1D"))
(optional yes))
(input 2
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 FORMULA
(properties
(name "extract locations")
(expr 1 "locs.loc"))
(interface
(input 1
(name "locs")
(requires
(datatype Record)
(shape "Array 1D"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D6:1 D0:1)
(connect D5:2 D0:2)
(connect D2:1 D1:1)
(connect I1:1 D2:1)
(connect D0:1 D3:1)
(connect D1:0 D3:2)
(connect D3:1 D4:1)
(connect D6:1 D5:1)
(connect I1:1 D6:1)
(connect D1:1 D6:2)
(connect D4:1 D7:1)
(connect D7:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 965 356)
(anchorPt 10 -167)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 89 52)
(iconImage "build.icn"))
(open
(extent 119 82))
(terminals on)
(pinCenter 520 340))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 180 350))
(devCarrierFor 5
(active icon)
(icon
(extent 41 16))
(open
(extent 135 42))
(terminals on)
(pinCenter 90 350))
(devCarrierFor 7
(active icon)
(icon
(extent 61 25))
(open
(extent 109 56))
(terminals on)
(pinCenter 620 350))
(devCarrierFor 8
(active icon)
(icon
(extent 82 16))
(open
(extent 155 37))
(terminals on)
(pinCenter 730 350))
(devCarrierFor 10
(active icon)
(icon
(extent 114 25))
(open
(extent 357 48))
(terminals on)
(pinCenter 370 340))
(devCarrierFor 11
(active icon)
(icon
(extent 53 25))
(open
(extent 62 42))
(terminals on)
(pinCenter 260 340))
(devCarrierFor 12
(active icon)
(icon
(extent 112 16))
(open
(extent 71 32))
(terminals on)
(pinCenter 860 350))
(connect D6:1 D0:1
(points 6 289 340 300 340 300 310 450 310 450 330 473 330))
(connect D5:2 D0:2
(points 2 429 350 473 350))
(connect D2:1 D1:1
(points 2 113 350 142 350))
(connect I1:1 D2:1
(points 4 -10 344 30 344 30 350 67 350))
(connect D0:1 D3:1
(points 2 567 340 587 340))
(connect D1:0 D3:2
(points 5 180 378 180 400 580 400 580 360 587 360))
(connect D3:1 D4:1
(points 2 653 350 686 350))
(connect D6:1 D5:1
(points 2 289 340 310 340))
(connect I1:1 D6:1
(points 6 -10 344 30 344 30 300 220 300 220 330 231 330))
(connect D1:1 D6:2
(points 2 217 350 231 350))
(connect D4:1 D7:1
(points 2 773 350 801 350))
(connect D7:1 O1:1
(points 4 918 350 940 350 940 344 954 344)))
(stackingOrder 1 2 5 0 3 4 6 7))))
(context 74
(properties
(name "SpecialAttackMove")
(trigMode deg)
(nextID 14)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "from")
(lock constraints)
(optional yes))
(output 2
(type data)
(name "to")
(lock constraints)
(optional yes))
(output 3
(type data)
(name "nada")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "weight attacker")
(expr 1 "p = KnownBoard[move.from], p = (p>1000 ? p-1000 : p), WeightOfPiece[p]"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "p")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 IFTHENELSE
(properties
(name "Am I a miner (8) ?")
(cases 1 "weight==8"))
(interface
(input 1
(name "weight")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "Did I recently take a bomb? ")
(cases 1
"(OpponentsKnownBoard[move.from]>0) AND (move.from>=60) AND (OurMinerBombKillCount[KnownBoard[move.from]-1022]>0)"
))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "unpack move")
(expr 1 "from = move.from, move.to"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "from")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 EXITCONTEXT)
(device 10 CALL
(properties
(name "Call DoTheKamikaze")
(callFunc "DoTheKamikaze")
(parmMode rev30))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "doMove")
(lock name constraints)
(optional yes))))
(device 11 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 12 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 13 IFTHENELSE
(properties
(name "Is destination unknown non-movable opp?")
(cases 1 "KnownBoard[move.to]==-1"))
(interface
(input 1
(name "move")
(requires
(datatype Record)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(configuration
(connect I1:1 D0:1)
(connect D0:2 D1:1)
(connect D1:1 D2:0)
(connect I1:1 D2:1)
(connect D6:1 D3:1)
(connect D3:0 D4:0)
(connect I1:1 D5:1)
(connect D7:1 D6:1)
(connect D5:1 D6:2)
(connect D8:1 D7:0)
(connect I1:1 D7:1)
(connect D2:1 D8:0)
(connect I1:1 D8:1)
(connect D3:1 O1:1)
(connect D3:2 O2:1)
(connect D2:2 O3:1)))
(contextCarrier
(active detail)
(detail
(extent 1001 392)
(anchorPt 56 -29)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 126 25))
(open
(extent 611 48))
(terminals on)
(pinCenter 110 170))
(devCarrierFor 1
(active icon)
(icon
(extent 123 25))
(open
(extent 96 53))
(terminals on)
(pinCenter 280 180))
(devCarrierFor 3
(active icon)
(icon
(extent 193 25))
(open
(extent 838 53))
(terminals on)
(pinCenter 360 240))
(devCarrierFor 7
(active icon)
(icon
(extent 92 25))
(open
(extent 202 42))
(terminals on)
(pinCenter 750 140))
(devCarrierFor 8
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 750 190))
(devCarrierFor 10
(active icon)
(icon
(extent 144 16))
(open
(extent 196 53))
(terminals on)
(pinCenter 330 350))
(devCarrierFor 11
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 620 140))
(devCarrierFor 12
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 540 130))
(devCarrierFor 13
(active icon)
(icon
(extent 291 25))
(open
(extent 199 53))
(terminals on)
(pinCenter 650 280))
(connect I1:1 D0:1
(points 4 -56 224 -50 224 -50 170 44 170))
(connect D0:2 D1:1
(points 2 175 180 216 180))
(connect D1:1 D2:0
(points 3 344 170 360 170 360 225))
(connect I1:1 D2:1
(points 4 -56 224 -40 224 -40 240 261 240))
(connect D6:1 D3:1
(points 2 637 140 701 140))
(connect D3:0 D4:0
(points 2 750 155 750 179))
(connect I1:1 D5:1
(points 6 -56 224 -40 224 -40 240 230 240 230 350 255 350))
(connect D7:1 D6:1
(points 2 560 130 603 130))
(connect D5:1 D6:2
(points 6 404 350 480 350 480 240 580 240 580 150 603 150))
(connect D8:1 D7:0
(points 7 798 270 810 270 810 240 680 240 680 100 540 100 540 119))
(connect I1:1 D7:1
(points 8 -56 224 -50 224 -50 170 20 170 20 140 430 140 430 130 520 130))
(connect D2:1 D8:0
(points 3 459 230 650 230 650 265))
(connect I1:1 D8:1
(points 6 -56 224 -40 224 -40 240 230 240 230 280 502 280))
(connect D3:1 O1:1
(points 4 798 130 820 130 820 94 944 94))
(connect D3:2 O2:1
(points 4 798 150 830 150 830 224 944 224))
(connect D2:2 O3:1
(points 4 459 250 800 250 800 354 944 354)))
(stackingOrder 3 4 0 1 6 7 2 8 5))))
(context 43
(properties
(name "TravelDistance")
(trigMode deg)
(nextID 8)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "NumSquares")
(lock constraints)
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "delta rows + delta cols")
(expr 1 "abs((from DIV 10)-(to DIV 10))+abs((from MOD 10)-(to MOD 10))"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 IFTHENELSE
(properties
(name "pass thru a water hole?")
(cases 1 "0"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "corner1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "corner2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "corner1")
(expr 1 "(from DIV 10)*10+(to MOD 10)"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "corner2")
(expr 1 "(to DIV 10)*10+(from MOD 10)"))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 5 FORMULA
(properties
(name "delta + 3")
(expr 1 "delta+3"))
(interface
(input 1
(name "delta")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 6 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(device 7 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect I2:1 D0:2)
(connect I1:1 D1:1)
(connect I2:1 D1:2)
(connect D2:1 D1:3)
(connect D3:1 D1:4)
(connect I1:1 D2:1)
(connect I2:1 D2:2)
(connect I1:1 D3:1)
(connect I2:1 D3:2)
(connect D1:1 D4:0)
(connect D0:1 D4:1)
(connect D1:2 D5:0)
(connect D0:1 D5:1)
(connect D4:1 D6:1)
(connect D5:1 D6:2)
(connect D6:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 921 384)
(anchorPt 92 -2)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 154 25))
(open
(extent 579 44))
(terminals on)
(pinCenter 210 190))
(devCarrierFor 1
(active icon)
(icon
(extent 162 45))
(open
(extent 64 82))
(terminals on)
(pinCenter 570 170))
(devCarrierFor 2
(active icon)
(icon
(extent 53 25))
(open
(extent 225 42))
(terminals on)
(pinCenter 370 130))
(devCarrierFor 3
(active icon)
(icon
(extent 53 25))
(open
(extent 225 42))
(terminals on)
(pinCenter 370 190))
(devCarrierFor 5
(active icon)
(icon
(extent 60 16))
(open
(extent 71 42))
(terminals on)
(pinCenter 700 210))
(devCarrierFor 6
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 690 270))
(devCarrierFor 7
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 790 250))
(connect I1:1 D0:1
(points 6 -92 93 20 93 20 140 100 140 100 180 130 180))
(connect I2:1 D0:2
(points 4 -92 293 10 293 10 200 130 200))
(connect I1:1 D1:1
(points 8 -92 93 20 93 20 140 310 140 310 100 430 100 430 150 486 150))
(connect I2:1 D1:2
(points 8 -92 293 10 293 10 280 310 280 310 230 430 230 430 160 486 160))
(connect D2:1 D1:3
(points 4 399 130 420 130 420 170 486 170))
(connect D3:1 D1:4
(points 4 399 190 420 190 420 180 486 180))
(connect I1:1 D2:1
(points 6 -92 93 20 93 20 140 310 140 310 120 341 120))
(connect I2:1 D2:2
(points 8 -92 293 10 293 10 280 310 280 310 150 330 150 330 140 341 140))
(connect I1:1 D3:1
(points 6 -92 93 20 93 20 140 320 140 320 180 341 180))
(connect I2:1 D3:2
(points 6 -92 293 10 293 10 280 310 280 310 200 341 200))
(connect D1:1 D4:0
(points 3 653 160 700 160 700 199))
(connect D0:1 D4:1
(points 6 289 190 300 190 300 270 650 270 650 210 667 210))
(connect D1:2 D5:0
(points 5 653 180 660 180 660 240 690 240 690 259))
(connect D0:1 D5:1
(points 4 289 190 300 190 300 270 670 270))
(connect D4:1 D6:1
(points 4 732 210 750 210 750 240 773 240))
(connect D5:1 D6:2
(points 4 710 270 730 270 730 260 773 260))
(connect D6:1 O1:1
(points 4 807 250 830 250 830 193 828 193)))
(stackingOrder 4 5 6 0 2 3 1))))
(context 124
(properties
(name "UnlikelyBomb")
(trigMode deg)
(nextID 13)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 1 FORMULA
(properties
(name "left, right squares")
(expr 1 "left = BorderSquares[loc, 2], BorderSquares[loc, 3]"))
(interface
(input 1
(name "loc")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "left")
(optional yes))
(output 2
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "left okay?")
(cases 1 "left!=-1"))
(interface
(input 1
(name "left")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 3 IFTHENELSE
(properties
(name "right okay?")
(cases 1 "right!=-1"))
(interface
(input 1
(name "right")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 FORCOUNT
(properties
(count 6))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 5 IFTHENELSE
(properties
(name "bomb?")
(cases 1 "OpponentBombLocations[i]==left"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "left")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 IFTHENELSE
(properties
(name "bomb?")
(cases 1 "OpponentBombLocations[i]==right"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "right")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 FORCOUNT
(properties
(count 6))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 9 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 10 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 11 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 12 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A")
(optional yes))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Data"))))
(configuration
(connect I1:1 D0:1)
(connect D0:1 D1:1)
(connect D1:0 D2:0)
(connect D0:2 D2:1)
(connect D1:1 D3:0)
(connect D3:1 D4:1)
(connect D0:1 D4:2)
(connect D6:1 D5:1)
(connect D0:2 D5:2)
(connect D2:1 D6:0)
(connect D4:1 D7:0)
(connect D5:1 D8:0)
(connect D2:0 D9:0)
(connect D7:1 D10:1)
(connect D8:1 D10:2)
(connect D9:1 D10:3)
(connect D10:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 937 387)
(anchorPt 3 -196)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 121 25))
(open
(extent 353 42))
(terminals on)
(pinCenter 100 320))
(devCarrierFor 2
(active icon)
(icon
(extent 67 25))
(open
(extent 73 53))
(terminals on)
(pinCenter 250 290))
(devCarrierFor 3
(active icon)
(icon
(extent 77 25))
(open
(extent 76 53))
(terminals on)
(pinCenter 250 350))
(devCarrierFor 4
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 380 290))
(devCarrierFor 5
(active icon)
(icon
(extent 47 25))
(open
(extent 238 53))
(terminals on)
(pinCenter 490 300))
(devCarrierFor 6
(active icon)
(icon
(extent 47 25))
(open
(extent 237 53))
(terminals on)
(pinCenter 510 450))
(devCarrierFor 7
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 390 440))
(devCarrierFor 9
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 560 330))
(devCarrierFor 10
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 600 470))
(devCarrierFor 11
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 250 540))
(devCarrierFor 12
(active icon)
(icon
(extent 29 34))
(open
(extent 12 62))
(terminals on)
(pinCenter 710 390))
(connect I1:1 D0:1
(points 4 -3 389 18 389 18 320 37 320))
(connect D0:1 D1:1
(points 4 163 310 180 310 180 290 214 290))
(connect D1:0 D2:0
(points 2 250 305 250 335))
(connect D0:2 D2:1
(points 4 163 330 180 330 180 350 209 350))
(connect D1:1 D3:0
(points 5 286 280 310 280 310 240 380 240 380 261))
(connect D3:1 D4:1
(points 2 417 290 464 290))
(connect D0:1 D4:2
(points 6 163 310 180 310 180 230 440 230 440 310 464 310))
(connect D6:1 D5:1
(points 2 427 440 484 440))
(connect D0:2 D5:2
(points 6 163 330 180 330 180 490 450 490 450 460 484 460))
(connect D2:1 D6:0
(points 3 291 340 390 340 390 411))
(connect D4:1 D7:0
(points 3 516 290 560 290 560 319))
(connect D5:1 D8:0
(points 3 536 440 600 440 600 459))
(connect D2:0 D9:0
(points 2 250 365 250 529))
(connect D7:1 D10:1
(points 4 578 330 600 330 600 380 693 380))
(connect D8:1 D10:2
(points 4 618 470 630 470 630 390 693 390))
(connect D9:1 D10:3
(points 4 264 540 640 540 640 400 693 400))
(connect D10:1 O1:1
(points 4 727 390 750 390 750 389 933 389)))
(stackingOrder 0 1 2 3 6 5 4 8 9 10 7))))
(context 64
(properties
(name "UpdateKillCount")
(trigMode deg)
(nextID 10)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 3
(name "dp1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 4
(name "dp2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 1 FORMULA
(properties
(name "our dead piece (if any)")
(expr 1
"((piece1>1000) AND (piece1<=1034) ? piece1 : ((piece2>1000 AND piece2<=1034) ? piece2 : 0))"
))
(interface
(input 1
(name "piece1")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "piece2")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 2 IFTHENELSE
(properties
(name "did our piece get killed?")
(cases 1 "piece>0"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 IFTHENELSE
(properties
(name "moving murderer?")
(cases 1 "(oppPiece>0 AND oppPiece<=34)"))
(interface
(input 1
(name "oppPiece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 7 FORMULA
(properties
(name "KillCount[piece]++")
(expr 1 "KillCount[piece-1] = KillCount[piece-1]+1"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 9 FORMULA
(properties
(name "murderer (if still alive)")
(expr 1
"((KnownBoard[from]>0) AND (KnownBoard[from]<1000) ? KnownBoard[from] : ((KnownBoard[to]>0) AND (KnownBoard[to]<1000) ? KnownBoard[to] : -1))"
))
(interface
(input 1
(name "from")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "to")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect I3:1 D0:1)
(connect I4:1 D0:2)
(connect D0:1 D1:1)
(connect D4:1 D2:1)
(connect D2:1 D3:0)
(connect D4:1 D3:1)
(connect D1:1 D4:0)
(connect I1:1 D4:1)
(connect I2:1 D4:2)))
(contextCarrier
(active detail)
(detail
(extent 888 293)
(anchorPt 24 -82)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 157 25))
(open
(extent 648 42))
(terminals on)
(pinCenter 130 200))
(devCarrierFor 2
(active icon)
(icon
(extent 165 25))
(open
(extent 116 53))
(terminals on)
(pinCenter 320 200))
(devCarrierFor 6
(active icon)
(icon
(extent 126 25))
(open
(extent 244 53))
(terminals on)
(pinCenter 670 230))
(devCarrierFor 7
(active icon)
(icon
(extent 125 16))
(open
(extent 288 32))
(terminals on)
(pinCenter 760 290))
(devCarrierFor 9
(active icon)
(icon
(extent 149 25))
(open
(extent 995 42))
(terminals on)
(pinCenter 500 230))
(connect I3:1 D0:1
(points 4 -24 258 10 258 10 190 49 190))
(connect I4:1 D0:2
(points 4 -24 328 20 328 20 210 49 210))
(connect D0:1 D1:1
(points 2 211 200 235 200))
(connect D4:1 D2:1
(points 2 577 230 604 230))
(connect D2:1 D3:0
(points 3 735 220 760 220 760 279))
(connect D4:1 D3:1
(points 4 577 230 590 230 590 290 695 290))
(connect D1:1 D4:0
(points 3 405 190 500 190 500 215))
(connect I1:1 D4:1
(points 4 -24 118 400 118 400 220 423 220))
(connect I2:1 D4:2
(points 4 -24 188 -10 188 -10 240 423 240)))
(stackingOrder 0 1 4 2 3))))
(context 56
(properties
(name "UpdateMyKnownPieceCount")
(trigMode deg)
(nextID 5)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(deviceList
(device 0 FORCOUNT
(properties
(count 100))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "my piece known to be movable?")
(cases 1
"OpponentsKnownBoard[i]==-2 OR (OpponentsKnownBoard[i]>1000 AND OpponentsKnownBoard[i]<1035)"
))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORMULA
(properties
(name "NumPiecesKnownToBeMovable = 0")
(expr 1 "NumPiecesKnownToBeMovable = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 3 FORMULA
(properties
(name "NumPiecesKnownToBeMovable++")
(expr 1 "NumPiecesKnownToBeMovable = NumPiecesKnownToBeMovable+1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 DECLVAR
(properties
(name "Declare Variable \'NumPiecesKnownToBeMovable\'")
(scope lib)
(globalName "NumPiecesKnownToBeMovable"))
(implementation
(value Int32
(data  0))))
(configuration
(connect D2:0 D0:0)
(connect D0:1 D1:1)
(connect D1:1 D3:0)))
(contextCarrier
(active detail)
(detail
(extent 884 258)
(anchorPt 18 17)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 120 120))
(devCarrierFor 1
(active icon)
(icon
(extent 221 25))
(open
(extent 699 53))
(terminals on)
(pinCenter 330 120))
(devCarrierFor 2
(active icon)
(icon
(extent 245 16))
(open
(extent 257 32))
(terminals on)
(pinCenter 120 50))
(devCarrierFor 3
(active icon)
(icon
(extent 236 16))
(open
(extent 464 32))
(terminals on)
(pinCenter 480 170))
(devCarrierFor 4
(active icon)
(icon
(extent 345 16))
(open
(extent 381 107))
(pinCenter 440 50))
(connect D2:0 D0:0
(points 2 120 60 120 91))
(connect D0:1 D1:1
(points 2 157 120 217 120))
(connect D1:1 D3:0
(points 3 443 110 480 110 480 159)))
(stackingOrder 0 3 4 2 1))))
(context 123
(properties
(name "UpdateOppBombLocations")
(trigMode deg)
(nextID 5)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 0 FORCOUNT
(properties
(count 6))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 1 IFTHENELSE
(properties
(name "in our list or not?")
(cases 2 "OpponentBombLocations[i]==location" "OpponentBombLocations[i]==-1"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 2 EXITCONTEXT)
(device 3 FORMULA
(properties
(name "put in list")
(expr 1 "OpponentBombLocations[i] = location"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 4 EXITCONTEXT)
(configuration
(connect D0:1 D1:1)
(connect I1:1 D1:2)
(connect D1:1 D2:0)
(connect D1:2 D3:0)
(connect D0:1 D3:1)
(connect I1:1 D3:2)
(connect D3:0 D4:0)))
(contextCarrier
(active detail)
(detail
(extent 500 274)
(anchorPt -65 -54)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 140 150))
(devCarrierFor 1
(active icon)
(icon
(extent 116 34))
(open
(extent 315 62))
(terminals on)
(pinCenter 300 160))
(devCarrierFor 2
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 490 180))
(devCarrierFor 3
(active icon)
(icon
(extent 61 25))
(open
(extent 270 42))
(terminals on)
(pinCenter 410 230))
(devCarrierFor 4
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 410 270))
(connect D0:1 D1:1
(points 2 177 150 239 150))
(connect I1:1 D1:2
(points 4 65 190 200 190 200 170 239 170))
(connect D1:1 D2:0
(points 3 360 150 490 150 490 169))
(connect D1:2 D3:0
(points 3 360 160 410 160 410 215))
(connect D0:1 D3:1
(points 4 177 150 220 150 220 220 377 220))
(connect I1:1 D3:2
(points 4 65 190 200 190 200 240 377 240))
(connect D3:0 D4:0
(points 2 410 245 410 259)))
(stackingOrder 0 1 3 4 2))))
(context 22
(properties
(name "UpdatePossibleFlagPosForBomb")
(trigMode deg)
(nextID 30)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes)))
(deviceList
(device 0 FORMULA
(properties
(name "# in list")
(expr 1 "totSize(PossibleOppFlagPositions)"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 1 FORCOUNT
(properties
(count 10))
(interface
(input 1
(name "Count")
(tag "Count")
(requires
(datatype Int32)
(shape "Scalar"))
(lock constraints)
(optional yes)
(buffer YES))
(output 1
(name "Count")
(lock name constraints))))
(device 2 IFTHENELSE
(properties
(name "square in list?")
(cases 1 "PossibleOppFlagPositions[i]==square"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "square")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 4 IFTHENELSE
(properties
(name "was at end?")
(cases 1 "i==(numPoss-1)"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "numPoss")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 6 FORMULA
(properties
(name "possib[i+1 : numSq-1]")
(expr 1 "PossibleOppFlagPositions[i+1:numSquares-1]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "numSquares")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 8 FORCOUNT
(properties
(name "For 4")
(count 4))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 9 FORMULA
(properties
(name "BorderSquares[s, ndx]")
(expr 1 "BorderSquares[s, ndx]"))
(interface
(input 1
(name "ndx")
(optional yes))
(input 2
(name "s")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 10 IFTHENELSE
(properties
(name "a != -1")
(cases 1 "a!=-1"))
(interface
(input 1
(name "A")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 NOTE
(properties
(name "Comment")
(text2 4 "When I find an opponents" "bomb, bump its borderSquares"
"up in priority for flag" "possiblity.")))
(device 12 DECLVAR
(properties
(name "Declare bumpBy")
(scope con)
(globalName "bumpBy"))
(implementation
(value Real
(data  0))))
(device 13 FORMULA
(properties
(name "bumpBy=5")
(expr 1 "bumpBy = 5"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 14 IFTHENELSE
(properties
(name "already in top bumpBy?")
(cases 1 "ndx<bumpBy"))
(interface
(input 1
(name "ndx")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 17 FORMULA
(properties
(name "possib[0:i-bumpBy]")
(expr 1 "PossibleOppFlagPositions[0:i-bumpBy]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 18 FORMULA
(properties
(name "sq")
(expr 1 "sq"))
(interface
(input 1
(name "sq")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 19 VECTORCONCATENATOR
(interface
(input 1
(name "A"))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(output 1
(name "Array")
(tag "Array"))))
(device 20 FORMULA
(properties
(name "possib[i-bumpBy+1:i-1]")
(expr 1 "PossibleOppFlagPositions[i-bumpBy+1:i-1]"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 VECTORCONCATENATOR
(interface
(input 1
(name "A"))
(input 2
(name "B")
(optional yes))
(input 3
(name "C")
(optional yes))
(input 4
(name "D")
(optional yes))
(output 1
(name "Array")
(tag "Array"))))
(device 23 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 24 TOGLOBAL
(properties
(name "Set possib")
(globalName "PossibleOppFlagPositions"))
(interface
(input 1
(name "Data")
(tag "Data"))))
(device 26 BREAK)
(device 28 IFTHENELSE
(properties
(name "already at top?")
(cases 1 "ndx==0"))
(interface
(input 1
(name "ndx")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 29 FORMULA
(properties
(name "swap PossibOppFlagPos[0] with [ndx]")
(expr 1
"tmp = PossibleOppFlagPositions[0], PossibleOppFlagPositions[0] = PossibleOppFlagPositions[ndx], PossibleOppFlagPositions[ndx] = tmp"
))
(interface
(input 1
(name "ndx")
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))
(output 2
(name "tmp")
(optional yes))))
(configuration
(connect D7:1 D1:0)
(connect D0:1 D1:1)
(connect D1:1 D2:1)
(connect D6:1 D2:2)
(connect D11:2 D3:0)
(connect D1:1 D3:1)
(connect D0:1 D3:2)
(connect D3:2 D4:0)
(connect D1:1 D4:1)
(connect D0:1 D4:2)
(connect D10:0 D5:0)
(connect D5:1 D6:1)
(connect I1:1 D6:2)
(connect D6:1 D7:1)
(connect D2:1 D11:0)
(connect D1:1 D11:1)
(connect D11:2 D12:0)
(connect D1:1 D12:1)
(connect D12:0 D13:0)
(connect D6:1 D13:1)
(connect D3:1 D14:0)
(connect D12:1 D14:1)
(connect D13:1 D14:2)
(connect D15:1 D14:3)
(connect D13:0 D15:0)
(connect D1:1 D15:1)
(connect D12:1 D16:1)
(connect D13:1 D16:2)
(connect D15:1 D16:3)
(connect D4:1 D16:4)
(connect D14:1 D17:1)
(connect D16:1 D17:2)
(connect D17:1 D18:1)
(connect D11:0 D19:0)
(connect D11:1 D20:0)
(connect D1:1 D20:1)
(connect D20:2 D21:0)
(connect D1:1 D21:1)))
(contextCarrier
(active detail)
(detail
(extent 986 644)
(anchorPt -9 201)
(configuration
(devCarrierFor 0
(active icon)
(icon
(extent 48 16))
(open
(extent 251 32))
(terminals on)
(pinCenter 10 90))
(devCarrierFor 1
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 100 90))
(devCarrierFor 2
(active icon)
(icon
(extent 96 25))
(open
(extent 268 53))
(terminals on)
(pinCenter 240 100))
(devCarrierFor 4
(active icon)
(icon
(extent 88 34))
(open
(extent 146 62))
(terminals on)
(pinCenter 320 270))
(devCarrierFor 6
(active icon)
(icon
(extent 163 34))
(open
(extent 509 62))
(terminals on)
(pinCenter 510 310))
(devCarrierFor 8
(active icon)
(icon
(extent 68 51)
(iconImage "loop.icn"))
(open
(extent 113 31))
(pinCenter 70 -80))
(devCarrierFor 9
(active icon)
(icon
(extent 163 25))
(open
(extent 175 42))
(terminals on)
(pinCenter 60 0))
(devCarrierFor 10
(active icon)
(icon
(extent 51 25))
(open
(extent 69 51))
(terminals on)
(pinCenter 190 0))
(devCarrierFor 11
(active open)
(icon
(extent 68 0)
(iconImage "notepad.icn"))
(open
(extent 282 108)
(editing enabled))
(titleBg "Dark Yellow")
(pinCenter 420 -60))
(devCarrierFor 12
(active icon)
(icon
(extent 124 15))
(open
(extent 240 103))
(pinCenter 80 260))
(devCarrierFor 13
(active icon)
(icon
(extent 78 15))
(open
(extent 115 31))
(terminals on)
(pinCenter 70 -130))
(devCarrierFor 14
(active icon)
(icon
(extent 178 25))
(open
(extent 109 51))
(terminals on)
(pinCenter 260 140))
(devCarrierFor 17
(active icon)
(icon
(extent 144 25))
(open
(extent 302 42))
(terminals on)
(pinCenter 490 170))
(devCarrierFor 18
(active icon)
(icon
(extent 24 15))
(open
(extent 80 31))
(terminals on)
(pinCenter 490 210))
(devCarrierFor 19
(active icon)
(icon
(extent 108 45))
(open
(extent 64 82))
(terminals on)
(pinCenter 740 200))
(devCarrierFor 20
(active icon)
(icon
(extent 179 25))
(open
(extent 364 42))
(terminals on)
(pinCenter 520 250))
(devCarrierFor 22
(active icon)
(icon
(extent 108 45))
(open
(extent 64 82))
(terminals on)
(pinCenter 740 380))
(devCarrierFor 23
(active icon)
(icon
(extent 28 25))
(open)
(terminals on)
(pinCenter 810 280))
(devCarrierFor 24
(active icon)
(icon
(extent 75 15))
(open
(extent 90 51))
(terminals on)
(pinCenter 890 280))
(devCarrierFor 26
(active icon)
(icon
(extent 45 15))
(open)
(terminals on)
(pinCenter 270 190))
(devCarrierFor 28
(active icon)
(icon
(extent 104 25))
(open
(extent 78 53))
(terminals on)
(pinCenter 500 30))
(devCarrierFor 29
(active icon)
(icon
(extent 258 25))
(open
(extent 896 46))
(terminals on)
(pinCenter 560 80))
(connect D7:1 D1:0
(points 5 218 -10 240 -10 240 40 100 40 100 61))
(connect D0:1 D1:1
(points 2 36 90 62 90))
(connect D1:1 D2:1
(points 2 137 90 189 90))
(connect D6:1 D2:2
(points 6 144 0 150 0 150 50 170 50 170 110 189 110))
(connect D11:2 D3:0
(points 5 351 150 370 150 370 180 320 180 320 250))
(connect D1:1 D3:1
(points 6 137 90 160 90 160 200 260 200 260 260 273 260))
(connect D0:1 D3:2
(points 8 36 90 50 90 50 140 120 140 120 220 240 220 240 280 273 280))
(connect D3:2 D4:0
(points 3 366 280 510 280 510 290))
(connect D1:1 D4:1
(points 18 137 90 180 90 180 70 300 70 300 80 320 80 320 90 380 90 380 170 400
170 400 200 440 200 440 240 420 240 420 250 410 250 410 300 426 300))
(connect D0:1 D4:2
(points 8 36 90 50 90 50 140 120 140 120 220 240 220 240 320 426 320))
(connect D10:0 D5:0
(points 2 70 -120 70 -108))
(connect D5:1 D6:1
(points 6 106 -80 130 -80 130 -30 -30 -30 -30 -10 -24 -10))
(connect I1:1 D6:2
(points 4 9 120 -40 120 -40 10 -24 10))
(connect D6:1 D7:1
(points 2 144 0 162 0))
(connect D2:1 D11:0
(points 5 290 90 300 90 300 120 260 120 260 125))
(connect D1:1 D11:1
(points 4 137 90 160 90 160 140 168 140))
(connect D11:2 D12:0
(points 5 351 150 370 150 370 130 490 130 490 155))
(connect D1:1 D12:1
(points 10 137 90 180 90 180 70 300 70 300 80 320 80 320 90 380 90 380 170 415
170))
(connect D12:0 D13:0
(points 2 490 185 490 200))
(connect D6:1 D13:1
(points 12 144 0 150 0 150 50 170 50 170 120 150 120 150 210 250 210 250 290 390
290 390 210 475 210))
(connect D3:1 D14:0
(points 7 366 260 380 260 380 180 410 180 410 140 740 140 740 175))
(connect D12:1 D14:1
(points 6 564 170 660 170 660 180 670 180 670 190 683 190))
(connect D13:1 D14:2
(points 6 504 210 580 210 580 190 670 190 670 200 683 200))
(connect D15:1 D14:3
(points 4 612 250 640 250 640 210 683 210))
(connect D13:0 D15:0
(points 4 490 220 490 230 520 230 520 235))
(connect D1:1 D15:1
(points 16 137 90 180 90 180 70 300 70 300 80 320 80 320 90 380 90 380 170 400
170 400 200 440 200 440 240 420 240 420 250 428 250))
(connect D12:1 D16:1
(points 4 564 170 660 170 660 360 683 360))
(connect D13:1 D16:2
(points 6 504 210 580 210 580 190 670 190 670 370 683 370))
(connect D15:1 D16:3
(points 4 612 250 630 250 630 380 683 380))
(connect D4:1 D16:4
(points 4 594 310 610 310 610 390 683 390))
(connect D14:1 D17:1
(points 6 796 200 820 200 820 250 780 250 780 270 793 270))
(connect D16:1 D17:2
(points 6 796 380 820 380 820 340 770 340 770 290 793 290))
(connect D17:1 D18:1
(points 2 826 280 850 280))
(connect D11:0 D19:0
(points 4 260 155 260 170 270 170 270 180))
(connect D11:1 D20:0
(points 7 351 130 360 130 360 20 430 20 430 10 500 10 500 15))
(connect D1:1 D20:1
(points 10 137 90 180 90 180 70 300 70 300 80 320 80 320 90 380 90 380 30 445 30))
(connect D20:2 D21:0
(points 3 554 40 560 40 560 65))
(connect D1:1 D21:1
(points 10 137 90 180 90 180 70 300 70 300 80 320 80 320 90 380 90 380 80 428 80)))
(stackingOrder 0 1 13 14 16 17 18 9 7 6 5 10 19 4 3 12 2 11 8 20 21 15))))
(context 61
(properties
(name "UpdateProbabilityTables")
(trigMode deg)
(nextID 34)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(deviceList
(device 9 FORCOUNT
(properties
(count 100))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 10 IFTHENELSE
(properties
(name "opponent piece?")
(cases 1 "piece!=0 AND piece!=-3 AND piece<1000"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 11 FORMULA
(properties
(name "piece #")
(expr 1 "KnownBoard[bi]"))
(interface
(input 1
(name "bi")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 12 IFTHENELSE
(properties
(name "movable, unknown, or known?")
(cases 2 "piece==-2" "piece==-1"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else If")
(lock name constraints))
(output 3
(name "Else")
(lock name constraints))))
(device 14 FORMULA
(properties
(name "num alive ++")
(expr 1
"OpponentPieceTable[TypeOfPiece[p-1]].known_alive = OpponentPieceTable[TypeOfPiece[p-1]].known_alive+1"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 15 FORCOUNT
(properties
(count 12))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 16 FORMULA
(properties
(name "set unknown_alive")
(expr 1
"OpponentPieceTable[p].unknown_alive = OpponentPieceTable[p].initial_headcount-(OpponentPieceTable[p].known_dead+OpponentPieceTable[p].known_alive)"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 21 FORMULA
(properties
(name "reset unknown/known_alive")
(expr 1
"OpponentPieceTable[p].unknown_alive = 0, OpponentPieceTable[p].known_alive = 0"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 22 FORCOUNT
(properties
(count 12))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 25 FORMULA
(properties
(name "NumUnknownFixed++")
(expr 1 "NumUnknownFixed = NumUnknownFixed+1"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 26 FORMULA
(properties
(name "NumUnknownFixed = 0")
(expr 1 "NumUnknownFixed = 0"))
(interface
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 27 DECLVAR
(properties
(name "Declare Variable \'NumUnknownFixed\'")
(scope lib)
(globalName "NumUnknownFixed"))
(implementation
(value Int32
(data  0))))
(device 28 FORMULA
(properties
(name "reset unknown/known_alive")
(expr 1 "MyPieceTable[p].unknown_alive = 0, MyPieceTable[p].known_alive = 0"))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 29 IFTHENELSE
(properties
(name "my piece and known?")
(cases 1 "piece>1000 AND piece<=1040"))
(interface
(input 1
(name "piece")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 30 FORMULA
(properties
(name "num alive ++")
(expr 1
"MyPieceTable[TypeOfPiece[p-1001]].known_alive = MyPieceTable[TypeOfPiece[p-1001]].known_alive+1"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 31 FORMULA
(properties
(name "set unknown_alive")
(expr 1
"MyPieceTable[p].unknown_alive = MyPieceTable[p].initial_headcount-(MyPieceTable[p].known_dead+MyPieceTable[p].known_alive)"
))
(interface
(input 1
(name "p")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(device 33 FORMULA
(properties
(name "piece #")
(expr 1 "OpponentsKnownBoard[bi]"))
(interface
(input 1
(name "bi")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(name "Result")
(tag "Result")
(lock name constraints)
(optional yes))))
(configuration
(connect D8:0 D0:0)
(connect D2:1 D1:1)
(connect D0:1 D2:1)
(connect D1:1 D3:0)
(connect D2:1 D3:1)
(connect D3:3 D4:0)
(connect D2:1 D4:1)
(connect D0:0 D5:0)
(connect D5:1 D6:1)
(connect D8:1 D7:1)
(connect D10:0 D8:0)
(connect D3:2 D9:0)
(connect D8:1 D12:1)
(connect D16:1 D13:1)
(connect D13:1 D14:0)
(connect D16:1 D14:1)
(connect D5:1 D15:1)
(connect D0:1 D16:1)))
(contextCarrier
(active detail)
(detail
(extent 889 570)
(anchorPt 27 181)
(configuration
(devCarrierFor 9
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 130 90))
(devCarrierFor 10
(active icon)
(icon
(extent 116 25))
(open
(extent 321 53))
(terminals on)
(pinCenter 340 90))
(devCarrierFor 11
(active icon)
(icon
(extent 50 16))
(open
(extent 133 32))
(terminals on)
(pinCenter 220 90))
(devCarrierFor 12
(active icon)
(icon
(extent 209 34))
(open
(extent 136 62))
(terminals on)
(pinCenter 550 130))
(devCarrierFor 14
(active icon)
(icon
(extent 88 16))
(open
(extent 740 32))
(terminals on)
(pinCenter 740 170))
(devCarrierFor 15
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 130 240))
(devCarrierFor 16
(active icon)
(icon
(extent 127 16))
(open
(extent 1046 32))
(terminals on)
(pinCenter 280 270))
(devCarrierFor 21
(active icon)
(icon
(extent 190 16))
(open
(extent 568 32))
(terminals on)
(pinCenter 400 -40))
(devCarrierFor 22
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 130 -40))
(devCarrierFor 25
(active icon)
(icon
(extent 148 16))
(open
(extent 304 32))
(terminals on)
(pinCenter 760 120))
(devCarrierFor 26
(active icon)
(icon
(extent 157 16))
(open
(extent 177 32))
(terminals on)
(pinCenter 130 -110))
(devCarrierFor 27
(active icon)
(icon
(extent 257 16))
(open
(extent 293 107))
(pinCenter 130 -150))
(devCarrierFor 28
(active icon)
(icon
(extent 190 16))
(open
(extent 568 32))
(terminals on)
(pinCenter 400 0))
(devCarrierFor 29
(active icon)
(icon
(extent 149 25))
(open
(extent 224 53))
(terminals on)
(pinCenter 350 170))
(devCarrierFor 30
(active icon)
(icon
(extent 88 16))
(open
(extent 740 32))
(terminals on)
(pinCenter 470 200))
(devCarrierFor 31
(active icon)
(icon
(extent 127 16))
(open
(extent 1046 32))
(terminals on)
(pinCenter 280 310))
(devCarrierFor 33
(active icon)
(icon
(extent 50 16))
(open
(extent 203 32))
(terminals on)
(pinCenter 210 170))
(connect D8:0 D0:0
(points 2 130 -12 130 61))
(connect D2:1 D1:1
(points 2 247 90 279 90))
(connect D0:1 D2:1
(points 2 167 90 192 90))
(connect D1:1 D3:0
(points 3 400 80 550 80 550 110))
(connect D2:1 D3:1
(points 4 247 90 260 90 260 130 443 130))
(connect D3:3 D4:0
(points 3 657 140 740 140 740 159))
(connect D2:1 D4:1
(points 8 247 90 260 90 260 130 420 130 420 150 440 150 440 170 693 170))
(connect D0:0 D5:0
(points 2 130 118 130 211))
(connect D5:1 D6:1
(points 4 167 240 190 240 190 270 214 270))
(connect D8:1 D7:1
(points 2 167 -40 302 -40))
(connect D10:0 D8:0
(points 2 130 -100 130 -69))
(connect D3:2 D9:0
(points 5 657 130 670 130 670 90 760 90 760 109))
(connect D8:1 D12:1
(points 4 167 -40 270 -40 270 0 302 0))
(connect D16:1 D13:1
(points 2 237 170 273 170))
(connect D13:1 D14:0
(points 3 427 160 470 160 470 189))
(connect D16:1 D14:1
(points 6 237 170 250 170 250 210 400 210 400 200 423 200))
(connect D5:1 D15:1
(points 4 167 240 190 240 190 310 214 310))
(connect D0:1 D16:1
(points 6 167 90 180 90 180 140 160 140 160 170 182 170)))
(stackingOrder 8 7 11 0 1 5 12 6 15 2 3 9 4 16 14 13 10))))
(context 142
(properties
(name "WasABomb")
(trigMode deg)
(nextID 8)
(popupTitleText "UserFunction1")
(popupMoveable 1))
(interface
(input 1
(name "location")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(output 1
(type data)
(name "YesOrNo")
(lock constraints)
(optional yes)))
(deviceList
(device 1 IFTHENELSE
(properties
(name "opponent bomb?")
(cases 1 "OpponentBombLocations[i]==location"))
(interface
(input 1
(name "i")
(requires
(datatype Int32)
(shape "Scalar"))
(optional yes))
(input 2
(name "location")
(optional yes))
(output 1
(name "Then")
(lock name constraints))
(output 2
(name "Else")
(lock name constraints))))
(device 2 FORCOUNT
(properties
(count 6))
(interface
(output 1
(name "Count")
(lock name constraints))))
(device 3 CONSTANT
(properties
(name "YES"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  1))
(initValue Int32
(data  0))))
(device 4 CONSTANT
(properties
(name "NO"))
(interface
(output 1
(name "Int32")
(lock name constraints)))
(implementation
(value Int32
(data  0))
(initValue Int32
(data  0))))
(device 5 JUNCTION
(properties
(name "JCT"))
(interface
(input 1
(name "A"))
(input 2
(name "B"))
(output 1
(name "Data"))))
(device 6 EXITCONTEXT)
(device 7 GATE
(interface
(input 1
(name "A")
(tag "InData"))
(output 1
(name "X"))))
(configuration
(connect D1:1 D0:1)
(connect I1:1 D0:2)
(connect D0:1 D2:0)
(connect D1:0 D3:0)
(connect D2:1 D4:1)
(connect D3:1 D4:2)
(connect D6:0 D5:0)
(connect D4:1 D6:1)
(connect D6:1 O1:1)))
(contextCarrier
(active detail)
(detail
(extent 758 256)
(anchorPt 0 -3)
(configuration
(devCarrierFor 1
(active icon)
(icon
(extent 117 25))
(open
(extent 338 65))
(terminals on)
(pinCenter 310 100))
(devCarrierFor 2
(active icon)
(icon
(extent 70 52)
(iconImage "loop.icn"))
(open
(extent 106 32))
(pinCenter 120 100))
(devCarrierFor 3
(active icon)
(icon
(extent 31 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 440 120))
(devCarrierFor 4
(active icon)
(icon
(extent 24 16))
(open
(extent 84 30)
(showFormat int))
(pinCenter 120 200))
(devCarrierFor 5
(active icon)
(icon
(extent 29 25))
(open)
(terminals on)
(pinCenter 530 140))
(devCarrierFor 6
(active icon)
(icon
(extent 105 16))
(open)
(terminals on)
(pinCenter 610 190))
(devCarrierFor 7
(active icon)
(icon
(extent 35 16))
(open)
(terminals on)
(pinCenter 610 140))
(connect D1:1 D0:1
(points 4 157 100 190 100 190 90 249 90))
(connect I1:1 D0:2
(points 6 0 130 10 130 10 50 180 50 180 110 249 110))
(connect D0:1 D2:0
(points 3 371 90 440 90 440 109))
(connect D1:0 D3:0
(points 2 120 128 120 189))
(connect D2:1 D4:1
(points 4 458 120 480 120 480 130 513 130))
(connect D3:1 D4:2
(points 4 134 200 150 200 150 150 513 150))
(connect D6:0 D5:0
(points 2 610 150 610 179))
(connect D4:1 D6:1
(points 2 547 140 590 140))
(connect D6:1 O1:1
(points 4 630 140 690 140 690 130 757 130)))
(stackingOrder 1 3 2 4 5 6 0)))))
(configuration))
(contextCarrier
(active detail)
(detail
(extent 720 363)
(anchorPt 0 0)
(configuration))
(numberFormats
(realFormat standard)
(realSigDigits 4)
(realRadixSpec 4)
(integerBase decimal))))
